zabbix_export:
  version: '5.4'
  date: '2021-11-09T08:33:19Z'
  groups:
    -
      uuid: 7df96b18c230490a9a0a9e2307226338
      name: Templates
  templates:
    -
      uuid: ec6c6664a91a4f99bb06853265839494
      template: SNMP-HP-iLO5
      name: SNMP-HP-iLO5
      description: |
        ## Description
        
        Created by Lucas Afonso Kremer <lucasafonsokremer@gmail.com> https://www.linkedin.com/in/lucasafonsokremer
        
        ## Overview
        
        **Template for HP servers with iLO 5 controller.**
        
        
         
        
        
        * #### Tested on ProLiant DL360 Gen10 with firmware version = 1.40 Feb 05 2019
        * #### You must add one macro on the server or on the template with the name:
        
        
        {$SNMP\_COMMUNITY} with the community to be used
        
        
        * #### All the items was created with "SNMPv2 agent"
        * #### Make sure your iLO is reachable from the zabbix server/proxy, test with:
        
        
        snmpstatus -v 2c -c public 192.168.0.1
        
        
         
        
        
        Based on @Wisenetman iLO 4 template
        
        
        
        ## Author
        
        Lucas Afonso Kremer
        
        
      groups:
        -
          name: Templates
      items:
        -
          uuid: 052d3b057d0a4efd95cdb4c57d78874a
          name: 'ASR Condition'
          type: SNMP_AGENT
          snmp_oid: .1.3.6.1.4.1.232.6.2.5.17.0
          key: cpqHeAsrCondition
          delay: '300'
          history: 7d
          description: |
            "This value specifies the overall condition of the ASR feature."
            
                        other(1),
                        ok(2),
                        degraded(3),
                        failed(4)
          valuemap:
            name: cpqCondition
          tags:
            -
              tag: Application
              value: Health
          triggers:
            -
              uuid: e0df093cdb7c407bb9dd72a6f4593830
              expression: last(/SNMP-HP-iLO5/cpqHeAsrCondition)>2
              name: '{HOSTNAME}: Server was restarted by ASR'
              priority: HIGH
              description: |
                HP Automatic Server Recovery (ASR) is reporting a "degraded" or "failed" state.  ASR is a watchdog timer which automatically restarts a server if the server hangs or crashes.
                
                When a server is restarted by ASR, a flag is set, and an alert is triggered until the flag is reset.
              manual_close: 'YES'
        -
          uuid: 20c24a6dd084481791d7b0cf20c831dd
          name: 'Event Log Condition'
          type: SNMP_AGENT
          snmp_oid: .1.3.6.1.4.1.232.6.2.11.2.0
          key: cpqHeEventLogCondition
          delay: '600'
          history: 7d
          trends: 30d
          description: |
            "This value specifies the overall condition of the Integrated  management Log feature."
            
                        other(1),
                        ok(2),
                        degraded(3),
                        failed(4)
          valuemap:
            name: cpqCondition
          tags:
            -
              tag: Application
              value: Health
        -
          uuid: 7624d6c47ad249e6aab37d868fc61217
          name: 'Fault Tolerant Power Supply Condition'
          type: SNMP_AGENT
          snmp_oid: .1.3.6.1.4.1.232.6.2.9.1.0
          key: cpqHeFltTolPwrSupplyCondition
          delay: '300'
          history: 7d
          trends: 30d
          description: |
            "This value specifies the overall condition of the fault tolerant power supply sub-system."
            
                        other(1),
                        ok(2),
                        degraded(3),
                        failed(4)
          valuemap:
            name: cpqCondition
          tags:
            -
              tag: Application
              value: Health
        -
          uuid: 71732cac3e2e4b8e8e93a568afe35ba8
          name: 'Overall Status'
          type: SNMP_AGENT
          snmp_oid: 1.3.6.1.4.1.232.6.1.3.0
          key: cpqHeMibCondition
          delay: '600'
          history: 7d
          trends: 30d
          description: |
            "This value specifies the overall condition of the Integrated management Log feature."
                        other(1),
                        ok(2),
                        degraded(3),
                        failed(4)
          valuemap:
            name: cpqCondition
          tags:
            -
              tag: Application
              value: Health
          triggers:
            -
              uuid: 816f4563bf324ed6be7d78e544419dd3
              expression: 'nodata(/SNMP-HP-iLO5/cpqHeMibCondition,600s)=1'
              name: '{HOSTNAME}: SNMP Agents are not responding'
              priority: WARNING
              description: 'The HP SNMP Agents for this host have not responded to SNMP queries for more than 10 minutes.  If the host is otherwise operating properly, it can mean that the HP SNMP agents are not working properl, or that the SNMP service has stopped.  A less likely cause is a network issue - SNMP uses UDP port 161,'
              manual_close: 'YES'
        -
          uuid: 577df788d9ab48a78ca91653011e565b
          name: 'Resilient Memory Condition'
          type: SNMP_AGENT
          snmp_oid: .1.3.6.1.4.1.232.6.2.14.4.0
          key: cpqHeResilientMemCondition
          delay: '300'
          history: 7d
          description: |
            Overall status of memory system.  If we monitor the individual modules via discovery rule "Memory Modules", then this item is redundant and we don't need to alert on it.
            
                        other(1),
                        ok(2),
                        degraded(3)
                        }
                        The following states are supported:
            
                        other(1)
                          The system does not support fault tolerant memory or the
                          state cannot be determined by the Management Agent.
            
                        ok(2)
                          This system is operating normally.
            
                        degraded(3)
                          The system is running in a degraded state because the
                          Advanced Memory Protection subsystem has been engaged."
          valuemap:
            name: cpqCondition
          tags:
            -
              tag: Application
              value: Health
          triggers:
            -
              uuid: 7a36d11cabd04d7189f7600e6bce31d1
              expression: last(/SNMP-HP-iLO5/cpqHeResilientMemCondition)=3
              name: '{HOSTNAME}: iLO Resilient Memory condition is degraded'
              priority: AVERAGE
              description: 'The Advanced Memory Protection, probably because of correctable memory errors.  The DIMM which had the errors should be replaced.'
              manual_close: 'YES'
            -
              uuid: 959f17193f1a444f8bae653aefde170a
              expression: last(/SNMP-HP-iLO5/cpqHeResilientMemCondition)=1
              name: '{HOSTNAME}: Resilient Memory condition is unknown'
              priority: WARNING
              description: |
                The condition of the resilient memory system cannot be determined (condition reported is "other").  Try, in this order:
                1) resetting the iLO from the iLO screen 
                2) restarting the HP SNMP agents:
                /sbin/service hp-snmp-agents restart
                3) restarting snmpd:
                /sbin/service snmpd restart
              manual_close: 'YES'
        -
          uuid: d061f82ddf85463eae825f093474eb28
          name: 'Thermal Condition'
          type: SNMP_AGENT
          snmp_oid: .1.3.6.1.4.1.232.6.2.6.1.0
          key: cpqHeThermalCondition
          delay: '300'
          history: 7d
          trends: 30d
          description: |
            This item is a combined status of all temperature and fan items present.  By monitoring this item, it's not necessary to monitor each individual fan and temperature item.
            
                        other(1),
                        ok(2),
                        degraded(3),
                        failed(4)
            }
          valuemap:
            name: cpqCondition
          tags:
            -
              tag: Application
              value: Health
          triggers:
            -
              uuid: 6c72623788144e95be3bab536b976e99
              expression: last(/SNMP-HP-iLO5/cpqHeThermalCondition)>2
              name: '{HOSTNAME}: Thermal Condition is Degraded'
              priority: HIGH
              description: |
                Something is wrong with this server's cooling system.  Either a non-required fan is not operating properly, or a temp sensor is outside of normal operating range.
                The server will automatically shutdown if a required fan is not operating properly, or if a temp sensor detects a condition that could permanently damage the system.
              manual_close: 'YES'
        -
          uuid: 9df56db46ed2439a961c770e628b548d
          name: 'Product Name'
          type: SNMP_AGENT
          snmp_oid: 1.3.6.1.4.1.232.2.2.4.2.0
          key: cpqSiProductName
          delay: '28800'
          history: 1d
          trends: '0'
          value_type: TEXT
          description: 'The machine product name.'
          tags:
            -
              tag: Application
              value: 'System Info'
        -
          uuid: 33fd732c736b44ea8e6f41b0a5579f48
          name: 'System Product ID'
          type: SNMP_AGENT
          snmp_oid: .1.3.6.1.4.1.232.2.2.2.6.0
          key: cpqSiSysProductId
          delay: '28800'
          history: 1d
          trends: '0'
          value_type: TEXT
          description: |
            "The product id string of the system unit.
            The string will be empty if the system does not report the product id."
          tags:
            -
              tag: Application
              value: 'System Info'
        -
          uuid: a0f8d132daaa4eb6ba3883334ee71b5b
          name: 'Serial Number'
          type: SNMP_AGENT
          snmp_oid: .1.3.6.1.4.1.232.2.2.2.1.0
          key: cpqSiSysSerialNum
          delay: '28800'
          history: 1d
          trends: '0'
          value_type: TEXT
          description: |
            "The serial number of the physical system unit.
            The string will be empty if the system does not report the
            serial number function."
          tags:
            -
              tag: Application
              value: 'System Info'
      discovery_rules:
        -
          uuid: e0a917dfd4d2444cbac4da8b00393496
          name: 'Drive Array Accelerators'
          type: SNMP_AGENT
          snmp_oid: 'discovery[{#SNMPVALUE},.1.3.6.1.4.1.232.3.2.2.2.1.1]'
          key: 'snmp.discovery[DaAccelerators]'
          delay: '3600'
          lifetime: '0'
          description: |
            Walk the cpqDaCntlrHwLocation table to get contoller locations:
            
            CPQIDA-MIB::
                 cpqDaAccelCntlrIndex OBJECT-TYPE
                    SYNTAX  INTEGER
                    ACCESS  read-only
                    STATUS  mandatory
                    DESCRIPTION
                        "Array Accelerator Board Controller Index.
            
                        This value is a logical number whose meaning is OS dependent.
                        The value has a direct mapping to the controller table index
                        such that controller 'i' has accelerator table entry 'i'."
                    ::= { cpqDaAccelEntry 1 }
          item_prototypes:
            -
              uuid: bb2fc3e2970b4c39aa9663144ba7d39a
              name: 'HP Drive Array Accelerator Backup Power Source {#SNMPINDEX}'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.4.1.232.3.2.2.2.1.16.{#SNMPINDEX}'
              key: 'cpqDaAccelBackupPowerSource[{#SNMPINDEX}]'
              delay: '28800'
              history: 1d
              trends: 1d
              description: |
                CPQIDA-MIB::
                      cpqDaAccelBackupPowerSource OBJECT-TYPE
                        SYNTAX  INTEGER
                        {
                            other(1),
                            battery(2),
                            capacitor(3)
                        }
                        ACCESS  read-only
                        STATUS  mandatory
                        DESCRIPTION
                            "Array Accelerator Board Backup Power Source.
                
                            This describes the backup power source being used by the Array
                            Accelerator board.
                
                            The status can be:
                
                            Other (1)
                              Indicates that the instrument agent does not recognize the backup
                              power source used by the Array Accelerator board.  You may need 
                              to upgrade the instrument agent.
                
                            Battery (2)
                              Indicates that a battery is the backup power source for the Array
                              Accelerator board. 
                             
                            Capacitor (3)
                              Indicates that a capacitor is the backup power source for the 
                              Array Accelerator board."
                        ::= { cpqDaAccelEntry 16 }
              valuemap:
                name: cpqDaAccelBackupPowerSource
              tags:
                -
                  tag: Application
                  value: 'Drive Array'
            -
              uuid: b6d13f8a9fc047fcab9f7349536a7f3f
              name: 'HP Drive Array Accelerator Battery Status {#SNMPINDEX}'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.4.1.232.3.2.2.2.1.6.{#SNMPINDEX}'
              key: 'cpqDaAccelBattery[{#SNMPINDEX}]'
              delay: '600'
              history: 7d
              trends: 90d
              description: |
                CPQIDA-MIB::
                     cpqDaAccelBattery OBJECT-TYPE
                        SYNTAX  INTEGER
                        {
                            other(1),
                            ok(2),
                            recharging(3),
                            failed(4),
                            degraded(5),
                            notPresent(6),
                            capacitorFailed(7)
                        }
                        ACCESS  read-only
                        STATUS  mandatory
                        DESCRIPTION
                            "Array Accelerator Board Backup Power Status.
                
                            This monitors the status of each backup power source on the board.  
                            The backup power source can only recharge when the system has 
                            power applied. The type of backup power source used is indicated 
                            by cpqDaAccelBackupPowerSource.
                
                            The following values are valid:
                
                            Other (1)
                              Indicates that the instrument agent does not recognize
                              battery status.  You may need to update your software.
                
                            Ok (2)
                              Indicates that a particular battery pack is fully charged.
                
                            Charging (3)
                              The battery power is less than 75%.  The Drive Array
                              Controller is attempting to recharge the battery.  A
                              battery can take as long as 36 hours to fully recharge.
                              After 36 hours, if the battery has not recharged, it is
                              considered failed.
                
                            Failed (4)
                              The battery pack is below the sufficient voltage level and
                              has not recharged in 36 hours.  Your Array Accelerator board
                              needs to be serviced.
                
                            Degraded (5)
                              The battery is still operating, however, one of the batteries
                              in the pack has failed to recharge properly.  Your Array
                              Accelerator board should be serviced as soon as possible.
                
                            NotPresent (6)
                              There are no batteries associated with this controller.
                              
                            Capacitor Failed (7)
                              The capacitor is below the sufficient voltage level and
                              has not recharged in 10 minutes.  Your Array Accelerator board
                              needs to be serviced."
                        ::= { cpqDaAccelEntry 6 }
              valuemap:
                name: cpqDaAccelBatteryStatus
              tags:
                -
                  tag: Application
                  value: 'Drive Array'
              trigger_prototypes:
                -
                  uuid: 88d0154d02a340cbb2edbe4b5a58cd2c
                  expression: 'max(/SNMP-HP-iLO5/cpqDaAccelBattery[{#SNMPINDEX}],86400s)=4'
                  name: '{HOST.NAME}: Drive Array Accelerator {#SNMPINDEX} battery has failed'
                  priority: WARNING
                  description: |
                    The battery provides backup power for the cache memory, to prevent data loss in the event of a power failure.  This battery has failed, so the Drive Array Controller will disable that cache, and disk performance will be bad until the battery is replaced.  The battery needs to be replaced.  Suggested actions are to write a ticket to replace the battery, then acknowledge the alert, writing the ticket number in the notes.  This will prevent a stream of continuing alerts.
                    
                    When the battery is on the edge of failing, it can move in and out of the failed state. This can have the effect of restarting an alert which has already been acknowledged.  To prevent this, this trigger is held until there has been no failure reported in the last 24 hours.
                    
                    HP System Management Homepage (may require starting service hpsmhd):
                    https://{HOST.CONN}:2381
            -
              uuid: e141e952ecd94dd08e99b7d71cf544b6
              name: 'HP Drive Array Accelerator Condition {#SNMPINDEX}'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.4.1.232.3.2.2.2.1.9.{#SNMPINDEX}'
              key: 'cpqDaAccelCondition[{#SNMPINDEX}]'
              delay: '600'
              history: 7d
              trends: 90d
              description: |
                CPQIDA-MIB::
                     cpqDaAccelCondition OBJECT-TYPE
                        SYNTAX  INTEGER
                        {
                            other(1),
                            ok(2),
                            degraded(3),
                            failed(4)
                        }
                        ACCESS  read-only
                        STATUS  mandatory
                        DESCRIPTION
                            "The condition of the device.  This value represents the overall
                            condition of this array accelerator."
                        ::= { cpqDaAccelEntry 9 }
              valuemap:
                name: cpqCondition
              tags:
                -
                  tag: Application
                  value: 'Drive Array'
            -
              uuid: 2e7f5f74ea484b6a889a27bd9c6cab54
              name: 'HP Drive Array Accelerator Status {#SNMPINDEX}'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.4.1.232.3.2.2.2.1.2.{#SNMPINDEX}'
              key: 'cpqDaAccelStatus[{#SNMPINDEX}]'
              delay: '600'
              history: 7d
              trends: 90d
              description: |
                CPQIDA-MIB::
                     cpqDaAccelStatus OBJECT-TYPE
                        SYNTAX  INTEGER
                        {
                            other(1),
                            invalid(2),
                            enabled(3),
                            tmpDisabled(4),
                            permDisabled(5)
                        }
                        ACCESS  read-only
                        STATUS  mandatory
                        DESCRIPTION
                            "Array Accelerator Board Status.
                
                            This describes the status of the accelerator write cache.
                
                            The status can be:
                
                            Other (1)
                              Indicates that the instrument agent does not recognize the
                              status of the Array Accelerator.  You may need to upgrade
                              the instrument agent.
                
                            Invalid (2)
                              Indicates that an Array Accelerator board has not been
                              installed in this system or is present but not configured.
                
                            Enabled (3)
                              Indicates that write cache operations are currently configured
                              and enabled for at least one logical drive.
                
                            Temporarily Disabled (4)
                              Indicates that write cache operations have been temporarily
                              disabled. View the Array Accelerator Board Error Code object
                              to determine why the write cache operations have been
                              temporarily disabled.
                
                            Permanently Disabled (5)
                              Indicates that write cache operations have been permanently
                              disabled.  View the Array Accelerator Board Error Code object
                              to determine why the write cache operations have been disabled."
                        ::= { cpqDaAccelEntry 2 }
              valuemap:
                name: cpqDaAccelStatus
              tags:
                -
                  tag: Application
                  value: 'Drive Array'
              trigger_prototypes:
                -
                  uuid: cb0a3edaa862475789e95b7236a4b2f7
                  expression: 'last(/SNMP-HP-iLO5/cpqDaAccelStatus[{#SNMPINDEX}])=2'
                  name: '{HOST.NAME}: Drive Array Accelerator {#SNMPINDEX} is missing or not configured'
                  priority: WARNING
                  description: |
                    The Drive Array Accelerator is the cache memory board for the Drive Array Controller; if it is missing, disk performance will be bad.  A Drive Array Accelerator (cache memory board) should be ordered and installed.
                    
                    Suggested actions are to write a ticket to order and install the HP Drive Array Accelerator (cache memory board).  Then acknowledge the alert, writing the ticket number in the notes.
                    
                    HP System Management Homepage (may require starting service hpsmhd):
                    https://{HOST.CONN}:2381
            -
              uuid: 9ee88e19ba744f86b5c63f3c4be378a1
              name: 'HP Drive Array Accelerator Write Cache % {#SNMPINDEX}'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.4.1.232.3.2.2.2.1.14.{#SNMPINDEX}'
              key: 'cpqDaAccelWriteCachePercent[{#SNMPINDEX}]'
              delay: '28800'
              history: 1d
              trends: 1d
              units: '%'
              description: |
                CPQIDA-MIB::
                     cpqDaAccelWriteCachePercent OBJECT-TYPE
                        SYNTAX  Gauge
                        ACCESS  read-only
                        STATUS  mandatory
                        DESCRIPTION
                            "Write Cache Percent.
                
                            This shows the percent of cache memory allocated for posted
                            write caching.  If the data cannot be determined or is not
                            applicable, the value is set to 4,294,967,295."
                        ::= { cpqDaAccelEntry 14 }
              tags:
                -
                  tag: Application
                  value: 'Drive Array'
        -
          uuid: 7c1c6d66f9ac49c980a59ee0d96cb195
          name: 'Drive Array Controller Performance Monitors'
          type: SNMP_AGENT
          snmp_oid: 'discovery[{#SNMPVALUE},.1.3.6.1.4.1.232.3.2.7.1.1.1]'
          key: 'snmp.discovery[DaControllerPerf]'
          delay: '28800'
          lifetime: '0'
          description: |
            Walk the cpqDaCntlrPerfCntlrIndex table to find contoller performance monitor instances:
            
            CPQIDA-MIB::
                 cpqDaCntlrPerfCntlrIndex OBJECT-TYPE
                    SYNTAX  INTEGER
                    ACCESS  read-only
                    STATUS  mandatory
                    DESCRIPTION
                        "Drive Array Controller Performance Monitor Controller Index.
            
                        This maps the performance monitor information into their
                        respective controllers which support performance data."
                    ::= { cpqDaCntlrPerfEntry 1 }
          item_prototypes:
            -
              uuid: 3937cd47adef44dea2ce3b0ad4ab0ff6
              name: 'HP Drive Array Controller Latency {#SNMPINDEX}'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.4.1.232.3.2.7.1.1.7.{#SNMPINDEX}'
              key: 'cpqDaCntlrPerfAvgLatency[{#SNMPINDEX}]'
              delay: '3600'
              value_type: FLOAT
              units: ms
              description: |
                CPQIDA-MIB::
                     cpqDaCntlrPerfAvgLatency OBJECT-TYPE
                        SYNTAX  INTEGER
                        ACCESS  read-only
                        STATUS  mandatory
                        DESCRIPTION
                            "Array Controller Performance Monitor Average
                            Command Latency.
                
                            This value shows the average command latency for this sample
                            in 1/100,000 second units."
                        ::= { cpqDaCntlrPerfEntry 7 }
              preprocessing:
                -
                  type: MULTIPLIER
                  parameters:
                    - '.01'
              tags:
                -
                  tag: Application
                  value: 'Drive Array'
        -
          uuid: dd4dd2f63aac47bd811862cc879479c7
          name: 'Drive Array Controllers'
          type: SNMP_AGENT
          snmp_oid: 'discovery[{#SNMPVALUE},.1.3.6.1.4.1.232.3.2.2.1.1.20]'
          key: 'snmp.discovery[DaControllers]'
          delay: '3600'
          lifetime: '0'
          description: |
            Walk the cpqDaCntlrHwLocation table to get contoller locations:
            
            CPQIDA-MIB::
                 cpqDaCntlrHwLocation OBJECT-TYPE
                    SYNTAX  DisplayString (SIZE (0..255))
                    ACCESS  read-only
                    STATUS  mandatory
                    DESCRIPTION
                        "A text description of the hardware location of the controller.
                         A NULL string indicates that the hardware location could not
                         be determined or is irrelevant."
                    ::= { cpqDaCntlrEntry 20  }
          item_prototypes:
            -
              uuid: 15b00304960d4a919af9ae8c7b607583
              name: 'HP Drive Array Controller Board Condition {#SNMPINDEX}'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.4.1.232.3.2.2.1.1.12.{#SNMPINDEX}'
              key: 'cpqDaCntlrBoardCondition[{#SNMPINDEX}]'
              delay: '600'
              history: 7d
              trends: 30d
              description: |
                CPQIDA-MIB::     
                     cpqDaCntlrBoardCondition OBJECT-TYPE
                        SYNTAX  INTEGER
                        {
                            other(1),
                            ok(2),
                            degraded(3),
                            failed(4)
                        }
                        ACCESS  read-only
                        STATUS  mandatory
                        DESCRIPTION
                            "The condition of the device.  This value represents the
                            condition of the controller and any associated array
                            accelerators."
                        ::= { cpqDaCntlrEntry 12 }
              valuemap:
                name: cpqCondition
              tags:
                -
                  tag: Application
                  value: 'Drive Array'
              trigger_prototypes:
                -
                  uuid: 0cdffe8a49a74a43bb511a36745f1d25
                  expression: 'last(/SNMP-HP-iLO5/cpqDaCntlrBoardCondition[{#SNMPINDEX}])>2'
                  name: '{HOST.NAME}: HP Drive Array Controller Board {#SNMPINDEX} is degraded or failed'
                  priority: AVERAGE
                  description: |
                    This HP Drive Array Controller Controller Board is reporting a degraded or failed condition.  Check the iLO or preferably the HP System Management Homepage for more information.  This may require first starting the Array Configuration Utility from the command line ("/opt/compaq/cpqacuxe/bld/cpqacuxe -R")
                    
                    HP System Management Homepage (may require starting service hpsmhd):
                    https://{HOST.CONN}:2381
            -
              uuid: 4fe004a01aa64bfa875331e14109ef12
              name: 'HP Drive Array Controller Condition {#SNMPINDEX}'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.4.1.232.3.2.2.1.1.6.{#SNMPINDEX}'
              key: 'cpqDaCntlrCondition[{#SNMPINDEX}]'
              delay: '600'
              history: 7d
              trends: 30d
              description: |
                CPQIDA-MIB::     
                     cpqDaCntlrCondition OBJECT-TYPE
                        SYNTAX  INTEGER
                        {
                            other(1),
                            ok(2),
                            degraded(3),
                            failed(4)
                        }
                        ACCESS  read-only
                        STATUS  mandatory
                        DESCRIPTION
                            "The condition of the device.  This value represents the overall
                            condition of this controller, and any associated logical drives,
                            physical drives, and array accelerators."
                        ::= { cpqDaCntlrEntry 6 }
              valuemap:
                name: cpqCondition
              tags:
                -
                  tag: Application
                  value: 'Drive Array'
            -
              uuid: 01ded739d474461f9c1455a245e52f07
              name: 'HP Drive Array Controller Drive Write Cache State {#SNMPINDEX}'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.4.1.232.3.2.2.1.1.27.{#SNMPINDEX}'
              key: 'cpqDaCntlrDriveWriteCacheState[{#SNMPINDEX}]'
              delay: '28800'
              history: 1d
              trends: 1d
              description: |
                CPQIDA-MIB::     
                     cpqDaCntlrDriveWriteCacheState OBJECT-TYPE
                        SYNTAX  INTEGER
                        {
                            other(1),
                            disabled(2),
                            enabled(3)
                        }
                        ACCESS  read-only
                        STATUS  mandatory
                        DESCRIPTION
                            "Array Controller Drive Write Cache State.
                
                            This is the controller's drive write cache setting.  The
                            following values are valid:
                
                            other (1)
                              Indicates that the instrument agent does not recognize the
                              value.  You may need to upgrade the instrument agent.
                
                            disabled (2)
                              The controller will disable drive write cache for all drives.
                
                            enabled (3)
                              The controller will enable drive write cache for all drives."
                        ::= { cpqDaCntlrEntry 27 }
              valuemap:
                name: cpqDaCntlrDriveWriteCacheState
              tags:
                -
                  tag: Application
                  value: 'Drive Array'
            -
              uuid: e9b73d2fa2994240ae2e0b2fb542d6ac
              name: 'HP Drive Array Controller Firmware Revision {#SNMPINDEX}'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.4.1.232.3.2.2.1.1.3.{#SNMPINDEX}'
              key: 'cpqDaCntlrFWRev[{#SNMPINDEX}]'
              delay: '28800'
              history: 1d
              trends: '0'
              value_type: TEXT
              description: |
                CPQIDA-MIB::     
                     cpqDaCntlrFWRev OBJECT-TYPE
                        SYNTAX  DisplayString (SIZE (0..5))
                        ACCESS  read-only
                        STATUS  mandatory
                        DESCRIPTION
                            "Array Controller Firmware Revision.
                
                            The firmware revision of the drive array controller. This
                            value can be used to help identify a particular revision
                            of the controller."
                        ::= { cpqDaCntlrEntry 3 }
              tags:
                -
                  tag: Application
                  value: 'Drive Array'
        -
          uuid: a7a0386c8e1b48af9771eaa35aae773b
          name: Firmware
          type: SNMP_AGENT
          snmp_oid: 'discovery[{#SNMPVALUE},.1.3.6.1.4.1.232.11.2.14.1.1.4]'
          key: 'snmp.discovery[firmware]'
          delay: '28800'
          filter:
            conditions:
              -
                macro: '{#SNMPVALUE}'
                value: (Lights.Out|iLO|System.ROM)
                formulaid: A
          lifetime: '0'
          description: |
            Walk the cpqHoFwVerDisplayName table, filter for "Lights Out", "iLO" and "System ROM"
            
            CPQHLTH-MIB::
                cpqHoFwVerDisplayName OBJECT-TYPE
                    SYNTAX  DisplayString (SIZE (0..127))
                    ACCESS  read-only
                    STATUS  mandatory
                    DESCRIPTION
                        "Firmware Version Device Display Name.
            
                        This is the display name of the device containing the firmware."
                    ::= { cpqHoFwVerEntry 4 }
          item_prototypes:
            -
              uuid: fa3470c69e384ad687b2873412ea8e3a
              name: 'HP Firmware Version {#SNMPINDEX} - {#SNMPVALUE}'
              type: SNMP_AGENT
              snmp_oid: '.1.3.6.1.4.1.232.11.2.14.1.1.5.{#SNMPINDEX}'
              key: 'cpqHoFwVerVersion[{#SNMPINDEX}]'
              delay: '28800'
              history: 7d
              trends: '0'
              value_type: CHAR
              description: |
                CPQHOST-MIB::
                    cpqHoFwVerVersion OBJECT-TYPE
                        SYNTAX  DisplayString (SIZE (0..31))
                        ACCESS read-only
                        STATUS mandatory
                        DESCRIPTION
                            "Firmware Version.
                
                            This is the version of the device firmware."
                        ::= { cpqHoFwVerEntry 5 }
              tags:
                -
                  tag: Application
                  value: 'System Info'
        -
          uuid: 384020b1f74c4ccb9ca64e4845129860
          name: 'Logical Drives'
          type: SNMP_AGENT
          snmp_oid: 'discovery[{#SNMPVALUE},.1.3.6.1.4.1.232.3.2.3.1.1.14]'
          key: 'snmp.discovery[logicalDrives]'
          delay: '3600'
          lifetime: '0'
          description: |
            Walk the cpqDaLogDrvOsName table to get logical drive OS names:
            
            CPQIDA-MIB::
                 cpqDaLogDrvOsName OBJECT-TYPE
                    SYNTAX  DisplayString (SIZE (0..255))
                    ACCESS  read-only
                    STATUS  mandatory
                    DESCRIPTION
                        "Logical Drive OS Name.
            
                        The OS name for this array logical drive.  This field will be
                        a null (size 0) string if the agent does not support OS name."
                    ::= { cpqDaLogDrvEntry 14 }
          item_prototypes:
            -
              uuid: 45940be0687b402584868cc372e65e35
              name: 'HP Logical Drive Condition {#SNMPINDEX} [{#SNMPVALUE}]'
              type: SNMP_AGENT
              snmp_oid: '.1.3.6.1.4.1.232.3.2.3.1.1.11.{#SNMPINDEX}'
              key: 'cpqDaLogDrvCondition[{#SNMPINDEX}]'
              delay: '300'
              history: 7d
              trends: 90d
              description: |
                CPQIDA-MIB::
                     cpqDaLogDrvCondition OBJECT-TYPE
                        SYNTAX  INTEGER
                        {
                            other(1),
                            ok(2),
                            degraded(3),
                            failed(4)
                        }
                        ACCESS  read-only
                        STATUS  mandatory
                        DESCRIPTION
                            "The Logical Drive condition.
                
                            This value represents the overall condition of this logical drive and
                            any associated physical drives."
                        ::= { cpqDaLogDrvEntry 11 }
              valuemap:
                name: cpqCondition
              tags:
                -
                  tag: Application
                  value: 'Drive Array'
              trigger_prototypes:
                -
                  uuid: faabdd50a726494cac937a45a1b9cb2c
                  expression: 'last(/SNMP-HP-iLO5/cpqDaLogDrvCondition[{#SNMPINDEX}])=4'
                  name: '{HOST.NAME}: Logical Drive {#SNMPINDEX} [{#SNMPVALUE}] has failed'
                  priority: HIGH
                  description: |
                    This logical drive drive (volume) has failed.  For more information, go to the system management homepage, then check the array configuration utility (may need to be started from the command line first).  This alert is very serious (data has been lost) because failure of a logical drive (in RAID configuration with redundancy) is normally caused by multiple physical drive failures.
                    
                    HP System Management Homepage (may require starting service hpsmhd):
                    https://{HOST.CONN}:2381
                -
                  uuid: e7620ef109c3458e96ee05c4663b0510
                  expression: 'last(/SNMP-HP-iLO5/cpqDaLogDrvCondition[{#SNMPINDEX}])=3'
                  name: '{HOST.NAME}: Logical Drive {#SNMPINDEX} [{#SNMPVALUE}] is degraded'
                  priority: WARNING
                  description: |
                    This logical drive drive (volume) is degraded.  For more information, go to the system management homepage, then check the array configuration utility (may need to be started from the command line first).
                    
                    This alert normally is normally means that redundancy has been lost because an underlying physical drive has failed.  This means that now a single drive failure could cause data loss.  This alert is normally accompanied by an alert from the physical drive which has failed.   Suggested actions are to write a ticket to replace the failed physical drive, then acknowledge the physical and logical drive alerts, writing the ticket number in the notes.
                    
                    HP System Management Homepage (may require starting service hpsmhd):
                    https://{HOST.CONN}:2381
            -
              uuid: cf1b256c6acd4d89b0873756b5be32c5
              name: 'HP Logical Drive Fault Tolerance {#SNMPINDEX} [{#SNMPVALUE}]'
              type: SNMP_AGENT
              snmp_oid: '.1.3.6.1.4.1.232.3.2.3.1.1.3.{#SNMPINDEX}'
              key: 'cpqDaLogDrvFaultTol[{#SNMPINDEX}]'
              delay: '28800'
              history: 1d
              trends: 7d
              description: |
                CPQIDA-MIB::
                   cpqDaLogDrvFaultTol OBJECT-TYPE
                        SYNTAX  INTEGER
                        {
                            other(1),
                            none(2),
                            mirroring(3),
                            dataGuard(4),
                            distribDataGuard(5),
                            advancedDataGuard(7),
                            raid50 (8),
                            raid60 (9)
                        }
                        ACCESS  read-only
                        STATUS  mandatory
                        DESCRIPTION
                            "Logical Drive Fault Tolerance.
                
                            This shows the fault tolerance mode of the logical drive.
                            The following values are valid for the Logical Drive Fault
                            Tolerance:
                
                            None (2)
                              Fault tolerance is not enabled.  If a physical drive reports
                              an error, the data cannot be recovered by the drive array
                              controller.
                
                            Mirroring - RAID 1/RAID 1+0 (3)
                              For each physical drive, there is a second physical drive
                              containing identical data. If a drive fails, the data can be
                              retrieved from the mirror drive. 
                
                            Data Guard - RAID 4 (4)
                              One of the physical drives is used as a data guard drive and
                              contains the exclusive OR of the data on the remaining drives.
                              If a failure is detected, the drive array controller rebuilds
                              the data using the data guard information plus information
                              from the other drives.
                
                            Distributed Data Guard - RAID 5 (5)
                              Distributed Data Guarding, sometimes referred to as RAID 5,
                              is similar to Data Guarding, but instead of storing the parity
                              information on one drive, the information is distributed across
                              all of the drives.  If a failure is detected, the drive array
                              controller rebuilds the data using the data guard information
                              from all the drives.
                
                            Advanced Data Guarding - RAID 6 (7)
                              Advanced Data Guarding (RAID ADG) is the fault tolerance method
                              that provides the highest level of data protection.  It
                              'stripes' data and parity across all the physical drives in the
                              configuration to ensure the uninterrupted availability of
                              uncorrupted data.  This fault-tolerance method is similar to
                              distributed data guard (RAID 5) in that parity data is
                              distributed across all drives in the array, except in RAID ADG
                              the capacity of multiple drives is used to store parity data.
                              Assuming the capacity of 2 drives is used for parity data,
                              this allows continued operation despite simultaneous failure of
                              any 2 drives in the array, whereas RAID 4 and RAID 5 can only
                              sustain failure of a single drive.
                
                           RAID 50 (8)
                              Distributed data guarding (RAID 5) with multiple parity groups.
                
                           RAID 60 (9)
                              Advanced data guarding (RAID 6) with multiple parity groups."
                        ::= { cpqDaLogDrvEntry 3 }
              valuemap:
                name: cpqDaLogDrvFaultTol
              tags:
                -
                  tag: Application
                  value: 'Drive Array'
            -
              uuid: 6b71ed906b5e4d9bad70c0cd732ea275
              name: 'HP Logical Drive Size {#SNMPINDEX} [{#SNMPVALUE}]'
              type: SNMP_AGENT
              snmp_oid: '.1.3.6.1.4.1.232.3.2.3.1.1.9.{#SNMPINDEX}'
              key: 'cpqDaLogDrvSize[{#SNMPINDEX}]'
              delay: '28800'
              history: 1d
              trends: 7d
              units: B
              description: |
                CPQIDA-MIB::
                     cpqDaLogDrvSize OBJECT-TYPE
                        SYNTAX  INTEGER (0..2147483647)
                        ACCESS  read-only
                        STATUS  mandatory
                        DESCRIPTION
                            "Logical Drive Size.
                
                            This is the size of the logical drive in megabytes.  This value
                            is calculated using the value 1,048,576 (2^20) as a megabyte.
                            Drive manufacturers sometimes use the number 1,000,000 as a
                            megabyte when giving drive capacities so this value may
                            differ from the advertised size of a drive."
                        ::= { cpqDaLogDrvEntry 9 }
              preprocessing:
                -
                  type: MULTIPLIER
                  parameters:
                    - '1048576'
              tags:
                -
                  tag: Application
                  value: 'Drive Array'
        -
          uuid: 851be6ff07774bbcb86883646280fcfb
          name: 'Memory Modules'
          type: SNMP_AGENT
          snmp_oid: 'discovery[{#SNMPVALUE},.1.3.6.1.4.1.232.6.2.14.13.1.19]'
          key: 'snmp.discovery[memoryModules]'
          delay: '3600'
          status: DISABLED
          filter:
            conditions:
              -
                macro: '{#SNMPVALUE}'
                value: '^[^2]'
                formulaid: A
          lifetime: '0'
          description: |
            Enable this discovery rule to monitor each memory module (i.e. to show which modules are installed in which sockets).  If this rule is enabled, disable the top-level item "HP Resilient Memory Condition" so you don''t get 2 alerts in the event of a memory failure.
            
            If you don't need monitoring of individual memory modules, leave this disabled, and leave the top-level item "HP Resilient Memory Condition" enabled.
            
            
            Walk the cpqHeResMem2ModuleStatus, filter out any modules which are "notPresent(2)"
            
            CPQHLTH-MIB::
                cpqHeResMem2ModuleStatus OBJECT-TYPE
                    SYNTAX  INTEGER {
                        other(1),
                        notPresent(2),
                        present(3),
                        good(4),
                        add(5),
                        upgrade(6),
                        missing(7),
                        doesNotMatch(8),
                        notSupported(9),
                        badConfig(10),
                        degraded(11)
          item_prototypes:
            -
              uuid: 191bf444195748b38af9f514def4c99a
              name: 'HP Memory Module CPU Number [{#SNMPINDEX}]'
              type: SNMP_AGENT
              snmp_oid: '.1.3.6.1.4.1.232.6.2.14.13.1.3.{#SNMPINDEX}'
              key: 'cpqHeResMem2CpuNum[{#SNMPINDEX}]'
              delay: '28800'
              history: 1d
              trends: 1d
              description: |
                CPQHLTH-MIB::
                    cpqHeResMem2CpuNum OBJECT-TYPE
                        SYNTAX  INTEGER
                        ACCESS  read-only
                        STATUS  mandatory
                        DESCRIPTION
                            "The memory module CPU number. Value 0 means memory is not Processor based."
                        ::= { cpqHeResMem2ModuleEntry 3 }
              tags:
                -
                  tag: Application
                  value: 'Memory Modules'
            -
              uuid: 852217bad7894cf2a7d18350e38fce2b
              name: 'HP Memory Module Condition [{#SNMPINDEX}]'
              type: SNMP_AGENT
              snmp_oid: '.1.3.6.1.4.1.232.6.2.14.13.1.20.{#SNMPINDEX}'
              key: 'cpqHeResMem2ModuleCondition[{#SNMPINDEX}]'
              delay: '300'
              history: 7d
              trends: 30d
              description: |
                CPQHLTH-MIB::
                    cpqHeResMem2ModuleCondition OBJECT-TYPE
                        SYNTAX  INTEGER {
                            other(1),
                            ok(2),
                            degraded(3),
                            degradedModuleIndexUnknown(4)
                        }
                        ACCESS  read-only
                        STATUS  mandatory
                        DESCRIPTION
                             "This provides the current status of the correctable memory
                              errors for this memory module.
                
                              The following status values are supported:
                
                                 other(1):
                                   ECC is not supported on this memory module or the
                                   condition could not be determined.
                
                                 ok(2):
                                   The memory module is operating normally.
                
                                 degraded(3):
                                   The memory module is correctable error count has exceeded
                                   threshold or a configuration error has been detected.
                
                                 degradedModuleIndexUnknown(4):
                                   The correctable error count has exceeded threshold.
                                   The module number not available."
                        ::= { cpqHeResMem2ModuleEntry 20 }
              valuemap:
                name: cpqCondition
              tags:
                -
                  tag: Application
                  value: 'Memory Modules'
            -
              uuid: 5bf3adeab5af4fa39415341e51ddaed2
              name: 'HP Memory Module Number [{#SNMPINDEX}]'
              type: SNMP_AGENT
              snmp_oid: '.1.3.6.1.4.1.232.6.2.14.13.1.5.{#SNMPINDEX}'
              key: 'cpqHeResMem2ModuleNum[{#SNMPINDEX}]'
              delay: '28800'
              history: 1d
              trends: 1d
              description: |
                CPQHLTH-MIB::
                    cpqHeResMem2ModuleNum OBJECT-TYPE
                        SYNTAX  INTEGER
                        ACCESS  read-only
                        STATUS  mandatory
                        DESCRIPTION
                            "The memory module number."
                        ::= { cpqHeResMem2ModuleEntry 5 }
              tags:
                -
                  tag: Application
                  value: 'Memory Modules'
            -
              uuid: d0952e877cdd4123b03952c111ad7b41
              name: 'HP Memory Module Size [{#SNMPINDEX}]'
              type: SNMP_AGENT
              snmp_oid: '.1.3.6.1.4.1.232.6.2.14.13.1.6.{#SNMPINDEX}'
              key: 'cpqHeResMem2ModuleSize[{#SNMPINDEX}]'
              delay: '28800'
              history: 1d
              trends: 1d
              units: B
              description: |
                CPQHLTH-MIB::
                    cpqHeResMem2ModuleSize OBJECT-TYPE
                        SYNTAX  INTEGER (0..2147483647)
                        ACCESS  read-only
                        STATUS  mandatory
                        DESCRIPTION
                            "Module memory size in kilobytes.  A kilobyte of memory is
                            defined as 1024 bytes.
                
                            A size of 0 indicates the module is not present."
                        ::= { cpqHeResMem2ModuleEntry 6 }
              preprocessing:
                -
                  type: MULTIPLIER
                  parameters:
                    - '1024'
              tags:
                -
                  tag: Application
                  value: 'Memory Modules'
          trigger_prototypes:
            -
              uuid: ce5e34bbf01543b49f2a9e21b8b8dc89
              expression: 'last(/SNMP-HP-iLO5/cpqHeResMem2ModuleCondition[{#SNMPINDEX}])>2 and last(/SNMP-HP-iLO5/cpqHeResMem2ModuleNum[{#SNMPINDEX}])<>99 and last(/SNMP-HP-iLO5/cpqHeResMem2CpuNum[{#SNMPINDEX}])<>99'
              name: '{HOST.NAME}: Memory Module {#SNMPINDEX} is degraded'
              priority: AVERAGE
              description: |
                The correctable error count for this memory module has been exceeded.  It needs to be replaced.  Suggested actions are to write a ticket to replace the module, then acknowledge the alert, writing the ticket number in the notes.
                
                HP System Management Homepage (may require starting service hpsmhd):
                https://{HOST.CONN}:2381
        -
          uuid: d4cf8626d0a44418b2e3e9d8d0df6d9e
          name: 'Physical Drives'
          type: SNMP_AGENT
          snmp_oid: 'discovery[{#SNMPVALUE},.1.3.6.1.4.1.232.3.2.5.1.1.64]'
          key: 'snmp.discovery[physicalDrives]'
          delay: '3600'
          lifetime: '0'
          description: |
            Walk the cpqDaPhyDrvLocationString table to get drive locations:
            
            CPQIDA-MIB::
                 cpqDaPhyDrvLocationString OBJECT-TYPE
                    SYNTAX  DisplayString (SIZE (0..255))
                    ACCESS  read-only
                    STATUS  mandatory
                    DESCRIPTION
                       "Physical Drive Location String.
            
                        This string describes the location of the drive in relation to
                        the controller.  If the location string cannot be determined,
                        the agent will return a NULL string."
                    ::= { cpqDaPhyDrvEntry 64 }
          item_prototypes:
            -
              uuid: e40accca02934a3f802e1b3b2b4fe016
              name: 'HP Physical Drive Condition {#SNMPINDEX}'
              type: SNMP_AGENT
              snmp_oid: '.1.3.6.1.4.1.232.3.2.5.1.1.37.{#SNMPINDEX}'
              key: 'cpqDaPhyDrvCondition[{#SNMPINDEX}]'
              delay: '300'
              history: 7d
              trends: 90d
              description: |
                CPQIDA-MIB::
                     cpqDaPhyDrvCondition OBJECT-TYPE
                        SYNTAX  INTEGER
                        {
                            other(1),
                            ok(2),
                            degraded(3),
                            failed(4)
                        }
                        ACCESS  read-only
                        STATUS  mandatory
                        DESCRIPTION
                            "The condition of the device.
                             This value represents the overall condition of this physical
                             drive."
                        ::= { cpqDaPhyDrvEntry 37 }
              valuemap:
                name: cpqCondition
              tags:
                -
                  tag: Application
                  value: 'Drive Array'
              trigger_prototypes:
                -
                  uuid: be71c65b83a645afa108a6bb9ee15a12
                  expression: 'last(/SNMP-HP-iLO5/cpqDaPhyDrvCondition[{#SNMPINDEX}])=4'
                  name: '{HOST.NAME}: Drive {#SNMPINDEX} has failed [{#SNMPVALUE}]'
                  priority: AVERAGE
                  description: |
                    This drive has failed.  It needs to be replaced.  This alert will normally be accompanied by an alert from a logical drive which has now lost redundancy. This means that now a single drive failure can cause data loss.  Suggested actions are to write a ticket to replace the failed physical drive, then acknowledge the physical and logical drive alerts, writing the ticket number in the notes.
                    
                    HP System Management Homepage (may require starting service hpsmhd):
                    https://{HOST.CONN}:2381
                -
                  uuid: fd4c48d8405144d0a5e9dcd07ec83c5e
                  expression: 'last(/SNMP-HP-iLO5/cpqDaPhyDrvCondition[{#SNMPINDEX}])=3'
                  name: '{HOST.NAME}: Drive {#SNMPINDEX} is degraded [{#SNMPVALUE}]'
                  priority: WARNING
                  description: |
                    This drive is degraded (may mean predictive failure).  It should be replaced.  Suggested actions are to write a ticket to replace the drive, then acknowledge the alert, writing the ticket number in the notes.
                    
                    HP System Management Homepage (may require starting service hpsmhd):
                    https://{HOST.CONN}:2381
            -
              uuid: 206f5c5d414f45618bdb6fe8316dc39e
              name: 'HP Physical Drive Reads/Sec {#SNMPINDEX}'
              type: SNMP_AGENT
              snmp_oid: '.1.3.6.1.4.1.232.3.2.5.1.1.11.{#SNMPINDEX}'
              key: 'cpqDaPhyDrvReadsSec[{#SNMPINDEX}]'
              delay: '60'
              history: 30d
              units: reads/s
              description: |
                Number of sector reads/sec
                
                CPQIDA-MIB::
                     cpqDaPhyDrvReads OBJECT-TYPE
                        SYNTAX  Counter
                        ACCESS  read-only
                        STATUS  mandatory
                        DESCRIPTION
                            "Sectors Read (low).
                
                            The phyDrvHReads and the phyDrvReads together shows
                            the total number of sectors read from the physical disk drive
                            during the reference time (phyDrvRefHours).
                
                            The actual number of sectors read equals the phyDrvHReads
                            times 2^32 plus the phyDrvReads.
                
                            This information may be useful for determining rates.
                            For instance, if you wanted to calculate the average number
                            of reads per hour of operation, divide this number by the
                            reference hours."
                        ::= { cpqDaPhyDrvEntry 11 }
              preprocessing:
                -
                  type: CHANGE_PER_SECOND
                  parameters:
                    - ''
              tags:
                -
                  tag: Application
                  value: 'Drive Array'
            -
              uuid: 34ff0b306dbe4733982234e0a9518305
              name: 'HP Physical Drive Total Bytes Read {#SNMPINDEX}'
              type: SNMP_AGENT
              snmp_oid: '.1.3.6.1.4.1.232.3.2.5.1.1.11.{#SNMPINDEX}'
              key: 'cpqDaPhyDrvReads[{#SNMPINDEX}]'
              delay: '600'
              history: 7d
              units: B
              description: |
                Running total of number of bytes read from this drive.  Wraps every 2TB.
                
                CPQIDA-MIB::
                     cpqDaPhyDrvReads OBJECT-TYPE
                        SYNTAX  Counter
                        ACCESS  read-only
                        STATUS  mandatory
                        DESCRIPTION
                            "Sectors Read (low).
                
                            The phyDrvHReads and the phyDrvReads together shows
                            the total number of sectors read from the physical disk drive
                            during the reference time (phyDrvRefHours).
                
                            The actual number of sectors read equals the phyDrvHReads
                            times 2^32 plus the phyDrvReads.
                
                            This information may be useful for determining rates.
                            For instance, if you wanted to calculate the average number
                            of reads per hour of operation, divide this number by the
                            reference hours."
                        ::= { cpqDaPhyDrvEntry 11 }
              preprocessing:
                -
                  type: MULTIPLIER
                  parameters:
                    - '512'
              tags:
                -
                  tag: Application
                  value: 'Drive Array'
            -
              uuid: 33d1c8aefbc94b53bd7899aff5f69aa4
              name: 'HP Physical Drive Serial Number {#SNMPINDEX}'
              type: SNMP_AGENT
              snmp_oid: '.1.3.6.1.4.1.232.3.2.5.1.1.51.{#SNMPINDEX}'
              key: 'cpqDaPhyDrvSerialNum[{#SNMPINDEX}]'
              delay: '28800'
              history: 1d
              trends: '0'
              value_type: TEXT
              description: |
                CPQIDA-MIB::
                     cpqDaPhyDrvSerialNum OBJECT-TYPE
                        SYNTAX  DisplayString (SIZE (0..40))
                        ACCESS  read-only
                        STATUS  mandatory
                        DESCRIPTION
                            "Physical Drive Serial Number.
                
                            This is the serial number assigned to the physical drive.
                            This value is based upon the serial number as returned by the
                            SCSI inquiry command but may have been modified due to space
                            limitations.  This can be used for identification purposes."
                        ::= { cpqDaPhyDrvEntry 51 }
              tags:
                -
                  tag: Application
                  value: 'Drive Array'
            -
              uuid: 74f3296da7454b4496284c5ada138bba
              name: 'HP Physical Drive Size {#SNMPINDEX}'
              type: SNMP_AGENT
              snmp_oid: '.1.3.6.1.4.1.232.3.2.5.1.1.45.{#SNMPINDEX}'
              key: 'cpqDaPhyDrvSize[{#SNMPINDEX}]'
              delay: '28800'
              history: 1d
              trends: 7d
              units: B
              description: |
                CPQIDA-MIB::
                     cpqDaPhyDrvSize OBJECT-TYPE
                        SYNTAX  INTEGER
                        ACCESS  read-only
                        STATUS  mandatory
                        DESCRIPTION
                            "Physical Drive Size in MB.
                
                            This is the size of the physical drive in megabytes.  This value
                            is calculated using the value 1,048,576 (2^20) as a megabyte.
                            Drive manufacturers sometimes use the number 1,000,000 as a
                            megabyte when giving drive capacities so this value may differ
                            from the advertised size of a drive.  This field is only
                            applicable for controllers which support SCSI drives, and
                            therefore is not supported by the IDA or IDA-2 controllers.
                            The field will contain 0xFFFFFFFF if the drive capacity cannot
                            be calculated or if the controller does not support SCSI drives."
                        ::= { cpqDaPhyDrvEntry 45 }
              preprocessing:
                -
                  type: MULTIPLIER
                  parameters:
                    - '1048576'
              tags:
                -
                  tag: Application
                  value: 'Drive Array'
            -
              uuid: f8616abac0f94b46831330f0ec59a762
              name: 'HP Physical Drive Writes/Sec {#SNMPINDEX}'
              type: SNMP_AGENT
              snmp_oid: '.1.3.6.1.4.1.232.3.2.5.1.1.13.{#SNMPINDEX}'
              key: 'cpqDaPhyDrvWritesSec[{#SNMPINDEX}]'
              delay: '60'
              history: 30d
              units: writes/s
              description: |
                Number of sector writes/sec
                
                CPQIDA-MIB::
                     cpqDaPhyDrvWrites OBJECT-TYPE
                        SYNTAX  Counter
                        ACCESS  read-only
                        STATUS  mandatory
                        DESCRIPTION
                            "Sectors Written (low).
                
                            The phyDrvHWrites and the phyDrvWrites together
                            shows the total number of sectors written to the physical
                            disk drive during the reference hours (phyDrvRefHours).
                
                            The actual number of sectors written equals the phyDrvHWrites
                            times 2^32 plus the phyDrvWrites.
                
                            This information may be useful for determining rates.
                            For instance, if you wanted to calculate the average number of
                            writes per hour of operation, divide this number by the reference
                            hours. "
                        ::= { cpqDaPhyDrvEntry 13 }
              preprocessing:
                -
                  type: CHANGE_PER_SECOND
                  parameters:
                    - ''
              tags:
                -
                  tag: Application
                  value: 'Drive Array'
            -
              uuid: ad6b2aedb9db4a28b5035145bc2ac598
              name: 'HP Physical Drive Total Bytes Written {#SNMPINDEX}'
              type: SNMP_AGENT
              snmp_oid: '.1.3.6.1.4.1.232.3.2.5.1.1.13.{#SNMPINDEX}'
              key: 'cpqDaPhyDrvWrites[{#SNMPINDEX}]'
              delay: '600'
              history: 7d
              units: B
              description: |
                Running total of number of bytes written to this drive.  Wraps every 2TB.
                
                CPQIDA-MIB::
                     cpqDaPhyDrvWrites OBJECT-TYPE
                        SYNTAX  Counter
                        ACCESS  read-only
                        STATUS  mandatory
                        DESCRIPTION
                            "Sectors Written (low).
                
                            The phyDrvHWrites and the phyDrvWrites together
                            shows the total number of sectors written to the physical
                            disk drive during the reference hours (phyDrvRefHours).
                
                            The actual number of sectors written equals the phyDrvHWrites
                            times 2^32 plus the phyDrvWrites.
                
                            This information may be useful for determining rates.
                            For instance, if you wanted to calculate the average number of
                            writes per hour of operation, divide this number by the reference
                            hours. "
                        ::= { cpqDaPhyDrvEntry 13 }
              preprocessing:
                -
                  type: MULTIPLIER
                  parameters:
                    - '512'
              tags:
                -
                  tag: Application
                  value: 'Drive Array'
        -
          uuid: 86daf06aeda64693b021f1e4ea436523
          name: 'Power Supplies'
          type: SNMP_AGENT
          snmp_oid: 'discovery[{#SNMPVALUE},.1.3.6.1.4.1.232.6.2.9.3.1.3]'
          key: 'snmp.discovery[powerSupplies]'
          delay: '3600'
          filter:
            conditions:
              -
                macro: '{#SNMPVALUE}'
                value: '^[^2]'
                formulaid: A
          lifetime: '0'
          description: |
            Walk the cpqHeFltTolPowerSupplyPresent table, filter out any modules which are "absent(2)"
            
            CPQHLTH-MIB::
                cpqHeFltTolPowerSupplyPresent OBJECT-TYPE
                    SYNTAX  INTEGER {
                        other(1),
                        absent(2),
                        present(3)
                        }
                    ACCESS  read-only
                    STATUS  mandatory
                    DESCRIPTION
                        "Indicates whether the power supply is present in the chassis."
                    ::= { cpqHeFltTolPowerSupplyEntry 3 }
          item_prototypes:
            -
              uuid: 93443ae099f94c33bd93b643ef9506f8
              name: 'HP Power Supply Condition {#SNMPINDEX}'
              type: SNMP_AGENT
              snmp_oid: '.1.3.6.1.4.1.232.6.2.9.3.1.4.{#SNMPINDEX}'
              key: 'cpqHeFltTolPowerSupplyCondition[{#SNMPINDEX}]'
              delay: '300'
              history: 7d
              trends: 30d
              description: |
                CPQHLTH-MIB::
                    cpqHeFltTolPowerSupplyCondition OBJECT-TYPE
                        SYNTAX  INTEGER {
                            other(1),
                            ok(2),
                            degraded(3),
                            failed(4)
                            }
                        ACCESS  read-only
                        STATUS  mandatory
                        DESCRIPTION
                            "The condition of the power supply.
                
                            This value will be one of the following:
                
                            other(1)
                              The status could not be determined or not present.
                
                            ok(2)
                              The power supply is operating normally.
                
                            degraded(3)
                              A temperature sensor, fan or other power supply component is
                              outside of normal operating range.
                
                            failed(4)
                              A power supply component detects a condition that could
                              permanently damage the system."
                        ::= { cpqHeFltTolPowerSupplyEntry 4 }
              valuemap:
                name: cpqCondition
              tags:
                -
                  tag: Application
                  value: Health
              trigger_prototypes:
                -
                  uuid: 06a76307d48e4de29e8c9abb33bb9961
                  expression: 'last(/SNMP-HP-iLO5/cpqHeFltTolPowerSupplyCondition[{#SNMPINDEX}])=4'
                  name: '{HOST.NAME}: Power Supply {#SNMPINDEX} has failed'
                  priority: AVERAGE
                  description: |
                    This power supply is reporting that it has failed.  This could mean that the supply has failed and needs replacement, or it could also mean that there is no input power due to a cabling problem.  Check to make sure that there is power going to this supply, if so it has failed and needs to be replaced.
                    
                    HP System Management Homepage (may require starting service hpsmhd):
                    https://{HOST.CONN}:2381
                -
                  uuid: 79b0b6de453044f88ef3e79fe5fac100
                  expression: 'last(/SNMP-HP-iLO5/cpqHeFltTolPowerSupplyCondition[{#SNMPINDEX}])=3'
                  name: '{HOST.NAME}: Power Supply {#SNMPINDEX} is degraded'
                  priority: WARNING
                  description: |
                    This power supply is reporting a degraded condition.  This could mean that a fan has failed, or a termperature reading is too high.  Check the iLO or system management homepage for more information. If a fan has failed, it needs to be replaced.
                    
                    HP System Management Homepage (may require starting service hpsmhd):
                    https://{HOST.CONN}:2381
            -
              uuid: 9f8160a21ee548c98abc8b15c3d5f138
              name: 'HP Power Supply Redundant {#SNMPINDEX}'
              type: SNMP_AGENT
              snmp_oid: '.1.3.6.1.4.1.232.6.2.9.3.1.9.{#SNMPINDEX}'
              key: 'cpqHeFltTolPowerSupplyRedundant[{#SNMPINDEX}]'
              delay: '3600'
              history: 7d
              trends: 30d
              description: |
                CPQHLTH-MIB::
                    cpqHeFltTolPowerSupplyRedundant OBJECT-TYPE
                        SYNTAX  INTEGER {
                            other(1),
                            notRedundant(2),
                            redundant(3)
                            }
                        ACCESS  read-only
                        STATUS  mandatory
                        DESCRIPTION
                            "The redundancy state of the power supply.
                
                            This value will be one of the following:
                            other(1)
                              The redundancy state could not be determined.
                
                            notRedundant(2)
                              The power supply is not operating in a redundant state.
                
                            redundant(3)
                              The power supply is operating in a redundant state."
                        ::= { cpqHeFltTolPowerSupplyEntry 9 }
              valuemap:
                name: cpqRedundant
              tags:
                -
                  tag: Application
                  value: Health
      macros:
        -
          macro: '{$SNMP_COMMUNITY}'
          value: public
      valuemaps:
        -
          uuid: b1f64aa7cadf4541a8d9a8b5a919351c
          name: cpqCondition
          mappings:
            -
              value: '1'
              newvalue: other
            -
              value: '2'
              newvalue: OK
            -
              value: '3'
              newvalue: degraded
            -
              value: '4'
              newvalue: failed
        -
          uuid: 58dc02cfd0b84cf98ea8dc9aa830e4fb
          name: cpqDaAccelBackupPowerSource
          mappings:
            -
              value: '1'
              newvalue: other
            -
              value: '2'
              newvalue: battery
            -
              value: '3'
              newvalue: capacitor
            -
              value: '4'
              newvalue: 'Flash-Backed Write Cache'
        -
          uuid: 04f1989a061e4470923221ad21e5c93f
          name: cpqDaAccelBatteryStatus
          mappings:
            -
              value: '1'
              newvalue: other
            -
              value: '2'
              newvalue: ok
            -
              value: '3'
              newvalue: recharging
            -
              value: '4'
              newvalue: failed
            -
              value: '5'
              newvalue: degraded
            -
              value: '6'
              newvalue: notPresent
            -
              value: '7'
              newvalue: capacitorFailed
        -
          uuid: f519194d280d450a8e42bae8368ab322
          name: cpqDaAccelStatus
          mappings:
            -
              value: '1'
              newvalue: other
            -
              value: '2'
              newvalue: invalid
            -
              value: '3'
              newvalue: enabled
            -
              value: '4'
              newvalue: tmpDisabled
            -
              value: '5'
              newvalue: permDisabled
            -
              value: '6'
              newvalue: cacheModFlashMemNotAttached
            -
              value: '7'
              newvalue: cacheModDegradedFailsafeSpeed
            -
              value: '8'
              newvalue: cacheModCriticalFailure
            -
              value: '9'
              newvalue: cacheReadCacheNotMapped
        -
          uuid: 8a9d6f8cd2dc4537aacff8cf79d92c87
          name: cpqDaCntlrDriveWriteCacheState
          mappings:
            -
              value: '1'
              newvalue: other
            -
              value: '2'
              newvalue: disabled
            -
              value: '3'
              newvalue: enabled
        -
          uuid: f1fe50f6e37a40989f58940932940e01
          name: cpqDaLogDrvFaultTol
          mappings:
            -
              value: '1'
              newvalue: other
            -
              value: '2'
              newvalue: none
            -
              value: '3'
              newvalue: mirroring
            -
              value: '4'
              newvalue: dataGuard
            -
              value: '5'
              newvalue: distribDataGuard
            -
              value: '7'
              newvalue: advancedDataGuard
            -
              value: '8'
              newvalue: raid50
            -
              value: '9'
              newvalue: raid60
        -
          uuid: 29b603e2d78343d7b76d213256b37a80
          name: cpqRedundant
          mappings:
            -
              value: '1'
              newvalue: other
            -
              value: '2'
              newvalue: notRedundant
            -
              value: '3'
              newvalue: redundant
