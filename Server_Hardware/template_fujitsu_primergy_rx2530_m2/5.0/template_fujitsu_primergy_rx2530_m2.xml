<?xml version="1.0" encoding="UTF-8"?>
<zabbix_export>
  <version>5.0</version>
  <date>2021-10-22T10:10:16Z</date>
  <groups>
    <group>
      <name>Templates/Modules</name>
    </group>
  </groups>
  <templates>
    <template>
      <template>Template Module Generic SNMPv2 to Fuji IRMC</template>
      <name>Template Module Generic SNMPv2 to Fuji IRMC</name>
      <description>Template Module Generic version: 0.15 MIBs used: SNMPv2-MIB</description>
      <templates>
        <template>
          <name>Template Module ICMP Ping</name>
        </template>
      </templates>
      <groups>
        <group>
          <name>Templates/Modules</name>
        </group>
      </groups>
      <applications>
        <application>
          <name>General</name>
        </application>
      </applications>
      <items>
        <item>
          <name>SNMP traps (fallback)</name>
          <type>SNMP_TRAP</type>
          <key>snmptrap.fallback</key>
          <delay>5m</delay>
          <history>2w</history>
          <trends>0</trends>
          <value_type>LOG</value_type>
          <description>Item is used to collect all SNMP traps unmatched by other snmptrap items</description>
          <applications>
            <application>
              <name>General</name>
            </application>
          </applications>
          <logtimefmt>hh:mm:sszyyyy/MM/dd</logtimefmt>
        </item>
        <item>
          <name>Device contact details</name>
          <type>SNMP_AGENT</type>
          <snmp_oid>1.3.6.1.2.1.1.4.0</snmp_oid>
          <key>system.contact</key>
          <delay>1h</delay>
          <history>2w</history>
          <trends>0</trends>
          <value_type>CHAR</value_type>
          <description>MIB: SNMPv2-MIB The textual identification of the contact person for this managed node, together with information on how to contact this person. If no contact information is known, the value is the zero-length string.</description>
          <inventory_link>CONTACT</inventory_link>
          <applications>
            <application>
              <name>General</name>
            </application>
          </applications>
        </item>
        <item>
          <name>Device description</name>
          <type>SNMP_AGENT</type>
          <snmp_oid>1.3.6.1.2.1.1.1.0</snmp_oid>
          <key>system.descr</key>
          <delay>1h</delay>
          <history>2w</history>
          <trends>0</trends>
          <value_type>CHAR</value_type>
          <description>MIB: SNMPv2-MIB A textual description of the entity. This value should include the full name and version identification of the system's hardware type, software operating-system, and networking software.</description>
          <inventory_link>HARDWARE</inventory_link>
          <applications>
            <application>
              <name>General</name>
            </application>
          </applications>
        </item>
        <item>
          <name>Device location</name>
          <type>SNMP_AGENT</type>
          <snmp_oid>1.3.6.1.2.1.1.6.0</snmp_oid>
          <key>system.location</key>
          <delay>1h</delay>
          <history>2w</history>
          <trends>0</trends>
          <value_type>CHAR</value_type>
          <description>MIB: SNMPv2-MIB The physical location of this node (e.g., `telephone closet, 3rd floor'). If the location is unknown, the value is the zero-length string.</description>
          <inventory_link>LOCATION</inventory_link>
          <applications>
            <application>
              <name>General</name>
            </application>
          </applications>
        </item>
        <item>
          <name>Device name</name>
          <type>SNMP_AGENT</type>
          <snmp_oid>1.3.6.1.2.1.1.5.0</snmp_oid>
          <key>system.name</key>
          <delay>1h</delay>
          <history>2w</history>
          <trends>0</trends>
          <value_type>CHAR</value_type>
          <description>MIB: SNMPv2-MIB An administratively-assigned name for this managed node.By convention, this is the node's fully-qualified domain name. If the name is unknown, the value is the zero-length string.</description>
          <inventory_link>NAME</inventory_link>
          <applications>
            <application>
              <name>General</name>
            </application>
          </applications>
        </item>
        <item>
          <name>System object ID</name>
          <type>SNMP_AGENT</type>
          <snmp_oid>1.3.6.1.2.1.1.2.0</snmp_oid>
          <key>system.objectid</key>
          <delay>1h</delay>
          <history>2w</history>
          <trends>0</trends>
          <value_type>CHAR</value_type>
          <description>MIB: SNMPv2-MIB The vendor's authoritative identification of the network management subsystem contained in the entity. This value is allocated within the SMI enterprises subtree (1.3.6.1.4.1) and provides an easy and unambiguous means for determining`what kind of box' is being managed. For example, if vendor`Flintstones, Inc.' was assigned the subtree1.3.6.1.4.1.4242, it could assign the identifier 1.3.6.1.4.1.4242.1.1 to its `Fred Router'.</description>
          <applications>
            <application>
              <name>General</name>
            </application>
          </applications>
        </item>
        <item>
          <name>Device uptime</name>
          <type>SNMP_AGENT</type>
          <snmp_oid>1.3.6.1.2.1.1.3.0</snmp_oid>
          <key>system.uptime[sysUpTime]</key>
          <delay>30s</delay>
          <history>2w</history>
          <trends>0d</trends>
          <units>uptime</units>
          <description>MIB: SNMPv2-MIB The time (in hundredths of a second) since the network management portion of the system was last re-initialized.</description>
          <applications>
            <application>
              <name>Status</name>
            </application>
          </applications>
          <preprocessing>
            <step>
              <type>MULTIPLIER</type>
              <params>0.01</params>
            </step>
          </preprocessing>
          <triggers>
            <trigger>
              <expression>{last()}&lt;10m</expression>
              <name>{HOST.NAME} has been restarted</name>
              <priority>WARNING</priority>
              <description>Last value: {ITEM.LASTVALUE1}. The device uptime is less than 10 minutes</description>
              <manual_close>YES</manual_close>
              <dependencies>
                <dependency>
                  <name>No SNMP data collection</name>
                  <expression>{Template Module Generic SNMPv2 to Fuji IRMC:zabbix[host,snmp,available].max({$SNMP_TIMEOUT})}=0</expression>
                </dependency>
              </dependencies>
            </trigger>
          </triggers>
        </item>
        <item>
          <name>SNMP availability</name>
          <type>INTERNAL</type>
          <key>zabbix[host,snmp,available]</key>
          <history>2w</history>
          <trends>0d</trends>
          <applications>
            <application>
              <name>Status</name>
            </application>
          </applications>
          <valuemap>
            <name>zabbix.host.available</name>
          </valuemap>
          <triggers>
            <trigger>
              <expression>{max({$SNMP_TIMEOUT})}=0</expression>
              <name>No SNMP data collection</name>
              <priority>WARNING</priority>
              <description>Last value: {ITEM.LASTVALUE1}. SNMP is not available for polling. Please check device connectivity and SNMP settings.</description>
              <dependencies>
                <dependency>
                  <name>Unavailable by ICMP ping</name>
                  <expression>{Template Module Generic SNMPv2 to Fuji IRMC:icmpping.max(#3)}=0</expression>
                </dependency>
              </dependencies>
            </trigger>
          </triggers>
        </item>
      </items>
      <discovery_rules>
        <discovery_rule>
          <name>Components errors</name>
          <type>SNMP_AGENT</type>
          <snmp_oid>discovery[{#NAME},1.3.6.1.4.1.231.2.10.2.11.4.1.1.5, {#STATUS}, 1.3.6.1.4.1.231.2.10.2.11.4.1.1.6]</snmp_oid>
          <key>components.errors.discovery</key>
          <delay>15m</delay>
          <item_prototypes>
            <item_prototype>
              <name>Components {#NAME} - Errors</name>
              <type>SNMP_AGENT</type>
              <snmp_oid>1.3.6.1.4.1.231.2.10.2.11.4.1.1.6.{#SNMPINDEX}</snmp_oid>
              <key>component.errors.[{#SNMPINDEX}]</key>
              <delay>30s</delay>
              <applications>
                <application>
                  <name>General</name>
                </application>
              </applications>
              <application_prototypes>
                <application_prototype>
                  <name>System</name>
                </application_prototype>
              </application_prototypes>
              <trigger_prototypes>
                <trigger_prototype>
                  <expression>{min(15)}>1</expression>
                  <name>{HOST.NAME} -> Component {#NAME} Errors: {ITEM.LASTVALUE}</name>
                  <priority>HIGH</priority>
                  <manual_close>YES</manual_close>
                </trigger_prototype>
              </trigger_prototypes>
            </item_prototype>
          </item_prototypes>
        </discovery_rule>
        <discovery_rule>
          <name>Components status</name>
          <type>SNMP_AGENT</type>
          <snmp_oid>discovery[{#NAME},1.3.6.1.4.1.231.2.10.2.11.4.1.1.2, {#STATUS}, 1.3.6.1.4.1.231.2.10.2.11.4.1.1.3]</snmp_oid>
          <key>components.status.discovery</key>
          <delay>15m</delay>
          <item_prototypes>
            <item_prototype>
              <name>Component {#NAME} - Status</name>
              <type>SNMP_AGENT</type>
              <snmp_oid>1.3.6.1.4.1.231.2.10.2.11.4.1.1.3.{#SNMPINDEX}</snmp_oid>
              <key>component.status.[{#SNMPINDEX}]</key>
              <delay>30s</delay>
              <application_prototypes>
                <application_prototype>
                  <name>System</name>
                </application_prototype>
              </application_prototypes>
              <valuemap>
                <name>RX2540</name>
              </valuemap>
              <trigger_prototypes>
                <trigger_prototype>
                  <expression>{last()}&lt;>1 and {last()}&lt;>6</expression>
                  <name>{HOST.NAME} -> {#NAME} status is fail</name>
                  <priority>HIGH</priority>
                  <manual_close>YES</manual_close>
                </trigger_prototype>
              </trigger_prototypes>
            </item_prototype>
          </item_prototypes>
        </discovery_rule>
        <discovery_rule>
          <name>Fans Status</name>
          <type>SNMP_AGENT</type>
          <snmp_oid>discovery[{#FAN}, .1.3.6.1.4.1.231.2.10.2.2.10.5.2.1.3.1, {#FAN_SPEED}, .1.3.6.1.4.1.231.2.10.2.2.10.5.2.1.6.1, {#STATUS}, .1.3.6.1.4.1.231.2.10.2.2.10.5.2.1.5.1]</snmp_oid>
          <key>snmp.discovery.fans</key>
          <delay>15m</delay>
          <item_prototypes>
            <item_prototype>
              <name>{#FAN} - Speed</name>
              <type>SNMP_AGENT</type>
              <snmp_oid>.1.3.6.1.4.1.231.2.10.2.2.10.5.2.1.6.1.{#SNMPINDEX}</snmp_oid>
              <key>fan.speed.[{#SNMPINDEX}]</key>
              <delay>30s</delay>
              <application_prototypes>
                <application_prototype>
                  <name>Fans</name>
                </application_prototype>
              </application_prototypes>
              <trigger_prototypes>
                <trigger_prototype>
                  <expression>{max(5)}&lt;{$FAN_SPEED_LIMIT}</expression>
                  <name>{HOST.NAME} -> {#FAN} Speed: {ITEM.LASTVALUE}, threshold: {$FAN_SPEED_LIMIT}</name>
                  <priority>HIGH</priority>
                </trigger_prototype>
              </trigger_prototypes>
            </item_prototype>
            <item_prototype>
              <name>{#FAN} - Status</name>
              <type>SNMP_AGENT</type>
              <snmp_oid>.1.3.6.1.4.1.231.2.10.2.2.10.5.2.1.5.1.{#SNMPINDEX}</snmp_oid>
              <key>fan.status.[{#SNMPINDEX}]</key>
              <delay>30s</delay>
              <application_prototypes>
                <application_prototype>
                  <name>Fans</name>
                </application_prototype>
              </application_prototypes>
              <valuemap>
                <name>Fujitsu RX FAN Status</name>
              </valuemap>
              <trigger_prototypes>
                <trigger_prototype>
                  <expression>{last()}&lt;>3</expression>
                  <name>{HOST.NAME} ->{#FAN} Status not ok</name>
                  <priority>HIGH</priority>
                  <manual_close>YES</manual_close>
                </trigger_prototype>
              </trigger_prototypes>
            </item_prototype>
          </item_prototypes>
        </discovery_rule>
        <discovery_rule>
          <name>PSU Status</name>
          <type>SNMP_AGENT</type>
          <snmp_oid>discovery[{#PSU},1.3.6.1.4.1.231.2.10.2.2.10.6.2.1.4.1, {#PSU_STATUS}, 1.3.6.1.4.1.231.2.10.2.2.10.6.2.1.5.1]</snmp_oid>
          <key>snmp.discovery.psu</key>
          <delay>15m</delay>
          <item_prototypes>
            <item_prototype>
              <name>{#PSU} - Status</name>
              <type>SNMP_AGENT</type>
              <snmp_oid>1.3.6.1.4.1.231.2.10.2.2.10.6.2.1.5.1.{#SNMPINDEX}</snmp_oid>
              <key>psu.status.[{#PSU}]</key>
              <delay>30s</delay>
              <application_prototypes>
                <application_prototype>
                  <name>PSU</name>
                </application_prototype>
              </application_prototypes>
              <valuemap>
                <name>Fujitsu RX PSU Status</name>
              </valuemap>
              <trigger_prototypes>
                <trigger_prototype>
                  <expression>{last()}&lt;>3</expression>
                  <name>{HOST.NAME} -> {#PSU} not ok</name>
                  <priority>HIGH</priority>
                  <manual_close>YES</manual_close>
                </trigger_prototype>
              </trigger_prototypes>
            </item_prototype>
          </item_prototypes>
        </discovery_rule>
        <discovery_rule>
          <name>Temperature</name>
          <type>SNMP_AGENT</type>
          <snmp_oid>discovery[{#SENSOR},1.3.6.1.4.1.231.2.10.2.2.10.5.1.1.4.1, {#SENSOR_TEMP}, 1.3.6.1.4.1.231.2.10.2.2.10.5.1.1.6.1, {#WARN_TEMP}, 1.3.6.1.4.1.231.2.10.2.2.10.5.1.1.7.1]</snmp_oid>
          <key>snmp.discovery.temp</key>
          <delay>15m</delay>
          <filter>
            <conditions>
              <condition>
                <macro>{#SENSOR_TEMP}</macro>
                <value>^\d\d</value>
                <formulaid>A</formulaid>
              </condition>
            </conditions>
          </filter>
          <item_prototypes>
            <item_prototype>
              <name>{#SENSOR} - Temperature</name>
              <type>SNMP_AGENT</type>
              <snmp_oid>1.3.6.1.4.1.231.2.10.2.2.10.5.1.1.6.1.{#SNMPINDEX}</snmp_oid>
              <key>sensor.temp.[{#SNMPINDEX}]</key>
              <delay>30s</delay>
              <value_type>FLOAT</value_type>
              <units>C</units>
              <application_prototypes>
                <application_prototype>
                  <name>Temperature</name>
                </application_prototype>
              </application_prototypes>
              <trigger_prototypes>
                <trigger_prototype>
                  <expression>{last()}>{#WARN_TEMP}</expression>
                  <name>{HOST.NAME} -> Temperature {#SENSOR}: {ITEM.LASTVALUE}, threshold: {#WARN_TEMP}</name>
                  <priority>HIGH</priority>
                  <manual_close>YES</manual_close>
                </trigger_prototype>
              </trigger_prototypes>
            </item_prototype>
          </item_prototypes>
        </discovery_rule>
        <discovery_rule>
          <name>Voltage</name>
          <type>SNMP_AGENT</type>
          <snmp_oid>discovery[{#VSENSOR},1.3.6.1.4.1.231.2.10.2.2.10.6.3.1.3.1, {#VOLTAGE}, 1.3.6.1.4.1.231.2.10.2.2.10.6.3.1.4.1]</snmp_oid>
          <key>snmp.discovery.vsensors</key>
          <delay>15m</delay>
          <item_prototypes>
            <item_prototype>
              <name>{#VSENSOR} - Status</name>
              <type>SNMP_AGENT</type>
              <snmp_oid>1.3.6.1.4.1.231.2.10.2.2.10.6.3.1.4.1.{#SNMPINDEX}</snmp_oid>
              <key>voltage.sensor.[{#SNMPINDEX}]</key>
              <delay>30s</delay>
              <application_prototypes>
                <application_prototype>
                  <name>Voltage</name>
                </application_prototype>
              </application_prototypes>
              <valuemap>
                <name>Fujitsu RX Voltage Status</name>
              </valuemap>
              <trigger_prototypes>
                <trigger_prototype>
                  <expression>{last()}&lt;>3 and {last()}&lt;>2</expression>
                  <name>{HOST.NAME} -> {#VSENSOR} status not ok</name>
                  <priority>HIGH</priority>
                  <manual_close>YES</manual_close>
                </trigger_prototype>
              </trigger_prototypes>
            </item_prototype>
          </item_prototypes>
        </discovery_rule>
      </discovery_rules>
      <macros>
        <macro>
          <macro>{$SNMP_TIMEOUT}</macro>
          <value>3m</value>
        </macro>
      </macros>
    </template>
    <template>
      <template>Template Module ICMP Ping</template>
      <name>Template Module ICMP Ping</name>
      <description>Template Module ICMP Ping version: 0.12</description>
      <groups>
        <group>
          <name>Templates/Modules</name>
        </group>
      </groups>
      <applications>
        <application>
          <name>Status</name>
        </application>
      </applications>
      <items>
        <item>
          <name>ICMP ping</name>
          <type>SIMPLE</type>
          <key>icmpping</key>
          <delay>60</delay>
          <history>1w</history>
          <applications>
            <application>
              <name>Status</name>
            </application>
          </applications>
          <valuemap>
            <name>Service state</name>
          </valuemap>
          <triggers>
            <trigger>
              <expression>{max(#3)}=0</expression>
              <name>Unavailable by ICMP ping</name>
              <priority>HIGH</priority>
              <description>Last value: {ITEM.LASTVALUE1}. Last three attempts returned timeout. Please check device connectivity.</description>
            </trigger>
          </triggers>
        </item>
        <item>
          <name>ICMP loss</name>
          <type>SIMPLE</type>
          <key>icmppingloss</key>
          <delay>60</delay>
          <history>1w</history>
          <value_type>FLOAT</value_type>
          <units>%</units>
          <applications>
            <application>
              <name>Status</name>
            </application>
          </applications>
          <triggers>
            <trigger>
              <expression>{min(5m)}>{$ICMP_LOSS_WARN} and {min(5m)}&lt;100</expression>
              <name>High ICMP ping loss</name>
              <priority>WARNING</priority>
              <dependencies>
                <dependency>
                  <name>Unavailable by ICMP ping</name>
                  <expression>{Template Module ICMP Ping:icmpping.max(#3)}=0</expression>
                </dependency>
              </dependencies>
            </trigger>
          </triggers>
        </item>
        <item>
          <name>ICMP response time</name>
          <type>SIMPLE</type>
          <key>icmppingsec</key>
          <delay>60</delay>
          <history>1w</history>
          <value_type>FLOAT</value_type>
          <units>s</units>
          <applications>
            <application>
              <name>Status</name>
            </application>
          </applications>
          <triggers>
            <trigger>
              <expression>{avg(5m)}>{$ICMP_RESPONSE_TIME_WARN}</expression>
              <name>High ICMP ping response time</name>
              <priority>WARNING</priority>
              <dependencies>
                <dependency>
                  <name>High ICMP ping loss</name>
                  <expression>{Template Module ICMP Ping:icmppingloss.min(5m)}>{$ICMP_LOSS_WARN} and {Template Module ICMP Ping:icmppingloss.min(5m)}&lt;100</expression>
                </dependency>
                <dependency>
                  <name>Unavailable by ICMP ping</name>
                  <expression>{Template Module ICMP Ping:icmpping.max(#3)}=0</expression>
                </dependency>
              </dependencies>
            </trigger>
          </triggers>
        </item>
      </items>
      <macros>
        <macro>
          <macro>{$ICMP_LOSS_WARN}</macro>
          <value>20</value>
        </macro>
        <macro>
          <macro>{$ICMP_RESPONSE_TIME_WARN}</macro>
          <value>0.15</value>
        </macro>
      </macros>
    </template>
  </templates>
  <value_maps>
    <value_map>
      <name>Fujitsu RX FAN Status</name>
      <mappings>
        <mapping>
          <value>1</value>
          <newvalue>unknown</newvalue>
        </mapping>
        <mapping>
          <value>2</value>
          <newvalue>disabled</newvalue>
        </mapping>
        <mapping>
          <value>3</value>
          <newvalue>ok</newvalue>
        </mapping>
        <mapping>
          <value>4</value>
          <newvalue>failed</newvalue>
        </mapping>
        <mapping>
          <value>5</value>
          <newvalue>prefailure-predicted</newvalue>
        </mapping>
        <mapping>
          <value>6</value>
          <newvalue>redundant-fan-failed</newvalue>
        </mapping>
        <mapping>
          <value>7</value>
          <newvalue>not-manageable</newvalue>
        </mapping>
        <mapping>
          <value>8</value>
          <newvalue>not-present</newvalue>
        </mapping>
      </mappings>
    </value_map>
    <value_map>
      <name>Fujitsu RX PSU Status</name>
      <mappings>
        <mapping>
          <value>1</value>
          <newvalue>unknown</newvalue>
        </mapping>
        <mapping>
          <value>2</value>
          <newvalue>not-present</newvalue>
        </mapping>
        <mapping>
          <value>3</value>
          <newvalue>ok</newvalue>
        </mapping>
        <mapping>
          <value>4</value>
          <newvalue>failed</newvalue>
        </mapping>
        <mapping>
          <value>5</value>
          <newvalue>ac-fail</newvalue>
        </mapping>
        <mapping>
          <value>6</value>
          <newvalue>dc-fail</newvalue>
        </mapping>
        <mapping>
          <value>7</value>
          <newvalue>critical-temperature</newvalue>
        </mapping>
        <mapping>
          <value>8</value>
          <newvalue>not-manageable</newvalue>
        </mapping>
        <mapping>
          <value>9</value>
          <newvalue>fan-failure-predicted</newvalue>
        </mapping>
        <mapping>
          <value>10</value>
          <newvalue>fan-failure</newvalue>
        </mapping>
        <mapping>
          <value>11</value>
          <newvalue>power-safe-mode</newvalue>
        </mapping>
        <mapping>
          <value>12</value>
          <newvalue>non-redundant-dc-fail</newvalue>
        </mapping>
        <mapping>
          <value>13</value>
          <newvalue>non-redundant-ac-fail</newvalue>
        </mapping>
      </mappings>
    </value_map>
    <value_map>
      <name>Fujitsu RX Voltage Status</name>
      <mappings>
        <mapping>
          <value>1</value>
          <newvalue>unknown</newvalue>
        </mapping>
        <mapping>
          <value>2</value>
          <newvalue>not-available</newvalue>
        </mapping>
        <mapping>
          <value>3</value>
          <newvalue>ok</newvalue>
        </mapping>
        <mapping>
          <value>4</value>
          <newvalue>too-low</newvalue>
        </mapping>
        <mapping>
          <value>5</value>
          <newvalue>too-high</newvalue>
        </mapping>
        <mapping>
          <value>6</value>
          <newvalue>out-of-range</newvalue>
        </mapping>
        <mapping>
          <value>7</value>
          <newvalue>warning</newvalue>
        </mapping>
      </mappings>
    </value_map>
    <value_map>
      <name>RX2540</name>
      <mappings>
        <mapping>
          <value>1</value>
          <newvalue>Ok</newvalue>
        </mapping>
        <mapping>
          <value>6</value>
          <newvalue>notPresent</newvalue>
        </mapping>
      </mappings>
    </value_map>
    <value_map>
      <name>Service state</name>
      <mappings>
        <mapping>
          <value>0</value>
          <newvalue>Down</newvalue>
        </mapping>
        <mapping>
          <value>1</value>
          <newvalue>Up</newvalue>
        </mapping>
      </mappings>
    </value_map>
    <value_map>
      <name>zabbix.host.available</name>
      <mappings>
        <mapping>
          <value>0</value>
          <newvalue>not available</newvalue>
        </mapping>
        <mapping>
          <value>1</value>
          <newvalue>available</newvalue>
        </mapping>
        <mapping>
          <value>2</value>
          <newvalue>unknown</newvalue>
        </mapping>
      </mappings>
    </value_map>
  </value_maps>
</zabbix_export>