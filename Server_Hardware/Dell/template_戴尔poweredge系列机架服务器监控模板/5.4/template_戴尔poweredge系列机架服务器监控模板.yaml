zabbix_export:
  version: '5.4'
  date: '2021-11-21T22:10:06Z'
  groups:
    -
      uuid: e960332b3f6c46a1956486d4f3f99fce
      name: 'Templates/Server hardware'
  templates:
    -
      uuid: 06521a9365c340ea8563a93810a8a3d0
      template: monitor_RackServer_Dell_PowerEdge
      name: 戴尔PowerEdge系列机架服务器监控模板
      description: |
        ## Overview
        
        戴尔PowerEdge系列机架服务器监控模板
        
        
        包括CPU、内存、电源、硬盘、风扇、整体状态
        
        
        将宏{$CLOUD\_SNMP\_COMMUNITY}替换为实际团体字即可
        
        
        
        ## Author
        
        zhangzhefeng
        
        
      groups:
        -
          name: 'Templates/Server hardware'
      items:
        -
          uuid: fa3d70020b204489ad98d517a27ecbfa
          name: 存储状态
          type: SNMP_AGENT
          snmp_oid: 1.3.6.1.4.1.674.10892.5.2.3.0
          key: GlobalStorageStatus
          delay: 10m
          history: 30d
          trends: 0d
          tags:
            -
              tag: Application
              value: 整体情况
          triggers:
            -
              uuid: 1ffe8a7a3ac34cad9197d4a32437bbd5
              expression: last(/monitor_RackServer_Dell_PowerEdge/GlobalStorageStatus)>4
              name: 存储异常
              priority: HIGH
              type: MULTIPLE
              manual_close: 'YES'
        -
          uuid: fbe783ea395a4820a1fae86f6c086fcb
          name: 系统健康状态
          type: SNMP_AGENT
          snmp_oid: 1.3.6.1.4.1.674.10892.5.2.1.0
          key: GlobalSystemStatus
          delay: 10m
          history: 30d
          trends: 0d
          tags:
            -
              tag: Application
              value: 整体情况
          triggers:
            -
              uuid: 0e6c0c88b0924bf2966dd936495e70ad
              expression: last(/monitor_RackServer_Dell_PowerEdge/GlobalSystemStatus)>4
              name: 系统异常
              priority: HIGH
              type: MULTIPLE
              manual_close: 'YES'
        -
          uuid: f6802e364f844c07adce2c911db73ef5
          name: ping丢包率
          type: SIMPLE
          key: 'icmppingloss[,10,,,]'
          delay: 5m
          history: 7d
          trends: 0d
          value_type: FLOAT
          units: '%'
          tags:
            -
              tag: Application
              value: ping检测
          triggers:
            -
              uuid: a650fa72d836412ca88acc68a05ec514
              expression: 'avg(/monitor_RackServer_Dell_PowerEdge/icmppingloss[,10,,,],10m)>{$ICMP_LOSS_WARN}'
              name: 'ICMP ping 丢包'
              priority: HIGH
              description: 'Last value: {ITEM.LASTVALUE1}.'
              type: MULTIPLE
              manual_close: 'YES'
              dependencies:
                -
                  name: 'ICMP ping不可达'
                  expression: 'last(/monitor_RackServer_Dell_PowerEdge/icmpping[,5,,,],#1)=0'
        -
          uuid: d957fa781a344943a843128fabd9f8f8
          name: ping时延
          type: SIMPLE
          key: 'icmppingsec[,10,,,,avg]'
          delay: 5m
          history: 7d
          trends: 0d
          value_type: FLOAT
          units: s
          tags:
            -
              tag: Application
              value: ping检测
          triggers:
            -
              uuid: 94ff592a298e475aaee2af6adf92a8cc
              expression: 'min(/monitor_RackServer_Dell_PowerEdge/icmppingsec[,10,,,,avg],10m)>{$ICMP_RESPONSE_TIME_WARN}'
              name: 'ICMP ping 时延高'
              priority: HIGH
              description: 'Last value: {ITEM.LASTVALUE1}.'
              type: MULTIPLE
              manual_close: 'YES'
              dependencies:
                -
                  name: 'ICMP ping不可达'
                  expression: 'last(/monitor_RackServer_Dell_PowerEdge/icmpping[,5,,,],#1)=0'
        -
          uuid: 3c2a86007159485b99907dcfa6258432
          name: 'ICMP ping'
          type: SIMPLE
          key: 'icmpping[,5,,,]'
          history: 7d
          trends: 0d
          tags:
            -
              tag: Application
              value: ping检测
          triggers:
            -
              uuid: 43719ac06fd548cbbed0452dcc8b75c5
              expression: 'last(/monitor_RackServer_Dell_PowerEdge/icmpping[,5,,,],#1)=0'
              name: 'ICMP ping不可达'
              priority: HIGH
              description: |
                Last value: {ITEM.LASTVALUE1}.
                Last 2 attempts returned timeout.  Please check device connectivity.
              type: MULTIPLE
              manual_close: 'YES'
            -
              uuid: 5bf9167b9b0f4aadb9ed38761edb26e6
              expression: 'last(/monitor_RackServer_Dell_PowerEdge/icmpping[,5,,,],#1)=0'
              name: 监控失效（ping不通）
              priority: INFO
              manual_close: 'YES'
              tags:
                -
                  tag: 监控失效原因
                  value: ping不通
        -
          uuid: e45dd2138dc24634bd8a687178182178
          name: 系统信息
          type: SNMP_AGENT
          snmp_oid: 1.3.6.1.2.1.1.1.0
          key: SystemDescription
          delay: 1h
          history: 3d
          trends: '0'
          value_type: TEXT
          tags:
            -
              tag: Application
              value: 系统信息
          triggers:
            -
              uuid: 13ab45e4076d43f983431d7696c9f2d7
              expression: 'nodata(/monitor_RackServer_Dell_PowerEdge/SystemDescription,12h)=1'
              name: 监控失效（snmp不通）
              priority: INFO
              manual_close: 'YES'
              tags:
                -
                  tag: 监控失效原因
                  value: snmp不通
        -
          uuid: 46255fee9bcb4b8ba3347cea809c3317
          name: LCD状态
          type: SNMP_AGENT
          snmp_oid: 1.3.6.1.4.1.674.10892.5.2.2.0
          key: SystemLCDStatus
          delay: 10m
          history: 30d
          trends: 0d
          tags:
            -
              tag: Application
              value: 整体情况
          triggers:
            -
              uuid: fa9529b063ff402292ac697431df5f93
              expression: last(/monitor_RackServer_Dell_PowerEdge/SystemLCDStatus)>4
              name: LCD异常
              priority: HIGH
              type: MULTIPLE
              manual_close: 'YES'
        -
          uuid: fcfa208de5e242939742802e6e39ce74
          name: 电源状态
          type: SNMP_AGENT
          snmp_oid: 1.3.6.1.4.1.674.10892.5.2.4.0
          key: SystemPowerStatus
          delay: 10m
          history: 30d
          trends: 0d
          tags:
            -
              tag: Application
              value: 整体情况
          triggers:
            -
              uuid: 027cacc904ea4ae49f6320c4f018d197
              expression: last(/monitor_RackServer_Dell_PowerEdge/SystemPowerStatus)>4
              name: 电源异常
              priority: HIGH
              type: MULTIPLE
              manual_close: 'YES'
        -
          uuid: d63854b62a1e4516a49dfa3c38afd6a0
          name: 运行时间
          type: SNMP_AGENT
          snmp_oid: 1.3.6.1.2.1.1.3.0
          key: SystemUpTime
          delay: 1h
          history: 3d
          trends: '0'
          value_type: TEXT
          tags:
            -
              tag: Application
              value: 系统信息
      discovery_rules:
        -
          uuid: 602a7ecf7d3e43678354831a0350d24b
          name: CPU发现
          type: SNMP_AGENT
          snmp_oid: 'discovery[{#CPUNAME},1.3.6.1.4.1.674.10892.5.4.1100.32.1.7]'
          key: CPUDiscovery
          delay: 1d
          lifetime: 0d
          item_prototypes:
            -
              uuid: 0a8bfc64a4b84035a519521558779bd5
              name: 'CPU状态 [{#CPUNAME}]'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.4.1.674.10892.5.4.1100.32.1.5.{#SNMPINDEX}'
              key: 'CPUStatus.[{#SNMPINDEX}]'
              delay: 1h
              history: 7d
              trends: 0d
              tags:
                -
                  tag: Application
                  value: CPU情况
              trigger_prototypes:
                -
                  uuid: 5cb6a166b58d4eec9cecd57324ed1b54
                  expression: 'last(/monitor_RackServer_Dell_PowerEdge/CPUStatus.[{#SNMPINDEX}])>3'
                  name: CPU异常
                  priority: HIGH
                  type: MULTIPLE
                  manual_close: 'YES'
        -
          uuid: 7bf818bf6bbc423ab03afe982c80ab57
          name: 风扇发现
          type: SNMP_AGENT
          snmp_oid: 'discovery[{#FANNAME},1.3.6.1.4.1.674.10892.5.4.700.12.1.8.1]'
          key: FanDiscovery
          delay: 1d
          lifetime: 0d
          item_prototypes:
            -
              uuid: bcca0560388c44eea2d5018c55df8c2f
              name: '风扇状态 {#FANNAME}'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.4.1.674.10892.5.4.700.12.1.5.1.{#SNMPINDEX}'
              key: 'FanStatus.[{#SNMPINDEX}]'
              delay: 1h
              history: 7d
              trends: 0d
              tags:
                -
                  tag: Application
                  value: 风扇情况
              trigger_prototypes:
                -
                  uuid: 2915360159fb46e1af3d8dfc15f516bb
                  expression: 'last(/monitor_RackServer_Dell_PowerEdge/FanStatus.[{#SNMPINDEX}])>3'
                  name: 风扇异常
                  priority: HIGH
                  type: MULTIPLE
                  manual_close: 'YES'
        -
          uuid: db53cead06954abeba13498f68a79197
          name: 内存发现
          type: SNMP_AGENT
          snmp_oid: 'discovery[{#MEMORYNAME},1.3.6.1.4.1.674.10892.5.4.1100.50.1.8]'
          key: MemoryDiscovery
          delay: 1d
          lifetime: 0d
          item_prototypes:
            -
              uuid: 05c62c2bd51d483cb95593f1ce4f80fd
              name: '内存状态 {#MEMORYNAME}'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.4.1.674.10892.5.4.1100.50.1.5.{#SNMPINDEX}'
              key: 'MemoryStatus.[{#SNMPINDEX}]'
              delay: 1h
              history: 7d
              trends: 0d
              tags:
                -
                  tag: Application
                  value: 内存情况
              trigger_prototypes:
                -
                  uuid: 9e844ece3f2e49eea4e184a144509ec5
                  expression: 'last(/monitor_RackServer_Dell_PowerEdge/MemoryStatus.[{#SNMPINDEX}])>3'
                  name: 内存异常
                  priority: HIGH
                  type: MULTIPLE
                  manual_close: 'YES'
      macros:
        -
          macro: '{$CLOUD_SNMP_COMMUNITY}'
          value: public
        -
          macro: '{$ICMP_LOSS_WARN}'
          value: '30'
        -
          macro: '{$ICMP_RESPONSE_TIME_WARN}'
          value: '0.1'
