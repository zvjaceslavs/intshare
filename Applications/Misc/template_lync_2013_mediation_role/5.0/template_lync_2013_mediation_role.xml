<?xml version="1.0" encoding="UTF-8"?>
<zabbix_export>
  <version>5.0</version>
  <date>2021-10-26T04:40:57Z</date>
  <groups>
    <group>
      <name>Templates</name>
    </group>
  </groups>
  <templates>
    <template>
      <template>App Skype for business Mediation Role</template>
      <name>App Skype for business Mediation Role</name>
      <description>This template assesses the status and overall health of services as well as the performance of the Mediation Microsoft Skype for Business Server 2015. Note: You need to set thresholds for these counters according to your environment. It is recommended to monitor these counters for some period of time to understand potential value ranges and then set the thresholds accordingly. This documentation is based on: https://technet.microsoft.com/en-us/library/gg398616.aspx.</description>
      <groups>
        <group>
          <name>Templates</name>
        </group>
      </groups>
      <applications>
        <application>
          <name>Logs</name>
        </application>
        <application>
          <name>Lync performance</name>
        </application>
        <application>
          <name>Services</name>
        </application>
      </applications>
      <items>
        <item>
          <name>CDR adapter problem</name>
          <type>ZABBIX_ACTIVE</type>
          <key>eventlog["Lync Server",,,,56207]</key>
          <delay>180</delay>
          <history>7d</history>
          <trends>0</trends>
          <value_type>LOG</value_type>
          <applications>
            <application>
              <name>Logs</name>
            </application>
          </applications>
        </item>
        <item>
          <name>Global Counters: Current audio channels with PSM quality reporting</name>
          <key>perf_counter["\LS:MediationServer - Global Counters\- Current audio channels with PSM quality reporting"]</key>
          <delay>60</delay>
          <description>This component monitor returns the total number of active channels that are having Phase Shift Modulation (PSM) quality reported. Calculating PSM quality has a processing overhead so this should be taken into account when measuring performance.</description>
          <applications>
            <application>
              <name>Lync performance</name>
            </application>
          </applications>
        </item>
        <item>
          <name>Total failed calls caused by unexpected interaction from the Proxy</name>
          <key>perf_counter["\LS:MediationServer - Global Counters\- Total failed calls caused by unexpected interaction from the Proxy"]</key>
          <delay>60</delay>
          <description>This component monitor returns the number of calls that failed because of an unexpected response from the Front End Server. The returned value should be as low as possible.</description>
          <applications>
            <application>
              <name>Lync performance</name>
            </application>
          </applications>
          <preprocessing>
            <step>
              <type>CHANGE_PER_SECOND</type>
              <params></params>
            </step>
          </preprocessing>
          <triggers>
            <trigger>
              <expression>{last(0)}>10</expression>
              <name>Call failed caused by unexpected interaction from a proxy</name>
              <priority>WARNING</priority>
            </trigger>
          </triggers>
        </item>
        <item>
          <name>Total failed calls caused by unexpected interaction from a gateway</name>
          <key>perf_counter["\LS:MediationServer - Global Per Gateway Counters(_Total)\- Total failed calls caused by unexpected interaction from a gateway"]</key>
          <delay>60</delay>
          <description>This component monitor returns the number of calls that failed because of an unexpected response from a gateway peer. The returned value should be as low as possible.</description>
          <applications>
            <application>
              <name>Lync performance</name>
            </application>
          </applications>
          <preprocessing>
            <step>
              <type>CHANGE_PER_SECOND</type>
              <params></params>
            </step>
          </preprocessing>
          <triggers>
            <trigger>
              <expression>{last(0)}>10</expression>
              <name>Call failed caused by unexpected interaction from a gateway</name>
              <priority>WARNING</priority>
            </trigger>
          </triggers>
        </item>
        <item>
          <name>Health Indices: Load Call Failure Index</name>
          <key>perf_counter["\LS:MediationServer - Health Indices\- Load Call Failure Index"]</key>
          <delay>60</delay>
          <description>This component monitor returns the scaled index between zero and 100 that is related to all call failures due to Global Health Index as a heavy load.</description>
          <applications>
            <application>
              <name>Lync performance</name>
            </application>
          </applications>
          <triggers>
            <trigger>
              <expression>{last()}>0</expression>
              <name>Lync load call failure index too high</name>
              <priority>WARNING</priority>
            </trigger>
          </triggers>
        </item>
        <item>
          <name>Inbound Calls: Active media bypass calls</name>
          <key>perf_counter["\LS:MediationServer - Inbound Calls(_total)\- Active media bypass calls"]</key>
          <delay>60</delay>
          <description>This component monitor returns the number of media bypass calls in progress.</description>
          <applications>
            <application>
              <name>Lync performance</name>
            </application>
          </applications>
        </item>
        <item>
          <name>Inbound Calls: Current</name>
          <key>perf_counter["\LS:MediationServer - Inbound Calls(_total)\- current"]</key>
          <delay>60</delay>
          <description>This component monitor returns the number of inbound calls in progress.</description>
          <applications>
            <application>
              <name>Lync performance</name>
            </application>
          </applications>
        </item>
        <item>
          <name>Media Relay: Media Connectivity Check Failure</name>
          <key>perf_counter["\LS:MediationServer - Media Relay\- Media Connectivity Check Failure"]</key>
          <delay>60</delay>
          <description>This component monitor returns the number of calls where media connectivity between the Mediation Server and the remote endpoints could not be established. The returned value should be as low as possible.</description>
          <applications>
            <application>
              <name>Lync performance</name>
            </application>
          </applications>
          <triggers>
            <trigger>
              <expression>{last()}>0</expression>
              <name>Lync media connectiviti check failures too high</name>
              <priority>WARNING</priority>
            </trigger>
          </triggers>
        </item>
        <item>
          <name>Outbound Calls: Active media bypass calls</name>
          <key>perf_counter["\LS:MediationServer - Outbound Calls(_total)\- Active media bypass calls"]</key>
          <delay>60</delay>
          <description>This component monitor returns the total number of active calls going through Mediation Server that are in Media Bypass mode. Calls using Media Bypass use significantly fewer Mediation Server resources because the media is not flowing through the Mediation Server.</description>
          <applications>
            <application>
              <name>Lync performance</name>
            </application>
          </applications>
        </item>
        <item>
          <name>Outbound Calls: Current</name>
          <key>perf_counter["\LS:MediationServer - Outbound Calls(_total)\- current"]</key>
          <delay>60</delay>
          <description>This component monitor returns the total number of active calls going through the Mediation Server.</description>
          <applications>
            <application>
              <name>Lync performance</name>
            </application>
          </applications>
        </item>
        <item>
          <name>Service: Lync Server Mediation</name>
          <key>service.info["Lync Server Mediation", state]</key>
          <delay>300</delay>
          <applications>
            <application>
              <name>Services</name>
            </application>
          </applications>
          <valuemap>
            <name>Windows service state</name>
          </valuemap>
          <triggers>
            <trigger>
              <expression>{last()}&lt;>0</expression>
              <name>Lync Server Mediation service stopped</name>
              <priority>AVERAGE</priority>
            </trigger>
          </triggers>
        </item>
        <item>
          <name>Service: Lync Server Replica Replicator Agent</name>
          <key>service.info["Lync Server Replica Replicator Agent", state]</key>
          <delay>300</delay>
          <applications>
            <application>
              <name>Services</name>
            </application>
          </applications>
          <valuemap>
            <name>Windows service state</name>
          </valuemap>
          <triggers>
            <trigger>
              <expression>{last()}&lt;>0</expression>
              <name>Lync Server Replica Replicator Agent service stopped</name>
              <priority>AVERAGE</priority>
            </trigger>
          </triggers>
        </item>
      </items>
    </template>
  </templates>
  <graphs>
    <graph>
      <name>Lync mediation server call statistics</name>
      <graph_items>
        <graph_item>
          <color>1A7C11</color>
          <item>
            <host>App Skype for business Mediation Role</host>
            <key>perf_counter["\LS:MediationServer - Inbound Calls(_total)\- Active media bypass calls"]</key>
          </item>
        </graph_item>
        <graph_item>
          <sortorder>1</sortorder>
          <color>F63100</color>
          <item>
            <host>App Skype for business Mediation Role</host>
            <key>perf_counter["\LS:MediationServer - Inbound Calls(_total)\- current"]</key>
          </item>
        </graph_item>
        <graph_item>
          <sortorder>2</sortorder>
          <color>2774A4</color>
          <item>
            <host>App Skype for business Mediation Role</host>
            <key>perf_counter["\LS:MediationServer - Outbound Calls(_total)\- Active media bypass calls"]</key>
          </item>
        </graph_item>
        <graph_item>
          <sortorder>3</sortorder>
          <color>A54F10</color>
          <item>
            <host>App Skype for business Mediation Role</host>
            <key>perf_counter["\LS:MediationServer - Outbound Calls(_total)\- current"]</key>
          </item>
        </graph_item>
      </graph_items>
    </graph>
  </graphs>
  <value_maps>
    <value_map>
      <name>Windows service state</name>
      <mappings>
        <mapping>
          <value>0</value>
          <newvalue>Running</newvalue>
        </mapping>
        <mapping>
          <value>1</value>
          <newvalue>Paused</newvalue>
        </mapping>
        <mapping>
          <value>2</value>
          <newvalue>Start pending</newvalue>
        </mapping>
        <mapping>
          <value>3</value>
          <newvalue>Pause pending</newvalue>
        </mapping>
        <mapping>
          <value>4</value>
          <newvalue>Continue pending</newvalue>
        </mapping>
        <mapping>
          <value>5</value>
          <newvalue>Stop pending</newvalue>
        </mapping>
        <mapping>
          <value>6</value>
          <newvalue>Stopped</newvalue>
        </mapping>
        <mapping>
          <value>7</value>
          <newvalue>Unknown</newvalue>
        </mapping>
        <mapping>
          <value>255</value>
          <newvalue>No such service</newvalue>
        </mapping>
      </mappings>
    </value_map>
  </value_maps>
</zabbix_export>