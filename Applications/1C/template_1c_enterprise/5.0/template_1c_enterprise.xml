<?xml version="1.0" encoding="UTF-8"?>
<zabbix_export>
  <version>5.0</version>
  <date>2021-11-09T08:24:41Z</date>
  <groups>
    <group>
      <name>Templates/Applications</name>
    </group>
  </groups>
  <templates>
    <template>
      <template>1C Enterprise</template>
      <name>1C Enterprise</name>
      <description>## Overview **Zabbix 1C Enterprise** Monitor sessions number for each base in cluster and for each cluster. Items names include base name and cluster name. Using LLD for base discovery Suggestions are welcome. UPD Added items for monitoring UPD2 Added converted to exe Python scripts, so you don't need install Python interpreter, but you need be very fearless to use exe files from Internet :)</description>
      <groups>
        <group>
          <name>Templates/Applications</name>
        </group>
      </groups>
      <applications>
        <application>
          <name>1C Enterprise</name>
        </application>
      </applications>
      <discovery_rules>
        <discovery_rule>
          <name>Infobases</name>
          <key>1cEnt.infobases</key>
          <delay>2m</delay>
          <lifetime>5d</lifetime>
          <item_prototypes>
            <item_prototype>
              <name>Background jobs in {#NAME}, cluster {#CLUSTER_NAME}</name>
              <type>DEPENDENT</type>
              <key>1cEnt.sessions.bjobs[{#INFOBASE}, {#CLUSTER}]</key>
              <delay>0</delay>
              <history>30d</history>
              <applications>
                <application>
                  <name>1C Enterprise</name>
                </application>
              </applications>
              <preprocessing>
                <step>
                  <type>JSONPATH</type>
                  <params>$.BackgroundJob</params>
                </step>
              </preprocessing>
              <master_item>
                <key>1cEnt.sessions[{#INFOBASE},{#CLUSTER}]</key>
              </master_item>
            </item_prototype>
            <item_prototype>
              <name>Blocked objects by DBMS in {#NAME}, cluster {#CLUSTER_NAME}</name>
              <type>DEPENDENT</type>
              <key>1cEnt.sessions.blocked-by-dbms[{#INFOBASE}, {#CLUSTER}]</key>
              <delay>0</delay>
              <history>30d</history>
              <status>DISABLED</status>
              <applications>
                <application>
                  <name>1C Enterprise</name>
                </application>
              </applications>
              <preprocessing>
                <step>
                  <type>JSONPATH</type>
                  <params>$.blockedByDBMS</params>
                </step>
              </preprocessing>
              <master_item>
                <key>1cEnt.sessions[{#INFOBASE},{#CLUSTER}]</key>
              </master_item>
            </item_prototype>
            <item_prototype>
              <name>Data in {#NAME}, cluster {#CLUSTER_NAME}</name>
              <type>DEPENDENT</type>
              <key>1cEnt.sessions.bytes-all[{#INFOBASE}, {#CLUSTER}]</key>
              <delay>0</delay>
              <history>30d</history>
              <status>DISABLED</status>
              <units>B</units>
              <applications>
                <application>
                  <name>1C Enterprise</name>
                </application>
              </applications>
              <preprocessing>
                <step>
                  <type>JSONPATH</type>
                  <params>$.bytesAll</params>
                </step>
                <step>
                  <type>SIMPLE_CHANGE</type>
                  <params></params>
                </step>
              </preprocessing>
              <master_item>
                <key>1cEnt.sessions[{#INFOBASE},{#CLUSTER}]</key>
              </master_item>
            </item_prototype>
            <item_prototype>
              <name>COM connections in {#NAME}, cluster {#CLUSTER_NAME}</name>
              <type>DEPENDENT</type>
              <key>1cEnt.sessions.comconn[{#INFOBASE}, {#CLUSTER}]</key>
              <delay>0</delay>
              <history>30d</history>
              <applications>
                <application>
                  <name>1C Enterprise</name>
                </application>
              </applications>
              <preprocessing>
                <step>
                  <type>JSONPATH</type>
                  <params>$.COMConnection</params>
                </step>
              </preprocessing>
              <master_item>
                <key>1cEnt.sessions[{#INFOBASE},{#CLUSTER}]</key>
              </master_item>
            </item_prototype>
            <item_prototype>
              <name>Block duration in {#NAME}, cluster {#CLUSTER_NAME}</name>
              <type>DEPENDENT</type>
              <key>1cEnt.sessions.db-proc-took[{#INFOBASE}, {#CLUSTER}]</key>
              <delay>0</delay>
              <history>30d</history>
              <units>ms</units>
              <applications>
                <application>
                  <name>1C Enterprise</name>
                </application>
              </applications>
              <preprocessing>
                <step>
                  <type>JSONPATH</type>
                  <params>$.dbProcTook</params>
                </step>
              </preprocessing>
              <master_item>
                <key>1cEnt.sessions[{#INFOBASE},{#CLUSTER}]</key>
              </master_item>
            </item_prototype>
            <item_prototype>
              <name>Designer clients in {#NAME}, cluster {#CLUSTER_NAME}</name>
              <type>DEPENDENT</type>
              <key>1cEnt.sessions.designers[{#INFOBASE}, {#CLUSTER}]</key>
              <delay>0</delay>
              <history>30d</history>
              <applications>
                <application>
                  <name>1C Enterprise</name>
                </application>
              </applications>
              <preprocessing>
                <step>
                  <type>JSONPATH</type>
                  <params>$.Designer</params>
                </step>
              </preprocessing>
              <master_item>
                <key>1cEnt.sessions[{#INFOBASE},{#CLUSTER}]</key>
              </master_item>
            </item_prototype>
            <item_prototype>
              <name>Thick clients in {#NAME}, cluster {#CLUSTER_NAME}</name>
              <type>DEPENDENT</type>
              <key>1cEnt.sessions.thickClient[{#INFOBASE}, {#CLUSTER}]</key>
              <delay>0</delay>
              <history>30d</history>
              <applications>
                <application>
                  <name>1C Enterprise</name>
                </application>
              </applications>
              <preprocessing>
                <step>
                  <type>JSONPATH</type>
                  <params>$.1CV8</params>
                </step>
              </preprocessing>
              <master_item>
                <key>1cEnt.sessions[{#INFOBASE},{#CLUSTER}]</key>
              </master_item>
            </item_prototype>
            <item_prototype>
              <name>Thin clients in {#NAME}, cluster {#CLUSTER_NAME}</name>
              <type>DEPENDENT</type>
              <key>1cEnt.sessions.thinClient[{#INFOBASE}, {#CLUSTER}]</key>
              <delay>0</delay>
              <history>30d</history>
              <applications>
                <application>
                  <name>1C Enterprise</name>
                </application>
              </applications>
              <preprocessing>
                <step>
                  <type>JSONPATH</type>
                  <params>$.1CV8C</params>
                </step>
              </preprocessing>
              <master_item>
                <key>1cEnt.sessions[{#INFOBASE},{#CLUSTER}]</key>
              </master_item>
            </item_prototype>
            <item_prototype>
              <name>Total sessions in {#NAME}, cluster {#CLUSTER_NAME}</name>
              <type>CALCULATED</type>
              <key>1cEnt.sessions.totalSessions[{#INFOBASE}, {#CLUSTER}]</key>
              <delay>5m</delay>
              <history>30d</history>
              <params>last("1cEnt.sessions.designers[{#INFOBASE}, {#CLUSTER}]") + last("1cEnt.sessions.bjobs[{#INFOBASE}, {#CLUSTER}]") + last("1cEnt.sessions.comconn[{#INFOBASE}, {#CLUSTER}]") + last("1cEnt.sessions.thickClient[{#INFOBASE}, {#CLUSTER}]") + last("1cEnt.sessions.thinClient[{#INFOBASE}, {#CLUSTER}]") + last("1cEnt.sessions.webclients[{#INFOBASE}, {#CLUSTER}]")</params>
              <applications>
                <application>
                  <name>1C Enterprise</name>
                </application>
              </applications>
            </item_prototype>
            <item_prototype>
              <name>Web clients in {#NAME}, {#CLUSTER_NAME}</name>
              <type>DEPENDENT</type>
              <key>1cEnt.sessions.webclients[{#INFOBASE}, {#CLUSTER}]</key>
              <delay>0</delay>
              <history>30d</history>
              <applications>
                <application>
                  <name>1C Enterprise</name>
                </application>
              </applications>
              <preprocessing>
                <step>
                  <type>JSONPATH</type>
                  <params>$.WebClient</params>
                </step>
              </preprocessing>
              <master_item>
                <key>1cEnt.sessions[{#INFOBASE},{#CLUSTER}]</key>
              </master_item>
            </item_prototype>
            <item_prototype>
              <name>Infobase sessions {#NAME}, cluster {#CLUSTER_NAME}</name>
              <key>1cEnt.sessions[{#INFOBASE},{#CLUSTER}]</key>
              <delay>5m</delay>
              <trends>0</trends>
              <value_type>CHAR</value_type>
              <applications>
                <application>
                  <name>1C Enterprise</name>
                </application>
              </applications>
              <request_method>POST</request_method>
            </item_prototype>
          </item_prototypes>
          <graph_prototypes>
            <graph_prototype>
              <name>Infobase data {#NAME}, cluster {#CLUSTER_NAME}</name>
              <graph_items>
                <graph_item>
                  <color>FF0000</color>
                  <item>
                    <host>1C Enterprise</host>
                    <key>1cEnt.sessions.db-proc-took[{#INFOBASE}, {#CLUSTER}]</key>
                  </item>
                </graph_item>
                <graph_item>
                  <sortorder>1</sortorder>
                  <color>FF8000</color>
                  <item>
                    <host>1C Enterprise</host>
                    <key>1cEnt.sessions.blocked-by-dbms[{#INFOBASE}, {#CLUSTER}]</key>
                  </item>
                </graph_item>
                <graph_item>
                  <sortorder>2</sortorder>
                  <drawtype>GRADIENT_LINE</drawtype>
                  <color>0040FF</color>
                  <yaxisside>RIGHT</yaxisside>
                  <item>
                    <host>1C Enterprise</host>
                    <key>1cEnt.sessions.bytes-all[{#INFOBASE}, {#CLUSTER}]</key>
                  </item>
                </graph_item>
              </graph_items>
            </graph_prototype>
            <graph_prototype>
              <name>Infobase sessions {#NAME}, cluster {#CLUSTER_NAME}</name>
              <type>STACKED</type>
              <graph_items>
                <graph_item>
                  <color>FF0000</color>
                  <item>
                    <host>1C Enterprise</host>
                    <key>1cEnt.sessions.designers[{#INFOBASE}, {#CLUSTER}]</key>
                  </item>
                </graph_item>
                <graph_item>
                  <sortorder>1</sortorder>
                  <color>0040FF</color>
                  <item>
                    <host>1C Enterprise</host>
                    <key>1cEnt.sessions.thickClient[{#INFOBASE}, {#CLUSTER}]</key>
                  </item>
                </graph_item>
                <graph_item>
                  <sortorder>2</sortorder>
                  <color>00FF00</color>
                  <item>
                    <host>1C Enterprise</host>
                    <key>1cEnt.sessions.thinClient[{#INFOBASE}, {#CLUSTER}]</key>
                  </item>
                </graph_item>
                <graph_item>
                  <sortorder>3</sortorder>
                  <color>FF8000</color>
                  <item>
                    <host>1C Enterprise</host>
                    <key>1cEnt.sessions.comconn[{#INFOBASE}, {#CLUSTER}]</key>
                  </item>
                </graph_item>
                <graph_item>
                  <sortorder>4</sortorder>
                  <color>FFFF00</color>
                  <item>
                    <host>1C Enterprise</host>
                    <key>1cEnt.sessions.bjobs[{#INFOBASE}, {#CLUSTER}]</key>
                  </item>
                </graph_item>
                <graph_item>
                  <sortorder>5</sortorder>
                  <color>BA2A5D</color>
                  <item>
                    <host>1C Enterprise</host>
                    <key>1cEnt.sessions.webclients[{#INFOBASE}, {#CLUSTER}]</key>
                  </item>
                </graph_item>
                <graph_item>
                  <sortorder>6</sortorder>
                  <color>00FFFF</color>
                  <yaxisside>RIGHT</yaxisside>
                  <item>
                    <host>1C Enterprise</host>
                    <key>1cEnt.sessions.db-proc-took[{#INFOBASE}, {#CLUSTER}]</key>
                  </item>
                </graph_item>
              </graph_items>
            </graph_prototype>
          </graph_prototypes>
          <request_method>POST</request_method>
        </discovery_rule>
      </discovery_rules>
    </template>
  </templates>
</zabbix_export>