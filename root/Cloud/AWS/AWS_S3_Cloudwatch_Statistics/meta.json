{"link_name": "AWS S3 Cloudwatch Statistics", "type": "Template", "OS": "", "vendor": "Generic", "minZabbVer": "3.4.x", "link_desc": "<p><a href=\"https://github.com/DRN88/zabbix-playground/tree/master/zabbix-aws-s3-discovery\" target=\"_blank\">https://github.com/DRN88/zabbix-playground/tree/master/zabbix-aws-s3-discovery</a></p>\n<h2><strong>1. About</strong></h2>\n<p>Automatically discovers your buckets in AWS S3. </p>\n<p>Pulls 3 data:</p>\n<ul>\n<li>StandardStorage type bucket size</li>\n<li>StandardIAStorage type bucket size</li>\n<li>Number of objects in buckets</li>\n</ul>\n<p>Works on CentOS 7 and Zabbix v3.4.7.  <br />Pulls Cloudwatch metrics regarding to your buckets. Size and Number of objects.  <br />Look through the scripts first. Adjust them to your needs.  <br />Used commands: aws jq sed bc date  </p>\n<h2><strong>2. Install and Configure</strong></h2>\n<ol>\n<li>Create new AWS IAM Account for your zabbix server. Set up permissions (explained down below).<br /> 1.1. Get access and secret key<br /> 1.2. Set up IAM Policy permissions</li>\n<li>Drop all 3 scripts from <code>externalscripts</code> folder to your zabbix server <code>externalscripts</code> folder.<br /> 2.1 Check /etc/zabbix/zabbix_server.conf if in doubt about the location of that folder.</li>\n<li>Change zabbix user shell: <code>usermod -s /bin/bash zabbix</code></li>\n<li>Install awscli and required packages: <code>yum -y install awscli jq</code></li>\n<li>Configure aws cli with the credentials what you created in IAM. <strong>use json</strong> as output format!<br /> 5.1 To configure aws cli run: <code>aws configure</code></li>\n<li>Manually run and test the scripts</li>\n<li>Import the template: <code>templates\\template-aws-s3-bucket-metrics.xml</code></li>\n<li>Create a phantom host and apply the template<br /> 8.1 You might want to decrease the template discovery <code>Update interval</code> to get the metrics faster.<br /> 8.2 Same for the items prototypes</li>\n</ol>", "features": "Low Level Discovery (LLD)|Custom Script", "address": "", "city": "", "state": "", "country": "", "postcode": "", "telephone": "", "fax": "", "email": "", "website": "https://github.com/DRN88/zabbix-playground/tree/master/zabbix-aws-s3-discovery", "price": 0, "link_hits": 13172, "link_votes": null, "link_rating": 0, "link_featured": null, "link_created": "2018-03-19 10:06:37", "link_modified": "2018-03-19 10:24:31", "link_visited": 1625, "publish_up": "2018-03-19 10:06:37", "publish_down": "0000-00-00 00:00:00", "metakey": "", "metadesc": "", "1.8": "", "2.0": "", "2.2": "", "2.4": "", "3.0": "", "3.2": "", "3.4": "", "4.0": "", "4.2": "", "4.4": "", "5.0": "", "5.2": "", "tags": "aws, s3, cloudwatch", "author": "drn88", "user_id": 5356, "link_id": 1133, "cat_id": "405", "internal_notes": "", "lat": 0, "lng": 0, "zoom": ""}