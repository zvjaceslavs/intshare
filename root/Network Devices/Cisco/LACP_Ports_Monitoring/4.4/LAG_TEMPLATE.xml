<?xml version="1.0" encoding="UTF-8"?>
<zabbix_export>
    <version>4.4</version>
    <date>2021-04-20T05:39:17Z</date>
    <groups>
        <group>
            <name>Templates_Cisco</name>
        </group>
    </groups>
    <templates>
        <template>
            <template>Template_Cisco_LAG</template>
            <name>Template_Cisco_LAG</name>
            <groups>
                <group>
                    <name>Templates_Cisco</name>
                </group>
            </groups>
            <applications>
                <application>
                    <name>Health</name>
                </application>
                <application>
                    <name>Resources</name>
                </application>
            </applications>
            <discovery_rules>
                <discovery_rule>
                    <name>dot3adAggPorts</name>
                    <type>SNMPV2</type>
                    <snmp_community>{$SNMP_COMMUNITY}</snmp_community>
                    <snmp_oid>discovery[{#SNMPVALUE},dot3adAggPortActorOperKey,{#IFALIAS},ifAlias,{#IFNAME},ifName]</snmp_oid>
                    <key>dot3adAggPorts</key>
                    <delay>1h</delay>
                    <port>161</port>
                    <filter>
                        <conditions>
                            <condition>
                                <macro>{#SNMPVALUE}</macro>
                                <value>[1-9]+</value>
                                <formulaid>A</formulaid>
                            </condition>
                        </conditions>
                    </filter>
                    <lifetime>1d</lifetime>
                    <item_prototypes>
                        <item_prototype>
                            <name>{#IFNAME} InErrors</name>
                            <type>SNMPV2</type>
                            <snmp_community>{$SNMP_COMMUNITY}</snmp_community>
                            <snmp_oid>ifInErrors.{#SNMPINDEX}</snmp_oid>
                            <key>if.in.errors.[{#SNMPINDEX}]</key>
                            <delay>2m</delay>
                            <units>pps</units>
                            <port>161</port>
                            <applications>
                                <application>
                                    <name>Health</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>CHANGE_PER_SECOND</type>
                                    <params/>
                                </step>
                            </preprocessing>
                        </item_prototype>
                        <item_prototype>
                            <name>Po{#SNMPVALUE}|{#IFNAME} LAG Status</name>
                            <type>SNMPV2</type>
                            <snmp_community>{$SNMP_COMMUNITY}</snmp_community>
                            <snmp_oid>dot3adAggPortActorOperState.{#SNMPINDEX}</snmp_oid>
                            <key>if.lag.status.[{#SNMPINDEX}]</key>
                            <delay>2m</delay>
                            <trends>0</trends>
                            <value_type>TEXT</value_type>
                            <port>161</port>
                            <description>{#IFALIAS}</description>
                            <applications>
                                <application>
                                    <name>Health</name>
                                </application>
                            </applications>
                            <trigger_prototypes>
                                <trigger_prototype>
                                    <expression>({str(BC)}=0 and {str(FC)}=0)</expression>
                                    <name>{HOST.NAME} Port-channel{#SNMPVALUE} bundle problem</name>
                                    <priority>AVERAGE</priority>
                                    <description>Interface {#IFNAME} a member of Port-channel{#SNMPVALUE} have some problems.&#13;
Description {#IFALIAS}</description>
                                </trigger_prototype>
                            </trigger_prototypes>
                        </item_prototype>
                        <item_prototype>
                            <name>{#IFNAME} OutErrors</name>
                            <type>SNMPV2</type>
                            <snmp_community>{$SNMP_COMMUNITY}</snmp_community>
                            <snmp_oid>ifOutErrors.{#SNMPINDEX}</snmp_oid>
                            <key>if.out.errors.[{#SNMPINDEX}]</key>
                            <delay>2m</delay>
                            <units>pps</units>
                            <port>161</port>
                            <applications>
                                <application>
                                    <name>Health</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>CHANGE_PER_SECOND</type>
                                    <params/>
                                </step>
                            </preprocessing>
                        </item_prototype>
                    </item_prototypes>
                    <trigger_prototypes>
                        <trigger_prototype>
                            <expression>{Template_Cisco_LAG:if.in.errors.[{#SNMPINDEX}].change()}&gt;1 or {Template_Cisco_LAG:if.out.errors.[{#SNMPINDEX}].change()}&gt;1</expression>
                            <name>{HOST.NAME} {#IFNAME} Errors increased</name>
                            <priority>WARNING</priority>
                            <description>Pay attention on line quality</description>
                        </trigger_prototype>
                    </trigger_prototypes>
                    <graph_prototypes>
                        <graph_prototype>
                            <name>{#IFNAME} Problems</name>
                            <graph_items>
                                <graph_item>
                                    <sortorder>1</sortorder>
                                    <color>F63100</color>
                                    <yaxisside>RIGHT</yaxisside>
                                    <item>
                                        <host>Template_Cisco_LAG</host>
                                        <key>if.in.errors.[{#SNMPINDEX}]</key>
                                    </item>
                                </graph_item>
                                <graph_item>
                                    <sortorder>5</sortorder>
                                    <color>6C59DC</color>
                                    <yaxisside>RIGHT</yaxisside>
                                    <item>
                                        <host>Template_Cisco_LAG</host>
                                        <key>if.out.errors.[{#SNMPINDEX}]</key>
                                    </item>
                                </graph_item>
                            </graph_items>
                        </graph_prototype>
                    </graph_prototypes>
                </discovery_rule>
                <discovery_rule>
                    <name>Port-channels</name>
                    <type>SNMPV2</type>
                    <snmp_community>{$SNMP_COMMUNITY}</snmp_community>
                    <snmp_oid>discovery[{#POINDEX},dot3adAggActorOperKey]</snmp_oid>
                    <key>Port-channels</key>
                    <delay>1h</delay>
                    <port>161</port>
                    <lifetime>1d</lifetime>
                    <item_prototypes>
                        <item_prototype>
                            <name>Po{#POINDEX} InOctets</name>
                            <type>SNMPV2</type>
                            <snmp_community>{$SNMP_COMMUNITY}</snmp_community>
                            <snmp_oid>IF-MIB::ifHCInOctets.{#SNMPINDEX}</snmp_oid>
                            <key>if.po[{#POINDEX}.in]</key>
                            <units>bps</units>
                            <port>161</port>
                            <applications>
                                <application>
                                    <name>Resources</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>CHANGE_PER_SECOND</type>
                                    <params/>
                                </step>
                                <step>
                                    <type>MULTIPLIER</type>
                                    <params>8</params>
                                </step>
                            </preprocessing>
                        </item_prototype>
                        <item_prototype>
                            <name>Po{#POINDEX} OutOctets</name>
                            <type>SNMPV2</type>
                            <snmp_community>{$SNMP_COMMUNITY}</snmp_community>
                            <snmp_oid>IF-MIB::ifHCOutOctets.{#SNMPINDEX}</snmp_oid>
                            <key>if.po[{#POINDEX}.out]</key>
                            <units>bps</units>
                            <port>161</port>
                            <applications>
                                <application>
                                    <name>Resources</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>CHANGE_PER_SECOND</type>
                                    <params/>
                                </step>
                                <step>
                                    <type>MULTIPLIER</type>
                                    <params>8</params>
                                </step>
                            </preprocessing>
                        </item_prototype>
                    </item_prototypes>
                    <graph_prototypes>
                        <graph_prototype>
                            <name>Traffic Port-channel{#POINDEX}</name>
                            <graph_items>
                                <graph_item>
                                    <color>199C0D</color>
                                    <yaxisside>RIGHT</yaxisside>
                                    <item>
                                        <host>Template_Cisco_LAG</host>
                                        <key>if.po[{#POINDEX}.in]</key>
                                    </item>
                                </graph_item>
                                <graph_item>
                                    <sortorder>1</sortorder>
                                    <color>4000FF</color>
                                    <yaxisside>RIGHT</yaxisside>
                                    <item>
                                        <host>Template_Cisco_LAG</host>
                                        <key>if.po[{#POINDEX}.out]</key>
                                    </item>
                                </graph_item>
                            </graph_items>
                        </graph_prototype>
                    </graph_prototypes>
                </discovery_rule>
            </discovery_rules>
        </template>
    </templates>
</zabbix_export>
