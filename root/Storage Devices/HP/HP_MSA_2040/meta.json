{"link_name": "HP MSA 2040", "type": "Template", "OS": "", "vendor": "HP", "minZabbVer": "3.0.x", "link_desc": "<p>Template and script for Zabbix 3.0+ for monitoring HP MSA storage devices.<br />Tested with MSA 2040 but may work with other MSAs as well.<br /><br />Based on template by Michael Weber that is based on Emir Imamagics HP P2000 G3 Template.<br /><br />For bug reports and discussion:<br /><br />https://www.zabbix.com/forum/showthread.php?p=176984<br /><br />Modified by Eugene Varnavsky:<br /><br />1. Discovery and check intervals frequency is increased<br />2. Fixed bug with disk status trigger and vdisk fault tolerance trigger<br />3. Script modified from HTTP to HTTPS<br />4. Support for per-host authentication<br />5. Script is run by speedyCGI instead of classic perl for better performance<br /><br />Installation:<br /><br />1. Make sure you have perl with all needed modules installed and speedyCGI<br />2. Copy hp-msa.pl to /usr/lib/zabbix/externalscripts and chmod 755 it.<br />3. Check if it works with command /usr/lib/zabbix/externalscripts/hp-msa.pl username password lld controller<br />4. Increase \"Timeout\" parameter in zabbix_server.conf to 20 or even more, script takes time.<br />5. Import template<br />6. Create host, with macros:<br /><br />{$MSA1} = hostname or address of Controller 1<br />{$MSA2} = hostname or address of Controller 2<br />{$USER} = username for monitor user on MSA.<br />{$PASSWORD} = password for 'monitor' user<br /><br />and attach template to it<br />8. Wait for discovery to complete it's job<br /><br />Tips:<br />1. Have JSON-XS installed for faster JSON processing<br />2. For security, use user with monitor privilege only<br />3. You may need to increase amount of Zabbix pollers</p>\n<p>Known issues:</p>\n<p>It seems MSA2040 cannot handle many queries to it's API in short period of time. This leads to \"Unsupported\" items with timeout and connection errors. Possible solution is to rewrite script to make bulk requests and script-level caching. Another possible solution is to disable less important items. Disabling \"HP MSA Disk Discovery\" discovery rule in the template is an easy fix.</p>", "features": "Low Level Discovery (LLD)|Custom Script", "address": "", "city": "", "state": "", "country": "", "postcode": "", "telephone": "", "fax": "", "email": "", "website": "https://www.zabbix.com/forum/showthread.php?p=176984", "price": 0, "link_hits": 34088, "link_votes": 1, "link_rating": 4, "link_featured": null, "link_created": "2016-03-02 13:19:47", "link_modified": "2016-04-26 08:35:32", "link_visited": 3681, "publish_up": "2016-03-02 13:19:47", "publish_down": "0000-00-00 00:00:00", "metakey": "", "metadesc": "", "1.8": "", "2.0": "", "2.2": "", "2.4": "", "3.0": "zabbix_template_HP_MSA_2040.zip", "3.2": "", "3.4": "", "4.0": "", "4.2": "", "4.4": "", "5.0": "", "5.2": "", "tags": "", "author": "M. Weber, E. Imamagic, E. Varnavsky", "user_id": 384, "link_id": 481, "cat_id": "177", "internal_notes": "", "lat": 0, "lng": 0, "zoom": ""}