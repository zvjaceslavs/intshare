{
    "link_name": "Template to get information of disks in LSI controller",
    "type": "Template",
    "OS": "",
    "vendor": "Linux",
    "minZabbVer": "4.4.x",
    "link_desc": "<h2><strong>Template to get information about Disks in LSI controller</strong><br /><br /></h2>\n<p>This template was created to get only information about disks in LSI controller.</p>\n<p>Ps: It use MegaCli64 utility.</p>\n<h2><br /><strong>How to use</strong></h2>\n<p><br /><strong>---Zabbix side</strong></p>\n<p><br />  -Import template <br /><br /><strong>---Client side</strong> <br /><br /> - Script<br />   the script is called raiddisc.sh, get it and put on this path /etc/zabbix/scripts/<br /> <br /> - Json file<br />   execute this command to create the json file: <br />   touch /etc/zabbix/scripts/info.json | chown zabbix: /etc/zabbix/scripts/info.json  <br /> <br /> - Crontab schedule<br />   Create in root crontab a schedule to run the script every day to populate json file. To do it, use these commands:<br />   <br />   crontab -e<br /> <br />   and add at the final of the file the following line:<br /><br />   * 12 * * *  /etc/zabbix/scripts/raiddisc.sh disk<br /><br />   With it, the script will run every day with an interval of 12 hours and populate the file /etc/zabbix/scripts/info.json<br />   <br /> <br /> - Zabbix user <br />   To get the results you will need to add these lines on sudo file:<br /><br />   zabbix  ALL=NOPASSWD:/etc/zabbix/scripts/raiddisc.sh</p>\n<p>   zabbix  ALL=NOPASSWD:<<<>>>> ((((USE PATH OF MEGACLI64 instead <<<>>>>)))</p>\n<p><br />   to do it you can use the command:<br /><br />   sudo visudo<br /><br />   to open the editor and put the text above at the final of the file.<br /><br /> - Zabbix agent.conf (User Parameter)<br />   at zabbix_agent.conf, you need to add the follow lines:<br /> <br />   UserParameter=disk[*], cat /etc/zabbix/scripts/info.json<br />   (to get information from json file and create items based on discovery)<br /><br />   UserParameter=diskinfo[*], /etc/zabbix/script/raiddisc.sh $1 $2 $3   <br />   (to get values according to the items)</p>\n<h2><br /><strong>How can I test the script on client side?</strong></h2>\n<p><br />You can test the script running it via powershell with these parameters. E.g:<br /><br /> /etc/zabbix/scripts/raiddisc.sh disk<br />   ****to fill the /etc/zabbix/scripts/info.json file****<br />  then;<br />  cat /etc/zabbix/scripts/info.json</p>\n<p> to see if it is charged with information needed. E.g:<br /> <br />{ \"data\":[<br /> {\"{#SLOTN}\":\"0\",\"{#DEVID}\":\"8\"}<br /> ,<br /> {\"{#SLOTN}\":\"1\",\"{#DEVID}\":\"9\"}<br />,<br /> {\"{#SLOTN}\":\"2\",\"{#DEVID}\":\"10\"} <br /> ]}<br /> <br /> So, get the slotn and devid values and put as arg 2 and 3 as it:<br /><br /> <br /> /etc/zabbix/scripts/raiddisc.sh diskinfo 0 8 <br />   ****return disk status****</p>",
    "features": "Zabbix Agent",
    "address": "",
    "city": "",
    "state": "",
    "country": "",
    "postcode": "",
    "telephone": "",
    "fax": "",
    "email": "",
    "website": "https://github.com/Vinicius-pinh/Zabbix/tree/main/Template_LSI_Megaraid_DIsks",
    "price": 0,
    "link_hits": 754,
    "link_votes": 1,
    "link_rating": 5,
    "link_featured": null,
    "link_created": "2020-12-24 18:57:13",
    "link_modified": "2020-12-29 20:55:21",
    "link_visited": 175,
    "publish_up": "2020-12-24 18:57:13",
    "publish_down": "0000-00-00 00:00:00",
    "metakey": "",
    "metadesc": "",
    "1.8": "",
    "2.0": "",
    "2.2": "",
    "2.4": "",
    "3.0": "",
    "3.2": "",
    "3.4": "",
    "4.0": "",
    "4.2": "",
    "4.4": "",
    "5.0": "Template_LSI_Megaraid_DIsks.zip",
    "5.2": "",
    "tags": "",
    "author": "Vinicius dos santos Pinheiro",
    "user_id": 12591,
    "link_id": 2288,
    "cat_id": "105",
    "internal_notes": "",
    "lat": 0,
    "lng": 0,
    "zoom": ""
}