<?xml version="1.0" encoding="UTF-8"?>
<zabbix_export>
    <version>5.2</version>
    <date>2021-04-06T11:23:43Z</date>
    <groups>
        <group>
            <name>Templates/Modules</name>
        </group>
    </groups>
    <templates>
        <template>
            <template>Template IBM XIV Storage System</template>
            <name>Template IBM XIV Storage System</name>
            <description>Template for monitoring IBM XIV servers with pyxcli</description>
            <groups>
                <group>
                    <name>Templates/Modules</name>
                </group>
            </groups>
            <applications>
                <application>
                    <name>ATS</name>
                </application>
                <application>
                    <name>CNA</name>
                </application>
                <application>
                    <name>CPU</name>
                </application>
                <application>
                    <name>DIMM</name>
                </application>
                <application>
                    <name>DISK</name>
                </application>
                <application>
                    <name>FAN</name>
                </application>
                <application>
                    <name>FC_PORT</name>
                </application>
                <application>
                    <name>Maintenance Module</name>
                </application>
                <application>
                    <name>PSU</name>
                </application>
                <application>
                    <name>SWITCH</name>
                </application>
                <application>
                    <name>UPS</name>
                </application>
                <application>
                    <name>Zabbix raw</name>
                </application>
            </applications>
            <items>
                <item>
                    <name>pyxcli_discovery</name>
                    <type>EXTERNAL</type>
                    <key>pyxcli_ibm_discovery.py[{$IBM_USER}, {$IBM_PASS}, {HOST.IP}]</key>
                    <delay>3m</delay>
                    <history>0</history>
                    <trends>0</trends>
                    <value_type>TEXT</value_type>
                    <description>Scripts that displays all the information, then parsing json</description>
                    <applications>
                        <application>
                            <name>Zabbix raw</name>
                        </application>
                    </applications>
                    <triggers>
                        <trigger>
                            <expression>{last(10m)}=1</expression>
                            <name>{HOST.NAME} -&gt; От скрипта pyxcli_discovery нет данных более 10 мин</name>
                            <priority>AVERAGE</priority>
                            <tags>
                                <tag>
                                    <tag>Department</tag>
                                    <value>MON.RTK</value>
                                </tag>
                            </tags>
                        </trigger>
                    </triggers>
                </item>
            </items>
            <discovery_rules>
                <discovery_rule>
                    <name>ATS</name>
                    <type>DEPENDENT</type>
                    <key>ats.discovery</key>
                    <delay>0</delay>
                    <item_prototypes>
                        <item_prototype>
                            <name>{#COMPONENT.ID} Currently functioning</name>
                            <type>DEPENDENT</type>
                            <key>ats.currently.functioning[{#COMPONENT.ID}]</key>
                            <delay>0</delay>
                            <applications>
                                <application>
                                    <name>ATS</name>
                                </application>
                            </applications>
                            <valuemap>
                                <name>1=OK-0=BAD</name>
                            </valuemap>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <parameters>
                                        <parameter>$.ats.[?(@.component_id=='{#COMPONENT.ID}')].currently_functioning.first()</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>JAVASCRIPT</type>
                                    <parameters>
                                        <parameter>if (value == &quot;yes&quot;)
  return 1
if (value != &quot;yes&quot;)
  return 0</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>pyxcli_ibm_discovery.py[{$IBM_USER}, {$IBM_PASS}, {HOST.IP}]</key>
                            </master_item>
                            <trigger_prototypes>
                                <trigger_prototype>
                                    <expression>{last(5m)}=0</expression>
                                    <name>{HOST.NAME} -&gt; {#COMPONENT.ID} Currently functioning is BAD</name>
                                    <priority>HIGH</priority>
                                </trigger_prototype>
                            </trigger_prototypes>
                        </item_prototype>
                        <item_prototype>
                            <name>{#COMPONENT.ID} Input l1</name>
                            <type>DEPENDENT</type>
                            <key>ats.input.l1[{#COMPONENT.ID}]</key>
                            <delay>0</delay>
                            <applications>
                                <application>
                                    <name>ATS</name>
                                </application>
                            </applications>
                            <valuemap>
                                <name>1=OK-0=BAD</name>
                            </valuemap>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <parameters>
                                        <parameter>$.ats.[?(@.component_id=='{#COMPONENT.ID}')].input_l1.first()</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>JAVASCRIPT</type>
                                    <parameters>
                                        <parameter>if (value == &quot;yes&quot;)
  return 1
if (value != &quot;yes&quot;)
  return 0</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>pyxcli_ibm_discovery.py[{$IBM_USER}, {$IBM_PASS}, {HOST.IP}]</key>
                            </master_item>
                            <trigger_prototypes>
                                <trigger_prototype>
                                    <expression>{last(5m)}=0</expression>
                                    <name>{HOST.NAME} -&gt; {#COMPONENT.ID} Input l1 to status problem</name>
                                    <priority>HIGH</priority>
                                </trigger_prototype>
                            </trigger_prototypes>
                        </item_prototype>
                        <item_prototype>
                            <name>{#COMPONENT.ID} Input_l2</name>
                            <type>DEPENDENT</type>
                            <key>ats.input.l2[{#COMPONENT.ID}]</key>
                            <delay>0</delay>
                            <applications>
                                <application>
                                    <name>ATS</name>
                                </application>
                            </applications>
                            <valuemap>
                                <name>1=OK-0=BAD</name>
                            </valuemap>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <parameters>
                                        <parameter>$.ats.[?(@.component_id=='{#COMPONENT.ID}')].input_l2.first()</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>JAVASCRIPT</type>
                                    <parameters>
                                        <parameter>if (value == &quot;yes&quot;)
  return 1
if (value != &quot;yes&quot;)
  return 0</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>pyxcli_ibm_discovery.py[{$IBM_USER}, {$IBM_PASS}, {HOST.IP}]</key>
                            </master_item>
                            <trigger_prototypes>
                                <trigger_prototype>
                                    <expression>{last(5m)}=0</expression>
                                    <name>{HOST.NAME} -&gt; {#COMPONENT.ID} Input l2 to status problem</name>
                                    <priority>HIGH</priority>
                                </trigger_prototype>
                            </trigger_prototypes>
                        </item_prototype>
                        <item_prototype>
                            <name>{#COMPONENT.ID} Status</name>
                            <type>DEPENDENT</type>
                            <key>ats.status[{#COMPONENT.ID}]</key>
                            <delay>0</delay>
                            <applications>
                                <application>
                                    <name>ATS</name>
                                </application>
                            </applications>
                            <valuemap>
                                <name>1=OK-0=BAD</name>
                            </valuemap>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <parameters>
                                        <parameter>$.ats.[?(@.component_id=='{#COMPONENT.ID}')].status.first()</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>JAVASCRIPT</type>
                                    <parameters>
                                        <parameter>if (value == &quot;OK&quot;)
  return 1
if (value != &quot;OK&quot;)
  return 0</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>pyxcli_ibm_discovery.py[{$IBM_USER}, {$IBM_PASS}, {HOST.IP}]</key>
                            </master_item>
                            <trigger_prototypes>
                                <trigger_prototype>
                                    <expression>{last(5m)}=0</expression>
                                    <name>{HOST.NAME} -&gt; {#COMPONENT.ID} Status is BAD</name>
                                    <priority>HIGH</priority>
                                </trigger_prototype>
                            </trigger_prototypes>
                        </item_prototype>
                    </item_prototypes>
                    <master_item>
                        <key>pyxcli_ibm_discovery.py[{$IBM_USER}, {$IBM_PASS}, {HOST.IP}]</key>
                    </master_item>
                    <lld_macro_paths>
                        <lld_macro_path>
                            <lld_macro>{#COMPONENT.ID}</lld_macro>
                            <path>$.component_id</path>
                        </lld_macro_path>
                    </lld_macro_paths>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.ats</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                </discovery_rule>
                <discovery_rule>
                    <name>CNA</name>
                    <type>DEPENDENT</type>
                    <key>cna.discovery</key>
                    <delay>0</delay>
                    <item_prototypes>
                        <item_prototype>
                            <name>{#COMPONENT.ID} Currently functioning</name>
                            <type>DEPENDENT</type>
                            <key>cna.currently.functioning[{#COMPONENT.ID}]</key>
                            <delay>0</delay>
                            <applications>
                                <application>
                                    <name>CNA</name>
                                </application>
                            </applications>
                            <valuemap>
                                <name>1=OK-0=BAD</name>
                            </valuemap>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <parameters>
                                        <parameter>$.cna.[?(@.component_id=='{#COMPONENT.ID}')].currently_functioning.first()</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>JAVASCRIPT</type>
                                    <parameters>
                                        <parameter>if (value == &quot;yes&quot;)
  return 1
if (value != &quot;yes&quot;)
  return 0</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>pyxcli_ibm_discovery.py[{$IBM_USER}, {$IBM_PASS}, {HOST.IP}]</key>
                            </master_item>
                            <trigger_prototypes>
                                <trigger_prototype>
                                    <expression>{last(5m)}=0</expression>
                                    <name>{HOST.NAME} -&gt; {#COMPONENT.ID} Currently functioning is BAD</name>
                                    <priority>HIGH</priority>
                                </trigger_prototype>
                            </trigger_prototypes>
                        </item_prototype>
                        <item_prototype>
                            <name>{#COMPONENT.ID} Status</name>
                            <type>DEPENDENT</type>
                            <key>cna.status[{#COMPONENT.ID}]</key>
                            <delay>0</delay>
                            <applications>
                                <application>
                                    <name>CNA</name>
                                </application>
                            </applications>
                            <valuemap>
                                <name>1=OK-0=BAD</name>
                            </valuemap>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <parameters>
                                        <parameter>$.cna.[?(@.component_id=='{#COMPONENT.ID}')].status.first()</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>JAVASCRIPT</type>
                                    <parameters>
                                        <parameter>if (value == &quot;OK&quot;)
  return 1
if (value != &quot;OK&quot;)
  return 0</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>pyxcli_ibm_discovery.py[{$IBM_USER}, {$IBM_PASS}, {HOST.IP}]</key>
                            </master_item>
                            <trigger_prototypes>
                                <trigger_prototype>
                                    <expression>{last(5m)}=0</expression>
                                    <name>{HOST.NAME} -&gt; {#COMPONENT.ID} Status is BAD</name>
                                    <priority>HIGH</priority>
                                </trigger_prototype>
                            </trigger_prototypes>
                        </item_prototype>
                    </item_prototypes>
                    <master_item>
                        <key>pyxcli_ibm_discovery.py[{$IBM_USER}, {$IBM_PASS}, {HOST.IP}]</key>
                    </master_item>
                    <lld_macro_paths>
                        <lld_macro_path>
                            <lld_macro>{#COMPONENT.ID}</lld_macro>
                            <path>$.component_id</path>
                        </lld_macro_path>
                    </lld_macro_paths>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.cna</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                </discovery_rule>
                <discovery_rule>
                    <name>CPU</name>
                    <type>DEPENDENT</type>
                    <key>cpu.discovery</key>
                    <delay>0</delay>
                    <item_prototypes>
                        <item_prototype>
                            <name>{#COMPONENT.ID} Currently functioning</name>
                            <type>DEPENDENT</type>
                            <key>cpu.currently.functioning[{#COMPONENT.ID}]</key>
                            <delay>0</delay>
                            <applications>
                                <application>
                                    <name>CPU</name>
                                </application>
                            </applications>
                            <valuemap>
                                <name>1=OK-0=BAD</name>
                            </valuemap>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <parameters>
                                        <parameter>$.cpu.[?(@.component_id=='{#COMPONENT.ID}')].currently_functioning.first()</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>JAVASCRIPT</type>
                                    <parameters>
                                        <parameter>if (value == &quot;yes&quot;)
  return 1
if (value != &quot;yes&quot;)
  return 0</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>pyxcli_ibm_discovery.py[{$IBM_USER}, {$IBM_PASS}, {HOST.IP}]</key>
                            </master_item>
                            <trigger_prototypes>
                                <trigger_prototype>
                                    <expression>{last(5m)}=0</expression>
                                    <name>{HOST.NAME} -&gt; {#COMPONENT.ID} Currently functioning is BAD</name>
                                    <priority>HIGH</priority>
                                </trigger_prototype>
                            </trigger_prototypes>
                        </item_prototype>
                        <item_prototype>
                            <name>{#COMPONENT.ID} Hardware status</name>
                            <type>DEPENDENT</type>
                            <key>cpu.hardware.status[{#COMPONENT.ID}]</key>
                            <delay>0</delay>
                            <applications>
                                <application>
                                    <name>CPU</name>
                                </application>
                            </applications>
                            <valuemap>
                                <name>1=OK-0=BAD</name>
                            </valuemap>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <parameters>
                                        <parameter>$.cpu.[?(@.component_id=='{#COMPONENT.ID}')].status.first()</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>JAVASCRIPT</type>
                                    <parameters>
                                        <parameter>if (value == &quot;OK&quot;)
  return 1
if (value != &quot;OK&quot;)
  return 0</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>pyxcli_ibm_discovery.py[{$IBM_USER}, {$IBM_PASS}, {HOST.IP}]</key>
                            </master_item>
                            <trigger_prototypes>
                                <trigger_prototype>
                                    <expression>{last(5m)}=0</expression>
                                    <name>{HOST.NAME} -&gt; {#COMPONENT.ID} Hardware status is BAD</name>
                                    <priority>HIGH</priority>
                                </trigger_prototype>
                            </trigger_prototypes>
                        </item_prototype>
                        <item_prototype>
                            <name>{#COMPONENT.ID} Status</name>
                            <type>DEPENDENT</type>
                            <key>cpu.status[{#COMPONENT.ID}]</key>
                            <delay>0</delay>
                            <applications>
                                <application>
                                    <name>CPU</name>
                                </application>
                            </applications>
                            <valuemap>
                                <name>1=OK-0=BAD</name>
                            </valuemap>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <parameters>
                                        <parameter>$.cpu.[?(@.component_id=='{#COMPONENT.ID}')].status.first()</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>JAVASCRIPT</type>
                                    <parameters>
                                        <parameter>if (value == &quot;OK&quot;)
  return 1
if (value != &quot;OK&quot;)
  return 0</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>pyxcli_ibm_discovery.py[{$IBM_USER}, {$IBM_PASS}, {HOST.IP}]</key>
                            </master_item>
                            <trigger_prototypes>
                                <trigger_prototype>
                                    <expression>{last(5m)}=0</expression>
                                    <name>{HOST.NAME} -&gt; {#COMPONENT.ID} Status is BAD</name>
                                    <priority>HIGH</priority>
                                </trigger_prototype>
                            </trigger_prototypes>
                        </item_prototype>
                    </item_prototypes>
                    <master_item>
                        <key>pyxcli_ibm_discovery.py[{$IBM_USER}, {$IBM_PASS}, {HOST.IP}]</key>
                    </master_item>
                    <lld_macro_paths>
                        <lld_macro_path>
                            <lld_macro>{#COMPONENT.ID}</lld_macro>
                            <path>$.component_id</path>
                        </lld_macro_path>
                    </lld_macro_paths>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.cpu</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                </discovery_rule>
                <discovery_rule>
                    <name>DIMM</name>
                    <type>DEPENDENT</type>
                    <key>dimm.discovery</key>
                    <delay>0</delay>
                    <item_prototypes>
                        <item_prototype>
                            <name>{#COMPONENT.ID} Hardware status</name>
                            <type>DEPENDENT</type>
                            <key>dimm.hardware.status[{#COMPONENT.ID}]</key>
                            <delay>0</delay>
                            <applications>
                                <application>
                                    <name>DIMM</name>
                                </application>
                            </applications>
                            <valuemap>
                                <name>1=OK-0=BAD</name>
                            </valuemap>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <parameters>
                                        <parameter>$.dimm.[?(@.component_id=='{#COMPONENT.ID}')].hardware_status.first()</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>JAVASCRIPT</type>
                                    <parameters>
                                        <parameter>if (value == &quot;OK&quot;)
  return 1
if (value != &quot;OK&quot;)
  return 0</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>pyxcli_ibm_discovery.py[{$IBM_USER}, {$IBM_PASS}, {HOST.IP}]</key>
                            </master_item>
                            <trigger_prototypes>
                                <trigger_prototype>
                                    <expression>{last(5m)}=0</expression>
                                    <name>{HOST.NAME} -&gt; {#COMPONENT.ID} Hardware status is BAD</name>
                                    <priority>HIGH</priority>
                                </trigger_prototype>
                            </trigger_prototypes>
                        </item_prototype>
                        <item_prototype>
                            <name>{#COMPONENT.ID} Status</name>
                            <type>DEPENDENT</type>
                            <key>dimm.status[{#COMPONENT.ID}]</key>
                            <delay>0</delay>
                            <applications>
                                <application>
                                    <name>DIMM</name>
                                </application>
                            </applications>
                            <valuemap>
                                <name>1=OK-0=BAD</name>
                            </valuemap>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <parameters>
                                        <parameter>$.dimm.[?(@.component_id=='{#COMPONENT.ID}')].status.first()</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>JAVASCRIPT</type>
                                    <parameters>
                                        <parameter>if (value == &quot;OK&quot;)
  return 1
if (value != &quot;OK&quot;)
  return 0</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>pyxcli_ibm_discovery.py[{$IBM_USER}, {$IBM_PASS}, {HOST.IP}]</key>
                            </master_item>
                            <trigger_prototypes>
                                <trigger_prototype>
                                    <expression>{last(5m)}=0</expression>
                                    <name>{HOST.NAME} -&gt; {#COMPONENT.ID} Status is BAD</name>
                                    <priority>HIGH</priority>
                                </trigger_prototype>
                            </trigger_prototypes>
                        </item_prototype>
                    </item_prototypes>
                    <master_item>
                        <key>pyxcli_ibm_discovery.py[{$IBM_USER}, {$IBM_PASS}, {HOST.IP}]</key>
                    </master_item>
                    <lld_macro_paths>
                        <lld_macro_path>
                            <lld_macro>{#COMPONENT.ID}</lld_macro>
                            <path>$.component_id</path>
                        </lld_macro_path>
                    </lld_macro_paths>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.dimm</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                </discovery_rule>
                <discovery_rule>
                    <name>DISK</name>
                    <type>DEPENDENT</type>
                    <key>disk.discovery</key>
                    <delay>0</delay>
                    <item_prototypes>
                        <item_prototype>
                            <name>{#COMPONENT.ID} Currently functioning</name>
                            <type>DEPENDENT</type>
                            <key>disk.currently.functioning[{#COMPONENT.ID}]</key>
                            <delay>0</delay>
                            <applications>
                                <application>
                                    <name>DISK</name>
                                </application>
                            </applications>
                            <valuemap>
                                <name>1=OK-0=BAD</name>
                            </valuemap>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <parameters>
                                        <parameter>$.disk.[?(@.component_id=='{#COMPONENT.ID}')].currently_functioning.first()</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>JAVASCRIPT</type>
                                    <parameters>
                                        <parameter>if (value == &quot;yes&quot;)
  return 1
if (value != &quot;yes&quot;)
  return 0</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>pyxcli_ibm_discovery.py[{$IBM_USER}, {$IBM_PASS}, {HOST.IP}]</key>
                            </master_item>
                            <trigger_prototypes>
                                <trigger_prototype>
                                    <expression>{last(5m)}=0</expression>
                                    <name>{HOST.NAME} -&gt; {#COMPONENT.ID} Currently functioning is BAD</name>
                                    <priority>HIGH</priority>
                                </trigger_prototype>
                            </trigger_prototypes>
                        </item_prototype>
                        <item_prototype>
                            <name>{#COMPONENT.ID} Desc Power is on</name>
                            <type>DEPENDENT</type>
                            <key>disk.power.is.on[{#COMPONENT.ID}]</key>
                            <delay>0</delay>
                            <applications>
                                <application>
                                    <name>DISK</name>
                                </application>
                            </applications>
                            <valuemap>
                                <name>1=OK-0=BAD</name>
                            </valuemap>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <parameters>
                                        <parameter>$.disk.[?(@.component_id=='{#COMPONENT.ID}')].desc.power_is_on.first()</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>JAVASCRIPT</type>
                                    <parameters>
                                        <parameter>if (value == &quot;no&quot;)
  return 1
if (value != &quot;no&quot;)
  return 0</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>pyxcli_ibm_discovery.py[{$IBM_USER}, {$IBM_PASS}, {HOST.IP}]</key>
                            </master_item>
                            <trigger_prototypes>
                                <trigger_prototype>
                                    <expression>{last(5m)}=0</expression>
                                    <name>{HOST.NAME} -&gt; {#COMPONENT.ID} Desc Power is off</name>
                                    <priority>HIGH</priority>
                                </trigger_prototype>
                            </trigger_prototypes>
                        </item_prototype>
                        <item_prototype>
                            <name>{#COMPONENT.ID} Desc Read fail</name>
                            <type>DEPENDENT</type>
                            <key>disk.read.fail[{#COMPONENT.ID}]</key>
                            <delay>0</delay>
                            <applications>
                                <application>
                                    <name>DISK</name>
                                </application>
                            </applications>
                            <valuemap>
                                <name>1=OK-0=BAD</name>
                            </valuemap>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <parameters>
                                        <parameter>$.disk.[?(@.component_id=='{#COMPONENT.ID}')].desc.read_fail.first()</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>JAVASCRIPT</type>
                                    <parameters>
                                        <parameter>if (value == &quot;no&quot;)
  return 1
if (value != &quot;no&quot;)
  return 0</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>pyxcli_ibm_discovery.py[{$IBM_USER}, {$IBM_PASS}, {HOST.IP}]</key>
                            </master_item>
                            <trigger_prototypes>
                                <trigger_prototype>
                                    <expression>{last(5m)}=0</expression>
                                    <name>{HOST.NAME} -&gt; {#COMPONENT.ID} Desc Read fail</name>
                                    <priority>AVERAGE</priority>
                                </trigger_prototype>
                            </trigger_prototypes>
                        </item_prototype>
                        <item_prototype>
                            <name>{#COMPONENT.ID} Desc Smart fail</name>
                            <type>DEPENDENT</type>
                            <key>disk.smart.fail[{#COMPONENT.ID}]</key>
                            <delay>0</delay>
                            <applications>
                                <application>
                                    <name>DISK</name>
                                </application>
                            </applications>
                            <valuemap>
                                <name>1=OK-0=BAD</name>
                            </valuemap>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <parameters>
                                        <parameter>$.disk.[?(@.component_id=='{#COMPONENT.ID}')].desc.smart_fail.first()</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>JAVASCRIPT</type>
                                    <parameters>
                                        <parameter>if (value == &quot;no&quot;)
  return 1
if (value != &quot;no&quot;)
  return 0</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>pyxcli_ibm_discovery.py[{$IBM_USER}, {$IBM_PASS}, {HOST.IP}]</key>
                            </master_item>
                            <trigger_prototypes>
                                <trigger_prototype>
                                    <expression>{last(5m)}=0</expression>
                                    <name>{HOST.NAME} -&gt; {#COMPONENT.ID} Desc Smart fail</name>
                                    <priority>AVERAGE</priority>
                                </trigger_prototype>
                            </trigger_prototypes>
                        </item_prototype>
                        <item_prototype>
                            <name>{#COMPONENT.ID} Status</name>
                            <type>DEPENDENT</type>
                            <key>disk.status[{#COMPONENT.ID}]</key>
                            <delay>0</delay>
                            <applications>
                                <application>
                                    <name>DISK</name>
                                </application>
                            </applications>
                            <valuemap>
                                <name>1=OK-0=BAD</name>
                            </valuemap>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <parameters>
                                        <parameter>$.disk.[?(@.component_id=='{#COMPONENT.ID}')].status.first()</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>JAVASCRIPT</type>
                                    <parameters>
                                        <parameter>if (value == &quot;OK&quot;)
  return 1
if (value != &quot;OK&quot;)
  return 0</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>pyxcli_ibm_discovery.py[{$IBM_USER}, {$IBM_PASS}, {HOST.IP}]</key>
                            </master_item>
                            <trigger_prototypes>
                                <trigger_prototype>
                                    <expression>{last(5m)}=0</expression>
                                    <name>{HOST.NAME} -&gt; {#COMPONENT.ID} Status is BAD</name>
                                    <priority>HIGH</priority>
                                </trigger_prototype>
                            </trigger_prototypes>
                        </item_prototype>
                        <item_prototype>
                            <name>{#COMPONENT.ID} Temperature</name>
                            <type>DEPENDENT</type>
                            <key>disk.temperature[{#COMPONENT.ID}]</key>
                            <delay>0</delay>
                            <units>C</units>
                            <applications>
                                <application>
                                    <name>DISK</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <parameters>
                                        <parameter>$.disk.[?(@.component_id=='{#COMPONENT.ID}')].temperature.first()</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>pyxcli_ibm_discovery.py[{$IBM_USER}, {$IBM_PASS}, {HOST.IP}]</key>
                            </master_item>
                        </item_prototype>
                    </item_prototypes>
                    <master_item>
                        <key>pyxcli_ibm_discovery.py[{$IBM_USER}, {$IBM_PASS}, {HOST.IP}]</key>
                    </master_item>
                    <lld_macro_paths>
                        <lld_macro_path>
                            <lld_macro>{#COMPONENT.ID}</lld_macro>
                            <path>$.component_id</path>
                        </lld_macro_path>
                    </lld_macro_paths>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.disk</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                </discovery_rule>
                <discovery_rule>
                    <name>FAN</name>
                    <type>DEPENDENT</type>
                    <key>fan.discovery</key>
                    <delay>0</delay>
                    <item_prototypes>
                        <item_prototype>
                            <name>{#COMPONENT.ID} Currently functioning</name>
                            <type>DEPENDENT</type>
                            <key>fan.currently.functioning[{#COMPONENT.ID}]</key>
                            <delay>0</delay>
                            <applications>
                                <application>
                                    <name>FAN</name>
                                </application>
                            </applications>
                            <valuemap>
                                <name>1=OK-0=BAD</name>
                            </valuemap>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <parameters>
                                        <parameter>$.fan.[?(@.component_id=='{#COMPONENT.ID}')].currently_functioning.first()</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>JAVASCRIPT</type>
                                    <parameters>
                                        <parameter>if (value == &quot;yes&quot;)
  return 1
if (value != &quot;yes&quot;)
  return 0</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>pyxcli_ibm_discovery.py[{$IBM_USER}, {$IBM_PASS}, {HOST.IP}]</key>
                            </master_item>
                            <trigger_prototypes>
                                <trigger_prototype>
                                    <expression>{last(5m)}=0</expression>
                                    <name>{HOST.NAME} -&gt; {#COMPONENT.ID} Currently functioning is BAD</name>
                                    <priority>AVERAGE</priority>
                                </trigger_prototype>
                            </trigger_prototypes>
                        </item_prototype>
                        <item_prototype>
                            <name>{#COMPONENT.ID} Status</name>
                            <type>DEPENDENT</type>
                            <key>fan.status[{#COMPONENT.ID}]</key>
                            <delay>0</delay>
                            <applications>
                                <application>
                                    <name>FAN</name>
                                </application>
                            </applications>
                            <valuemap>
                                <name>1=OK-0=BAD</name>
                            </valuemap>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <parameters>
                                        <parameter>$.fan.[?(@.component_id=='{#COMPONENT.ID}')].status.first()</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>JAVASCRIPT</type>
                                    <parameters>
                                        <parameter>if (value == &quot;OK&quot;)
  return 1
if (value != &quot;OK&quot;)
  return 0</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>pyxcli_ibm_discovery.py[{$IBM_USER}, {$IBM_PASS}, {HOST.IP}]</key>
                            </master_item>
                            <trigger_prototypes>
                                <trigger_prototype>
                                    <expression>{last(5m)}=0</expression>
                                    <name>{HOST.NAME} -&gt; {#COMPONENT.ID} Status is BAD</name>
                                    <priority>AVERAGE</priority>
                                </trigger_prototype>
                            </trigger_prototypes>
                        </item_prototype>
                    </item_prototypes>
                    <master_item>
                        <key>pyxcli_ibm_discovery.py[{$IBM_USER}, {$IBM_PASS}, {HOST.IP}]</key>
                    </master_item>
                    <lld_macro_paths>
                        <lld_macro_path>
                            <lld_macro>{#COMPONENT.ID}</lld_macro>
                            <path>$.component_id</path>
                        </lld_macro_path>
                    </lld_macro_paths>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.fan</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                </discovery_rule>
                <discovery_rule>
                    <name>FC_PORT</name>
                    <type>DEPENDENT</type>
                    <key>fc_port.discovery</key>
                    <delay>0</delay>
                    <item_prototypes>
                        <item_prototype>
                            <name>{#COMPONENT.ID} Currently functioning</name>
                            <type>DEPENDENT</type>
                            <key>fc_port.currently.functioning[{#COMPONENT.ID}]</key>
                            <delay>0</delay>
                            <applications>
                                <application>
                                    <name>FC_PORT</name>
                                </application>
                            </applications>
                            <valuemap>
                                <name>1=OK-0=BAD</name>
                            </valuemap>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <parameters>
                                        <parameter>$.fc_port.[?(@.component_id=='{#COMPONENT.ID}')].currently_functioning.first()</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>JAVASCRIPT</type>
                                    <parameters>
                                        <parameter>if (value == &quot;yes&quot;)
  return 1
if (value != &quot;yes&quot;)
  return 0</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>pyxcli_ibm_discovery.py[{$IBM_USER}, {$IBM_PASS}, {HOST.IP}]</key>
                            </master_item>
                            <trigger_prototypes>
                                <trigger_prototype>
                                    <expression>{last(5m)}=0</expression>
                                    <name>{HOST.NAME} -&gt; {#COMPONENT.ID} Currently functioning is BAD</name>
                                    <priority>AVERAGE</priority>
                                </trigger_prototype>
                            </trigger_prototypes>
                        </item_prototype>
                        <item_prototype>
                            <name>{#COMPONENT.ID} Error count</name>
                            <type>DEPENDENT</type>
                            <key>fc_port.error.count[{#COMPONENT.ID}]</key>
                            <delay>0</delay>
                            <applications>
                                <application>
                                    <name>FC_PORT</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <parameters>
                                        <parameter>$.fc_port.[?(@.component_id=='{#COMPONENT.ID}')].error_count.first()</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>pyxcli_ibm_discovery.py[{$IBM_USER}, {$IBM_PASS}, {HOST.IP}]</key>
                            </master_item>
                            <trigger_prototypes>
                                <trigger_prototype>
                                    <expression>{last(5m)}&gt;0</expression>
                                    <name>{HOST.NAME} -&gt; {#COMPONENT.ID} Error count = ({ITEM.VALUE})</name>
                                    <priority>WARNING</priority>
                                </trigger_prototype>
                            </trigger_prototypes>
                        </item_prototype>
                        <item_prototype>
                            <name>{#COMPONENT.ID} Port state</name>
                            <type>DEPENDENT</type>
                            <key>fc_port.port.state[{#COMPONENT.ID}]</key>
                            <delay>0</delay>
                            <applications>
                                <application>
                                    <name>FC_PORT</name>
                                </application>
                            </applications>
                            <valuemap>
                                <name>1=OK-0=BAD</name>
                            </valuemap>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <parameters>
                                        <parameter>$.fc_port.[?(@.component_id=='{#COMPONENT.ID}')].port_state.first()</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>JAVASCRIPT</type>
                                    <parameters>
                                        <parameter>if (value == &quot;Online&quot;)
  return 1
if (value != &quot;Online&quot;)
  return 0</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>pyxcli_ibm_discovery.py[{$IBM_USER}, {$IBM_PASS}, {HOST.IP}]</key>
                            </master_item>
                        </item_prototype>
                        <item_prototype>
                            <name>{#COMPONENT.ID} Status</name>
                            <type>DEPENDENT</type>
                            <key>fc_port.status[{#COMPONENT.ID}]</key>
                            <delay>0</delay>
                            <applications>
                                <application>
                                    <name>FC_PORT</name>
                                </application>
                            </applications>
                            <valuemap>
                                <name>1=OK-0=BAD</name>
                            </valuemap>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <parameters>
                                        <parameter>$.fc_port.[?(@.component_id=='{#COMPONENT.ID}')].status.first()</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>JAVASCRIPT</type>
                                    <parameters>
                                        <parameter>if (value == &quot;OK&quot;)
  return 1
if (value != &quot;OK&quot;)
  return 0</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>pyxcli_ibm_discovery.py[{$IBM_USER}, {$IBM_PASS}, {HOST.IP}]</key>
                            </master_item>
                            <trigger_prototypes>
                                <trigger_prototype>
                                    <expression>{last(5m)}=0</expression>
                                    <name>{HOST.NAME} -&gt; {#COMPONENT.ID} Status is BAD</name>
                                    <priority>AVERAGE</priority>
                                </trigger_prototype>
                            </trigger_prototypes>
                        </item_prototype>
                    </item_prototypes>
                    <master_item>
                        <key>pyxcli_ibm_discovery.py[{$IBM_USER}, {$IBM_PASS}, {HOST.IP}]</key>
                    </master_item>
                    <lld_macro_paths>
                        <lld_macro_path>
                            <lld_macro>{#COMPONENT.ID}</lld_macro>
                            <path>$.component_id</path>
                        </lld_macro_path>
                    </lld_macro_paths>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.fc_port</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                </discovery_rule>
                <discovery_rule>
                    <name>MM</name>
                    <type>DEPENDENT</type>
                    <key>mm.discovery</key>
                    <delay>0</delay>
                    <item_prototypes>
                        <item_prototype>
                            <name>{#COMPONENT.ID} Currently functioning</name>
                            <type>DEPENDENT</type>
                            <key>mm.currently.functioning[{#COMPONENT.ID}]</key>
                            <delay>0</delay>
                            <applications>
                                <application>
                                    <name>Maintenance Module</name>
                                </application>
                            </applications>
                            <valuemap>
                                <name>1=OK-0=BAD</name>
                            </valuemap>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <parameters>
                                        <parameter>$.mm.[?(@.component_id=='{#COMPONENT.ID}')].currently_functioning.first()</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>JAVASCRIPT</type>
                                    <parameters>
                                        <parameter>if (value == &quot;yes&quot;)
  return 1
if (value != &quot;yes&quot;)
  return 0</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>pyxcli_ibm_discovery.py[{$IBM_USER}, {$IBM_PASS}, {HOST.IP}]</key>
                            </master_item>
                            <trigger_prototypes>
                                <trigger_prototype>
                                    <expression>{last()}=0</expression>
                                    <name>{HOST.NAME} -&gt; {#COMPONENT.ID} Currently functioning is BAD</name>
                                    <priority>AVERAGE</priority>
                                </trigger_prototype>
                            </trigger_prototypes>
                        </item_prototype>
                        <item_prototype>
                            <name>{#COMPONENT.ID} Enabled state</name>
                            <type>DEPENDENT</type>
                            <key>mm.enabled[{#COMPONENT.ID}]</key>
                            <delay>0</delay>
                            <applications>
                                <application>
                                    <name>Maintenance Module</name>
                                </application>
                            </applications>
                            <valuemap>
                                <name>1=OK-0=BAD</name>
                            </valuemap>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <parameters>
                                        <parameter>$.mm.[?(@.component_id=='{#COMPONENT.ID}')].enabled.first()</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>JAVASCRIPT</type>
                                    <parameters>
                                        <parameter>if (value == &quot;yes&quot;)
  return 1
if (value != &quot;yes&quot;)
  return 0</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>pyxcli_ibm_discovery.py[{$IBM_USER}, {$IBM_PASS}, {HOST.IP}]</key>
                            </master_item>
                        </item_prototype>
                        <item_prototype>
                            <name>{#COMPONENT.ID} Link 1</name>
                            <type>DEPENDENT</type>
                            <key>mm.link_1[{#COMPONENT.ID}]</key>
                            <delay>0</delay>
                            <applications>
                                <application>
                                    <name>Maintenance Module</name>
                                </application>
                            </applications>
                            <valuemap>
                                <name>1=OK-0=BAD</name>
                            </valuemap>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <parameters>
                                        <parameter>$.mm.[?(@.component_id=='{#COMPONENT.ID}')].link_1.first()</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>JAVASCRIPT</type>
                                    <parameters>
                                        <parameter>if (value == &quot;yes&quot;)
  return 1
if (value != &quot;yes&quot;)
  return 0</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>pyxcli_ibm_discovery.py[{$IBM_USER}, {$IBM_PASS}, {HOST.IP}]</key>
                            </master_item>
                            <trigger_prototypes>
                                <trigger_prototype>
                                    <expression>{last(5m)}=0</expression>
                                    <name>{HOST.NAME} -&gt; {#COMPONENT.ID} Link 1 is BAD</name>
                                    <priority>AVERAGE</priority>
                                </trigger_prototype>
                            </trigger_prototypes>
                        </item_prototype>
                        <item_prototype>
                            <name>{#COMPONENT.ID} Link 2</name>
                            <type>DEPENDENT</type>
                            <key>mm.link_2[{#COMPONENT.ID}]</key>
                            <delay>0</delay>
                            <applications>
                                <application>
                                    <name>Maintenance Module</name>
                                </application>
                            </applications>
                            <valuemap>
                                <name>1=OK-0=BAD</name>
                            </valuemap>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <parameters>
                                        <parameter>$.mm.[?(@.component_id=='{#COMPONENT.ID}')].link_2.first()</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>JAVASCRIPT</type>
                                    <parameters>
                                        <parameter>if (value == &quot;yes&quot;)
  return 1
if (value != &quot;yes&quot;)
  return 0</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>pyxcli_ibm_discovery.py[{$IBM_USER}, {$IBM_PASS}, {HOST.IP}]</key>
                            </master_item>
                            <trigger_prototypes>
                                <trigger_prototype>
                                    <expression>{last(5m)}=0</expression>
                                    <name>{HOST.NAME} -&gt; {#COMPONENT.ID} Link 2 is BAD</name>
                                    <priority>AVERAGE</priority>
                                </trigger_prototype>
                            </trigger_prototypes>
                        </item_prototype>
                        <item_prototype>
                            <name>{#COMPONENT.ID} Status</name>
                            <type>DEPENDENT</type>
                            <key>mm.status[{#COMPONENT.ID}]</key>
                            <delay>0</delay>
                            <applications>
                                <application>
                                    <name>Maintenance Module</name>
                                </application>
                            </applications>
                            <valuemap>
                                <name>1=OK-0=BAD</name>
                            </valuemap>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <parameters>
                                        <parameter>$.mm.[?(@.component_id=='{#COMPONENT.ID}')].status.first()</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>JAVASCRIPT</type>
                                    <parameters>
                                        <parameter>if (value == &quot;OK&quot;)
  return 1
if (value != &quot;OK&quot;)
  return 0</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>pyxcli_ibm_discovery.py[{$IBM_USER}, {$IBM_PASS}, {HOST.IP}]</key>
                            </master_item>
                            <trigger_prototypes>
                                <trigger_prototype>
                                    <expression>{last(5m)}=0</expression>
                                    <name>{HOST.NAME} -&gt; {#COMPONENT.ID} Status is BAD</name>
                                    <priority>AVERAGE</priority>
                                </trigger_prototype>
                            </trigger_prototypes>
                        </item_prototype>
                        <item_prototype>
                            <name>{#COMPONENT.ID} Temperature</name>
                            <type>DEPENDENT</type>
                            <key>mm.temperature[{#COMPONENT.ID}]</key>
                            <delay>0</delay>
                            <units>C</units>
                            <applications>
                                <application>
                                    <name>Maintenance Module</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <parameters>
                                        <parameter>$.mm.[?(@.component_id=='{#COMPONENT.ID}')].temperature.first()</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>pyxcli_ibm_discovery.py[{$IBM_USER}, {$IBM_PASS}, {HOST.IP}]</key>
                            </master_item>
                        </item_prototype>
                        <item_prototype>
                            <name>{#COMPONENT.ID} Total memory</name>
                            <type>DEPENDENT</type>
                            <key>mm.total.memory[{#COMPONENT.ID}]</key>
                            <delay>0</delay>
                            <units>bytes</units>
                            <applications>
                                <application>
                                    <name>Maintenance Module</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <parameters>
                                        <parameter>$.mm.[?(@.component_id=='{#COMPONENT.ID}')].total_memory.first()</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>pyxcli_ibm_discovery.py[{$IBM_USER}, {$IBM_PASS}, {HOST.IP}]</key>
                            </master_item>
                        </item_prototype>
                    </item_prototypes>
                    <master_item>
                        <key>pyxcli_ibm_discovery.py[{$IBM_USER}, {$IBM_PASS}, {HOST.IP}]</key>
                    </master_item>
                    <lld_macro_paths>
                        <lld_macro_path>
                            <lld_macro>{#COMPONENT.ID}</lld_macro>
                            <path>$.component_id</path>
                        </lld_macro_path>
                    </lld_macro_paths>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.mm</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                </discovery_rule>
                <discovery_rule>
                    <name>PSU</name>
                    <type>DEPENDENT</type>
                    <key>psu.discovery</key>
                    <delay>0</delay>
                    <item_prototypes>
                        <item_prototype>
                            <name>{#COMPONENT.ID} Currently functioning</name>
                            <type>DEPENDENT</type>
                            <key>psu.currently.functioning[{#COMPONENT.ID}]</key>
                            <delay>0</delay>
                            <applications>
                                <application>
                                    <name>PSU</name>
                                </application>
                            </applications>
                            <valuemap>
                                <name>1=OK-0=BAD</name>
                            </valuemap>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <parameters>
                                        <parameter>$.psu.[?(@.component_id=='{#COMPONENT.ID}')].currently_functioning.first()</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>JAVASCRIPT</type>
                                    <parameters>
                                        <parameter>if (value == &quot;yes&quot;)
  return 1
if (value != &quot;yes&quot;)
  return 0</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>pyxcli_ibm_discovery.py[{$IBM_USER}, {$IBM_PASS}, {HOST.IP}]</key>
                            </master_item>
                            <trigger_prototypes>
                                <trigger_prototype>
                                    <expression>{last(5m)}=0</expression>
                                    <name>{HOST.NAME} -&gt; {#COMPONENT.ID} Currently functioning is BAD</name>
                                    <priority>DISASTER</priority>
                                </trigger_prototype>
                            </trigger_prototypes>
                        </item_prototype>
                        <item_prototype>
                            <name>{#COMPONENT.ID} Current</name>
                            <type>DEPENDENT</type>
                            <key>psu.current[{#COMPONENT.ID}]</key>
                            <delay>0</delay>
                            <value_type>FLOAT</value_type>
                            <units>A</units>
                            <applications>
                                <application>
                                    <name>PSU</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <parameters>
                                        <parameter>$.psu.[?(@.component_id=='{#COMPONENT.ID}')].current.first()</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>RTRIM</type>
                                    <parameters>
                                        <parameter>A</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>pyxcli_ibm_discovery.py[{$IBM_USER}, {$IBM_PASS}, {HOST.IP}]</key>
                            </master_item>
                        </item_prototype>
                        <item_prototype>
                            <name>{#COMPONENT.ID} Hardware status</name>
                            <type>DEPENDENT</type>
                            <key>psu.hardware.status[{#COMPONENT.ID}]</key>
                            <delay>0</delay>
                            <applications>
                                <application>
                                    <name>PSU</name>
                                </application>
                            </applications>
                            <valuemap>
                                <name>1=OK-0=BAD</name>
                            </valuemap>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <parameters>
                                        <parameter>$.psu.[?(@.component_id=='{#COMPONENT.ID}')].hardware_status.first()</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>JAVASCRIPT</type>
                                    <parameters>
                                        <parameter>if (value == &quot;OK&quot;)
  return 1
if (value != &quot;OK&quot;)
  return 0</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>pyxcli_ibm_discovery.py[{$IBM_USER}, {$IBM_PASS}, {HOST.IP}]</key>
                            </master_item>
                            <trigger_prototypes>
                                <trigger_prototype>
                                    <expression>{last(5m)}=0</expression>
                                    <name>{HOST.NAME} -&gt; {#COMPONENT.ID} Hardware status is BAD</name>
                                    <priority>DISASTER</priority>
                                </trigger_prototype>
                            </trigger_prototypes>
                        </item_prototype>
                        <item_prototype>
                            <name>{#COMPONENT.ID} Power</name>
                            <type>DEPENDENT</type>
                            <key>psu.power[{#COMPONENT.ID}]</key>
                            <delay>0</delay>
                            <value_type>FLOAT</value_type>
                            <units>W</units>
                            <applications>
                                <application>
                                    <name>PSU</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <parameters>
                                        <parameter>$.psu.[?(@.component_id=='{#COMPONENT.ID}')].power.first()</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>RTRIM</type>
                                    <parameters>
                                        <parameter>W</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>pyxcli_ibm_discovery.py[{$IBM_USER}, {$IBM_PASS}, {HOST.IP}]</key>
                            </master_item>
                        </item_prototype>
                        <item_prototype>
                            <name>{#COMPONENT.ID} Status</name>
                            <type>DEPENDENT</type>
                            <key>psu.status[{#COMPONENT.ID}]</key>
                            <delay>0</delay>
                            <applications>
                                <application>
                                    <name>PSU</name>
                                </application>
                            </applications>
                            <valuemap>
                                <name>1=OK-0=BAD</name>
                            </valuemap>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <parameters>
                                        <parameter>$.psu.[?(@.component_id=='{#COMPONENT.ID}')].status.first()</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>JAVASCRIPT</type>
                                    <parameters>
                                        <parameter>if (value == &quot;OK&quot;)
  return 1
if (value != &quot;OK&quot;)
  return 0</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>pyxcli_ibm_discovery.py[{$IBM_USER}, {$IBM_PASS}, {HOST.IP}]</key>
                            </master_item>
                            <trigger_prototypes>
                                <trigger_prototype>
                                    <expression>{last(5m)}=0</expression>
                                    <name>{HOST.NAME} -&gt; {#COMPONENT.ID} Status is BAD</name>
                                    <priority>DISASTER</priority>
                                </trigger_prototype>
                            </trigger_prototypes>
                        </item_prototype>
                        <item_prototype>
                            <name>{#COMPONENT.ID} Voltage 5v</name>
                            <type>DEPENDENT</type>
                            <key>psu.voltage.5v[{#COMPONENT.ID}]</key>
                            <delay>0</delay>
                            <value_type>FLOAT</value_type>
                            <units>V</units>
                            <applications>
                                <application>
                                    <name>PSU</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <parameters>
                                        <parameter>$.psu.[?(@.component_id=='{#COMPONENT.ID}')].voltage_5v.first()</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>RTRIM</type>
                                    <parameters>
                                        <parameter>V</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>pyxcli_ibm_discovery.py[{$IBM_USER}, {$IBM_PASS}, {HOST.IP}]</key>
                            </master_item>
                        </item_prototype>
                        <item_prototype>
                            <name>{#COMPONENT.ID} Voltage 12v</name>
                            <type>DEPENDENT</type>
                            <key>psu.voltage.12v[{#COMPONENT.ID}]</key>
                            <delay>0</delay>
                            <value_type>FLOAT</value_type>
                            <units>V</units>
                            <applications>
                                <application>
                                    <name>PSU</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <parameters>
                                        <parameter>$.psu.[?(@.component_id=='{#COMPONENT.ID}')].voltage_12v.first()</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>RTRIM</type>
                                    <parameters>
                                        <parameter>V</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>pyxcli_ibm_discovery.py[{$IBM_USER}, {$IBM_PASS}, {HOST.IP}]</key>
                            </master_item>
                        </item_prototype>
                    </item_prototypes>
                    <master_item>
                        <key>pyxcli_ibm_discovery.py[{$IBM_USER}, {$IBM_PASS}, {HOST.IP}]</key>
                    </master_item>
                    <lld_macro_paths>
                        <lld_macro_path>
                            <lld_macro>{#COMPONENT.ID}</lld_macro>
                            <path>$.component_id</path>
                        </lld_macro_path>
                    </lld_macro_paths>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.psu</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                </discovery_rule>
                <discovery_rule>
                    <name>SWITCH</name>
                    <type>DEPENDENT</type>
                    <key>switch.discovery</key>
                    <delay>0</delay>
                    <item_prototypes>
                        <item_prototype>
                            <name>{#COMPONENT.ID} Cpu util</name>
                            <type>DEPENDENT</type>
                            <key>switch.cpu.util[{#COMPONENT.ID}]</key>
                            <delay>0</delay>
                            <applications>
                                <application>
                                    <name>SWITCH</name>
                                </application>
                            </applications>
                            <valuemap>
                                <name>1=OK-0=BAD</name>
                            </valuemap>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <parameters>
                                        <parameter>$.switch.[?(@.component_id=='{#COMPONENT.ID}')].cpu_util.first()</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>JAVASCRIPT</type>
                                    <parameters>
                                        <parameter>if (value == &quot;OK&quot;)
  return 1
if (value != &quot;OK&quot;)
  return 0</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>pyxcli_ibm_discovery.py[{$IBM_USER}, {$IBM_PASS}, {HOST.IP}]</key>
                            </master_item>
                        </item_prototype>
                        <item_prototype>
                            <name>{#COMPONENT.ID} Initialized curr vpd</name>
                            <type>DEPENDENT</type>
                            <key>switch.curr.vpd[{#COMPONENT.ID}]</key>
                            <delay>0</delay>
                            <applications>
                                <application>
                                    <name>SWITCH</name>
                                </application>
                            </applications>
                            <valuemap>
                                <name>1=OK-0=BAD</name>
                            </valuemap>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <parameters>
                                        <parameter>$.switch.[?(@.component_id=='{#COMPONENT.ID}')].curr_vpd.initialized.first()</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>JAVASCRIPT</type>
                                    <parameters>
                                        <parameter>if (value == &quot;yes&quot;)
  return 1
if (value != &quot;yes&quot;)
  return 0</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>pyxcli_ibm_discovery.py[{$IBM_USER}, {$IBM_PASS}, {HOST.IP}]</key>
                            </master_item>
                        </item_prototype>
                        <item_prototype>
                            <name>{#COMPONENT.ID} Fans rpm</name>
                            <type>DEPENDENT</type>
                            <key>switch.fans.rpm[{#COMPONENT.ID}]</key>
                            <delay>0</delay>
                            <applications>
                                <application>
                                    <name>SWITCH</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <parameters>
                                        <parameter>$.switch.[?(@.component_id=='{#COMPONENT.ID}')].fans_rpm.first()</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>pyxcli_ibm_discovery.py[{$IBM_USER}, {$IBM_PASS}, {HOST.IP}]</key>
                            </master_item>
                            <trigger_prototypes>
                                <trigger_prototype>
                                    <expression>{last()}=0</expression>
                                    <name>{HOST.NAME} -&gt; {#COMPONENT.ID} Fan is not working</name>
                                    <priority>HIGH</priority>
                                </trigger_prototype>
                            </trigger_prototypes>
                        </item_prototype>
                        <item_prototype>
                            <name>{#COMPONENT.ID} Initialized initial vpd</name>
                            <type>DEPENDENT</type>
                            <key>switch.initial.vpd[{#COMPONENT.ID}]</key>
                            <delay>0</delay>
                            <applications>
                                <application>
                                    <name>SWITCH</name>
                                </application>
                            </applications>
                            <valuemap>
                                <name>1=OK-0=BAD</name>
                            </valuemap>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <parameters>
                                        <parameter>$.switch.[?(@.component_id=='{#COMPONENT.ID}')].initial_vpd.initialized.first()</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>JAVASCRIPT</type>
                                    <parameters>
                                        <parameter>if (value == &quot;yes&quot;)
  return 1
if (value != &quot;yes&quot;)
  return 0</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>pyxcli_ibm_discovery.py[{$IBM_USER}, {$IBM_PASS}, {HOST.IP}]</key>
                            </master_item>
                        </item_prototype>
                        <item_prototype>
                            <name>{#COMPONENT.ID} Monitor status</name>
                            <type>DEPENDENT</type>
                            <key>switch.monitor.status[{#COMPONENT.ID}]</key>
                            <delay>0</delay>
                            <applications>
                                <application>
                                    <name>SWITCH</name>
                                </application>
                            </applications>
                            <valuemap>
                                <name>1=OK-0=BAD</name>
                            </valuemap>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <parameters>
                                        <parameter>$.switch.[?(@.component_id=='{#COMPONENT.ID}')].monitor_status.first()</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>JAVASCRIPT</type>
                                    <parameters>
                                        <parameter>if (value == &quot;OK&quot;)
  return 1
if (value != &quot;OK&quot;)
  return 0</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>pyxcli_ibm_discovery.py[{$IBM_USER}, {$IBM_PASS}, {HOST.IP}]</key>
                            </master_item>
                            <trigger_prototypes>
                                <trigger_prototype>
                                    <expression>{last(5m)}=0</expression>
                                    <name>{HOST.NAME} -&gt; {#COMPONENT.ID} Monitor status is BAD</name>
                                    <priority>AVERAGE</priority>
                                </trigger_prototype>
                            </trigger_prototypes>
                        </item_prototype>
                        <item_prototype>
                            <name>{#COMPONENT.ID} Initialized prev vpd</name>
                            <type>DEPENDENT</type>
                            <key>switch.prev.vpd[{#COMPONENT.ID}]</key>
                            <delay>0</delay>
                            <applications>
                                <application>
                                    <name>SWITCH</name>
                                </application>
                            </applications>
                            <valuemap>
                                <name>1=OK-0=BAD</name>
                            </valuemap>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <parameters>
                                        <parameter>$.switch.[?(@.component_id=='{#COMPONENT.ID}')].prev_vpd.initialized.first()</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>JAVASCRIPT</type>
                                    <parameters>
                                        <parameter>if (value == &quot;yes&quot;)
  return 1
if (value != &quot;yes&quot;)
  return 0</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>pyxcli_ibm_discovery.py[{$IBM_USER}, {$IBM_PASS}, {HOST.IP}]</key>
                            </master_item>
                        </item_prototype>
                        <item_prototype>
                            <name>{#COMPONENT.ID} Ps1 status</name>
                            <type>DEPENDENT</type>
                            <key>switch.ps1[{#COMPONENT.ID}]</key>
                            <delay>0</delay>
                            <applications>
                                <application>
                                    <name>SWITCH</name>
                                </application>
                            </applications>
                            <valuemap>
                                <name>1=OK-0=BAD</name>
                            </valuemap>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <parameters>
                                        <parameter>$.switch.[?(@.component_id=='{#COMPONENT.ID}')].ps1.first()</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>JAVASCRIPT</type>
                                    <parameters>
                                        <parameter>if (value == &quot;OK&quot;)
  return 1
if (value != &quot;OK&quot;)
  return 0</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>pyxcli_ibm_discovery.py[{$IBM_USER}, {$IBM_PASS}, {HOST.IP}]</key>
                            </master_item>
                            <trigger_prototypes>
                                <trigger_prototype>
                                    <expression>{last(5m)}=0</expression>
                                    <name>{HOST.NAME} -&gt; {#COMPONENT.ID} Ps1 is BAD</name>
                                    <priority>HIGH</priority>
                                </trigger_prototype>
                            </trigger_prototypes>
                        </item_prototype>
                        <item_prototype>
                            <name>{#COMPONENT.ID} Ps2 status</name>
                            <type>DEPENDENT</type>
                            <key>switch.ps2[{#COMPONENT.ID}]</key>
                            <delay>0</delay>
                            <applications>
                                <application>
                                    <name>SWITCH</name>
                                </application>
                            </applications>
                            <valuemap>
                                <name>1=OK-0=BAD</name>
                            </valuemap>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <parameters>
                                        <parameter>$.switch.[?(@.component_id=='{#COMPONENT.ID}')].ps2.first()</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>JAVASCRIPT</type>
                                    <parameters>
                                        <parameter>if (value == &quot;OK&quot;)
  return 1
if (value != &quot;OK&quot;)
  return 0</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>pyxcli_ibm_discovery.py[{$IBM_USER}, {$IBM_PASS}, {HOST.IP}]</key>
                            </master_item>
                            <trigger_prototypes>
                                <trigger_prototype>
                                    <expression>{last(5m)}=0</expression>
                                    <name>{HOST.NAME} -&gt; {#COMPONENT.ID} Ps2 is BAD</name>
                                    <priority>HIGH</priority>
                                </trigger_prototype>
                            </trigger_prototypes>
                        </item_prototype>
                        <item_prototype>
                            <name>{#COMPONENT.ID} Status</name>
                            <type>DEPENDENT</type>
                            <key>switch.status[{#COMPONENT.ID}]</key>
                            <delay>0</delay>
                            <applications>
                                <application>
                                    <name>SWITCH</name>
                                </application>
                            </applications>
                            <valuemap>
                                <name>1=OK-0=BAD</name>
                            </valuemap>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <parameters>
                                        <parameter>$.switch.[?(@.component_id=='{#COMPONENT.ID}')].status.first()</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>JAVASCRIPT</type>
                                    <parameters>
                                        <parameter>if (value == &quot;OK&quot;)
  return 1
if (value != &quot;OK&quot;)
  return 0</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>pyxcli_ibm_discovery.py[{$IBM_USER}, {$IBM_PASS}, {HOST.IP}]</key>
                            </master_item>
                            <trigger_prototypes>
                                <trigger_prototype>
                                    <expression>{last(5m)}=0</expression>
                                    <name>{HOST.NAME} -&gt; {#COMPONENT.ID} Status is BAD</name>
                                    <priority>HIGH</priority>
                                </trigger_prototype>
                            </trigger_prototypes>
                        </item_prototype>
                        <item_prototype>
                            <name>{#COMPONENT.ID} Sw mgmt status</name>
                            <type>DEPENDENT</type>
                            <key>switch.sw.mgmt.status[{#COMPONENT.ID}]</key>
                            <delay>0</delay>
                            <applications>
                                <application>
                                    <name>SWITCH</name>
                                </application>
                            </applications>
                            <valuemap>
                                <name>1=OK-0=BAD</name>
                            </valuemap>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <parameters>
                                        <parameter>$.switch.[?(@.component_id=='{#COMPONENT.ID}')].sw_mgmt_status.first()</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>JAVASCRIPT</type>
                                    <parameters>
                                        <parameter>if (value == &quot;OK&quot;)
  return 1
if (value != &quot;OK&quot;)
  return 0</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>pyxcli_ibm_discovery.py[{$IBM_USER}, {$IBM_PASS}, {HOST.IP}]</key>
                            </master_item>
                        </item_prototype>
                        <item_prototype>
                            <name>{#COMPONENT.ID} Voltage</name>
                            <type>DEPENDENT</type>
                            <key>switch.voltage[{#COMPONENT.ID}]</key>
                            <delay>0</delay>
                            <value_type>FLOAT</value_type>
                            <units>V</units>
                            <applications>
                                <application>
                                    <name>SWITCH</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <parameters>
                                        <parameter>$.switch.[?(@.component_id=='{#COMPONENT.ID}')].voltage.first()</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>pyxcli_ibm_discovery.py[{$IBM_USER}, {$IBM_PASS}, {HOST.IP}]</key>
                            </master_item>
                        </item_prototype>
                    </item_prototypes>
                    <master_item>
                        <key>pyxcli_ibm_discovery.py[{$IBM_USER}, {$IBM_PASS}, {HOST.IP}]</key>
                    </master_item>
                    <lld_macro_paths>
                        <lld_macro_path>
                            <lld_macro>{#COMPONENT.ID}</lld_macro>
                            <path>$.component_id</path>
                        </lld_macro_path>
                    </lld_macro_paths>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.switch</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                </discovery_rule>
                <discovery_rule>
                    <name>UPS</name>
                    <type>DEPENDENT</type>
                    <key>ups.discovery</key>
                    <delay>0</delay>
                    <item_prototypes>
                        <item_prototype>
                            <name>{#COMPONENT.ID} Apparent load power percent</name>
                            <type>DEPENDENT</type>
                            <key>ups.apparent.load.power.percent[{#COMPONENT.ID}]</key>
                            <delay>0</delay>
                            <units>%</units>
                            <applications>
                                <application>
                                    <name>UPS</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <parameters>
                                        <parameter>$.ups.[?(@.component_id=='{#COMPONENT.ID}')].apparent_load_power_percent.first()</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>pyxcli_ibm_discovery.py[{$IBM_USER}, {$IBM_PASS}, {HOST.IP}]</key>
                            </master_item>
                            <trigger_prototypes>
                                <trigger_prototype>
                                    <expression>{max(10m)}&gt;60</expression>
                                    <name>{HOST.NAME} -&gt; {#COMPONENT.ID} Apparent load power is high ({ITEM.VALUE})</name>
                                    <priority>AVERAGE</priority>
                                </trigger_prototype>
                            </trigger_prototypes>
                        </item_prototype>
                        <item_prototype>
                            <name>{#COMPONENT.ID} Battery charge level</name>
                            <type>DEPENDENT</type>
                            <key>ups.battery.charge.level[{#COMPONENT.ID}]</key>
                            <delay>0</delay>
                            <units>%</units>
                            <applications>
                                <application>
                                    <name>UPS</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <parameters>
                                        <parameter>$.ups.[?(@.component_id=='{#COMPONENT.ID}')].battery_charge_level.first()</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>pyxcli_ibm_discovery.py[{$IBM_USER}, {$IBM_PASS}, {HOST.IP}]</key>
                            </master_item>
                            <trigger_prototypes>
                                <trigger_prototype>
                                    <expression>{last()}&lt;50</expression>
                                    <name>{HOST.NAME} -&gt; {#COMPONENT.ID} Battery charge level &lt; 50% ({ITEM.VALUE})</name>
                                    <priority>HIGH</priority>
                                </trigger_prototype>
                                <trigger_prototype>
                                    <expression>{last()}&lt;70</expression>
                                    <name>{HOST.NAME} -&gt; {#COMPONENT.ID} Battery charge level &lt; 70% ({ITEM.VALUE})</name>
                                    <priority>AVERAGE</priority>
                                </trigger_prototype>
                            </trigger_prototypes>
                        </item_prototype>
                        <item_prototype>
                            <name>{#COMPONENT.ID} Currently functioning</name>
                            <type>DEPENDENT</type>
                            <key>ups.currently.functioning[{#COMPONENT.ID}]</key>
                            <delay>0</delay>
                            <applications>
                                <application>
                                    <name>UPS</name>
                                </application>
                            </applications>
                            <valuemap>
                                <name>1=OK-0=BAD</name>
                            </valuemap>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <parameters>
                                        <parameter>$.ups.[?(@.component_id=='{#COMPONENT.ID}')].currently_functioning.first()</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>JAVASCRIPT</type>
                                    <parameters>
                                        <parameter>if (value == &quot;yes&quot;)
  return 1
if (value != &quot;yes&quot;)
  return 0</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>pyxcli_ibm_discovery.py[{$IBM_USER}, {$IBM_PASS}, {HOST.IP}]</key>
                            </master_item>
                            <trigger_prototypes>
                                <trigger_prototype>
                                    <expression>{last(5m)}=0</expression>
                                    <name>{HOST.NAME} -&gt; {#COMPONENT.ID} Currently functioning is BAD</name>
                                    <priority>HIGH</priority>
                                </trigger_prototype>
                            </trigger_prototypes>
                        </item_prototype>
                        <item_prototype>
                            <name>{#COMPONENT.ID} Input power on</name>
                            <type>DEPENDENT</type>
                            <key>ups.input.power.on[{#COMPONENT.ID}]</key>
                            <delay>0</delay>
                            <applications>
                                <application>
                                    <name>UPS</name>
                                </application>
                            </applications>
                            <valuemap>
                                <name>1=OK-0=BAD</name>
                            </valuemap>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <parameters>
                                        <parameter>$.ups.[?(@.component_id=='{#COMPONENT.ID}')].input_power_on.first()</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>JAVASCRIPT</type>
                                    <parameters>
                                        <parameter>if (value == &quot;yes&quot;)
  return 1
if (value != &quot;yes&quot;)
  return 0</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>pyxcli_ibm_discovery.py[{$IBM_USER}, {$IBM_PASS}, {HOST.IP}]</key>
                            </master_item>
                            <trigger_prototypes>
                                <trigger_prototype>
                                    <expression>{last(5m)}=0</expression>
                                    <name>{HOST.NAME} -&gt; {#COMPONENT.ID} Input power off</name>
                                    <priority>HIGH</priority>
                                </trigger_prototype>
                            </trigger_prototypes>
                        </item_prototype>
                        <item_prototype>
                            <name>{#COMPONENT.ID} Internal temperature</name>
                            <type>DEPENDENT</type>
                            <key>ups.internal.temperature[{#COMPONENT.ID}]</key>
                            <delay>0</delay>
                            <units>C</units>
                            <applications>
                                <application>
                                    <name>UPS</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <parameters>
                                        <parameter>$.ups.[?(@.component_id=='{#COMPONENT.ID}')].internal_temperature.first()</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>pyxcli_ibm_discovery.py[{$IBM_USER}, {$IBM_PASS}, {HOST.IP}]</key>
                            </master_item>
                            <trigger_prototypes>
                                <trigger_prototype>
                                    <expression>{max(30m)}&gt;35</expression>
                                    <name>{HOST.NAME} -&gt; {#COMPONENT.ID} Internal temperature is high ({ITEM.VALUE})</name>
                                    <priority>AVERAGE</priority>
                                </trigger_prototype>
                            </trigger_prototypes>
                        </item_prototype>
                        <item_prototype>
                            <name>{#COMPONENT.ID} Load power percent</name>
                            <type>DEPENDENT</type>
                            <key>ups.load.power.percent[{#COMPONENT.ID}]</key>
                            <delay>0</delay>
                            <units>%</units>
                            <applications>
                                <application>
                                    <name>UPS</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <parameters>
                                        <parameter>$.ups.[?(@.component_id=='{#COMPONENT.ID}')].load_power_percent.first()</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>pyxcli_ibm_discovery.py[{$IBM_USER}, {$IBM_PASS}, {HOST.IP}]</key>
                            </master_item>
                            <trigger_prototypes>
                                <trigger_prototype>
                                    <expression>{max(30m)}&gt;60</expression>
                                    <name>{HOST.NAME} -&gt; {#COMPONENT.ID} Load power is high ({ITEM.VALUE})</name>
                                    <priority>AVERAGE</priority>
                                </trigger_prototype>
                            </trigger_prototypes>
                        </item_prototype>
                        <item_prototype>
                            <name>{#COMPONENT.ID} Power Status</name>
                            <type>DEPENDENT</type>
                            <key>ups.power.status[{#COMPONENT.ID}]</key>
                            <delay>0</delay>
                            <applications>
                                <application>
                                    <name>UPS</name>
                                </application>
                            </applications>
                            <valuemap>
                                <name>1=OK-0=BAD</name>
                            </valuemap>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <parameters>
                                        <parameter>$.ups.[?(@.component_id=='{#COMPONENT.ID}')].input_power_on.first()</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>JAVASCRIPT</type>
                                    <parameters>
                                        <parameter>if (value == &quot;yes&quot;)
  return 1
if (value != &quot;yes&quot;)
  return 0</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>pyxcli_ibm_discovery.py[{$IBM_USER}, {$IBM_PASS}, {HOST.IP}]</key>
                            </master_item>
                            <trigger_prototypes>
                                <trigger_prototype>
                                    <expression>{last(5m)}=0</expression>
                                    <name>{HOST.NAME} -&gt; {#COMPONENT.ID} Power status is BAD</name>
                                    <priority>HIGH</priority>
                                </trigger_prototype>
                            </trigger_prototypes>
                        </item_prototype>
                        <item_prototype>
                            <name>{#COMPONENT.ID} Status</name>
                            <type>DEPENDENT</type>
                            <key>ups.status[{#COMPONENT.ID}]</key>
                            <delay>0</delay>
                            <applications>
                                <application>
                                    <name>UPS</name>
                                </application>
                            </applications>
                            <valuemap>
                                <name>1=OK-0=BAD</name>
                            </valuemap>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <parameters>
                                        <parameter>$.ups.[?(@.component_id=='{#COMPONENT.ID}')].status.first()</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>JAVASCRIPT</type>
                                    <parameters>
                                        <parameter>if (value == &quot;OK&quot;)
  return 1
if (value != &quot;OK&quot;)
  return 0</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>pyxcli_ibm_discovery.py[{$IBM_USER}, {$IBM_PASS}, {HOST.IP}]</key>
                            </master_item>
                            <trigger_prototypes>
                                <trigger_prototype>
                                    <expression>{last(5m)}=0</expression>
                                    <name>{HOST.NAME} -&gt; {#COMPONENT.ID} Status is BAD</name>
                                    <priority>HIGH</priority>
                                </trigger_prototype>
                            </trigger_prototypes>
                        </item_prototype>
                    </item_prototypes>
                    <master_item>
                        <key>pyxcli_ibm_discovery.py[{$IBM_USER}, {$IBM_PASS}, {HOST.IP}]</key>
                    </master_item>
                    <lld_macro_paths>
                        <lld_macro_path>
                            <lld_macro>{#COMPONENT.ID}</lld_macro>
                            <path>$.component_id</path>
                        </lld_macro_path>
                    </lld_macro_paths>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.ups</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                </discovery_rule>
            </discovery_rules>
            <macros>
                <macro>
                    <macro>{$IBM_PASS}</macro>
                    <type>SECRET_TEXT</type>
                    <description>pass for xcli</description>
                </macro>
                <macro>
                    <macro>{$IBM_USER}</macro>
                    <type>SECRET_TEXT</type>
                    <description>user for xcli</description>
                </macro>
            </macros>
        </template>
    </templates>
    <value_maps>
        <value_map>
            <name>1=OK-0=BAD</name>
            <mappings>
                <mapping>
                    <value>0</value>
                    <newvalue>BAD</newvalue>
                </mapping>
                <mapping>
                    <value>1</value>
                    <newvalue>OK</newvalue>
                </mapping>
            </mappings>
        </value_map>
    </value_maps>
</zabbix_export>
