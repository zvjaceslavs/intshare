{
    "link_name": "Validate session key",
    "type": "Template",
    "OS": "General",
    "vendor": "Zabbix",
    "minZabbVer": "4.0.x",
    "link_desc": "<p>It's possible to define a Zabbix session key in a global manner.</p>\n<p>After that, by using a macro {$APIKEY} and {$JSONRPC.PHP} you can directly use Zabbix API calls in \"HTTP Agent\" or in the \"Action\" section.</p>\n<p>This template helps you to detect if the session key is somehow not valid anymore.</p>\n<p>{$JSONRPC.PHP} = http://127.0.0.1/zabbix/api_jsonrpc.php</p>\n<p>or</p>\n<p style=\"font-size: 12.16px;\">{$JSONRPC.PHP} = <a href=\"http://127.0.0.1/api_jsonrpc.php\">http://127.0.0.1/api_jsonrpc.php</a></p>\n<p style=\"font-size: 12.16px;\">The first session key can be obtained using:</p>\n<p style=\"font-size: 12.16px;\">curl -s -X POST http://127.0.0.1/zabbix/api_jsonrpc.php -H 'Content-Type: application/json' -H 'cache-control: no-cache' -d \"{\\\"jsonrpc\\\":\\\"2.0\\\",\\\"method\\\":\\\"user.login\\\",\\\"params\\\":{\\\"user\\\":\\\"Admin\\\",\\\"password\\\":\\\"zabbix\\\"},\\\"id\\\":1}\" | grep -E -o \"([0-9a-f]{32,32})\"</p>\n<p> </p>\n<p>or:</p>\n<p style=\"font-size: 12.16px;\">curl -s -X POST http://127.0.0.1/api_jsonrpc.php -H 'Content-Type: application/json' -H 'cache-control: no-cache' -d \"{\\\"jsonrpc\\\":\\\"2.0\\\",\\\"method\\\":\\\"user.login\\\",\\\"params\\\":{\\\"user\\\":\\\"Admin\\\",\\\"password\\\":\\\"zabbix\\\"},\\\"id\\\":1}\" | grep -E -o \"([0-9a-f]{32,32})\"</p>\n<p style=\"font-size: 12.16px;\">Install session key as macro like:</p>\n<p style=\"font-size: 12.16px;\">{$APIKEY} = 0b0bacc6ebc339e3a89247f20a65c13c</p>",
    "features": "HTTP Agent",
    "address": "",
    "city": "",
    "state": "",
    "country": "",
    "postcode": "",
    "telephone": "",
    "fax": "",
    "email": "",
    "website": "",
    "price": 0,
    "link_hits": 724,
    "link_votes": null,
    "link_rating": 0,
    "link_featured": null,
    "link_created": "2019-12-16 17:13:04",
    "link_modified": "2019-12-16 17:16:16",
    "link_visited": null,
    "publish_up": "2019-12-16 17:13:04",
    "publish_down": "0000-00-00 00:00:00",
    "metakey": "",
    "metadesc": "",
    "1.8": "",
    "2.0": "",
    "2.2": "",
    "2.4": "",
    "3.0": "",
    "3.2": "",
    "3.4": "",
    "4.0": "check-if-session-key-is-valid-api.xml",
    "4.2": "",
    "4.4": "",
    "5.0": "",
    "5.2": "",
    "tags": "",
    "author": "",
    "user_id": 8988,
    "link_id": 1899,
    "cat_id": "398",
    "internal_notes": "",
    "lat": 0,
    "lng": 0,
    "zoom": ""
}