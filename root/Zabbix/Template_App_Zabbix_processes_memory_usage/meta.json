{"link_name": "Template App Zabbix processes memory usage", "type": "Template", "OS": "General", "vendor": "Others", "minZabbVer": "4.4.x", "link_desc": "<h1>Overview</h1>\n<p>With help of Zabbix agent will discover and start to monitor all running Zabbix processes including server, proxy and agent processes.</p>\n<h1>Requirements</h1>\n<p>Requires the following utilities to be available on the agent host:</p>\n<ul>\n<li>pgrep</li>\n<li>egrep</li>\n<li>sed</li>\n<li>jq</li>\n</ul>\n<p>Also requires that <a href=\"https://www.zabbix.com/documentation/current/manual/config/notifications/action/operation/remote_command\">remote commands</a> be enabled in agent configuration.</p>\n<h1>How it works</h1>\n<p>Watch the data in the \"Latest data\" section or individually each process type in the graph created from graph prototype. Memory usage is monitored by the process type. It doesn't matter how many poller processes you have running, the memory used by all of them will be monitored.</p>\n<p>First, we discover all running process types, e. g.</p>\n<ul>\n<li>zabbix_agentd: active checks</li>\n<li>zabbix_agentd: collector</li>\n<li>...</li>\n<li>zabbix_server: alerter</li>\n<li>zabbix_server: alert manager</li>\n<li>...</li>\n</ul>\n<p>Then, for each we create 2 items to monitor VmRSS and VmSwap usage. On top of that we create calculated item that sums those up. For each calculated item there will be a graph created.</p>\n<p>If the following command works on your agent host the template should work:</p>\n<pre>pgrep -a 'zabbix_(server|agentd|agent2|proxy)' | egrep -o --color=none 'zabbix_(server|agentd|agent2|proxy): .*' | sed 's/ [#\\[].*//' | sort -u | jq -Rs '{data: split(\"\\n\")[:-1]| map(split(\": \") | {\"{#COMPONENT}\": .[0], \"{#PROCESS}\": .[1]})}'<br /><br /></pre>\n<h1>Troubleshooting</h1>\n<p>You might want to edit the version in the XML file to suit your Zabbix version:</p>\n<pre><version>5.0</version></pre>", "features": "Zabbix Agent", "address": "", "city": "", "state": "", "country": "", "postcode": "", "telephone": "", "fax": "", "email": "", "website": "", "price": 0, "link_hits": 1792, "link_votes": null, "link_rating": 0, "link_featured": null, "link_created": "2020-09-28 16:17:44", "link_modified": "2021-07-12 13:22:49", "link_visited": null, "publish_up": "2020-09-28 16:17:44", "publish_down": "0000-00-00 00:00:00", "metakey": "", "metadesc": "", "1.8": "", "2.0": "", "2.2": "", "2.4": "", "3.0": "", "3.2": "", "3.4": "", "4.0": "", "4.2": "", "4.4": "template-app-zabbix-processes-memory-usage.xml", "5.0": "", "5.2": "", "tags": "memory, usage, zabbix, processes, lld", "author": "dimir", "user_id": 7952, "link_id": 2201, "cat_id": "395", "internal_notes": "", "lat": 0, "lng": 0, "zoom": ""}