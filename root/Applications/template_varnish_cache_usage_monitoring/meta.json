{"link_name": "Varnish cache usage monitoring", "type": "Template", "OS": "", "vendor": "Others", "minZabbVer": "4.0.x", "link_desc": "<p><span class=\"tlid-translation translation\" lang=\"en\"><strong>This template allows you to track the activity of your Varnish cache servers.</strong><br /></span></p>\n<p><br /><span class=\"tlid-translation translation\" lang=\"en\"><b>Varnish</b> is an HTTP accelerator designed for content-heavy dynamic web sites as well as APIs.</span></p>\n<p><span class=\"tlid-translation translation\" lang=\"en\">You will be able to see the quantity of requests received and transmitted, and know how often the cache has been useful (so as not to overload your web servers).<br /><br />Alerts let you know if the service has dropped, if the port has changed, or if the server is not operating normally.<br /><br />This template doesn't need any password, it uses the varnish CLI, and python that is installed by default on most recent linux distros (so no additional package to install).<br /></span></p>\n<p> </p>\n<p><span class=\"tlid-translation translation\" lang=\"en\"><img src=\"media/com_mtree/images/listings/m/917.png\" alt=\"graph demo\" width=\"1200\" height=\"443\" /></span></p>\n<p><span class=\"tlid-translation translation\" lang=\"en\"><img src=\"media/com_mtree/images/listings/m/918.png\" alt=\"Data monitored\" width=\"1200\" height=\"272\" /><br />setting up procedure:<br /><br /><br /><strong>Template configuration zabbix-side</strong><br /><br />* Import zabbix template file <span style=\"text-decoration: underline;\">zabbix_varnish_app_template.xml</span> on zabbix server<br />* Select a varnish hosts and add \"Template App Varnish\"<br /><br /><br /><br /><strong>Configuration on varnish server side</strong><br /><br />* Allow varnish to use netstat:</span></p>\n<p><span class=\"tlid-translation translation\" lang=\"en\"><em><strong>sudo echo \"zabbix ALL = (ALL) NOPASSWD: / bin / netstat\" >> / etc / sudoers</strong></em><br /><br />* Allow zabbix user to read varnish secret file:<br /><em><strong>chmod + r /etc/varnish/secret</strong></em><br /><br />* Add zabbix to varnish group to use varnish CLI:<br /><strong><em>sudo usermod -a -G varnish zabbix</em></strong><br /><br />* Copy <span style=\"text-decoration: underline;\">userparameter_varnish.conf</span> to <span style=\"text-decoration: underline;\">/etc/zabbix/zabbix_agentd.d/userparameter_varnish.conf</span><br /><br />* Copy <span style=\"text-decoration: underline;\">varnish_metrics.py</span> to <span style=\"text-decoration: underline;\">/etc/zabbix/varnish_metrics.py</span><br /><br />* Set execution right with :</span></p>\n<p><span class=\"tlid-translation translation\" lang=\"en\"><strong><em>sudo chmod + x /etc/zabbix/varnish_metrics.py</em></strong><br /><br />* restart agent:<br /><em><strong>sudo service zabbix-agent restart</strong></em><br /><br />If you have issues, please contact authors to help us to improve this template.</span></p>", "features": "Zabbix Agent", "address": "", "city": "", "state": "", "country": "", "postcode": "", "telephone": "", "fax": "", "email": "", "website": "https://www.yooda.com/", "price": 0, "link_hits": 1758, "link_votes": 6, "link_rating": 5, "link_featured": null, "link_created": "2020-04-17 15:16:43", "link_modified": "2020-09-30 08:12:42", "link_visited": 162, "publish_up": "2020-04-17 15:16:43", "publish_down": "0000-00-00 00:00:00", "metakey": "", "metadesc": "", "1.8": "", "2.0": "", "2.2": "", "2.4": "", "3.0": "", "3.2": "", "3.4": "", "4.0": "", "4.2": "", "4.4": "zabbix_varnish_app_template.zip", "5.0": "", "5.2": "", "tags": "varnish, zabbix, agent, template, cache, history, usage", "author": "robin.talma@yooda.com, corentin.montel@yooda.com", "user_id": 11670, "link_id": 2057, "cat_id": "115,119", "internal_notes": "", "lat": 0, "lng": 0, "zoom": ""}