[
    {
        "proxy_hostid": "0",
        "host": "Template Backup Exec Server",
        "status": "3",
        "disable_until": "0",
        "error": "",
        "available": "0",
        "errors_from": "0",
        "lastaccess": "0",
        "ipmi_authtype": "-1",
        "ipmi_privilege": "2",
        "ipmi_username": "",
        "ipmi_password": "",
        "ipmi_disable_until": "0",
        "ipmi_available": "0",
        "snmp_disable_until": "0",
        "snmp_available": "0",
        "maintenanceid": "0",
        "maintenance_status": "0",
        "maintenance_type": "0",
        "maintenance_from": "0",
        "ipmi_errors_from": "0",
        "snmp_errors_from": "0",
        "ipmi_error": "",
        "snmp_error": "",
        "jmx_disable_until": "0",
        "jmx_available": "0",
        "jmx_errors_from": "0",
        "jmx_error": "",
        "name": "Template Backup Exec Server",
        "flags": "0",
        "templateid": "10894",
        "description": "Veritas/Simantec Backup Exec Server template\r\nAll checks executes with T-SQL, so you must configure Zabbix to use FreeTDS for MS SQL Server.\r\nBackup Jobs ODBC LLD rules:\r\n- Backup Exec Windows Service\r\n- Backup Exec Jobs (FULL)\r\n- Backup Exec Jobs (INCREMENTAL)\r\nTwo rules needs for creating triggers with different severity levels for Full job types and Incremental job types.\r\n\r\nMacroses {$BE.USER} and {$BE.PASSWORD} must be set on template or host level before usage. These are username and password to connect to BEDB database.\r\n\r\nLLD returns {#JOB.TYPE} macros, containig 'FULL' or 'INCR' string to determine backup job type.\r\nOn database level it's:\r\n16777216 - INCR\r\n16973824 - FULL\r\n\r\nDocumentation will be available soon on my GitHub page (https://github.com/asand3r).",
        "tls_connect": "1",
        "tls_accept": "1",
        "tls_issuer": "",
        "tls_subject": "",
        "tls_psk_identity": "",
        "tls_psk": "",
        "proxy_address": "",
        "auto_compress": "1",
        "parentTemplates": [],
        "items": [],
        "triggers": [],
        "graphs": [],
        "httpTests": [],
        "macros": [
            {
                "hostmacroid": "3002",
                "hostid": "10894",
                "macro": "{$BE.PASSWORD}",
                "value": "PASSWORD",
                "description": "",
                "type": "0"
            },
            {
                "hostmacroid": "3003",
                "hostid": "10894",
                "macro": "{$BE.USER}",
                "value": "LOGIN",
                "description": "",
                "type": "0"
            },
            {
                "hostmacroid": "3004",
                "hostid": "10894",
                "macro": "{$HISTORY}",
                "value": "14d",
                "description": "",
                "type": "0"
            },
            {
                "hostmacroid": "3005",
                "hostid": "10894",
                "macro": "{$TRENDS}",
                "value": "180d",
                "description": "",
                "type": "0"
            }
        ],
        "screens": [],
        "discoveries": [
            {
                "itemid": "50852",
                "type": "7",
                "snmp_oid": "",
                "hostid": "10894",
                "name": "Backup Exec Services",
                "key_": "service.discovery",
                "delay": "3h",
                "history": "90d",
                "trends": "0",
                "status": "0",
                "value_type": "4",
                "trapper_hosts": "",
                "units": "",
                "logtimefmt": "",
                "templateid": "0",
                "valuemapid": "0",
                "params": "",
                "ipmi_sensor": "",
                "authtype": "0",
                "username": "",
                "password": "",
                "publickey": "",
                "privatekey": "",
                "flags": "1",
                "interfaceid": "0",
                "description": "Discovery Backup Exec Services.",
                "inventory_link": "0",
                "lifetime": "3d",
                "jmx_endpoint": "",
                "master_itemid": "0",
                "timeout": "3s",
                "url": "",
                "query_fields": [],
                "posts": "",
                "status_codes": "200",
                "follow_redirects": "1",
                "post_type": "0",
                "http_proxy": "",
                "headers": [],
                "retrieve_mode": "0",
                "request_method": "1",
                "ssl_cert_file": "",
                "ssl_key_file": "",
                "ssl_key_password": "",
                "verify_peer": "0",
                "verify_host": "0",
                "allow_traps": "0",
                "discover": "0",
                "state": "0",
                "error": "",
                "items": [
                    {
                        "itemid": "50857",
                        "type": "7",
                        "snmp_oid": "",
                        "hostid": "10894",
                        "name": "Service {#SERVICE.NAME} status",
                        "key_": "service.info[{#SERVICE.NAME}]",
                        "delay": "1m",
                        "history": "{$HISTORY}",
                        "trends": "{$TRENDS}",
                        "status": "0",
                        "value_type": "3",
                        "trapper_hosts": "",
                        "units": "",
                        "formula": "",
                        "logtimefmt": "",
                        "templateid": "0",
                        "valuemapid": "3",
                        "params": "",
                        "ipmi_sensor": "",
                        "authtype": "0",
                        "username": "",
                        "password": "",
                        "publickey": "",
                        "privatekey": "",
                        "flags": "2",
                        "interfaceid": "0",
                        "description": "{#SERVICE.NAME} status\r\n\r\nDisplay name: {#SERVICE.DISPLAYNAME}\r\nDescription: {#SERVICE.DESCRIPTION}",
                        "inventory_link": "0",
                        "lifetime": "30d",
                        "evaltype": "0",
                        "jmx_endpoint": "",
                        "master_itemid": "0",
                        "timeout": "3s",
                        "url": "",
                        "query_fields": [],
                        "posts": "",
                        "status_codes": "200",
                        "follow_redirects": "1",
                        "post_type": "0",
                        "http_proxy": "",
                        "headers": [],
                        "retrieve_mode": "0",
                        "request_method": "1",
                        "output_format": "0",
                        "ssl_cert_file": "",
                        "ssl_key_file": "",
                        "ssl_key_password": "",
                        "verify_peer": "0",
                        "verify_host": "0",
                        "allow_traps": "0",
                        "discover": "0"
                    }
                ],
                "triggers": [
                    {
                        "triggerid": "25370",
                        "expression": "{30709}>3",
                        "description": "Service {#SERVICE.NAME} in {ITEM.VALUE} state",
                        "url": "",
                        "status": "0",
                        "value": "0",
                        "priority": "2",
                        "lastchange": "0",
                        "comments": "Service {#SERVICE.NAME} ({#SERVICE.DISPLAYNAME}) not in 'Running' state",
                        "error": "",
                        "templateid": "0",
                        "type": "0",
                        "state": "0",
                        "flags": "2",
                        "recovery_mode": "0",
                        "recovery_expression": "",
                        "correlation_mode": "0",
                        "correlation_tag": "",
                        "manual_close": "0",
                        "opdata": "",
                        "discover": "0"
                    }
                ],
                "graphs": [],
                "hostPrototypes": [],
                "filter": {
                    "evaltype": "0",
                    "formula": "",
                    "conditions": [
                        {
                            "macro": "{#SERVICE.NAME}",
                            "value": "^BackupExec|bedbg",
                            "operator": "8",
                            "formulaid": "A"
                        },
                        {
                            "macro": "{#SERVICE.STARTUP}",
                            "value": "0",
                            "operator": "8",
                            "formulaid": "B"
                        }
                    ],
                    "eval_formula": "A and B"
                }
            },
            {
                "itemid": "50851",
                "type": "11",
                "snmp_oid": "",
                "hostid": "10894",
                "name": "Backup Exec Jobs Discovery (INCREMENTAL)",
                "key_": "db.odbc.discovery[be.jobs.incr,{HOST.HOST}]",
                "delay": "1h",
                "history": "90d",
                "trends": "0",
                "status": "0",
                "value_type": "4",
                "trapper_hosts": "",
                "units": "",
                "logtimefmt": "",
                "templateid": "0",
                "valuemapid": "0",
                "params": "SELECT JobID as 'JOB.ID', JobName as 'JOB.NAME', CurrentStatus as 'JOB.STATUS', IIF (JobRunFlags = 16777216, 'INCR', 'FULL') as 'JOB.TYPE'\r\nFROM BEDB.dbo.vwJobs\r\nWHERE TaskTypeID = 200 and CurrentStatus IN ('16','17','18');",
                "ipmi_sensor": "",
                "authtype": "0",
                "username": "{$BE.USER}",
                "password": "{$BE.PASSWORD}",
                "publickey": "",
                "privatekey": "",
                "flags": "1",
                "interfaceid": "0",
                "description": "Discover Incremental Backup Exec jobs by SQL query.",
                "inventory_link": "0",
                "lifetime": "7d",
                "jmx_endpoint": "",
                "master_itemid": "0",
                "timeout": "3s",
                "url": "",
                "query_fields": [],
                "posts": "",
                "status_codes": "200",
                "follow_redirects": "1",
                "post_type": "0",
                "http_proxy": "",
                "headers": [],
                "retrieve_mode": "0",
                "request_method": "0",
                "ssl_cert_file": "",
                "ssl_key_file": "",
                "ssl_key_password": "",
                "verify_peer": "0",
                "verify_host": "0",
                "allow_traps": "0",
                "discover": "0",
                "state": "0",
                "error": "",
                "items": [
                    {
                        "itemid": "50855",
                        "type": "11",
                        "snmp_oid": "",
                        "hostid": "10894",
                        "name": "{#JOB.NAME}: Final Job Status",
                        "key_": "db.odbc.select[be.job.incr.{#JOB.NAME}.finaljobstatus,{HOST.HOST}]",
                        "delay": "15m",
                        "history": "{$HISTORY}",
                        "trends": "{$TRENDS}",
                        "status": "0",
                        "value_type": "3",
                        "trapper_hosts": "",
                        "units": "",
                        "formula": "",
                        "logtimefmt": "",
                        "templateid": "0",
                        "valuemapid": "489",
                        "params": "SELECT ISNULL ((SELECT TOP 1 FinalJobStatus FROM BEDB.dbo.JobHistorySummary WHERE JobID = '{#JOB.ID}' and IsJobActive != 1 ORDER BY EndTime DESC), 0);",
                        "ipmi_sensor": "",
                        "authtype": "0",
                        "username": "{$BE.USER}",
                        "password": "{$BE.PASSWORD}",
                        "publickey": "",
                        "privatekey": "",
                        "flags": "2",
                        "interfaceid": "0",
                        "description": "{#JOB.NAME} final job status",
                        "inventory_link": "0",
                        "lifetime": "30d",
                        "evaltype": "0",
                        "jmx_endpoint": "",
                        "master_itemid": "0",
                        "timeout": "3s",
                        "url": "",
                        "query_fields": [],
                        "posts": "",
                        "status_codes": "200",
                        "follow_redirects": "1",
                        "post_type": "0",
                        "http_proxy": "",
                        "headers": [],
                        "retrieve_mode": "0",
                        "request_method": "0",
                        "output_format": "0",
                        "ssl_cert_file": "",
                        "ssl_key_file": "",
                        "ssl_key_password": "",
                        "verify_peer": "0",
                        "verify_host": "0",
                        "allow_traps": "0",
                        "discover": "0"
                    },
                    {
                        "itemid": "50856",
                        "type": "11",
                        "snmp_oid": "",
                        "hostid": "10894",
                        "name": "{#JOB.NAME}: Total Data Size, bytes",
                        "key_": "db.odbc.select[be.job.incr.{#JOB.NAME}.totalbytes,{HOST.HOST}]",
                        "delay": "15m",
                        "history": "{$HISTORY}",
                        "trends": "{$TRENDS}",
                        "status": "0",
                        "value_type": "3",
                        "trapper_hosts": "",
                        "units": "B",
                        "formula": "",
                        "logtimefmt": "",
                        "templateid": "0",
                        "valuemapid": "0",
                        "params": "SELECT ISNULL ((SELECT TOP 1 TotalDataSizeBytes FROM BEDB.dbo.JobHistorySummary WHERE JobID = '{#JOB.ID}' and IsJobActive != 1 ORDER BY EndTime DESC), 0);",
                        "ipmi_sensor": "",
                        "authtype": "0",
                        "username": "{$BE.USER}",
                        "password": "{$BE.PASSWORD}",
                        "publickey": "",
                        "privatekey": "",
                        "flags": "2",
                        "interfaceid": "0",
                        "description": "{#JOB.NAME} total bytes",
                        "inventory_link": "0",
                        "lifetime": "30d",
                        "evaltype": "0",
                        "jmx_endpoint": "",
                        "master_itemid": "0",
                        "timeout": "3s",
                        "url": "",
                        "query_fields": [],
                        "posts": "",
                        "status_codes": "200",
                        "follow_redirects": "1",
                        "post_type": "0",
                        "http_proxy": "",
                        "headers": [],
                        "retrieve_mode": "0",
                        "request_method": "0",
                        "output_format": "0",
                        "ssl_cert_file": "",
                        "ssl_key_file": "",
                        "ssl_key_password": "",
                        "verify_peer": "0",
                        "verify_host": "0",
                        "allow_traps": "0",
                        "discover": "0"
                    }
                ],
                "triggers": [
                    {
                        "triggerid": "25369",
                        "expression": "{30708}<>0",
                        "description": "Backup job {#JOB.NAME}: {ITEM.VALUE}",
                        "url": "",
                        "status": "0",
                        "value": "0",
                        "priority": "2",
                        "lastchange": "0",
                        "comments": "Backup job {#JOB.NAME} finished with error: {ITEM.LASTVALUE}.",
                        "error": "",
                        "templateid": "0",
                        "type": "0",
                        "state": "0",
                        "flags": "2",
                        "recovery_mode": "0",
                        "recovery_expression": "",
                        "correlation_mode": "0",
                        "correlation_tag": "",
                        "manual_close": "0",
                        "opdata": "",
                        "discover": "0"
                    }
                ],
                "graphs": [
                    {
                        "graphid": "3263",
                        "name": "{#JOB.NAME}: Saved Data Size (incremental)",
                        "width": "900",
                        "height": "200",
                        "yaxismin": "0",
                        "yaxismax": "100",
                        "templateid": "0",
                        "show_work_period": "1",
                        "show_triggers": "1",
                        "graphtype": "0",
                        "show_legend": "1",
                        "show_3d": "0",
                        "percent_left": "0",
                        "percent_right": "0",
                        "ymin_type": "0",
                        "ymax_type": "0",
                        "ymin_itemid": "0",
                        "ymax_itemid": "0",
                        "flags": "2",
                        "discover": "0"
                    }
                ],
                "hostPrototypes": [],
                "filter": {
                    "evaltype": "0",
                    "formula": "",
                    "conditions": [
                        {
                            "macro": "{#JOB.TYPE}",
                            "value": "^INCR$",
                            "operator": "8",
                            "formulaid": "A"
                        }
                    ],
                    "eval_formula": "A"
                }
            },
            {
                "itemid": "50850",
                "type": "11",
                "snmp_oid": "",
                "hostid": "10894",
                "name": "Backup Exec Jobs Discovery (FULL)",
                "key_": "db.odbc.discovery[be.jobs.full,{HOST.HOST}]",
                "delay": "1h",
                "history": "90d",
                "trends": "0",
                "status": "0",
                "value_type": "4",
                "trapper_hosts": "",
                "units": "",
                "logtimefmt": "",
                "templateid": "0",
                "valuemapid": "0",
                "params": "SELECT JobID as 'JOB.ID', JobName as 'JOB.NAME', CurrentStatus as 'JOB.STATUS', IIF (JobRunFlags = 16777216, 'INCR', 'FULL') as 'JOB.TYPE'\r\nFROM BEDB.dbo.vwJobs\r\nWHERE TaskTypeID = 200 and CurrentStatus IN ('16','17','18');",
                "ipmi_sensor": "",
                "authtype": "0",
                "username": "{$BE.USER}",
                "password": "{$BE.PASSWORD}",
                "publickey": "",
                "privatekey": "",
                "flags": "1",
                "interfaceid": "0",
                "description": "Discover Full Backup Exec jobs by SQL query.",
                "inventory_link": "0",
                "lifetime": "7d",
                "jmx_endpoint": "",
                "master_itemid": "0",
                "timeout": "3s",
                "url": "",
                "query_fields": [],
                "posts": "",
                "status_codes": "200",
                "follow_redirects": "1",
                "post_type": "0",
                "http_proxy": "",
                "headers": [],
                "retrieve_mode": "0",
                "request_method": "1",
                "ssl_cert_file": "",
                "ssl_key_file": "",
                "ssl_key_password": "",
                "verify_peer": "0",
                "verify_host": "0",
                "allow_traps": "0",
                "discover": "0",
                "state": "0",
                "error": "",
                "items": [
                    {
                        "itemid": "50853",
                        "type": "11",
                        "snmp_oid": "",
                        "hostid": "10894",
                        "name": "{#JOB.NAME}: Final Job Status",
                        "key_": "db.odbc.select[be.job.full.{#JOB.NAME}.finaljobstatus,{HOST.HOST}]",
                        "delay": "15m",
                        "history": "{$HISTORY}",
                        "trends": "{$TRENDS}",
                        "status": "0",
                        "value_type": "3",
                        "trapper_hosts": "",
                        "units": "",
                        "formula": "",
                        "logtimefmt": "",
                        "templateid": "0",
                        "valuemapid": "489",
                        "params": "SELECT ISNULL ((SELECT TOP 1 FinalJobStatus FROM BEDB.dbo.JobHistorySummary WHERE JobID = '{#JOB.ID}' and IsJobActive != 1 ORDER BY EndTime DESC), 0);",
                        "ipmi_sensor": "",
                        "authtype": "0",
                        "username": "{$BE.USER}",
                        "password": "{$BE.PASSWORD}",
                        "publickey": "",
                        "privatekey": "",
                        "flags": "2",
                        "interfaceid": "0",
                        "description": "{#JOB.NAME} final job status",
                        "inventory_link": "0",
                        "lifetime": "30d",
                        "evaltype": "0",
                        "jmx_endpoint": "",
                        "master_itemid": "0",
                        "timeout": "3s",
                        "url": "",
                        "query_fields": [],
                        "posts": "",
                        "status_codes": "200",
                        "follow_redirects": "1",
                        "post_type": "0",
                        "http_proxy": "",
                        "headers": [],
                        "retrieve_mode": "0",
                        "request_method": "1",
                        "output_format": "0",
                        "ssl_cert_file": "",
                        "ssl_key_file": "",
                        "ssl_key_password": "",
                        "verify_peer": "0",
                        "verify_host": "0",
                        "allow_traps": "0",
                        "discover": "0"
                    },
                    {
                        "itemid": "50854",
                        "type": "11",
                        "snmp_oid": "",
                        "hostid": "10894",
                        "name": "{#JOB.NAME}: Total Data Size, bytes",
                        "key_": "db.odbc.select[be.job.full.{#JOB.NAME}.totalbytes,{HOST.HOST}]",
                        "delay": "15m",
                        "history": "{$HISTORY}",
                        "trends": "{$TRENDS}",
                        "status": "0",
                        "value_type": "3",
                        "trapper_hosts": "",
                        "units": "B",
                        "formula": "",
                        "logtimefmt": "",
                        "templateid": "0",
                        "valuemapid": "0",
                        "params": "SELECT ISNULL ((SELECT TOP 1 TotalDataSizeBytes FROM BEDB.dbo.JobHistorySummary WHERE JobID = '{#JOB.ID}' and IsJobActive != 1 ORDER BY EndTime DESC), 0);",
                        "ipmi_sensor": "",
                        "authtype": "0",
                        "username": "{$BE.USER}",
                        "password": "{$BE.PASSWORD}",
                        "publickey": "",
                        "privatekey": "",
                        "flags": "2",
                        "interfaceid": "0",
                        "description": "{#JOB.NAME} total bytes",
                        "inventory_link": "0",
                        "lifetime": "30d",
                        "evaltype": "0",
                        "jmx_endpoint": "",
                        "master_itemid": "0",
                        "timeout": "3s",
                        "url": "",
                        "query_fields": [],
                        "posts": "",
                        "status_codes": "200",
                        "follow_redirects": "1",
                        "post_type": "0",
                        "http_proxy": "",
                        "headers": [],
                        "retrieve_mode": "0",
                        "request_method": "1",
                        "output_format": "0",
                        "ssl_cert_file": "",
                        "ssl_key_file": "",
                        "ssl_key_password": "",
                        "verify_peer": "0",
                        "verify_host": "0",
                        "allow_traps": "0",
                        "discover": "0"
                    }
                ],
                "triggers": [
                    {
                        "triggerid": "25368",
                        "expression": "{30707}<>0",
                        "description": "Backup job {#JOB.NAME}: {ITEM.VALUE}",
                        "url": "",
                        "status": "0",
                        "value": "0",
                        "priority": "3",
                        "lastchange": "0",
                        "comments": "Backup job {#JOB.NAME} finished with error: {ITEM.LASTVALUE}.",
                        "error": "",
                        "templateid": "0",
                        "type": "0",
                        "state": "0",
                        "flags": "2",
                        "recovery_mode": "0",
                        "recovery_expression": "",
                        "correlation_mode": "0",
                        "correlation_tag": "",
                        "manual_close": "0",
                        "opdata": "",
                        "discover": "0"
                    }
                ],
                "graphs": [
                    {
                        "graphid": "3262",
                        "name": "{#JOB.NAME}: Saved Data Size",
                        "width": "900",
                        "height": "200",
                        "yaxismin": "0",
                        "yaxismax": "100",
                        "templateid": "0",
                        "show_work_period": "1",
                        "show_triggers": "1",
                        "graphtype": "0",
                        "show_legend": "1",
                        "show_3d": "0",
                        "percent_left": "0",
                        "percent_right": "0",
                        "ymin_type": "0",
                        "ymax_type": "0",
                        "ymin_itemid": "0",
                        "ymax_itemid": "0",
                        "flags": "2",
                        "discover": "0"
                    }
                ],
                "hostPrototypes": [],
                "filter": {
                    "evaltype": "0",
                    "formula": "",
                    "conditions": [
                        {
                            "macro": "{#JOB.TYPE}",
                            "value": "^FULL$",
                            "operator": "8",
                            "formulaid": "A"
                        }
                    ],
                    "eval_formula": "A"
                }
            }
        ]
    }
]