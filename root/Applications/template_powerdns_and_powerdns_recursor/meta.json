{
    "link_name": "PowerDNS and PowerDNS Recursor",
    "type": "Template",
    "OS": "",
    "vendor": "Others",
    "minZabbVer": "2.0.x",
    "link_desc": "<h2><strong>Requirements</strong></h2>\n<ul>\n<li>PDNS and/or PDNS Recursor 3.x and above.</li>\n<li>Zabbix Agent on the monitored host.</li>\n<li>Zabbix 2.x and above.</li>\n</ul>\n<h2><strong>How it works</strong></h2>\n<p>The template export file includes two templates. One for the PDNS authoritative server and one for the PDNS recursor. They function independently and either one can be disabled if necessary.</p>\n<p>Using the Zabbix Agent, \"pdns_control\" and \"rec_control\" are regularly polled for statistics about the PDNS authoritative server and the PDNS Recursor.</p>\n<p>When appropriate, items in the two templates have been created using \"Store Value - Delta (speed per second)\". Remaining items that present \"current state\" information (like Uptime, Latency and Security Status) are stored \"As is\".</p>\n<p>Running \"pdns_control\" and \"rec_control\" requires root privileges and thus it is required to delegate root authority to the zabbix user for these two binaries specifically.</p>\n<h2><strong>Disclaimer</strong></h2>\n<p>The templates do not include any preconfigured triggers. The templates are intended primarily for gathering information about your DNS services, how they are performing and to gain insight into how you can optimize them.</p>\n<p>Instructions and template have been built and tested using CentOS 6.7 and CentOS 7.0</p>\n<h2><strong>Instructions - PowerDNS and PowerDNS Recursor<br /> </strong></h2>\n<p><em>NOTE: The Sudo and Zabbix Agent configuration steps have to be performed on each host you wish to monitor.</em></p>\n<ol>\n<li>On the host(s) you wish to monitor, add the following at the bottom of \"/etc/sudoers\"\n<ol>\n<li>PDNS\n<pre># Zabbix Agent PDNS\nDefaults:zabbix !requiretty\nzabbix ALL=NOPASSWD: /usr/bin/pdns_control</pre>\n</li>\n<li>PDNS Recursor\n<pre># Zabbix Agent PDNS Recursor\nDefaults:zabbix !requiretty\nzabbix ALL=NOPASSWD: /usr/bin/rec_control</pre>\n</li>\n</ol>\n</li>\n<li>Make sure the following line is present in your Zabbix Agent configuration file \"/etc/zabbix/zabbix_agentd.conf\"\n<ol>\n<li>\n<pre>Include=/etc/zabbix/zabbix_agentd.d/</pre>\n</li>\n</ol>\n</li>\n<li>Create two additional Zabbix Agent configuration files with the following content<br />\n<ol>\n<li>pdns.conf (/etc/zabbix/zabbix_agentd.d/pdns.conf)\n<pre>UserParameter=pdns_stats[*],/usr/bin/sudo /usr/bin/pdns_control show $1</pre>\n</li>\n<li>pdns_recursor.conf (/etc/zabbix/zabbix_agentd.d/pdns_recursor.conf)\n<pre>UserParameter=pdnsrec_stats[*],/usr/bin/sudo /usr/bin/rec_control get $1</pre>\n</li>\n</ol>\n</li>\n<li>Restart the Zabbix Agent to load the new configuration files.</li>\n<li>Create the following value map (Administration -> General -> Value mapping: Create value map)\n<ol>\n<li>Name: PowerDNS Security Status<br /> 0 \u21d2 Resolution failure<br /> 1 \u21d2 OK<br /> 2 \u21d2 Upgrade recommended<br /> 3 \u21d2 Upgrade mandatory</li>\n</ol>\n</li>\n<li>Import the template and assign it to your host(s).</li>\n</ol>",
    "features": "Zabbix Agent",
    "address": "",
    "city": "",
    "state": "",
    "country": "",
    "postcode": "",
    "telephone": "",
    "fax": "",
    "email": "",
    "website": "https://zabbix.tips/template-powerdns-powerdns-recursor/",
    "price": 0,
    "link_hits": 11811,
    "link_votes": null,
    "link_rating": 0,
    "link_featured": null,
    "link_created": "2016-04-24 21:10:26",
    "link_modified": "2016-04-24 22:25:19",
    "link_visited": 1490,
    "publish_up": "2016-04-24 21:10:26",
    "publish_down": "0000-00-00 00:00:00",
    "metakey": "",
    "metadesc": "",
    "1.8": "",
    "2.0": "zbx_export_templates.xml",
    "2.2": "",
    "2.4": "",
    "3.0": "",
    "3.2": "",
    "3.4": "",
    "4.0": "",
    "4.2": "",
    "4.4": "",
    "5.0": "",
    "5.2": "",
    "tags": "powerdns, powerdns recursor, dns, name server",
    "author": "Zabbix.tips",
    "user_id": 527,
    "link_id": 528,
    "cat_id": "115",
    "internal_notes": "",
    "lat": 0,
    "lng": 0,
    "zoom": ""
}