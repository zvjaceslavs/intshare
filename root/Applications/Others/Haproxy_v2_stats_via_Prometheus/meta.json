{"link_name": "Haproxy v2 stats via Prometheus", "type": "Template", "OS": "", "vendor": "Others", "minZabbVer": "4.2.x", "link_desc": "<p>Permit getting stats via prometheus exporter (since haproxy 2.0)</p>\n<p>First, configure your haproxy to expose frontend stats page like this :</p>\n<p>frontend stats<br />    bind *:8880<br />    http-request use-service prometheus-exporter if { path /metrics }<br />    stats enable<br />    stats uri /stats<br />    stats refresh 10s</p>\n<p>Then, check the item haproxy.prometheus.allmetrics URL.</p>\n<p>Discovery for frontends, backends, servers.</p>\n<ul>\n<li>Check if <50% of backend are <span style=\"text-decoration: line-through;\">down</span> (not up, like DRAIN, NOLB, etc )on a frontend.</li>\n<li>Check if connections are >90/95% of the limit on frontend</li>\n<li>Check status of frontend and backend.</li>\n</ul>", "features": "Low Level Discovery (LLD)|HTTP Agent", "address": "", "city": "", "state": "", "country": "", "postcode": "", "telephone": "", "fax": "", "email": "", "website": "", "price": 0, "link_hits": 1473, "link_votes": null, "link_rating": 0, "link_featured": null, "link_created": "2019-11-04 17:08:49", "link_modified": "2019-11-15 14:07:59", "link_visited": null, "publish_up": "2019-11-04 17:08:49", "publish_down": "0000-00-00 00:00:00", "metakey": "", "metadesc": "", "1.8": "", "2.0": "", "2.2": "", "2.4": "", "3.0": "", "3.2": "", "3.4": "", "4.0": "", "4.2": "_T_Zbx_Lin_HAPROXY2_stats_Prometheus.xml", "4.4": "", "5.0": "", "5.2": "", "tags": "haproxy, prometheus, http agent, stats", "author": "", "user_id": 155, "link_id": 1841, "cat_id": "124", "internal_notes": "", "lat": 0, "lng": 0, "zoom": ""}