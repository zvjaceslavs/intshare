{"link_name": "Monitor network services automatically", "type": "Template", "OS": "General", "vendor": "", "minZabbVer": "2.0.x", "link_desc": "<p>At any given time, there's hundreds, if not thousands, of services running on your servers. Many of those have to be reachable over a network. Web services need to be available typically on port 80 and/or 443, FTP services on port 21, MySQL on 3306 and so on. It is extremely important to monitor their connectivity.</p>\n<p>Keeping up with \"what service is running where and on what port\" is very time consuming. Keeping an eye on those services actually being reachable, is a humongous task. As your environment grows, it can eventually become almost impossible to stay on top of.</p>\n<p>With the help of Zabbix LLD (Low-level Discovery), the awesome <a href=\"https://nmap.org/\">nmap</a> tool and a little bash scripting, we'll be able to routinely scan our hosts for running network services. LLD will also take care of dynamically adding Simple checks with accompanying triggers.</p>\n<p><strong>Requirements</strong></p>\n<ul>\n<li>Nmap installed on Zabbix Server and Proxies (<a href=\"https://nmap.org\">https://nmap.org</a>)\n<ul>\n<li>Redhat/CentOS: yum install nmap</li>\n<li>Ubuntu/Debian: apt-get install nmap</li>\n</ul>\n</li>\n</ul>\n<h2><strong>How it works</strong></h2>\n<p>Using LLD, an <a href=\"https://www.zabbix.com/documentation/3.0/manual/config/items/itemtypes/external\">External check</a> is performed, which makes your Zabbix Server or Proxy execute a script (tcp-discovery.sh). The script fires up nmap, which scans the host (from the server or proxy, remotely) and returns all open ports. It will also return their protocol and what service is running behind the port. LLD makes sure items and triggers for all ports are created, activated and ready to monitor.</p>\n<h2><strong>Disclaimer</strong></h2>\n<p>Nmap is an extremely useful tool. Unfortunately it cannot actually perform real magic. If services are using non-standard ports, the service might be incorrectly named upon discovery. Be aware of this!</p>\n<p>The script portion of this template is loosely based on work done by: <a href=\"https://meinit.nl/zabbix-low-level-discovery-tcp-ports-host\">https://meinit.nl/zabbix-low-level-discovery-tcp-ports-host</a></p>\n<h2><strong>Instructions - Monitor network services automatically</strong></h2>\n<ol>\n<li>Copy \u201ctcp-discovery.sh\u201d to your Zabbix Servers and Proxies and place it in \u201c/usr/local/share/zabbix/externalscripts\u201d*\n<ol>\n<li>*Check your server and proxy configuration for the correct folder, look for the tag \u201cExternalScripts\u201d</li>\n</ol>\n</li>\n<li>Make the script executable: chmod +x /usr/local/share/zabbix/externalscripts/tcp-discovery.sh</li>\n<li>Import the template and assign it to your host(s).</li>\n</ol>", "features": "Low Level Discovery (LLD)|Custom Script", "address": "", "city": "", "state": "", "country": "", "postcode": "", "telephone": "", "fax": "", "email": "", "website": "https://zabbix.tips/monitor-services-automatically/", "price": 0, "link_hits": 27211, "link_votes": 1, "link_rating": 5, "link_featured": null, "link_created": "2016-03-09 22:19:00", "link_modified": "2016-04-24 21:23:18", "link_visited": 3074, "publish_up": "2016-03-09 22:19:00", "publish_down": "0000-00-00 00:00:00", "metakey": "", "metadesc": "", "1.8": "", "2.0": "template_app_service_ports.zip", "2.2": "", "2.4": "", "3.0": "", "3.2": "", "3.4": "", "4.0": "", "4.2": "", "4.4": "", "5.0": "", "5.2": "", "tags": "lld, tcp, services, port, external check, simple check, network, discovery, nmap", "author": "Zabbix.tips", "user_id": 527, "link_id": 489, "cat_id": "113", "internal_notes": "", "lat": 0, "lng": 0, "zoom": ""}