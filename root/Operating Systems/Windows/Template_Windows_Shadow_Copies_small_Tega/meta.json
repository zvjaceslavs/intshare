{"link_name": "Template Windows Shadow Copies small Tega", "type": "Template", "OS": "Microsoft Windows", "vendor": "", "minZabbVer": "3.0.x", "link_desc": "<p>The template monitors shadow copies. </p>\n<p>fixed some bugs</p>\n<p>adapted for zabbix 3.4</p>\n<p> </p>\n<p>Minimal powershell version is 3.0</p>\n<p>Checking output should run script as administator:</p>\n<p>powershell.exe -Nologo -NoProfile -ExecutionPolicy Bypass -Command \"&{ set-location 'full path to script e.g: c:\\zabbix\\scripts'; .\\shadow_copies.ps1 }\"</p>\n<p>powershell.exe -Nologo -NoProfile -ExecutionPolicy Bypass -Command \"&{ set-location 'full path to script e.g: c:\\zabbix\\scripts'; .\\shadow_copies.ps1 -debugprint}\"</p>\n<p> </p>\n<p>in zabbix agent config:</p>\n<p>UserParameter=tega.discovery.shadowcopies[*], powershell.exe -Nologo -NoProfile -ExecutionPolicy Bypass -Command \"&{ set-location 'full path to script e.g: c:\\zabbix\\scripts'; .\\shadow_copies.ps1 $1 }\"</p>\n<p> </p>\n<p>Controlled parametrs:<br />1) Shadows copies turned on/off. There is trigger.<br />2) The count of shadow copies.<br />3) Age of shadow copies, hours. There is trigger.<br />4) The last date of the shadow copy.<br />5) The allocated space of shadow copies on volume. Percent of capacity of volume. There is trigger.<br />6) The used space of shadow copies. There is trigger.<br /><br />Graphs:<br />1) The count of shadow copies<br />2) The used space of shadow copies</p>\n<p>For tuning of a template macros are used.</p>\n<p>{$CACHE_TIME_TWSCST} Cache TTL. 0 - cache off, seconds<br /> Edge for triggers:<br /> {$MAX_ALLOCATED_PERCENT_TWSCST} The allocated space of shadow copies on volume, percent of capacity of volume<br /> {$MAX_USED_PERCENT_TWSCST} The used space of shadow copies, percents of capacity of storage shadow copies<br /> {$MIN_SIZE_TWSCST} The minimum volume size for operation of the template, bytes<br /> {$SHADOWCOPY_AGE_TWSCST} Age of shadow copies, hours</p>\n<p>The template uses shadow_copies.ps1 for data getting.</p>\n<p>Perhaps works at versions 2.*.</p>", "features": "Zabbix Agent", "address": "", "city": "", "state": "", "country": "", "postcode": "", "telephone": "", "fax": "", "email": "", "website": "", "price": 0, "link_hits": 5107, "link_votes": 1, "link_rating": 5, "link_featured": null, "link_created": "2016-07-21 16:34:03", "link_modified": "2018-10-09 12:00:02", "link_visited": null, "publish_up": "2016-07-21 16:34:03", "publish_down": "0000-00-00 00:00:00", "metakey": "", "metadesc": "", "1.8": "", "2.0": "", "2.2": "", "2.4": "", "3.0": "Template_Windows_Shadow_Copies_small_Tega.zip", "3.2": "Template_Windows_Shadow_Copies_small_Tega.zip", "3.4": "Template_Windows_Shadow_Copies_small_Tega.zip", "4.0": "", "4.2": "", "4.4": "", "5.0": "", "5.2": "", "tags": "Windows, LLD, PowerShell, Shadow Copies", "author": "Alexey", "user_id": 892, "link_id": 591, "cat_id": "180", "internal_notes": "", "lat": 0, "lng": 0, "zoom": ""}