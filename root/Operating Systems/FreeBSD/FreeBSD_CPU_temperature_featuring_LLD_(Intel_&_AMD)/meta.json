{"link_name": "FreeBSD CPU temperature featuring LLD (Intel & AMD)", "type": "Template", "OS": "FreeBSD", "vendor": "", "minZabbVer": "3.0.x", "link_desc": "<h3>Update: there's an amdtemp module in FreeBSD kernel, similar to coretemp. So this should work on AMD processors, too!</h3>\n<p> </p>\n<p>1) load <a href=\"https://www.freebsd.org/cgi/man.cgi?coretemp\" target=\"_blank\">coretemp kernel module</a>: <strong>kldload coretemp </strong>(for Intel CPUs)<strong><br /></strong>       or <a href=\"https://www.freebsd.org/cgi/man.cgi?query=amdtemp\">amdtemp kernel module</a>:<strong> kldload amdtemp </strong>(for AMD CPUs)</p>\n<p>2) add <strong>coretemp_load=\"YES\"</strong> or <strong>amdtemp_load=\"YES\" </strong>to <strong>/boot/loader.conf</strong></p>\n<p>3) create <strong>userparameter_coretemp.conf</strong> file in zabbix_agentd.conf.d, </p>\n<p><strong>* make sure you have bash installed and the Include directive is present and valid in zabbix_agentd.conf to include individual files *</strong></p>\n<pre>UserParameter=coretemp.cpu.discovery, /usr/local/bin/bash -c 'echo -n \"{\\\"data\\\":[\"; for i in `sysctl -a | grep \"dev.cpu.*.temperature\" | awk -F \".\" '\\''{print $3}'\\'' | sort -n` ; do echo -n \"{\\\"{#CPUCORE}\\\":\\\"\"$i\"\\\"},\" ; done | sed \"s/.$//\"; echo -n \"]}\"'</pre>\n<pre>UserParameter=coretemp.cpu[*], sysctl dev.cpu.$1.temperature | sed 's/.$//' | awk '{print $NF}'</pre>\n<p> </p>\n<p>4) restart zabbix_agentd, import & apply the template</p>\n<p>5) also make sure zabbix_agentd has all the paths needed: in <strong>/etc/rc.conf</strong></p>\n<pre>zabbix_agentd_paths=\"/sbin:/bin:/usr/sbin:/usr/bin:/usr/local/sbin:/usr/local/bin\"<br /><br /><br /></pre>", "features": "Low Level Discovery (LLD)|Zabbix Agent", "address": "", "city": "", "state": "", "country": "", "postcode": "", "telephone": "", "fax": "", "email": "", "website": "", "price": 0, "link_hits": 4169, "link_votes": null, "link_rating": 0, "link_featured": null, "link_created": "2018-01-23 19:48:10", "link_modified": "2018-01-25 08:35:29", "link_visited": null, "publish_up": "2018-01-23 19:48:10", "publish_down": "0000-00-00 00:00:00", "metakey": "", "metadesc": "", "1.8": "", "2.0": "", "2.2": "", "2.4": "", "3.0": "zabbix_freebsd_core_temp.xml", "3.2": "", "3.4": "", "4.0": "", "4.2": "", "4.4": "", "5.0": "", "5.2": "", "tags": "", "author": "Felici\u00e1n Hopp\u00e1l", "user_id": 4742, "link_id": 1062, "cat_id": "233", "internal_notes": "", "lat": 0, "lng": 0, "zoom": ""}