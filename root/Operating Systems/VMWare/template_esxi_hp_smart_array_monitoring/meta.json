{"link_name": "ESXi HP Smart Array Monitoring", "type": "Template", "OS": "General", "vendor": "", "minZabbVer": "2.0.x", "link_desc": "<h2><strong>Overview</strong></h2>\n<p>Template and instructions for monitoring HP Smart Array controllers as well as physical and logical drives attached to them.</p>\n<p>This template is based on scripts and template made by lesovsky:<br /><a href=\"https://github.com/lesovsky/zabbix-extensions/tree/master/files/hwraid-smartarray\">https://github.com/lesovsky/zabbix-extensions/tree/master/files/hwraid-smartarray</a></p>\n<p><strong>Requirements</strong></p>\n<ul>\n<li>VMware ESXi 5.x or newer installed, using HPE Customized ESXi image: <a href=\"http://www8.hp.com/us/en/products/servers/solutions.html?compURI=1499005#tab=TAB4\" target=\"_blank\">http://www8.hp.com/us/en/products/servers/solutions.html?compURI=1499005#tab=TAB4</a></li>\n</ul>\n<h2><strong>How it works</strong></h2>\n<p>Due to limitations of VMWare ESXi, <span style=\"text-decoration: underline;\">all</span> items in this template are \"SSH Check\" based, meaning all checks are performed via SSH.</p>\n<p>The item \"ssh.run[hpraid.data.retrieval]\" connects to your host and creates the file \"/tmp/hp-raid-data-harvester.out\" which contains all information about your controllers, disks and logical drives.</p>\n<p>Discovery is performed by crawling through the data gathered in \"/tmp/hp-raid-data-harvester.out\". Discovered physical and logical devices and corresponding checks are then automatically populated for your host(s).</p>\n<p>All scripts are located within the template which means that no configuration of your ESXi host(s) is necessary. A user with SSH access is all that is needed</p>\n<h2><strong>Disclaimer</strong></h2>\n<p>This template should work with any number of controllers, disks and/or logical drives, however I have only been able to test it with disks and logical drives spanning two controllers. Also, scripts, template and instructions have only been tested on VMware ESXi 6.0 update 1b.</p>\n<h2><strong>Instructions</strong></h2>\n<ol>\n<li>Enable SSH and add an SSH user for Zabbix to use, onto your ESXi system(s), with read-only rights.</li>\n<li>On your ESXi system(s), edit \"/etc/security/access.conf\" and after the last line starting with a '+' sign, add a new line with \"+:zabbixUsername:ALL\".</li>\n<li>For persistence, add this line into \"/etc/rc.local.d/local.sh\" before \"exit 0\" to ensure \"/etc/security/access.conf\" is updated upon reboot:<br />sed -i '/root/s/.*/&\\n\\+:zabbixUsername:ALL/' /etc/security/access.conf   </li>\n<li>Import template \"esxi_hp_smart_array.xml\" into Zabbix.</li>\n<li>Edit template macros {$ZABBIX_SSH_USER} and {$ZABBIX_SSH_PASS}.</li>\n<li>Assign the template to your ESXi server(s).</li>\n</ol>", "features": "Low Level Discovery (LLD)|SSH", "address": "", "city": "", "state": "", "country": "", "postcode": "", "telephone": "", "fax": "", "email": "", "website": "https://zabbix.tips/template-esxi-hp-smart-array-monitoring/", "price": 0, "link_hits": 14078, "link_votes": null, "link_rating": 0, "link_featured": null, "link_created": "2016-03-01 12:16:39", "link_modified": "2016-04-24 21:23:27", "link_visited": 1062, "publish_up": "2016-03-01 12:16:39", "publish_down": "0000-00-00 00:00:00", "metakey": "", "metadesc": "", "1.8": "", "2.0": "esxi_hp_smart_array.xml", "2.2": "", "2.4": "", "3.0": "", "3.2": "", "3.4": "", "4.0": "", "4.2": "", "4.4": "", "5.0": "", "5.2": "", "tags": "hp, smart array, smart, array, hypervisor, raid, disks, disk, vmware, hpe, esxi", "author": "Zabbix.tips", "user_id": 527, "link_id": 479, "cat_id": "181", "internal_notes": "", "lat": 0, "lng": 0, "zoom": ""}