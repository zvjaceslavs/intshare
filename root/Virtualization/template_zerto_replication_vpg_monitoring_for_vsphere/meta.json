{
    "link_name": "Zerto Replication VPG monitoring for vSphere",
    "type": "Template",
    "OS": "",
    "vendor": "Others",
    "minZabbVer": "3.0.x",
    "link_desc": "<p>Hi,</p>\n<p>I built this script and template for Zerto Virtual Replication monitoring and wanted to share it given the benefit I've gained from the Zabbix community.</p>\n<p>I discovers all Zerto virtual protection groups (VPGs) and creates items for various aspects and a few associated triggers.</p>\n<p>Please note: I'm no PowerShell expert as is obvious in the script code, happy to have someone with more skill rework it.</p>\n<p>I've only tested this on v3.0.2 but suspect it will work on previous versions of Zabbix.</p>\n<p><strong>Installation</strong></p>\n<ul>\n<li>Install the Zerto Replication Manage PowShell cmdlets (requires PowerShell v4)</li>\n<li>Add the script to the Windows server running the ZRM webclient in a path accessible by the agent</li>\n<li>Update the script with your vCenter details (I know this could be passed as host macros but just didn't get round to it)</li>\n<li>Setup the UserParameter in the Zabbix Agent to run the script: <code>UserParameter=zerto[*],%SystemRoot%\\system32\\WindowsPowerShell\\v1.0\\powershell.exe -nologo -command \"& C:\\Zabbix\\ZertoMonitoringAPI.ps1\" \"$1\" \"$2\"</code></li>\n<li>Create a Value map called \"ZertoStatus\" with the following maps:\n<ul>\n<li></li>\n<li>0 \u21d2 Initializing</li>\n<li>1 \u21d2 MeetingSLA</li>\n<li>2 \u21d2 NotMeetingSLA</li>\n<li>3 \u21d2 RpoNotMeetingSLA</li>\n<li>4 \u21d2 HistoryNotMeetingSLA</li>\n<li>5 \u21d2 FailingOver</li>\n<li>6 \u21d2 Moving</li>\n<li>7 \u21d2 Deleting</li>\n<li>8 \u21d2 Recovered</li>\n</ul>\n</li>\n<li>Install the template and add it to the ZRM host</li>\n</ul>\n<p><strong>Tips and tricks</strong></p>\n<ul>\n<li>The script takes a bit of time to run, it's worth increasing your timeouts on the Zabbix server or proxy to at least 10 seconds</li>\n<li>If you run the script with the \"RawVPGData\"parameter, it displays the raw unfiltered data coming back from the API, useful if you want to add additional items relating to VPGs\n<ul>\n<li>e.g. <span style=\"font-family: monospace; font-size: xx-small;\"><span style=\"line-height: 15.808px;\">C:\\Zabbix\\ZertoMonitoringAPI.ps1 </span>RawVPGData<span style=\"line-height: 15.808px;\"> </span></span></li>\n</ul>\n</li>\n</ul>\n<p>S</p>",
    "features": "Low Level Discovery (LLD)|Zabbix Agent|Custom Script",
    "address": "",
    "city": "",
    "state": "",
    "country": "",
    "postcode": "",
    "telephone": "",
    "fax": "",
    "email": "",
    "website": "",
    "price": 0,
    "link_hits": 4984,
    "link_votes": null,
    "link_rating": 0,
    "link_featured": null,
    "link_created": "2016-06-24 09:16:38",
    "link_modified": "0000-00-00 00:00:00",
    "link_visited": null,
    "publish_up": "2016-06-24 09:16:38",
    "publish_down": "0000-00-00 00:00:00",
    "metakey": "",
    "metadesc": "",
    "1.8": "",
    "2.0": "",
    "2.2": "",
    "2.4": "",
    "3.0": "ZertoMonitoringAPI.zip",
    "3.2": "",
    "3.4": "",
    "4.0": "",
    "4.2": "",
    "4.4": "",
    "5.0": "",
    "5.2": "",
    "tags": "",
    "author": "",
    "user_id": 913,
    "link_id": 556,
    "cat_id": "158",
    "internal_notes": "",
    "lat": 0,
    "lng": 0,
    "zoom": ""
}