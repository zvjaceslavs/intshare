{
    "link_name": "Hyper-V Template with Replication State",
    "type": "Template",
    "OS": "",
    "vendor": "Others",
    "minZabbVer": "4.0.x",
    "link_desc": "<h2><strong>Collection of standard Hyper-V metrics included Get-VMReplication Health Status with triger.</strong></h2>\n<h3><strong>How to use</strong></h3>\n<p>To collect Replication Status you have to add in zabbix_agentd.win.conf in  #USER-DEFINED MONITORED PARAMETERS # line: </p>\n<p>UserParameter=replica.state,powershell -NoProfile -ExecutionPolicy Bypass -File \"C:\\scripts\\Replica.ps1\" $1</p>\n<p>and put Replica.ps1 file in location C:\\scripts\\ or customize the file path</p>\n<h3>Well Know Issues:</h3>\n<ul>\n<li>HOST:replica.state\" became not supported: Value \"Get-VMReplication : The operation on computer 'advlb2' failed: The WinRM client cannot process the request. If the authentication scheme is different from Kerberos, or if the client computer is not joined to a domain, then HTTPS transport  must be used or the destination machine must be added to the TrustedHosts configuration setting. Use winrm.cmd to configure TrustedHosts. Note that computers in the TrustedHosts list might not be authenticated. You can get more information about that by running the following command: winrm help config.</li>\n</ul>\n<p><strong>Add appropriate account permission to the file Replica.ps1 to execute it. By default Local Service Account is enought to execute.</strong></p>\n<ul>\n<li>Time out running script </li>\n</ul>\n<p><strong>On Zabbix Server Edit </strong><b>zabbix_server.conf and Increase value TimeOut to 10</b></p>\n<p> </p>\n<h3>What's inside</h3>\n<p>PS Script Output gives you two values:</p>\n<p>1 - if Replica.State is \"Normal\"</p>\n<p>2 - if Replica State is \"Critical\"</p>\n<p>For state 2 Triger is set with last time(30)</p>\n<h3> Windows Version</h3>\n<p> Tested for Windows Server 2012  Windows Server 2016, 2019</p>",
    "features": "Zabbix Agent",
    "address": "",
    "city": "",
    "state": "",
    "country": "",
    "postcode": "",
    "telephone": "",
    "fax": "",
    "email": "",
    "website": "",
    "price": 0,
    "link_hits": 24641,
    "link_votes": null,
    "link_rating": 0,
    "link_featured": null,
    "link_created": "2017-06-17 19:07:28",
    "link_modified": "2019-10-21 10:12:09",
    "link_visited": null,
    "publish_up": "2017-06-17 19:07:28",
    "publish_down": "0000-00-00 00:00:00",
    "metakey": "",
    "metadesc": "",
    "1.8": "",
    "2.0": "",
    "2.2": "",
    "2.4": "",
    "3.0": "zbx_Template_Windows_HyperV_Host.zip",
    "3.2": "zbx_Template_Windows_HyperV_Host.zip",
    "3.4": "",
    "4.0": "zbx_Template_Windows_HyperV_Host.zip",
    "4.2": "",
    "4.4": "",
    "5.0": "",
    "5.2": "",
    "tags": "Hyper-V, Replication Health, VMReplication",
    "author": "",
    "user_id": 2607,
    "link_id": 861,
    "cat_id": "297",
    "internal_notes": "",
    "lat": 0,
    "lng": 0,
    "zoom": ""
}