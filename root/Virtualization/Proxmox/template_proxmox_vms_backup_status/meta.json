{
    "link_name": "Proxmox VMs Backup Status Template",
    "type": "Template",
    "OS": "",
    "vendor": "",
    "minZabbVer": "3.4.x",
    "link_desc": "<p>Template that will help to check result of scheduled build-in backup in Proxmox. Based on 2 scripts: discovery script that will find VM numbers and check if backup enabled; monitoring script that will do all other staff.</p>\n<p>You can make any changes in template as you wish.</p>\n<p><strong>Installation:</strong></p>\n<p>0. Setup backup procedure on needed Proxmox server in web interface.<br />1. On needed server copy files from \"scripts\" folder to /etc/zabbix/scripts/<br />2. Make them executable, chmod a+rx script_name<br />3. Add to /etc/zabbix/zabbix_agentd.conf:<br />UserParameter=proxmox-vms-discovery, sudo /etc/zabbix/scripts/proxmox-vms-discovery<br />UserParameter=proxmox-vms-backup-status[*], sudo /etc/zabbix/scripts/proxmox-vms-backup-status $1 $2<br />4. Restart Zabbix agent.<br />5. Add to /etc/sudoers:<br />zabbix ALL=(ALL) NOPASSWD: /etc/zabbix/scripts/proxmox-vms-discovery<br />zabbix ALL=(ALL) NOPASSWD: /etc/zabbix/scripts/proxmox-vms-backup-status<br />6. Import template to Zabbix Server and apply to needed host<br />7. Change macros {$BACKUP_PERIOD} value in template as you wish. Default - 7 days<br /><br />Value mapping that used in template. On Zabbix Server: Administration -> General -> Value mapping<br />Name:         Proxmox VMs backup return codes<br />Value map:    </p>\n<p>0 \u21d2 Invalid VM number, or backup for VM is not configured.<br />1 \u21d2 Backup directory for VM does not exists.<br />2 \u21d2 VM has no backup file.<br />3 \u21d2 VM backup is older than N day(s).<br />4 \u21d2 VM backup finished with errors. Please, check logs.<br />7 \u21d2 VM backup is OK, no errors found.s found.</p>\n<p><strong>Enjoy!</strong></p>\n<p>First release: <a href=\"https://www.zabbix.com/forum/zabbix-cookbook/45712-monitoring-proxmox-ve-virtual-machines-backup-with-zabbix?view=thread\">skygge, Monitoring ProxMox VE virtual machines backup with Zabbix </a></p>\n<p>Modified: MR_Andrew, 2018.<br />Special thanks: Max Dark, Marinero from cyberforum.ru</p>\n<hr />\n<p> Because of I can't attach file due to server error, please use this link to download: <a href=\"https://yadi.sk/d/BHkWUroN_N2zvg\">https://yadi.sk/d/BHkWUroN_N2zvg</a></p>\n<p>I will try to upload file to this share one more time later. Sorry for inconvenience.</p>",
    "features": "Low Level Discovery (LLD)|Zabbix Agent|Custom Script",
    "address": "",
    "city": "",
    "state": "",
    "country": "",
    "postcode": "",
    "telephone": "",
    "fax": "",
    "email": "",
    "website": "",
    "price": 0,
    "link_hits": 14260,
    "link_votes": 2,
    "link_rating": 5,
    "link_featured": null,
    "link_created": "2018-09-09 16:06:34",
    "link_modified": "2018-10-09 20:58:20",
    "link_visited": null,
    "publish_up": "2018-09-09 16:06:34",
    "publish_down": "0000-00-00 00:00:00",
    "metakey": "",
    "metadesc": "",
    "1.8": "",
    "2.0": "",
    "2.2": "",
    "2.4": "",
    "3.0": "",
    "3.2": "",
    "3.4": "zabbix-proxmox-vms-backup.zip",
    "4.0": "",
    "4.2": "",
    "4.4": "",
    "5.0": "",
    "5.2": "",
    "tags": "",
    "author": "MR_Andrew",
    "user_id": 2057,
    "link_id": 1310,
    "cat_id": "232",
    "internal_notes": "",
    "lat": 0,
    "lng": 0,
    "zoom": ""
}