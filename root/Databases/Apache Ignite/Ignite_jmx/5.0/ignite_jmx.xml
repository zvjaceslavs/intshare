<?xml version="1.0" encoding="UTF-8"?>
<zabbix_export>
    <version>4.4</version>
    <date>2020-11-29T10:03:41Z</date>
    <groups>
        <group>
            <name>Templates/Applications</name>
        </group>
        <group>
            <name>Templates/Ignite autoregistration</name>
        </group>
    </groups>
    <templates>
        <template>
            <template>Template App Ignite JMX</template>
            <name>Template App Ignite JMX</name>
            <groups>
                <group>
                    <name>Templates/Applications</name>
                </group>
                <group>
                    <name>Templates/Ignite autoregistration</name>
                </group>
            </groups>
            <applications>
                <application>
                    <name>Cache</name>
                </application>
                <application>
                    <name>ChacheGroup</name>
                </application>
                <application>
                    <name>Communication</name>
                </application>
                <application>
                    <name>Data Region Metrics</name>
                </application>
                <application>
                    <name>Discovery</name>
                </application>
                <application>
                    <name>Local Node Metrics</name>
                </application>
                <application>
                    <name>Partitions</name>
                </application>
                <application>
                    <name>Queue</name>
                </application>
                <application>
                    <name>Topology</name>
                </application>
                <application>
                    <name>Transactions</name>
                </application>
            </applications>
            <discovery_rules>
                <discovery_rule>
                    <name>Cache Metrics</name>
                    <type>JMX</type>
                    <key>jmx.discovery[beans,&quot;org.apache:group=*,name=\&quot;org.apache.ignite.internal.processors.cache.CacheLocalMetricsMXBeanImpl\&quot;&quot;]</key>
                    <delay>30m</delay>
                    <username>{$IGNITE_JMX_USER}</username>
                    <password>{$IGNITE_JMX_PASS}</password>
                    <lifetime>1d</lifetime>
                    <item_prototypes>
                        <item_prototype>
                            <name>{#JMXGROUP} - CacheGets</name>
                            <type>JMX</type>
                            <key>jmx[&quot;{#JMXDOMAIN}:group={#JMXGROUP},name=\&quot;org.apache.ignite.internal.processors.cache.CacheLocalMetricsMXBeanImpl\&quot;&quot;,CacheGets]</key>
                            <delay>5m</delay>
                            <trends>90d</trends>
                            <units>ops</units>
                            <username>{$IGNITE_JMX_USER}</username>
                            <password>{$IGNITE_JMX_PASS}</password>
                            <applications>
                                <application>
                                    <name>Cache</name>
                                </application>
                            </applications>
                            <jmx_endpoint>service:jmx:rmi:///jndi/rmi://{HOST.CONN}:{HOST.PORT}/jmxrmi</jmx_endpoint>
                        </item_prototype>
                        <item_prototype>
                            <name>{#JMXGROUP} - CachePuts</name>
                            <type>JMX</type>
                            <key>jmx[&quot;{#JMXDOMAIN}:group={#JMXGROUP},name=\&quot;org.apache.ignite.internal.processors.cache.CacheLocalMetricsMXBeanImpl\&quot;&quot;,CachePuts]</key>
                            <delay>5m</delay>
                            <trends>90d</trends>
                            <units>ops</units>
                            <username>{$IGNITE_JMX_USER}</username>
                            <password>{$IGNITE_JMX_PASS}</password>
                            <applications>
                                <application>
                                    <name>Cache</name>
                                </application>
                            </applications>
                            <jmx_endpoint>service:jmx:rmi:///jndi/rmi://{HOST.CONN}:{HOST.PORT}/jmxrmi</jmx_endpoint>
                        </item_prototype>
                        <item_prototype>
                            <name>{#JMXGROUP} - CacheRemovals</name>
                            <type>JMX</type>
                            <key>jmx[&quot;{#JMXDOMAIN}:group={#JMXGROUP},name=\&quot;org.apache.ignite.internal.processors.cache.CacheLocalMetricsMXBeanImpl\&quot;&quot;,CacheRemovals]</key>
                            <delay>5m</delay>
                            <trends>90d</trends>
                            <units>ops</units>
                            <username>{$IGNITE_JMX_USER}</username>
                            <password>{$IGNITE_JMX_PASS}</password>
                            <applications>
                                <application>
                                    <name>Cache</name>
                                </application>
                            </applications>
                            <jmx_endpoint>service:jmx:rmi:///jndi/rmi://{HOST.CONN}:{HOST.PORT}/jmxrmi</jmx_endpoint>
                        </item_prototype>
                        <item_prototype>
                            <name>{#JMXGROUP} - CacheSize</name>
                            <type>JMX</type>
                            <key>jmx[&quot;{#JMXDOMAIN}:group={#JMXGROUP},name=\&quot;org.apache.ignite.internal.processors.cache.CacheLocalMetricsMXBeanImpl\&quot;&quot;,CacheSize]</key>
                            <delay>5m</delay>
                            <trends>90d</trends>
                            <units>keys</units>
                            <username>{$IGNITE_JMX_USER}</username>
                            <password>{$IGNITE_JMX_PASS}</password>
                            <applications>
                                <application>
                                    <name>Cache</name>
                                </application>
                            </applications>
                            <jmx_endpoint>service:jmx:rmi:///jndi/rmi://{HOST.CONN}:{HOST.PORT}/jmxrmi</jmx_endpoint>
                        </item_prototype>
                        <item_prototype>
                            <name>{#JMXGROUP} - CacheTxCommits</name>
                            <type>JMX</type>
                            <key>jmx[&quot;{#JMXDOMAIN}:group={#JMXGROUP},name=\&quot;org.apache.ignite.internal.processors.cache.CacheLocalMetricsMXBeanImpl\&quot;&quot;,CacheTxCommits]</key>
                            <delay>5m</delay>
                            <trends>90d</trends>
                            <units>tps</units>
                            <username>{$IGNITE_JMX_USER}</username>
                            <password>{$IGNITE_JMX_PASS}</password>
                            <applications>
                                <application>
                                    <name>Cache</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>CHANGE_PER_SECOND</type>
                                    <params/>
                                </step>
                            </preprocessing>
                            <jmx_endpoint>service:jmx:rmi:///jndi/rmi://{HOST.CONN}:{HOST.PORT}/jmxrmi</jmx_endpoint>
                        </item_prototype>
                        <item_prototype>
                            <name>{#JMXGROUP} - CacheTxRollbacks</name>
                            <type>JMX</type>
                            <key>jmx[&quot;{#JMXDOMAIN}:group={#JMXGROUP},name=\&quot;org.apache.ignite.internal.processors.cache.CacheLocalMetricsMXBeanImpl\&quot;&quot;,CacheTxRollbacks]</key>
                            <delay>5m</delay>
                            <trends>90d</trends>
                            <units>tps</units>
                            <username>{$IGNITE_JMX_USER}</username>
                            <password>{$IGNITE_JMX_PASS}</password>
                            <applications>
                                <application>
                                    <name>Cache</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>CHANGE_PER_SECOND</type>
                                    <params/>
                                </step>
                            </preprocessing>
                            <jmx_endpoint>service:jmx:rmi:///jndi/rmi://{HOST.CONN}:{HOST.PORT}/jmxrmi</jmx_endpoint>
                        </item_prototype>
                        <item_prototype>
                            <name>{#JMXGROUP} - HeapEntriesCount</name>
                            <type>JMX</type>
                            <key>jmx[&quot;{#JMXDOMAIN}:group={#JMXGROUP},name=\&quot;org.apache.ignite.internal.processors.cache.CacheLocalMetricsMXBeanImpl\&quot;&quot;,HeapEntriesCount]</key>
                            <delay>5m</delay>
                            <trends>90d</trends>
                            <units>keys</units>
                            <username>{$IGNITE_JMX_USER}</username>
                            <password>{$IGNITE_JMX_PASS}</password>
                            <applications>
                                <application>
                                    <name>Cache</name>
                                </application>
                            </applications>
                            <jmx_endpoint>service:jmx:rmi:///jndi/rmi://{HOST.CONN}:{HOST.PORT}/jmxrmi</jmx_endpoint>
                        </item_prototype>
                        <item_prototype>
                            <name>{#JMXGROUP} - NodeKeyCount</name>
                            <type>JMX</type>
                            <key>jmx[&quot;{#JMXDOMAIN}:group={#JMXGROUP},name=\&quot;org.apache.ignite.internal.processors.cache.CacheLocalMetricsMXBeanImpl\&quot;&quot;,Size]</key>
                            <delay>5m</delay>
                            <trends>90d</trends>
                            <units>keys</units>
                            <username>{$IGNITE_JMX_USER}</username>
                            <password>{$IGNITE_JMX_PASS}</password>
                            <applications>
                                <application>
                                    <name>Cache</name>
                                </application>
                            </applications>
                            <jmx_endpoint>service:jmx:rmi:///jndi/rmi://{HOST.CONN}:{HOST.PORT}/jmxrmi</jmx_endpoint>
                        </item_prototype>
                    </item_prototypes>
                    <trigger_prototypes>
                        <trigger_prototype>
                            <expression>{Template App Ignite JMX:jmx[&quot;{#JMXDOMAIN}:group={#JMXGROUP},name=\&quot;org.apache.ignite.internal.processors.cache.CacheLocalMetricsMXBeanImpl\&quot;&quot;,HeapEntriesCount].last()}={Template App Ignite JMX:jmx[&quot;{#JMXDOMAIN}:group={#JMXGROUP},name=\&quot;org.apache.ignite.internal.processors.cache.CacheLocalMetricsMXBeanImpl\&quot;&quot;,CacheSize].last()}</expression>
                            <name>{#JMXGROUP} - All entries are in heap</name>
                            <priority>INFO</priority>
                            <description>All entries are in heap. Possibly you use eager queries it may cause out of memory exceptions for big caches.</description>
                        </trigger_prototype>
                        <trigger_prototype>
                            <expression>{Template App Ignite JMX:jmx[&quot;{#JMXDOMAIN}:group={#JMXGROUP},name=\&quot;org.apache.ignite.internal.processors.cache.CacheLocalMetricsMXBeanImpl\&quot;&quot;,CacheTxCommits].last()}&lt;{Template App Ignite JMX:jmx[&quot;{#JMXDOMAIN}:group={#JMXGROUP},name=\&quot;org.apache.ignite.internal.processors.cache.CacheLocalMetricsMXBeanImpl\&quot;&quot;,CacheTxRollbacks].last()}</expression>
                            <name>{#JMXGROUP} - There are more then 50% rollbacks</name>
                            <priority>WARNING</priority>
                            <dependencies>
                                <dependency>
                                    <name>{#JMXGROUP} - There is no success transactions for cache</name>
                                    <expression>{Template App Ignite JMX:jmx[&quot;{#JMXDOMAIN}:group={#JMXGROUP},name=\&quot;org.apache.ignite.internal.processors.cache.CacheLocalMetricsMXBeanImpl\&quot;&quot;,CacheTxCommits].last()}=0 and {Template App Ignite JMX:jmx[&quot;{#JMXDOMAIN}:group={#JMXGROUP},name=\&quot;org.apache.ignite.internal.processors.cache.CacheLocalMetricsMXBeanImpl\&quot;&quot;,CacheTxRollbacks].last()}&gt;0</expression>
                                </dependency>
                            </dependencies>
                        </trigger_prototype>
                        <trigger_prototype>
                            <expression>{Template App Ignite JMX:jmx[&quot;{#JMXDOMAIN}:group={#JMXGROUP},name=\&quot;org.apache.ignite.internal.processors.cache.CacheLocalMetricsMXBeanImpl\&quot;&quot;,CacheTxCommits].last()}=0 and {Template App Ignite JMX:jmx[&quot;{#JMXDOMAIN}:group={#JMXGROUP},name=\&quot;org.apache.ignite.internal.processors.cache.CacheLocalMetricsMXBeanImpl\&quot;&quot;,CacheTxRollbacks].last()}&gt;0</expression>
                            <name>{#JMXGROUP} - There is no success transactions for cache</name>
                            <priority>AVERAGE</priority>
                        </trigger_prototype>
                    </trigger_prototypes>
                    <jmx_endpoint>service:jmx:rmi:///jndi/rmi://{HOST.CONN}:{HOST.PORT}/jmxrmi</jmx_endpoint>
                </discovery_rule>
                <discovery_rule>
                    <name>Data Region Metrics</name>
                    <type>JMX</type>
                    <key>jmx.discovery[beans,&quot;org.apache:group=DataRegionMetrics,name=*&quot;]</key>
                    <delay>30m</delay>
                    <lifetime>1d</lifetime>
                    <item_prototypes>
                        <item_prototype>
                            <name>{#JMXNAME} - Checkpoint buffer utilization</name>
                            <type>CALCULATED</type>
                            <key>checkpointBufferUtilization[{#JMXNAME}]</key>
                            <units>%</units>
                            <params>max(&quot;jmx[\&quot;{#JMXDOMAIN}:group=DataRegionMetrics,name={#JMXNAME}\&quot;,CheckpointBufferSize]&quot;,5m)/100*max(&quot;jmx[\&quot;{#JMXDOMAIN}:group=DataRegionMetrics,name={#JMXNAME}\&quot;,UsedCheckpointBufferSize]&quot;,5m)</params>
                            <applications>
                                <application>
                                    <name>Data Region Metrics</name>
                                </application>
                            </applications>
                            <trigger_prototypes>
                                <trigger_prototype>
                                    <expression>{min(5)}&gt;66</expression>
                                    <name>{#JMXNAME} - Checkpoint buffer utilization &gt; 66%</name>
                                    <priority>WARNING</priority>
                                    <description>Checkpoint buffer utilization is high. Threads will be throttled to avoid buffer overflow. It can be coused by high disk utilization.</description>
                                    <dependencies>
                                        <dependency>
                                            <name>{#JMXNAME} - Checkpoint buffer utilization &gt; 80%</name>
                                            <expression>{Template App Ignite JMX:checkpointBufferUtilization[{#JMXNAME}].min(5)}&gt;80</expression>
                                        </dependency>
                                    </dependencies>
                                    <tags>
                                        <tag>
                                            <tag>ignite</tag>
                                            <value>utilization</value>
                                        </tag>
                                    </tags>
                                </trigger_prototype>
                                <trigger_prototype>
                                    <expression>{min(5)}&gt;80</expression>
                                    <name>{#JMXNAME} - Checkpoint buffer utilization &gt; 80%</name>
                                    <priority>HIGH</priority>
                                    <description>Checkpoint buffer utilization is high. Threads will be throttled to avoid buffer overflow. It can be caused by high disk utilization.</description>
                                    <tags>
                                        <tag>
                                            <tag>ignite</tag>
                                            <value>utilization</value>
                                        </tag>
                                    </tags>
                                </trigger_prototype>
                            </trigger_prototypes>
                        </item_prototype>
                        <item_prototype>
                            <name>{#JMXNAME} - DataRegion utilisation</name>
                            <type>CALCULATED</type>
                            <key>dataRegion.util[{#JMXNAME}]</key>
                            <history>2w</history>
                            <trends>30d</trends>
                            <value_type>FLOAT</value_type>
                            <units>%</units>
                            <params>max(&quot;jmx[\&quot;org.apache:group=DataRegionMetrics,name={#JMXDOMAIN}\&quot;,OffheapSize]&quot;,5m)/100*max(&quot;&quot;jmx[\&quot;org.apache:group=DataRegionMetrics,name={#JMXDOMAIN}\&quot;,OffheapUsedSize]&quot;,5m)</params>
                            <applications>
                                <application>
                                    <name>Data Region Metrics</name>
                                </application>
                            </applications>
                            <trigger_prototypes>
                                <trigger_prototype>
                                    <expression>{last()}&gt;80</expression>
                                    <name>{#JMXNAME} - Data region utilization &gt; 80%</name>
                                    <priority>WARNING</priority>
                                    <description>Data region utilization is high. Increase data region size or delete any data.</description>
                                    <dependencies>
                                        <dependency>
                                            <name>{#JMXNAME} - Data region utilization &gt; 90%</name>
                                            <expression>{Template App Ignite JMX:dataRegion.util[{#JMXNAME}].last()}&gt;90</expression>
                                        </dependency>
                                    </dependencies>
                                    <tags>
                                        <tag>
                                            <tag>ignite</tag>
                                            <value>storage_utilization</value>
                                        </tag>
                                    </tags>
                                </trigger_prototype>
                                <trigger_prototype>
                                    <expression>{last()}&gt;90</expression>
                                    <name>{#JMXNAME} - Data region utilization &gt; 90%</name>
                                    <priority>AVERAGE</priority>
                                    <description>Data region utilization is high. Increase data region size or delete any data.</description>
                                    <dependencies>
                                        <dependency>
                                            <name>{#JMXNAME} - Data region utilization &gt; 95%</name>
                                            <expression>{Template App Ignite JMX:dataRegion.util[{#JMXNAME}].last()}&gt;95</expression>
                                        </dependency>
                                    </dependencies>
                                    <tags>
                                        <tag>
                                            <tag>ignite</tag>
                                            <value>storage_utilization</value>
                                        </tag>
                                    </tags>
                                </trigger_prototype>
                                <trigger_prototype>
                                    <expression>{last()}&gt;95</expression>
                                    <name>{#JMXNAME} - Data region utilization &gt; 95%</name>
                                    <priority>HIGH</priority>
                                    <description>Data region utilization is high. Increase data region size or delete any data.</description>
                                    <tags>
                                        <tag>
                                            <tag>ignite</tag>
                                            <value>storage_utilization</value>
                                        </tag>
                                    </tags>
                                </trigger_prototype>
                            </trigger_prototypes>
                        </item_prototype>
                        <item_prototype>
                            <name>{#JMXNAME} - AllocationRate</name>
                            <type>JMX</type>
                            <key>jmx[&quot;{#JMXDOMAIN}:group=DataRegionMetrics,name={#JMXNAME}&quot;,AllocationRate]</key>
                            <history>2w</history>
                            <trends>30d</trends>
                            <value_type>FLOAT</value_type>
                            <units>pps</units>
                            <username>{$IGNITE_JMX_USER}</username>
                            <password>{$IGNITE_JMX_PASS}</password>
                            <applications>
                                <application>
                                    <name>Data Region Metrics</name>
                                </application>
                            </applications>
                            <jmx_endpoint>service:jmx:rmi:///jndi/rmi://{HOST.CONN}:{HOST.PORT}/jmxrmi</jmx_endpoint>
                            <request_method>POST</request_method>
                        </item_prototype>
                        <item_prototype>
                            <name>{#JMXNAME} - CheckpointBufferSize</name>
                            <type>JMX</type>
                            <key>jmx[&quot;{#JMXDOMAIN}:group=DataRegionMetrics,name={#JMXNAME}&quot;,CheckpointBufferSize]</key>
                            <history>2w</history>
                            <trends>30d</trends>
                            <value_type>FLOAT</value_type>
                            <units>B</units>
                            <username>{$IGNITE_JMX_USER}</username>
                            <password>{$IGNITE_JMX_PASS}</password>
                            <applications>
                                <application>
                                    <name>Data Region Metrics</name>
                                </application>
                            </applications>
                            <jmx_endpoint>service:jmx:rmi:///jndi/rmi://{HOST.CONN}:{HOST.PORT}/jmxrmi</jmx_endpoint>
                        </item_prototype>
                        <item_prototype>
                            <name>{#JMXNAME} - DirtyPages</name>
                            <type>JMX</type>
                            <key>jmx[&quot;{#JMXDOMAIN}:group=DataRegionMetrics,name={#JMXNAME}&quot;,DirtyPages]</key>
                            <history>2w</history>
                            <trends>30d</trends>
                            <units>p</units>
                            <username>{$IGNITE_JMX_USER}</username>
                            <password>{$IGNITE_JMX_PASS}</password>
                            <applications>
                                <application>
                                    <name>Data Region Metrics</name>
                                </application>
                            </applications>
                            <jmx_endpoint>service:jmx:rmi:///jndi/rmi://{HOST.CONN}:{HOST.PORT}/jmxrmi</jmx_endpoint>
                            <request_method>POST</request_method>
                        </item_prototype>
                        <item_prototype>
                            <name>{#JMXNAME} - EvictionRate</name>
                            <type>JMX</type>
                            <key>jmx[&quot;{#JMXDOMAIN}:group=DataRegionMetrics,name={#JMXNAME}&quot;,EvictionRate]</key>
                            <history>2w</history>
                            <trends>30d</trends>
                            <value_type>FLOAT</value_type>
                            <units>pps</units>
                            <username>{$IGNITE_JMX_USER}</username>
                            <password>{$IGNITE_JMX_PASS}</password>
                            <applications>
                                <application>
                                    <name>Data Region Metrics</name>
                                </application>
                            </applications>
                            <jmx_endpoint>service:jmx:rmi:///jndi/rmi://{HOST.CONN}:{HOST.PORT}/jmxrmi</jmx_endpoint>
                            <request_method>POST</request_method>
                            <trigger_prototypes>
                                <trigger_prototype>
                                    <expression>{last()}&gt;0</expression>
                                    <name>{#JMXNAME} - Node started to evict pages</name>
                                    <priority>INFO</priority>
                                    <description>You store more data then region can accommodate. Data started to move to disk it can make requests work slower.</description>
                                    <tags>
                                        <tag>
                                            <tag>ignite</tag>
                                            <value>storage_utilization</value>
                                        </tag>
                                    </tags>
                                </trigger_prototype>
                            </trigger_prototypes>
                        </item_prototype>
                        <item_prototype>
                            <name>{#JMXNAME} - MaxSize</name>
                            <type>JMX</type>
                            <key>jmx[&quot;{#JMXDOMAIN}:group=DataRegionMetrics,name={#JMXNAME}&quot;,MaxSize]</key>
                            <history>2w</history>
                            <trends>30d</trends>
                            <units>GB</units>
                            <username>{$IGNITE_JMX_USER}</username>
                            <password>{$IGNITE_JMX_PASS}</password>
                            <applications>
                                <application>
                                    <name>Data Region Metrics</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>MULTIPLIER</type>
                                    <params>1048576</params>
                                </step>
                            </preprocessing>
                            <jmx_endpoint>service:jmx:rmi:///jndi/rmi://{HOST.CONN}:{HOST.PORT}/jmxrmi</jmx_endpoint>
                        </item_prototype>
                        <item_prototype>
                            <name>{#JMXNAME} - OffHeapSize</name>
                            <type>JMX</type>
                            <key>jmx[&quot;{#JMXDOMAIN}:group=DataRegionMetrics,name={#JMXNAME}&quot;,OffHeapSize]</key>
                            <history>2w</history>
                            <trends>30d</trends>
                            <units>B</units>
                            <applications>
                                <application>
                                    <name>Data Region Metrics</name>
                                </application>
                            </applications>
                            <jmx_endpoint>service:jmx:rmi:///jndi/rmi://{HOST.CONN}:{HOST.PORT}/jmxrmi</jmx_endpoint>
                            <request_method>POST</request_method>
                        </item_prototype>
                        <item_prototype>
                            <name>{#JMXNAME} - OffheapUsedSize</name>
                            <type>JMX</type>
                            <key>jmx[&quot;{#JMXDOMAIN}:group=DataRegionMetrics,name={#JMXNAME}&quot;,OffheapUsedSize]</key>
                            <history>2w</history>
                            <trends>30d</trends>
                            <units>B</units>
                            <username>{$IGNITE_JMX_USER}</username>
                            <password>{$IGNITE_JMX_PASS}</password>
                            <applications>
                                <application>
                                    <name>Data Region Metrics</name>
                                </application>
                            </applications>
                            <jmx_endpoint>service:jmx:rmi:///jndi/rmi://{HOST.CONN}:{HOST.PORT}/jmxrmi</jmx_endpoint>
                            <request_method>POST</request_method>
                        </item_prototype>
                        <item_prototype>
                            <name>{#JMXNAME} - PagesFillFactor</name>
                            <type>JMX</type>
                            <key>jmx[&quot;{#JMXDOMAIN}:group=DataRegionMetrics,name={#JMXNAME}&quot;,PagesFillFactor]</key>
                            <history>2w</history>
                            <trends>30d</trends>
                            <value_type>FLOAT</value_type>
                            <username>{$IGNITE_JMX_USER}</username>
                            <password>{$IGNITE_JMX_PASS}</password>
                            <applications>
                                <application>
                                    <name>Data Region Metrics</name>
                                </application>
                            </applications>
                            <jmx_endpoint>service:jmx:rmi:///jndi/rmi://{HOST.CONN}:{HOST.PORT}/jmxrmi</jmx_endpoint>
                        </item_prototype>
                        <item_prototype>
                            <name>{#JMXNAME} - PagesReplaceRate</name>
                            <type>JMX</type>
                            <key>jmx[&quot;{#JMXDOMAIN}:group=DataRegionMetrics,name={#JMXNAME}&quot;,PagesReplaceRate]</key>
                            <history>2w</history>
                            <trends>30d</trends>
                            <value_type>FLOAT</value_type>
                            <units>pps</units>
                            <username>{$IGNITE_JMX_USER}</username>
                            <password>{$IGNITE_JMX_PASS}</password>
                            <applications>
                                <application>
                                    <name>Data Region Metrics</name>
                                </application>
                            </applications>
                            <jmx_endpoint>service:jmx:rmi:///jndi/rmi://{HOST.CONN}:{HOST.PORT}/jmxrmi</jmx_endpoint>
                            <request_method>POST</request_method>
                        </item_prototype>
                        <item_prototype>
                            <name>{#JMXNAME} - UsedCheckpointBufferSize</name>
                            <type>JMX</type>
                            <key>jmx[&quot;{#JMXDOMAIN}:group=DataRegionMetrics,name={#JMXNAME}&quot;,UsedCheckpointBufferSize]</key>
                            <history>2w</history>
                            <trends>30d</trends>
                            <value_type>FLOAT</value_type>
                            <units>B</units>
                            <username>{$IGNITE_JMX_USER}</username>
                            <password>{$IGNITE_JMX_PASS}</password>
                            <applications>
                                <application>
                                    <name>Data Region Metrics</name>
                                </application>
                            </applications>
                            <jmx_endpoint>service:jmx:rmi:///jndi/rmi://{HOST.CONN}:{HOST.PORT}/jmxrmi</jmx_endpoint>
                            <request_method>POST</request_method>
                        </item_prototype>
                        <item_prototype>
                            <name>{#JMXNAME} - OffHeapFree</name>
                            <type>CALCULATED</type>
                            <key>offHeapFree[{#JMXNAME}]</key>
                            <history>2w</history>
                            <trends>30d</trends>
                            <units>B</units>
                            <params>last(&quot;jmx[\&quot;{#JMXDOMAIN}:group=DataRegionMetrics,name={#JMXNAME}\&quot;,OffHeapSize]&quot;)-last(&quot;jmx[\&quot;{#JMXDOMAIN}:group=DataRegionMetrics,name={#JMXNAME}\&quot;,OffheapUsedSize]&quot;)</params>
                            <applications>
                                <application>
                                    <name>Data Region Metrics</name>
                                </application>
                            </applications>
                        </item_prototype>
                    </item_prototypes>
                    <jmx_endpoint>service:jmx:rmi:///jndi/rmi://{HOST.CONN}:{HOST.PORT}/jmxrmi</jmx_endpoint>
                    <request_method>POST</request_method>
                </discovery_rule>
                <discovery_rule>
                    <name>Ingite Kernal Metrics</name>
                    <type>JMX</type>
                    <key>jmx.discovery[beans,&quot;org.apache:group=Kernal,name=IgniteKernal&quot;]</key>
                    <delay>30m</delay>
                    <username>{$IGNITE_JMX_USER}</username>
                    <password>{$IGNITE_JMX_PASS}</password>
                    <lifetime>1d</lifetime>
                    <item_prototypes>
                        <item_prototype>
                            <name>CurrentCancelledJobs</name>
                            <type>JMX</type>
                            <key>jmx[&quot;{#JMXDOMAIN}:group=Kernal,name=ClusterLocalNodeMetricsMXBeanImpl&quot;,CurrentCancelledJobs]</key>
                            <username>{$IGNITE_JMX_USER}</username>
                            <password>{$IGNITE_JMX_PASS}</password>
                            <applications>
                                <application>
                                    <name>Topology</name>
                                </application>
                            </applications>
                            <jmx_endpoint>service:jmx:rmi:///jndi/rmi://{HOST.CONN}:{HOST.PORT}/jmxrmi</jmx_endpoint>
                        </item_prototype>
                        <item_prototype>
                            <name>CurrentPmeDuration</name>
                            <type>JMX</type>
                            <key>jmx[&quot;{#JMXDOMAIN}:group=Kernal,name=ClusterLocalNodeMetricsMXBeanImpl&quot;,CurrentPmeDuration]</key>
                            <delay>10s</delay>
                            <units>ms</units>
                            <username>{$IGNITE_JMX_USER}</username>
                            <password>{$IGNITE_JMX_PASS}</password>
                            <applications>
                                <application>
                                    <name>Topology</name>
                                </application>
                            </applications>
                            <jmx_endpoint>service:jmx:rmi:///jndi/rmi://{HOST.CONN}:{HOST.PORT}/jmxrmi</jmx_endpoint>
                            <trigger_prototypes>
                                <trigger_prototype>
                                    <expression>{last()}&gt;60000</expression>
                                    <name>Looks like PME is hung</name>
                                    <priority>HIGH</priority>
                                </trigger_prototype>
                                <trigger_prototype>
                                    <expression>{last()}&gt;0</expression>
                                    <name>PME on cluster</name>
                                    <priority>INFO</priority>
                                    <dependencies>
                                        <dependency>
                                            <name>Too long pme</name>
                                            <expression>{Template App Ignite JMX:jmx[&quot;{#JMXDOMAIN}:group=Kernal,name=ClusterLocalNodeMetricsMXBeanImpl&quot;,CurrentPmeDuration].last()}&gt;10000</expression>
                                        </dependency>
                                    </dependencies>
                                </trigger_prototype>
                                <trigger_prototype>
                                    <expression>{last()}&gt;10000</expression>
                                    <name>Too long pme</name>
                                    <priority>WARNING</priority>
                                    <dependencies>
                                        <dependency>
                                            <name>Looks like PME is hung</name>
                                            <expression>{Template App Ignite JMX:jmx[&quot;{#JMXDOMAIN}:group=Kernal,name=ClusterLocalNodeMetricsMXBeanImpl&quot;,CurrentPmeDuration].last()}&gt;60000</expression>
                                        </dependency>
                                    </dependencies>
                                </trigger_prototype>
                            </trigger_prototypes>
                        </item_prototype>
                        <item_prototype>
                            <name>CurrentRejectedJobs</name>
                            <type>JMX</type>
                            <key>jmx[&quot;{#JMXDOMAIN}:group=Kernal,name=ClusterLocalNodeMetricsMXBeanImpl&quot;,CurrentRejectedJobs]</key>
                            <username>{$IGNITE_JMX_USER}</username>
                            <password>{$IGNITE_JMX_PASS}</password>
                            <applications>
                                <application>
                                    <name>Topology</name>
                                </application>
                            </applications>
                            <jmx_endpoint>service:jmx:rmi:///jndi/rmi://{HOST.CONN}:{HOST.PORT}/jmxrmi</jmx_endpoint>
                        </item_prototype>
                        <item_prototype>
                            <name>CurrentThreadCount</name>
                            <type>JMX</type>
                            <key>jmx[&quot;{#JMXDOMAIN}:group=Kernal,name=ClusterLocalNodeMetricsMXBeanImpl&quot;,CurrentThreadCount]</key>
                            <username>{$IGNITE_JMX_USER}</username>
                            <password>{$IGNITE_JMX_PASS}</password>
                            <applications>
                                <application>
                                    <name>Topology</name>
                                </application>
                            </applications>
                            <jmx_endpoint>service:jmx:rmi:///jndi/rmi://{HOST.CONN}:{HOST.PORT}/jmxrmi</jmx_endpoint>
                            <trigger_prototypes>
                                <trigger_prototype>
                                    <expression>{last()}&gt;1000</expression>
                                    <name>Too many running threads</name>
                                    <priority>WARNING</priority>
                                    <dependencies>
                                        <dependency>
                                            <name>Looks like PME is hung</name>
                                            <expression>{Template App Ignite JMX:jmx[&quot;{#JMXDOMAIN}:group=Kernal,name=ClusterLocalNodeMetricsMXBeanImpl&quot;,CurrentPmeDuration].last()}&gt;60000</expression>
                                        </dependency>
                                    </dependencies>
                                </trigger_prototype>
                            </trigger_prototypes>
                        </item_prototype>
                        <item_prototype>
                            <name>CurrentWaitingJobs</name>
                            <type>JMX</type>
                            <key>jmx[&quot;{#JMXDOMAIN}:group=Kernal,name=ClusterLocalNodeMetricsMXBeanImpl&quot;,CurrentWaitingJobs]</key>
                            <username>{$IGNITE_JMX_USER}</username>
                            <password>{$IGNITE_JMX_PASS}</password>
                            <applications>
                                <application>
                                    <name>Topology</name>
                                </application>
                            </applications>
                            <jmx_endpoint>service:jmx:rmi:///jndi/rmi://{HOST.CONN}:{HOST.PORT}/jmxrmi</jmx_endpoint>
                            <trigger_prototypes>
                                <trigger_prototype>
                                    <expression>{last()}&gt;10</expression>
                                    <name>More then 10 jobs in queue</name>
                                    <priority>WARNING</priority>
                                </trigger_prototype>
                            </trigger_prototypes>
                        </item_prototype>
                        <item_prototype>
                            <name>HeapMemoryUsed</name>
                            <type>JMX</type>
                            <key>jmx[&quot;{#JMXDOMAIN}:group=Kernal,name=ClusterLocalNodeMetricsMXBeanImpl&quot;,HeapMemoryUsed]</key>
                            <units>B</units>
                            <username>{$IGNITE_JMX_USER}</username>
                            <password>{$IGNITE_JMX_PASS}</password>
                            <applications>
                                <application>
                                    <name>Topology</name>
                                </application>
                            </applications>
                            <jmx_endpoint>service:jmx:rmi:///jndi/rmi://{HOST.CONN}:{HOST.PORT}/jmxrmi</jmx_endpoint>
                        </item_prototype>
                        <item_prototype>
                            <name>TotalBaselineNodes</name>
                            <type>JMX</type>
                            <key>jmx[&quot;{#JMXDOMAIN}:group=Kernal,name=ClusterMetricsMXBeanImpl&quot;,TotalBaselineNodes]</key>
                            <delay>5m</delay>
                            <username>{$IGNITE_JMX_USER}</username>
                            <password>{$IGNITE_JMX_PASS}</password>
                            <applications>
                                <application>
                                    <name>Topology</name>
                                </application>
                            </applications>
                            <jmx_endpoint>service:jmx:rmi:///jndi/rmi://{HOST.CONN}:{HOST.PORT}/jmxrmi</jmx_endpoint>
                        </item_prototype>
                        <item_prototype>
                            <name>TotalClientNodes</name>
                            <type>JMX</type>
                            <key>jmx[&quot;{#JMXDOMAIN}:group=Kernal,name=ClusterMetricsMXBeanImpl&quot;,TotalClientNodes]</key>
                            <delay>5m</delay>
                            <username>{$IGNITE_JMX_USER}</username>
                            <password>{$IGNITE_JMX_PASS}</password>
                            <applications>
                                <application>
                                    <name>Topology</name>
                                </application>
                            </applications>
                            <jmx_endpoint>service:jmx:rmi:///jndi/rmi://{HOST.CONN}:{HOST.PORT}/jmxrmi</jmx_endpoint>
                        </item_prototype>
                        <item_prototype>
                            <name>TotalNodes</name>
                            <type>JMX</type>
                            <key>jmx[&quot;{#JMXDOMAIN}:group=Kernal,name=ClusterMetricsMXBeanImpl&quot;,TotalNodes]</key>
                            <delay>5m</delay>
                            <username>{$IGNITE_JMX_USER}</username>
                            <password>{$IGNITE_JMX_PASS}</password>
                            <applications>
                                <application>
                                    <name>Topology</name>
                                </application>
                            </applications>
                            <jmx_endpoint>service:jmx:rmi:///jndi/rmi://{HOST.CONN}:{HOST.PORT}/jmxrmi</jmx_endpoint>
                        </item_prototype>
                        <item_prototype>
                            <name>TotalServerNodes</name>
                            <type>JMX</type>
                            <key>jmx[&quot;{#JMXDOMAIN}:group=Kernal,name=ClusterMetricsMXBeanImpl&quot;,TotalServerNodes]</key>
                            <delay>5m</delay>
                            <username>{$IGNITE_JMX_USER}</username>
                            <password>{$IGNITE_JMX_PASS}</password>
                            <applications>
                                <application>
                                    <name>Topology</name>
                                </application>
                            </applications>
                            <jmx_endpoint>service:jmx:rmi:///jndi/rmi://{HOST.CONN}:{HOST.PORT}/jmxrmi</jmx_endpoint>
                            <trigger_prototypes>
                                <trigger_prototype>
                                    <expression>{change()}&gt;0</expression>
                                    <name>Node added to topology</name>
                                    <priority>INFO</priority>
                                    <tags>
                                        <tag>
                                            <tag>ignite</tag>
                                            <value>node_join</value>
                                        </tag>
                                    </tags>
                                </trigger_prototype>
                                <trigger_prototype>
                                    <expression>{change()}&lt;0</expression>
                                    <name>Server node left the topology</name>
                                    <priority>WARNING</priority>
                                    <tags>
                                        <tag>
                                            <tag>ignite</tag>
                                            <value>node_left</value>
                                        </tag>
                                    </tags>
                                </trigger_prototype>
                            </trigger_prototypes>
                        </item_prototype>
                        <item_prototype>
                            <name>IgniteVersion</name>
                            <type>JMX</type>
                            <key>jmx[&quot;{#JMXDOMAIN}:group=Kernal,name=IgniteKernal&quot;,FullVersion]</key>
                            <delay>10m</delay>
                            <trends>0</trends>
                            <value_type>CHAR</value_type>
                            <username>{$IGNITE_JMX_USER}</username>
                            <password>{$IGNITE_JMX_PASS}</password>
                            <applications>
                                <application>
                                    <name>Topology</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>REGEX</type>
                                    <params>(.*)-\d+
\1</params>
                                </step>
                            </preprocessing>
                            <jmx_endpoint>service:jmx:rmi:///jndi/rmi://{HOST.CONN}:{HOST.PORT}/jmxrmi</jmx_endpoint>
                            <request_method>POST</request_method>
                        </item_prototype>
                        <item_prototype>
                            <name>LocalNodeId</name>
                            <type>JMX</type>
                            <key>jmx[&quot;{#JMXDOMAIN}:group=Kernal,name=IgniteKernal&quot;,LocalNodeId]</key>
                            <trends>0</trends>
                            <value_type>CHAR</value_type>
                            <username>{$IGNITE_JMX_USER}</username>
                            <password>{$IGNITE_JMX_PASS}</password>
                            <applications>
                                <application>
                                    <name>Topology</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>REGEX</type>
                                    <params>(.*)-\d+
\1</params>
                                </step>
                            </preprocessing>
                            <jmx_endpoint>service:jmx:rmi:///jndi/rmi://{HOST.CONN}:{HOST.PORT}/jmxrmi</jmx_endpoint>
                        </item_prototype>
                        <item_prototype>
                            <name>UpTimeFormatted</name>
                            <type>JMX</type>
                            <key>jmx[&quot;{#JMXDOMAIN}:group=Kernal,name=IgniteKernal&quot;,UpTimeFormatted]</key>
                            <delay>2m</delay>
                            <trends>0</trends>
                            <value_type>CHAR</value_type>
                            <username>{$IGNITE_JMX_USER}</username>
                            <password>{$IGNITE_JMX_PASS}</password>
                            <applications>
                                <application>
                                    <name>Local Node Metrics</name>
                                </application>
                            </applications>
                            <jmx_endpoint>service:jmx:rmi:///jndi/rmi://{HOST.CONN}:{HOST.PORT}/jmxrmi</jmx_endpoint>
                            <request_method>POST</request_method>
                        </item_prototype>
                        <item_prototype>
                            <name>CommunicationOutMessagesQueueSize</name>
                            <type>JMX</type>
                            <key>jmx[&quot;{#JMXDOMAIN}:group=SPIs,name=TcpCommunicationSpi&quot;,OutboundMessagesQueueSize]</key>
                            <username>{$IGNITE_JMX_USER}</username>
                            <password>{$IGNITE_JMX_PASS}</password>
                            <applications>
                                <application>
                                    <name>Communication</name>
                                </application>
                                <application>
                                    <name>Topology</name>
                                </application>
                            </applications>
                            <jmx_endpoint>service:jmx:rmi:///jndi/rmi://{HOST.CONN}:{HOST.PORT}/jmxrmi</jmx_endpoint>
                        </item_prototype>
                        <item_prototype>
                            <name>CommunicationReceivedMessagesPerSecond</name>
                            <type>JMX</type>
                            <key>jmx[&quot;{#JMXDOMAIN}:group=SPIs,name=TcpCommunicationSpi&quot;,ReceivedMessagesCount]</key>
                            <units>msg/s</units>
                            <username>{$IGNITE_JMX_USER}</username>
                            <password>{$IGNITE_JMX_PASS}</password>
                            <applications>
                                <application>
                                    <name>Communication</name>
                                </application>
                                <application>
                                    <name>Topology</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>CHANGE_PER_SECOND</type>
                                    <params/>
                                </step>
                            </preprocessing>
                            <jmx_endpoint>service:jmx:rmi:///jndi/rmi://{HOST.CONN}:{HOST.PORT}/jmxrmi</jmx_endpoint>
                        </item_prototype>
                        <item_prototype>
                            <name>CommunicationReconnectCount</name>
                            <type>JMX</type>
                            <key>jmx[&quot;{#JMXDOMAIN}:group=SPIs,name=TcpCommunicationSpi&quot;,ReconnectCount]</key>
                            <username>{$IGNITE_JMX_USER}</username>
                            <password>{$IGNITE_JMX_PASS}</password>
                            <applications>
                                <application>
                                    <name>Communication</name>
                                </application>
                                <application>
                                    <name>Topology</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>SIMPLE_CHANGE</type>
                                    <params/>
                                </step>
                            </preprocessing>
                            <jmx_endpoint>service:jmx:rmi:///jndi/rmi://{HOST.CONN}:{HOST.PORT}/jmxrmi</jmx_endpoint>
                        </item_prototype>
                        <item_prototype>
                            <name>CommunicationSentMessagesPerSecond</name>
                            <type>JMX</type>
                            <key>jmx[&quot;{#JMXDOMAIN}:group=SPIs,name=TcpCommunicationSpi&quot;,SentMessagesCount]</key>
                            <units>msg/s</units>
                            <username>{$IGNITE_JMX_USER}</username>
                            <password>{$IGNITE_JMX_PASS}</password>
                            <applications>
                                <application>
                                    <name>Communication</name>
                                </application>
                                <application>
                                    <name>Topology</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>CHANGE_PER_SECOND</type>
                                    <params/>
                                </step>
                            </preprocessing>
                            <jmx_endpoint>service:jmx:rmi:///jndi/rmi://{HOST.CONN}:{HOST.PORT}/jmxrmi</jmx_endpoint>
                        </item_prototype>
                        <item_prototype>
                            <name>CoordinatorSinceTimestamp</name>
                            <type>JMX</type>
                            <key>jmx[&quot;{#JMXDOMAIN}:group=SPIs,name=TcpDiscoverySpi&quot;,CoordinatorSinceTimestamp]</key>
                            <username>{$IGNITE_JMX_USER}</username>
                            <password>{$IGNITE_JMX_PASS}</password>
                            <applications>
                                <application>
                                    <name>Topology</name>
                                </application>
                            </applications>
                            <jmx_endpoint>service:jmx:rmi:///jndi/rmi://{HOST.CONN}:{HOST.PORT}/jmxrmi</jmx_endpoint>
                            <trigger_prototypes>
                                <trigger_prototype>
                                    <expression>{change()}&gt;0</expression>
                                    <recovery_mode>NONE</recovery_mode>
                                    <name>Coordinator has changed</name>
                                    <priority>WARNING</priority>
                                    <description>Your coordinator just changed</description>
                                    <manual_close>YES</manual_close>
                                    <tags>
                                        <tag>
                                            <tag>ignite</tag>
                                            <value>coordinator_changed</value>
                                        </tag>
                                    </tags>
                                </trigger_prototype>
                            </trigger_prototypes>
                        </item_prototype>
                        <item_prototype>
                            <name>CurrentCoordinator</name>
                            <type>JMX</type>
                            <key>jmx[&quot;{#JMXDOMAIN}:group=SPIs,name=TcpDiscoverySpi&quot;,Coordinator]</key>
                            <delay>2m</delay>
                            <trends>0</trends>
                            <value_type>TEXT</value_type>
                            <username>{$IGNITE_JMX_USER}</username>
                            <password>{$IGNITE_JMX_PASS}</password>
                            <applications>
                                <application>
                                    <name>Topology</name>
                                </application>
                            </applications>
                            <jmx_endpoint>service:jmx:rmi:///jndi/rmi://{HOST.CONN}:{HOST.PORT}/jmxrmi</jmx_endpoint>
                            <request_method>POST</request_method>
                        </item_prototype>
                        <item_prototype>
                            <name>NodeOrder</name>
                            <type>JMX</type>
                            <key>jmx[&quot;{#JMXDOMAIN}:group=SPIs,name=TcpDiscoverySpi&quot;,LocalNodeFormatted]</key>
                            <delay>5m</delay>
                            <username>{$IGNITE_JMX_USER}</username>
                            <password>{$IGNITE_JMX_PASS}</password>
                            <applications>
                                <application>
                                    <name>Topology</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>REGEX</type>
                                    <params>intOrder=(\d+)
\1</params>
                                </step>
                            </preprocessing>
                            <jmx_endpoint>service:jmx:rmi:///jndi/rmi://{HOST.CONN}:{HOST.PORT}/jmxrmi</jmx_endpoint>
                        </item_prototype>
                        <item_prototype>
                            <name>DiscoveryMessageWorkerQueueSize</name>
                            <type>JMX</type>
                            <key>jmx[&quot;{#JMXDOMAIN}:group=SPIs,name=TcpDiscoverySpi&quot;,MessageWorkerQueueSize]</key>
                            <username>{$IGNITE_JMX_USER}</username>
                            <password>{$IGNITE_JMX_PASS}</password>
                            <applications>
                                <application>
                                    <name>Topology</name>
                                </application>
                            </applications>
                            <jmx_endpoint>service:jmx:rmi:///jndi/rmi://{HOST.CONN}:{HOST.PORT}/jmxrmi</jmx_endpoint>
                        </item_prototype>
                        <item_prototype>
                            <name>NodesLeft</name>
                            <type>JMX</type>
                            <key>jmx[&quot;{#JMXDOMAIN}:group=SPIs,name=TcpDiscoverySpi&quot;,NodesLeft]</key>
                            <delay>5m</delay>
                            <username>{$IGNITE_JMX_USER}</username>
                            <password>{$IGNITE_JMX_PASS}</password>
                            <applications>
                                <application>
                                    <name>Topology</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>SIMPLE_CHANGE</type>
                                    <params/>
                                </step>
                            </preprocessing>
                            <jmx_endpoint>service:jmx:rmi:///jndi/rmi://{HOST.CONN}:{HOST.PORT}/jmxrmi</jmx_endpoint>
                        </item_prototype>
                        <item_prototype>
                            <name>ReconnectCount</name>
                            <type>JMX</type>
                            <key>jmx[&quot;{#JMXDOMAIN}:group=SPIs,name=TcpDiscoverySpi&quot;,ReconnectCount]</key>
                            <username>{$IGNITE_JMX_USER}</username>
                            <password>{$IGNITE_JMX_PASS}</password>
                            <applications>
                                <application>
                                    <name>Topology</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>SIMPLE_CHANGE</type>
                                    <params/>
                                </step>
                            </preprocessing>
                            <jmx_endpoint>service:jmx:rmi:///jndi/rmi://{HOST.CONN}:{HOST.PORT}/jmxrmi</jmx_endpoint>
                        </item_prototype>
                        <item_prototype>
                            <name>TotalProcessedMessages</name>
                            <type>JMX</type>
                            <key>jmx[&quot;{#JMXDOMAIN}:group=SPIs,name=TcpDiscoverySpi&quot;,TotalProcessedMessages]</key>
                            <units>msg/s</units>
                            <username>{$IGNITE_JMX_USER}</username>
                            <password>{$IGNITE_JMX_PASS}</password>
                            <applications>
                                <application>
                                    <name>Discovery</name>
                                </application>
                                <application>
                                    <name>Topology</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>CHANGE_PER_SECOND</type>
                                    <params/>
                                </step>
                            </preprocessing>
                            <jmx_endpoint>service:jmx:rmi:///jndi/rmi://{HOST.CONN}:{HOST.PORT}/jmxrmi</jmx_endpoint>
                        </item_prototype>
                        <item_prototype>
                            <name>DiscoveryTotalReceivedMessages</name>
                            <type>JMX</type>
                            <key>jmx[&quot;{#JMXDOMAIN}:group=SPIs,name=TcpDiscoverySpi&quot;,TotalReceivedMessages]</key>
                            <units>msg/s</units>
                            <username>{$IGNITE_JMX_USER}</username>
                            <password>{$IGNITE_JMX_PASS}</password>
                            <applications>
                                <application>
                                    <name>Discovery</name>
                                </application>
                                <application>
                                    <name>Topology</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>CHANGE_PER_SECOND</type>
                                    <params/>
                                </step>
                            </preprocessing>
                            <jmx_endpoint>service:jmx:rmi:///jndi/rmi://{HOST.CONN}:{HOST.PORT}/jmxrmi</jmx_endpoint>
                        </item_prototype>
                        <item_prototype>
                            <name>LockedKeysNumber</name>
                            <type>JMX</type>
                            <key>jmx[&quot;{#JMXDOMAIN}:group=TransactionMetrics,name=TransactionMetricsMxBeanImpl&quot;,LockedKeysNumber]</key>
                            <units>keys</units>
                            <username>{$IGNITE_JMX_USER}</username>
                            <password>{$IGNITE_JMX_PASS}</password>
                            <applications>
                                <application>
                                    <name>Transactions</name>
                                </application>
                            </applications>
                            <jmx_endpoint>service:jmx:rmi:///jndi/rmi://{HOST.CONN}:{HOST.PORT}/jmxrmi</jmx_endpoint>
                        </item_prototype>
                        <item_prototype>
                            <name>OwnerTransactionsNumber</name>
                            <type>JMX</type>
                            <key>jmx[&quot;{#JMXDOMAIN}:group=TransactionMetrics,name=TransactionMetricsMxBeanImpl&quot;,OwnerTransactionsNumber]</key>
                            <units>trx</units>
                            <username>{$IGNITE_JMX_USER}</username>
                            <password>{$IGNITE_JMX_PASS}</password>
                            <applications>
                                <application>
                                    <name>Transactions</name>
                                </application>
                            </applications>
                            <jmx_endpoint>service:jmx:rmi:///jndi/rmi://{HOST.CONN}:{HOST.PORT}/jmxrmi</jmx_endpoint>
                        </item_prototype>
                        <item_prototype>
                            <name>TransactionsCommittedNumber</name>
                            <type>JMX</type>
                            <key>jmx[&quot;{#JMXDOMAIN}:group=TransactionMetrics,name=TransactionMetricsMxBeanImpl&quot;,TransactionsCommittedNumber]</key>
                            <units>trx/s</units>
                            <username>{$IGNITE_JMX_USER}</username>
                            <password>{$IGNITE_JMX_PASS}</password>
                            <applications>
                                <application>
                                    <name>Transactions</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>CHANGE_PER_SECOND</type>
                                    <params/>
                                </step>
                            </preprocessing>
                            <jmx_endpoint>service:jmx:rmi:///jndi/rmi://{HOST.CONN}:{HOST.PORT}/jmxrmi</jmx_endpoint>
                        </item_prototype>
                        <item_prototype>
                            <name>TransactionsHoldingLockNumber</name>
                            <type>JMX</type>
                            <key>jmx[&quot;{#JMXDOMAIN}:group=TransactionMetrics,name=TransactionMetricsMxBeanImpl&quot;,TransactionsHoldingLockNumber]</key>
                            <units>trx/s</units>
                            <username>{$IGNITE_JMX_USER}</username>
                            <password>{$IGNITE_JMX_PASS}</password>
                            <applications>
                                <application>
                                    <name>Transactions</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>CHANGE_PER_SECOND</type>
                                    <params/>
                                </step>
                            </preprocessing>
                            <jmx_endpoint>service:jmx:rmi:///jndi/rmi://{HOST.CONN}:{HOST.PORT}/jmxrmi</jmx_endpoint>
                        </item_prototype>
                        <item_prototype>
                            <name>TransactionsRolledBackNumber</name>
                            <type>JMX</type>
                            <key>jmx[&quot;{#JMXDOMAIN}:group=TransactionMetrics,name=TransactionMetricsMxBeanImpl&quot;,TransactionsRolledBackNumber]</key>
                            <units>trx/s</units>
                            <username>{$IGNITE_JMX_USER}</username>
                            <password>{$IGNITE_JMX_PASS}</password>
                            <applications>
                                <application>
                                    <name>Transactions</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>CHANGE_PER_SECOND</type>
                                    <params/>
                                </step>
                            </preprocessing>
                            <jmx_endpoint>service:jmx:rmi:///jndi/rmi://{HOST.CONN}:{HOST.PORT}/jmxrmi</jmx_endpoint>
                        </item_prototype>
                        <item_prototype>
                            <name>StripedExecutor - QueueSize</name>
                            <type>JMX</type>
                            <key>jmx[&quot;{#JMXDOMAIN}:group=\&quot;Thread Pools\&quot;,name=StripedExecutor&quot;,TotalQueueSize]</key>
                            <username>{$IGNITE_JMX_USER}</username>
                            <password>{$IGNITE_JMX_PASS}</password>
                            <applications>
                                <application>
                                    <name>Queue</name>
                                </application>
                            </applications>
                            <jmx_endpoint>service:jmx:rmi:///jndi/rmi://{HOST.CONN}:{HOST.PORT}/jmxrmi</jmx_endpoint>
                            <trigger_prototypes>
                                <trigger_prototype>
                                    <expression>{last()}&gt;1000</expression>
                                    <name>StripedExecutor - Too many messages in queue</name>
                                    <priority>AVERAGE</priority>
                                </trigger_prototype>
                            </trigger_prototypes>
                        </item_prototype>
                    </item_prototypes>
                    <trigger_prototypes>
                        <trigger_prototype>
                            <expression>{Template App Ignite JMX:jmx[&quot;{#JMXDOMAIN}:group=Kernal,name=ClusterMetricsMXBeanImpl&quot;,TotalBaselineNodes].last()}&lt;{Template App Ignite JMX:jmx[&quot;{#JMXDOMAIN}:group=Kernal,name=ClusterMetricsMXBeanImpl&quot;,TotalServerNodes].last()}</expression>
                            <name>There are nodes is not in topology</name>
                            <priority>INFO</priority>
                        </trigger_prototype>
                    </trigger_prototypes>
                    <jmx_endpoint>service:jmx:rmi:///jndi/rmi://{HOST.CONN}:{HOST.PORT}/jmxrmi</jmx_endpoint>
                    <request_method>POST</request_method>
                </discovery_rule>
                <discovery_rule>
                    <name>Cache Groups</name>
                    <type>JMX</type>
                    <key>jmx.discovery[beans,&quot;org.apache:group=\&quot;Cache groups\&quot;,name=*&quot;]</key>
                    <delay>30m</delay>
                    <lifetime>2h</lifetime>
                    <item_prototypes>
                        <item_prototype>
                            <name>{#JMXNAME} - Backups</name>
                            <type>JMX</type>
                            <key>jmx[&quot;{#JMXDOMAIN}:group=\&quot;Cache groups\&quot;,name={#JMXNAME}&quot;,Backups]</key>
                            <delay>30m</delay>
                            <trends>30d</trends>
                            <username>{$IGNITE_JMX_USER}</username>
                            <password>{$IGNITE_JMX_PASS}</password>
                            <applications>
                                <application>
                                    <name>ChacheGroup</name>
                                </application>
                                <application>
                                    <name>Partitions</name>
                                </application>
                            </applications>
                            <jmx_endpoint>service:jmx:rmi:///jndi/rmi://{HOST.CONN}:{HOST.PORT}/jmxrmi</jmx_endpoint>
                        </item_prototype>
                        <item_prototype>
                            <name>{#JMXNAME} - CacheList</name>
                            <type>JMX</type>
                            <key>jmx[&quot;{#JMXDOMAIN}:group=\&quot;Cache groups\&quot;,name={#JMXNAME}&quot;,Caches]</key>
                            <delay>30m</delay>
                            <trends>0</trends>
                            <value_type>TEXT</value_type>
                            <username>{$IGNITE_JMX_USER}</username>
                            <password>{$IGNITE_JMX_PASS}</password>
                            <applications>
                                <application>
                                    <name>ChacheGroup</name>
                                </application>
                            </applications>
                            <jmx_endpoint>service:jmx:rmi:///jndi/rmi://{HOST.CONN}:{HOST.PORT}/jmxrmi</jmx_endpoint>
                        </item_prototype>
                        <item_prototype>
                            <name>{#JMXNAME} - LocalNodeMovingPartitionsCount</name>
                            <type>JMX</type>
                            <key>jmx[&quot;{#JMXDOMAIN}:group=\&quot;Cache groups\&quot;,name={#JMXNAME}&quot;,LocalNodeMovingPartitionsCount]</key>
                            <trends>30d</trends>
                            <username>{$IGNITE_JMX_USER}</username>
                            <password>{$IGNITE_JMX_PASS}</password>
                            <applications>
                                <application>
                                    <name>ChacheGroup</name>
                                </application>
                            </applications>
                            <jmx_endpoint>service:jmx:rmi:///jndi/rmi://{HOST.CONN}:{HOST.PORT}/jmxrmi</jmx_endpoint>
                            <request_method>POST</request_method>
                            <trigger_prototypes>
                                <trigger_prototype>
                                    <expression>{avg(35m)}&gt;0</expression>
                                    <recovery_mode>RECOVERY_EXPRESSION</recovery_mode>
                                    <recovery_expression>{avg(35m)}=0</recovery_expression>
                                    <name>{#JMXNAME} - Rebalance in progress</name>
                                    <priority>INFO</priority>
                                </trigger_prototype>
                            </trigger_prototypes>
                        </item_prototype>
                        <item_prototype>
                            <name>{#JMXNAME} - LocalNodeRentingEntriesCount</name>
                            <type>JMX</type>
                            <key>jmx[&quot;{#JMXDOMAIN}:group=\&quot;Cache groups\&quot;,name={#JMXNAME}&quot;,LocalNodeRentingEntriesCount]</key>
                            <trends>30d</trends>
                            <username>{$IGNITE_JMX_USER}</username>
                            <password>{$IGNITE_JMX_PASS}</password>
                            <applications>
                                <application>
                                    <name>ChacheGroup</name>
                                </application>
                            </applications>
                            <jmx_endpoint>service:jmx:rmi:///jndi/rmi://{HOST.CONN}:{HOST.PORT}/jmxrmi</jmx_endpoint>
                        </item_prototype>
                        <item_prototype>
                            <name>{#JMXNAME} - LocalNodeRentingPartitionsCount</name>
                            <type>JMX</type>
                            <key>jmx[&quot;{#JMXDOMAIN}:group=\&quot;Cache groups\&quot;,name={#JMXNAME}&quot;,LocalNodeRentingPartitionsCount]</key>
                            <trends>30d</trends>
                            <username>{$IGNITE_JMX_USER}</username>
                            <password>{$IGNITE_JMX_PASS}</password>
                            <applications>
                                <application>
                                    <name>ChacheGroup</name>
                                </application>
                            </applications>
                            <jmx_endpoint>service:jmx:rmi:///jndi/rmi://{HOST.CONN}:{HOST.PORT}/jmxrmi</jmx_endpoint>
                        </item_prototype>
                        <item_prototype>
                            <name>{#JMXNAME} - NumberOfPartitionCopies</name>
                            <type>JMX</type>
                            <key>jmx[&quot;{#JMXDOMAIN}:group=\&quot;Cache groups\&quot;,name={#JMXNAME}&quot;,MinimumNumberOfPartitionCopies]</key>
                            <delay>10m</delay>
                            <trends>30d</trends>
                            <username>{$IGNITE_JMX_USER}</username>
                            <password>{$IGNITE_JMX_PASS}</password>
                            <applications>
                                <application>
                                    <name>ChacheGroup</name>
                                </application>
                                <application>
                                    <name>Partitions</name>
                                </application>
                            </applications>
                            <jmx_endpoint>service:jmx:rmi:///jndi/rmi://{HOST.CONN}:{HOST.PORT}/jmxrmi</jmx_endpoint>
                            <request_method>POST</request_method>
                            <trigger_prototypes>
                                <trigger_prototype>
                                    <expression>{last(35m)}=0</expression>
                                    <recovery_mode>RECOVERY_EXPRESSION</recovery_mode>
                                    <recovery_expression>{last(35m)}&gt;=1</recovery_expression>
                                    <name>{#JMXNAME} - There is no copy for partitions</name>
                                    <priority>AVERAGE</priority>
                                </trigger_prototype>
                            </trigger_prototypes>
                        </item_prototype>
                    </item_prototypes>
                    <trigger_prototypes>
                        <trigger_prototype>
                            <expression>{Template App Ignite JMX:jmx[&quot;{#JMXDOMAIN}:group=\&quot;Cache groups\&quot;,name={#JMXNAME}&quot;,Backups].last()}&gt;={Template App Ignite JMX:jmx[&quot;{#JMXDOMAIN}:group=\&quot;Cache groups\&quot;,name={#JMXNAME}&quot;,MinimumNumberOfPartitionCopies].last()}</expression>
                            <name>{#JMXNAME} - One or more backups are unavailiable</name>
                            <priority>WARNING</priority>
                        </trigger_prototype>
                    </trigger_prototypes>
                    <jmx_endpoint>service:jmx:rmi:///jndi/rmi://{HOST.CONN}:{HOST.PORT}/jmxrmi</jmx_endpoint>
                    <request_method>POST</request_method>
                </discovery_rule>
                <discovery_rule>
                    <name>Thread Pool Metrics</name>
                    <type>JMX</type>
                    <key>jmx.discovery[beans,&quot;org.apache:group=\&quot;Thread Pools\&quot;,name=*&quot;]</key>
                    <delay>30m</delay>
                    <username>{$IGNITE_JMX_USER}</username>
                    <password>{$IGNITE_JMX_PASS}</password>
                    <lifetime>1d</lifetime>
                    <item_prototypes>
                        <item_prototype>
                            <name>{#JMXNAME} - QueueSize</name>
                            <type>JMX</type>
                            <key>jmx[&quot;{#JMXDOMAIN}:group=\&quot;Thread Pools\&quot;,name={#JMXNAME}&quot;,QueueSize]</key>
                            <history>2w</history>
                            <trends>30d</trends>
                            <units>msg</units>
                            <username>{$IGNITE_JMX_USER}</username>
                            <password>{$IGNITE_JMX_PASS}</password>
                            <applications>
                                <application>
                                    <name>Queue</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>IN_RANGE</type>
                                    <params>0
</params>
                                    <error_handler>DISCARD_VALUE</error_handler>
                                </step>
                            </preprocessing>
                            <jmx_endpoint>service:jmx:rmi:///jndi/rmi://{HOST.CONN}:{HOST.PORT}/jmxrmi</jmx_endpoint>
                            <request_method>POST</request_method>
                            <trigger_prototypes>
                                <trigger_prototype>
                                    <expression>{min(5m)}&gt;1000</expression>
                                    <name>{#JMXNAME} - Too many messages in  queue</name>
                                    <priority>HIGH</priority>
                                    <description>There are more then 1000 messages in {#JMXNAME}  queue</description>
                                    <tags>
                                        <tag>
                                            <tag>ignite</tag>
                                            <value>queue</value>
                                        </tag>
                                    </tags>
                                </trigger_prototype>
                            </trigger_prototypes>
                        </item_prototype>
                    </item_prototypes>
                    <jmx_endpoint>service:jmx:rmi:///jndi/rmi://{HOST.CONN}:{HOST.PORT}/jmxrmi</jmx_endpoint>
                    <request_method>POST</request_method>
                </discovery_rule>
            </discovery_rules>
            <macros>
                <macro>
                    <macro>{$IGNITE_JMX_PASS}</macro>
                </macro>
                <macro>
                    <macro>{$IGNITE_JMX_USER}</macro>
                </macro>
            </macros>
        </template>
    </templates>
</zabbix_export>
