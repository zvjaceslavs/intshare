zabbix_export:
  version: '5.4'
  date: '2021-11-09T04:33:49Z'
  groups:
    -
      uuid: 7df96b18c230490a9a0a9e2307226338
      name: Templates
  templates:
    -
      uuid: 256cfe6e2398433b8ae14af58eab2df3
      template: 'SNMP Disks'
      name: 'SNMP Disks'
      description: |
        ## Overview
        
        Official template from Zabbix distribution to discover disk devices by SNMP
        
        
        
        ## Author
        
        Zabbix SIA
        
        
      groups:
        -
          name: Templates
      discovery_rules:
        -
          uuid: 484e46a7e0094a5a9a8950096743b4d0
          name: 'Disk partitions'
          type: SNMP_AGENT
          snmp_oid: 'discovery[{#SNMPVALUE},HOST-RESOURCES-MIB::hrStorageDescr]'
          key: hrStorageDescr
          delay: '3600'
          filter:
            conditions:
              -
                macro: '{#SNMPVALUE}'
                value: '@Storage devices for SNMP discovery'
                formulaid: A
          description: |
            The rule will discover all disk partitions matching the global regexp "Storage devices for SNMP discovery".
            
            {$SNMP_COMMUNITY} is a global macro.
          item_prototypes:
            -
              uuid: 31dcd16c8fc24f5294dd64862160488a
              name: 'Allocation units for storage $1'
              type: SNMP_AGENT
              snmp_oid: 'HOST-RESOURCES-MIB::hrStorageAllocationUnits.{#SNMPINDEX}'
              key: 'hrStorageAllocationUnits[{#SNMPVALUE}]'
              delay: '3600'
              history: 7d
              units: B
              description: 'The size, in bytes, of the data objects allocated from this pool.  If this entry is monitoring sectors, blocks, buffers, or packets, for example, this number will commonly be greater than one.  Otherwise this number will typically be one.'
              tags:
                -
                  tag: Application
                  value: 'Disk partitions'
            -
              uuid: 426251f841f24420a3ec37aca54210a5
              name: 'Description of storage $1'
              type: SNMP_AGENT
              snmp_oid: 'HOST-RESOURCES-MIB::hrStorageDescr.{#SNMPINDEX}'
              key: 'hrStorageDescr[{#SNMPVALUE}]'
              delay: '3600'
              history: 7d
              trends: '0'
              value_type: CHAR
              description: 'A description of the type and instance of the storage described by this entry.'
              tags:
                -
                  tag: Application
                  value: 'Disk partitions'
            -
              uuid: 7e911385c38e4f08803af1aa2120c515
              name: 'Total disk space on $1'
              type: CALCULATED
              key: 'hrStorageSizeInBytes[{#SNMPVALUE}]'
              delay: '3600'
              history: 7d
              units: B
              params: 'last(//hrStorageSize[{#SNMPVALUE}]) * last(//hrStorageAllocationUnits[{#SNMPVALUE}])'
              description: 'This is a calculated item, we need it to get total disk space in bytes.'
              tags:
                -
                  tag: Application
                  value: 'Disk partitions'
            -
              uuid: ed8e70e514674861b1a622b17db86760
              name: 'Total disk space on $1 in units'
              type: SNMP_AGENT
              snmp_oid: 'HOST-RESOURCES-MIB::hrStorageSize.{#SNMPINDEX}'
              key: 'hrStorageSize[{#SNMPVALUE}]'
              delay: '3600'
              history: 7d
              units: units
              description: 'The size of the storage represented by this entry, in units of hrStorageAllocationUnits. This object is writable to allow remote configuration of the size of the storage area in those cases where such an operation makes sense and is possible on the underlying system. For example, the amount of main memory allocated to a buffer pool might be modified or the amount of disk space allocated to virtual memory might be modified.'
              tags:
                -
                  tag: Application
                  value: 'Disk partitions'
            -
              uuid: bfa01526f4454b84aebe03479cca095e
              name: 'Used disk space on $1'
              type: CALCULATED
              key: 'hrStorageUsedInBytes[{#SNMPVALUE}]'
              delay: '60'
              history: 7d
              units: B
              params: 'last(//hrStorageUsed[{#SNMPVALUE}]) * last(//hrStorageAllocationUnits[{#SNMPVALUE}])'
              description: 'This is a calculated item, we need it to get used disk space in bytes.'
              tags:
                -
                  tag: Application
                  value: 'Disk partitions'
            -
              uuid: 5e4d0b6da06643e595a1f454a1b76364
              name: 'Used disk space on $1 in units'
              type: SNMP_AGENT
              snmp_oid: 'HOST-RESOURCES-MIB::hrStorageUsed.{#SNMPINDEX}'
              key: 'hrStorageUsed[{#SNMPVALUE}]'
              delay: '60'
              history: 7d
              units: units
              description: 'The amount of the storage represented by this entry that is allocated, in units of hrStorageAllocationUnits.'
              tags:
                -
                  tag: Application
                  value: 'Disk partitions'
          trigger_prototypes:
            -
              uuid: c5bccfdbdb7d4552878429f843a04da3
              expression: 'last(/SNMP Disks/hrStorageUsed[{#SNMPVALUE}]) / last(/SNMP Disks/hrStorageSize[{#SNMPVALUE}]) > 0.8'
              name: 'Free disk space is less than 20% on volume {#SNMPVALUE}'
              priority: WARNING
          graph_prototypes:
            -
              uuid: 274434a1e0fc4120970a227ee9697a36
              name: 'Disk space usage {#SNMPVALUE}'
              width: '600'
              height: '340'
              show_work_period: 'NO'
              show_triggers: 'NO'
              type: PIE
              show_3d: 'YES'
              graph_items:
                -
                  color: 00C800
                  type: GRAPH_SUM
                  item:
                    host: 'SNMP Disks'
                    key: 'hrStorageSizeInBytes[{#SNMPVALUE}]'
                -
                  sortorder: '1'
                  color: C80000
                  item:
                    host: 'SNMP Disks'
                    key: 'hrStorageUsedInBytes[{#SNMPVALUE}]'
