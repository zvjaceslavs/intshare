zabbix_export:
  version: '5.4'
  date: '2021-11-21T22:04:33Z'
  groups:
    -
      uuid: 57b7ae836ca64446ba2c296389c009b7
      name: Templates/Modules
    -
      uuid: e0242822f07b4633a283b8dc935d3dd9
      name: Templates_Created
  templates:
    -
      uuid: fad8a4aeb6a54d21b750e5c3b6f8d1b8
      template: Status
      name: Status
      description: |
        ## Description
        
        Monitoria Status do Device -ICMP -SNMP test -Uptime By: Flavio Gomes Figueira Camacho Junior Dependency: Template Module ICMP Ping
        
        ## Overview
        
        Monitoria Status do Device
        
        
        -ICMP
        
        
        -SNMP test
        
        
        -Uptime
        
        
         
        
        
        By: Flavio Gomes Figueira Camacho Junior
        
        
         
        
        
        Dependency:
        
        
        Template Module ICMP Ping
        
        
         
        
        
        External Scripts and Value Mapping on my Github:
        
        
        https://github.com/flaviojunior1995/Zabbix-Templates
        
        
        
        ## Author
        
        Flavio Camacho Junior
        
        
      templates:
        -
          name: 'Template Module ICMP Ping'
      groups:
        -
          name: Templates_Created
      items:
        -
          uuid: 0344a02e942c492e8f678df3b1970447
          name: 'Device Uptime'
          type: SNMP_AGENT
          snmp_oid: 1.3.6.1.2.1.1.3.0
          key: 'system.uptime[sysUpTime]'
          history: 30d
          trends: '0'
          units: uptime
          preprocessing:
            -
              type: MULTIPLIER
              parameters:
                - '0.01'
          tags:
            -
              tag: Application
              value: Status
          triggers:
            -
              uuid: 0531cd7640434ec2b2d73f4692a1e2a2
              expression: 'last(/Status/system.uptime[sysUpTime])<86400'
              name: 'Device Uptime lower then 1 day'
              priority: INFO
        -
          uuid: fa26c5294dca48638d983c9e250c94e5
          name: 'SNMP Availability'
          type: INTERNAL
          key: 'zabbix[host,snmp,available]'
          delay: 30m
          history: 7d
          trends: '0'
          valuemap:
            name: zabbix.host.available
          tags:
            -
              tag: Application
              value: Status
      valuemaps:
        -
          uuid: 480b83db08434affbb8075eef0f649b7
          name: zabbix.host.available
          mappings:
            -
              value: '0'
              newvalue: 'not available'
            -
              value: '1'
              newvalue: available
            -
              value: '2'
              newvalue: unknown
    -
      uuid: 37e5eb5606bc4abba66c8b20381a1e8a
      template: 'Template Module ICMP Ping'
      name: 'Template Module ICMP Ping'
      description: 'Template Module ICMP Ping version: 0.12'
      groups:
        -
          name: Templates/Modules
      items:
        -
          uuid: db5a94f6cea14deba957202b2f014469
          name: 'ICMP ping'
          type: SIMPLE
          key: icmpping
          delay: '60'
          history: 1w
          valuemap:
            name: 'Service state'
          tags:
            -
              tag: Application
              value: Status
          triggers:
            -
              uuid: b030876299434f3ba43e11c584104a81
              expression: 'max(/Template Module ICMP Ping/icmpping,#3)=0'
              name: 'Unavailable by ICMP ping'
              priority: HIGH
              description: |
                Last value: {ITEM.LASTVALUE1}.
                Last three attempts returned timeout.  Please check device connectivity.
        -
          uuid: 04b21adaf422473a88df2c52786474ed
          name: 'ICMP loss'
          type: SIMPLE
          key: icmppingloss
          delay: '60'
          history: 1w
          value_type: FLOAT
          units: '%'
          tags:
            -
              tag: Application
              value: Status
          triggers:
            -
              uuid: 42c4b0310aaf4b9c8cb502542b7dea90
              expression: 'min(/Template Module ICMP Ping/icmppingloss,5m)>{$ICMP_LOSS_WARN} and min(/Template Module ICMP Ping/icmppingloss,5m)<100'
              name: 'High ICMP ping loss'
              priority: WARNING
              dependencies:
                -
                  name: 'Unavailable by ICMP ping'
                  expression: 'max(/Template Module ICMP Ping/icmpping,#3)=0'
        -
          uuid: a79e33e5fd264725b934f603fa071555
          name: 'ICMP response time'
          type: SIMPLE
          key: icmppingsec
          delay: '60'
          history: 1w
          value_type: FLOAT
          units: s
          tags:
            -
              tag: Application
              value: Status
          triggers:
            -
              uuid: 32b4d8f3eba34bd380803410111d4b7f
              expression: 'avg(/Template Module ICMP Ping/icmppingsec,5m)>{$ICMP_RESPONSE_TIME_WARN}'
              name: 'High ICMP ping response time'
              priority: WARNING
              dependencies:
                -
                  name: 'High ICMP ping loss'
                  expression: 'min(/Template Module ICMP Ping/icmppingloss,5m)>{$ICMP_LOSS_WARN} and min(/Template Module ICMP Ping/icmppingloss,5m)<100'
                -
                  name: 'Unavailable by ICMP ping'
                  expression: 'max(/Template Module ICMP Ping/icmpping,#3)=0'
      macros:
        -
          macro: '{$ICMP_LOSS_WARN}'
          value: '20'
        -
          macro: '{$ICMP_RESPONSE_TIME_WARN}'
          value: '0.15'
      valuemaps:
        -
          uuid: bdb5d65d925542eaa61c302dc40fbfe8
          name: 'Service state'
          mappings:
            -
              value: '0'
              newvalue: Down
            -
              value: '1'
              newvalue: Up
