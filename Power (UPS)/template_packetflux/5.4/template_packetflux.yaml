zabbix_export:
  version: '5.4'
  date: '2021-10-22T08:04:20Z'
  groups:
    -
      uuid: 57b7ae836ca64446ba2c296389c009b7
      name: Templates/Modules
    -
      uuid: 36bff6c29af64692839d077febfc7079
      name: 'Templates/Network devices'
  templates:
    -
      uuid: 37e5eb5606bc4abba66c8b20381a1e8a
      template: 'ICMP Ping'
      name: 'ICMP Ping'
      description: |
        Template Module ICMP Ping
        
        Template tooling version used: 0.38
      groups:
        -
          name: Templates/Modules
      items:
        -
          uuid: db5a94f6cea14deba957202b2f014469
          name: 'ICMP ping'
          type: SIMPLE
          key: icmpping
          history: 1w
          valuemap:
            name: 'Service state'
          tags:
            -
              tag: Application
              value: Status
          triggers:
            -
              uuid: b030876299434f3ba43e11c584104a81
              expression: 'max(/ICMP Ping/icmpping,#3)=0'
              name: 'Unavailable by ICMP ping'
              priority: HIGH
              description: 'Last three attempts returned timeout.  Please check device connectivity.'
        -
          uuid: 04b21adaf422473a88df2c52786474ed
          name: 'ICMP loss'
          type: SIMPLE
          key: icmppingloss
          history: 1w
          value_type: FLOAT
          units: '%'
          tags:
            -
              tag: Application
              value: Status
          triggers:
            -
              uuid: 42c4b0310aaf4b9c8cb502542b7dea90
              expression: 'min(/ICMP Ping/icmppingloss,5m)>{$ICMP_LOSS_WARN} and min(/ICMP Ping/icmppingloss,5m)<100'
              name: 'High ICMP ping loss'
              opdata: 'Loss: {ITEM.LASTVALUE1}'
              priority: WARNING
              dependencies:
                -
                  name: 'Unavailable by ICMP ping'
                  expression: 'max(/ICMP Ping/icmpping,#3)=0'
        -
          uuid: a79e33e5fd264725b934f603fa071555
          name: 'ICMP response time'
          type: SIMPLE
          key: icmppingsec
          history: 1w
          value_type: FLOAT
          units: s
          tags:
            -
              tag: Application
              value: Status
          triggers:
            -
              uuid: 32b4d8f3eba34bd380803410111d4b7f
              expression: 'avg(/ICMP Ping/icmppingsec,5m)>{$ICMP_RESPONSE_TIME_WARN}'
              name: 'High ICMP ping response time'
              opdata: 'Value: {ITEM.LASTVALUE1}'
              priority: WARNING
              dependencies:
                -
                  name: 'High ICMP ping loss'
                  expression: 'min(/ICMP Ping/icmppingloss,5m)>{$ICMP_LOSS_WARN} and min(/ICMP Ping/icmppingloss,5m)<100'
                -
                  name: 'Unavailable by ICMP ping'
                  expression: 'max(/ICMP Ping/icmpping,#3)=0'
      macros:
        -
          macro: '{$ICMP_LOSS_WARN}'
          value: '20'
        -
          macro: '{$ICMP_RESPONSE_TIME_WARN}'
          value: '0.15'
      valuemaps:
        -
          uuid: bdb5d65d925542eaa61c302dc40fbfe8
          name: 'Service state'
          mappings:
            -
              value: '0'
              newvalue: Down
            -
              value: '1'
              newvalue: Up
    -
      uuid: 3a04d601972c4c749e9e783fce1a0043
      template: Packetflux
      name: Packetflux
      templates:
        -
          name: 'ICMP Ping'
      groups:
        -
          name: 'Templates/Network devices'
      items:
        -
          uuid: ff82fb0895764274ba4e1c7c50b99f38
          name: 'System Description'
          type: SNMP_AGENT
          snmp_oid: .1.3.6.1.2.1.1.1.0
          key: sysDescr
          delay: 1d
          trends: '0'
          value_type: CHAR
          tags:
            -
              tag: Application
              value: General
        -
          uuid: eac076cfa1764e5c91c66f02a69c3f60
          name: 'System Location'
          type: SNMP_AGENT
          snmp_oid: .1.3.6.1.2.1.1.5.0
          key: sysLocation
          delay: 1d
          trends: '0'
          value_type: CHAR
          tags:
            -
              tag: Application
              value: General
        -
          uuid: d4101a44b4a54c3c98f1c7890f0f0eae
          name: 'System Name'
          type: SNMP_AGENT
          snmp_oid: .1.3.6.1.2.1.1.4.0
          key: sysName
          delay: 1d
          trends: '0'
          value_type: CHAR
          tags:
            -
              tag: Application
              value: General
        -
          uuid: 2340d987a04f4a78881a913b378ae76f
          name: Uptime
          type: SNMP_AGENT
          snmp_oid: .1.3.6.1.2.1.1.3.0
          key: sysUpTimeInstance
          units: uptime
          tags:
            -
              tag: Application
              value: General
      discovery_rules:
        -
          uuid: 2603c4a091804daa8b4e3fd8de8fc332
          name: 'Interface Discovery'
          type: SNMP_AGENT
          snmp_oid: 'discovery[{#IFNAME},.1.3.6.1.2.1.2.2.1.2,{#IFTYPE},.1.3.6.1.2.1.2.2.1.3,{#IFADMINSTATUS},.1.3.6.1.2.1.2.2.1.7]'
          key: inName
          filter:
            conditions:
              -
                macro: '{#IFADMINSTATUS}'
                value: ^1$
                formulaid: A
          item_prototypes:
            -
              uuid: 953a2ca4679c45eca77ec50ba51aaa18
              name: 'Interface {#IFNAME} Admin Status'
              type: SNMP_AGENT
              snmp_oid: '.1.3.6.1.2.1.2.2.1.7.{#SNMPINDEX}'
              key: 'ifAdminStatus.[{#SNMPINDEX}]'
              valuemap:
                name: 'Host availability'
              tags:
                -
                  tag: Application
                  value: Network
            -
              uuid: 49ae787a83d34909bec43b1c493bc000
              name: 'Interface {#IFNAME} speed'
              type: SNMP_AGENT
              snmp_oid: '.1.3.6.1.2.1.2.2.1.5.{#SNMPINDEX}'
              key: 'ifSpeed.[{#SNMPINDEX}]'
              tags:
                -
                  tag: Application
                  value: Network
              trigger_prototypes:
                -
                  uuid: 56f8af94ee40496095edc303be0c911f
                  expression: 'change(/Packetflux/ifSpeed.[{#SNMPINDEX}])>0 and last(/Packetflux/ifSpeed.[{#SNMPINDEX}])>0'
                  recovery_mode: RECOVERY_EXPRESSION
                  recovery_expression: 'change(/Packetflux/ifSpeed.[{#SNMPINDEX}])>0 and last(/Packetflux/ifSpeed.[{#SNMPINDEX}],#2)>0'
                  name: 'Interface {#IFNAME}: Ethernet has changed to lower speed than it was before'
                  opdata: 'Current Reported Speed: {ITEM.LASTVALUE1}'
                  priority: WARNING
                  manual_close: 'YES'
      macros:
        -
          macro: '{$SNMPCOMMUNITY}'
          value: ruralwave
      valuemaps:
        -
          uuid: f95628b227ff4dccb031dc3b74b71106
          name: 'Host availability'
          mappings:
            -
              value: '0'
              newvalue: 'not available'
            -
              value: '1'
              newvalue: available
            -
              value: '2'
              newvalue: unknown
