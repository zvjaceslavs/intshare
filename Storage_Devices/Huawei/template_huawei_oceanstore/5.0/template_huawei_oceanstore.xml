<?xml version="1.0" encoding="UTF-8"?>
<zabbix_export>
  <version>5.0</version>
  <date>2021-11-09T08:35:02Z</date>
  <groups>
    <group>
      <name>Templates</name>
    </group>
  </groups>
  <templates>
    <template>
      <template>Huawei OceanStor Rest-API v2</template>
      <name>Huawei OceanStor Rest-API v2</name>
      <description>## Overview Python script for monitoring huawei storages Tested on 5500 V5, 5600 V5, 2600 V3, 5500 V3, dorado 5000 V3, 18800 V3 and dorado 5000 V6</description>
      <groups>
        <group>
          <name>Templates</name>
        </group>
      </groups>
      <applications>
        <application>
          <name>BBU health</name>
        </application>
        <application>
          <name>Common</name>
        </application>
        <application>
          <name>Controller</name>
        </application>
        <application>
          <name>Controller health</name>
        </application>
        <application>
          <name>Disk</name>
        </application>
        <application>
          <name>DiskDomain</name>
        </application>
        <application>
          <name>Disk health</name>
        </application>
        <application>
          <name>Disk temperature</name>
        </application>
        <application>
          <name>Enclosure</name>
        </application>
        <application>
          <name>Enclosure health</name>
        </application>
        <application>
          <name>Eth</name>
        </application>
        <application>
          <name>Eth health</name>
        </application>
        <application>
          <name>ExpBoard</name>
        </application>
        <application>
          <name>ExpBoard health</name>
        </application>
        <application>
          <name>FAN</name>
        </application>
        <application>
          <name>FAN health</name>
        </application>
        <application>
          <name>FC</name>
        </application>
        <application>
          <name>FC health</name>
        </application>
        <application>
          <name>get_data_from_script</name>
        </application>
        <application>
          <name>Health</name>
        </application>
        <application>
          <name>INFO</name>
        </application>
        <application>
          <name>Interface Module</name>
        </application>
        <application>
          <name>Interface Module health</name>
        </application>
        <application>
          <name>LUN Capacity</name>
        </application>
        <application>
          <name>LUN health</name>
        </application>
        <application>
          <name>Other</name>
        </application>
        <application>
          <name>Pool</name>
        </application>
        <application>
          <name>PSU</name>
        </application>
        <application>
          <name>PSU health</name>
        </application>
        <application>
          <name>SAS</name>
        </application>
        <application>
          <name>SAS health</name>
        </application>
        <application>
          <name>StorageTier</name>
        </application>
      </applications>
      <items>
        <item>
          <name>get discovery</name>
          <type>EXTERNAL</type>
          <key>huawei_get_state.py["--api_ip={HOST.IP}","--api_port={$API_PORT}","--api_user={$API_USER}","--api_password={$API_PASSWORD}","--storage_name={HOST.NAME}","--discovery"]</key>
          <delay>1h</delay>
          <applications>
            <application>
              <name>get_data_from_script</name>
            </application>
          </applications>
          <request_method>POST</request_method>
        </item>
        <item>
          <name>get health state</name>
          <type>EXTERNAL</type>
          <key>huawei_get_state.py["--api_ip={HOST.IP}","--api_port={$API_PORT}","--api_user={$API_USER}","--api_password={$API_PASSWORD}","--storage_name={HOST.NAME}","--status"]</key>
          <applications>
            <application>
              <name>get_data_from_script</name>
            </application>
          </applications>
          <request_method>POST</request_method>
          <triggers>
            <trigger>
              <expression>{count(2h,1,ge)}=40 or {count(2h,2,ge)}=40</expression>
              <name>Error occurs on sending metrics</name>
              <priority>HIGH</priority>
            </trigger>
            <trigger>
              <expression>{nodata(3600)}=1</expression>
              <name>No data from storage in next 1 hour</name>
              <priority>HIGH</priority>
            </trigger>
          </triggers>
        </item>
      </items>
      <discovery_rules>
        <discovery_rule>
          <name>BBU</name>
          <type>TRAP</type>
          <key>backup_power</key>
          <delay>0</delay>
          <lifetime>1d</lifetime>
          <item_prototypes>
            <item_prototype>
              <name>Health status of a BBU "{#LOCATION}"</name>
              <type>TRAP</type>
              <key>health.backup_power.[{#LOCATION}]</key>
              <delay>0</delay>
              <history>1w</history>
              <trends>90d</trends>
              <applications>
                <application>
                  <name>BBU health</name>
                </application>
              </applications>
              <valuemap>
                <name>Huawei_HEALTH_STATUS</name>
              </valuemap>
              <request_method>POST</request_method>
              <trigger_prototypes>
                <trigger_prototype>
                  <expression>{min(43200)}=12 or {last()}=2 or {last()}=3 or {last()}=0</expression>
                  <name>BBU "{#LOCATION}" health status is {ITEM.VALUE}</name>
                  <priority>HIGH</priority>
                </trigger_prototype>
              </trigger_prototypes>
            </item_prototype>
            <item_prototype>
              <name>Running status of a BBU "{#LOCATION}"</name>
              <type>TRAP</type>
              <key>running.backup_power.[{#LOCATION}]</key>
              <delay>0</delay>
              <history>1w</history>
              <trends>90d</trends>
              <applications>
                <application>
                  <name>BBU health</name>
                </application>
              </applications>
              <valuemap>
                <name>Huawei_RUNNING_STATUS</name>
              </valuemap>
              <request_method>POST</request_method>
              <trigger_prototypes>
                <trigger_prototype>
                  <expression>{last()}=28 or {last()}=0</expression>
                  <name>BBU "{#LOCATION}" running status is {ITEM.VALUE}</name>
                  <priority>HIGH</priority>
                </trigger_prototype>
              </trigger_prototypes>
            </item_prototype>
          </item_prototypes>
          <request_method>POST</request_method>
        </discovery_rule>
        <discovery_rule>
          <name>Controller</name>
          <type>TRAP</type>
          <key>controller</key>
          <delay>0</delay>
          <lifetime>1d</lifetime>
          <item_prototypes>
            <item_prototype>
              <name>Health status of a Controller "{#LOCATION}"</name>
              <type>TRAP</type>
              <key>health.controller.[{#LOCATION}]</key>
              <delay>0</delay>
              <history>1w</history>
              <trends>90d</trends>
              <applications>
                <application>
                  <name>Controller health</name>
                </application>
              </applications>
              <valuemap>
                <name>Huawei_HEALTH_STATUS</name>
              </valuemap>
              <request_method>POST</request_method>
              <trigger_prototypes>
                <trigger_prototype>
                  <expression>{last(0)}&lt;>1</expression>
                  <name>Controller "{#LOCATION}" health status is {ITEM.VALUE}</name>
                  <priority>HIGH</priority>
                </trigger_prototype>
              </trigger_prototypes>
            </item_prototype>
            <item_prototype>
              <name>Running status of a Controller "{#LOCATION}"</name>
              <type>TRAP</type>
              <key>running.controller.[{#LOCATION}]</key>
              <delay>0</delay>
              <history>1w</history>
              <trends>90d</trends>
              <applications>
                <application>
                  <name>Controller</name>
                </application>
              </applications>
              <valuemap>
                <name>Huawei_RUNNING_STATUS</name>
              </valuemap>
              <request_method>POST</request_method>
              <trigger_prototypes>
                <trigger_prototype>
                  <expression>{last(0)}&lt;>27</expression>
                  <name>Controller "{#LOCATION}" running status is {ITEM.VALUE}</name>
                  <priority>HIGH</priority>
                </trigger_prototype>
              </trigger_prototypes>
            </item_prototype>
          </item_prototypes>
          <request_method>POST</request_method>
        </discovery_rule>
        <discovery_rule>
          <name>Disk</name>
          <type>TRAP</type>
          <key>disk</key>
          <delay>0</delay>
          <lifetime>1d</lifetime>
          <item_prototypes>
            <item_prototype>
              <name>Health status of disk "{#LOCATION}"</name>
              <type>TRAP</type>
              <key>health.disk.[{#LOCATION}]</key>
              <delay>0</delay>
              <history>1w</history>
              <trends>90d</trends>
              <applications>
                <application>
                  <name>Disk health</name>
                </application>
              </applications>
              <valuemap>
                <name>Huawei_HEALTH_STATUS</name>
              </valuemap>
              <request_method>POST</request_method>
              <trigger_prototypes>
                <trigger_prototype>
                  <expression>{last()}&lt;>1</expression>
                  <name>Hard disk "{#LOCATION}" health status is {ITEM.VALUE}</name>
                  <priority>HIGH</priority>
                </trigger_prototype>
              </trigger_prototypes>
            </item_prototype>
            <item_prototype>
              <name>Running status of disk "{#LOCATION}"</name>
              <type>TRAP</type>
              <key>running.disk.[{#LOCATION}]</key>
              <delay>0</delay>
              <history>1w</history>
              <trends>90d</trends>
              <applications>
                <application>
                  <name>Disk</name>
                </application>
              </applications>
              <valuemap>
                <name>Huawei_RUNNING_STATUS</name>
              </valuemap>
              <request_method>POST</request_method>
              <trigger_prototypes>
                <trigger_prototype>
                  <expression>{last()}&lt;>27</expression>
                  <name>Hard disk "{#LOCATION}" running status is {ITEM.VALUE}</name>
                  <priority>HIGH</priority>
                </trigger_prototype>
              </trigger_prototypes>
            </item_prototype>
          </item_prototypes>
          <request_method>POST</request_method>
        </discovery_rule>
        <discovery_rule>
          <name>DiskDomain</name>
          <type>TRAP</type>
          <key>diskpool</key>
          <delay>0</delay>
          <lifetime>1d</lifetime>
          <item_prototypes>
            <item_prototype>
              <name>Health status of a DiskDomain "{#NAME}"</name>
              <type>TRAP</type>
              <key>health.diskpool.[{#NAME}]</key>
              <delay>0</delay>
              <history>1w</history>
              <trends>90d</trends>
              <applications>
                <application>
                  <name>DiskDomain</name>
                </application>
              </applications>
              <valuemap>
                <name>Huawei_HEALTH_STATUS</name>
              </valuemap>
              <request_method>POST</request_method>
              <trigger_prototypes>
                <trigger_prototype>
                  <expression>{last()}=2</expression>
                  <name>DiskDomain "{#NAME}" health status is {ITEM.VALUE}</name>
                  <priority>DISASTER</priority>
                </trigger_prototype>
              </trigger_prototypes>
            </item_prototype>
            <item_prototype>
              <name>Running status of a DiskDomain "{#NAME}"</name>
              <type>TRAP</type>
              <key>running.diskpool.[{#NAME}]</key>
              <delay>0</delay>
              <history>1w</history>
              <trends>90d</trends>
              <applications>
                <application>
                  <name>DiskDomain</name>
                </application>
              </applications>
              <valuemap>
                <name>Huawei_RUNNING_STATUS</name>
              </valuemap>
              <request_method>POST</request_method>
              <trigger_prototypes>
                <trigger_prototype>
                  <expression>{last()}=28</expression>
                  <name>DiskDomain "{#NAME}" running status is {ITEM.VALUE}</name>
                  <priority>DISASTER</priority>
                </trigger_prototype>
              </trigger_prototypes>
            </item_prototype>
          </item_prototypes>
          <request_method>POST</request_method>
        </discovery_rule>
        <discovery_rule>
          <name>Enclosure</name>
          <type>TRAP</type>
          <key>enclosure</key>
          <delay>0</delay>
          <lifetime>1d</lifetime>
          <item_prototypes>
            <item_prototype>
              <name>Health status of an enclosure "{#LOCATION}"</name>
              <type>TRAP</type>
              <key>health.enclosure.[{#LOCATION}]</key>
              <delay>0</delay>
              <history>1w</history>
              <trends>90d</trends>
              <applications>
                <application>
                  <name>Enclosure health</name>
                </application>
              </applications>
              <valuemap>
                <name>Huawei_HEALTH_STATUS</name>
              </valuemap>
              <request_method>POST</request_method>
              <trigger_prototypes>
                <trigger_prototype>
                  <expression>{last()}&lt;>1</expression>
                  <name>Enclosure "{#LOCATION}" health status is {ITEM.VALUE}</name>
                  <priority>HIGH</priority>
                </trigger_prototype>
              </trigger_prototypes>
            </item_prototype>
            <item_prototype>
              <name>Running status of an enclosure "{#LOCATION}"</name>
              <type>TRAP</type>
              <key>running.enclosure.[{#LOCATION}]</key>
              <delay>0</delay>
              <history>1w</history>
              <trends>90d</trends>
              <applications>
                <application>
                  <name>Enclosure</name>
                </application>
              </applications>
              <valuemap>
                <name>Huawei_RUNNING_STATUS</name>
              </valuemap>
              <request_method>POST</request_method>
              <trigger_prototypes>
                <trigger_prototype>
                  <expression>{last()}&lt;>27</expression>
                  <name>Enclosure "{#LOCATION}" running status is {ITEM.VALUE}</name>
                  <priority>HIGH</priority>
                </trigger_prototype>
              </trigger_prototypes>
            </item_prototype>
          </item_prototypes>
          <request_method>POST</request_method>
        </discovery_rule>
        <discovery_rule>
          <name>PortEth</name>
          <type>TRAP</type>
          <key>eth_port</key>
          <delay>0</delay>
          <lifetime>1d</lifetime>
          <item_prototypes>
            <item_prototype>
              <name>Health status of an Ethernet port "{#LOCATION}"</name>
              <type>TRAP</type>
              <key>health.eth_port.[{#LOCATION}]</key>
              <delay>0</delay>
              <history>1w</history>
              <trends>90d</trends>
              <applications>
                <application>
                  <name>Eth health</name>
                </application>
              </applications>
              <valuemap>
                <name>Huawei_HEALTH_STATUS</name>
              </valuemap>
              <request_method>POST</request_method>
              <trigger_prototypes>
                <trigger_prototype>
                  <expression>{last()}&lt;>1</expression>
                  <name>PortEth "{#LOCATION}" health status is {ITEM.VALUE}</name>
                  <priority>HIGH</priority>
                </trigger_prototype>
              </trigger_prototypes>
            </item_prototype>
            <item_prototype>
              <name>Running status of an Ethernet port "{#LOCATION}"</name>
              <type>TRAP</type>
              <key>running.eth_port.[{#LOCATION}]</key>
              <delay>0</delay>
              <history>1w</history>
              <trends>90d</trends>
              <applications>
                <application>
                  <name>Eth</name>
                </application>
              </applications>
              <valuemap>
                <name>Huawei_RUNNING_STATUS</name>
              </valuemap>
              <request_method>POST</request_method>
              <trigger_prototypes>
                <trigger_prototype>
                  <expression>{last()}=11</expression>
                  <name>PortEth "{#LOCATION}" running status is {ITEM.VALUE}</name>
                  <priority>HIGH</priority>
                </trigger_prototype>
              </trigger_prototypes>
            </item_prototype>
          </item_prototypes>
          <request_method>POST</request_method>
        </discovery_rule>
        <discovery_rule>
          <name>ExpBoard</name>
          <type>TRAP</type>
          <key>expboard</key>
          <delay>0</delay>
          <lifetime>1d</lifetime>
          <item_prototypes>
            <item_prototype>
              <name>Health status of an expansion module "{#LOCATION}"</name>
              <type>TRAP</type>
              <key>health.expboard.[{#LOCATION}]</key>
              <delay>0</delay>
              <history>1w</history>
              <trends>90d</trends>
              <applications>
                <application>
                  <name>ExpBoard health</name>
                </application>
              </applications>
              <valuemap>
                <name>Huawei_HEALTH_STATUS</name>
              </valuemap>
              <request_method>POST</request_method>
              <trigger_prototypes>
                <trigger_prototype>
                  <expression>{last()}&lt;>1</expression>
                  <name>ExpBoard "{#LOCATION}" health status is {ITEM.VALUE}</name>
                  <priority>HIGH</priority>
                </trigger_prototype>
              </trigger_prototypes>
            </item_prototype>
            <item_prototype>
              <name>Running status of an expansion module "{#LOCATION}"</name>
              <type>TRAP</type>
              <key>running.expboard.[{#LOCATION}]</key>
              <delay>0</delay>
              <history>1w</history>
              <trends>90d</trends>
              <applications>
                <application>
                  <name>ExpBoard</name>
                </application>
              </applications>
              <valuemap>
                <name>Huawei_RUNNING_STATUS</name>
              </valuemap>
              <request_method>POST</request_method>
              <trigger_prototypes>
                <trigger_prototype>
                  <expression>{last()}&lt;>27 and {last()}&lt;>2</expression>
                  <name>ExpBoard "{#LOCATION}" running status is {ITEM.VALUE}</name>
                  <priority>HIGH</priority>
                </trigger_prototype>
              </trigger_prototypes>
            </item_prototype>
          </item_prototypes>
          <request_method>POST</request_method>
        </discovery_rule>
        <discovery_rule>
          <name>FAN</name>
          <type>TRAP</type>
          <key>fan</key>
          <delay>0</delay>
          <lifetime>3d</lifetime>
          <item_prototypes>
            <item_prototype>
              <name>Health Status of a FAN "{#LOCATION}"</name>
              <type>TRAP</type>
              <key>health.fan.[{#LOCATION}]</key>
              <delay>0</delay>
              <history>1w</history>
              <trends>90d</trends>
              <applications>
                <application>
                  <name>FAN health</name>
                </application>
              </applications>
              <valuemap>
                <name>Huawei_HEALTH_STATUS</name>
              </valuemap>
              <request_method>POST</request_method>
              <trigger_prototypes>
                <trigger_prototype>
                  <expression>{last()}&lt;>1</expression>
                  <name>FAN "{#LOCATION}" health status is {ITEM.VALUE}</name>
                  <priority>HIGH</priority>
                </trigger_prototype>
              </trigger_prototypes>
            </item_prototype>
            <item_prototype>
              <name>Running status of a FAN "{#LOCATION}"</name>
              <type>TRAP</type>
              <key>running.fan.[{#LOCATION}]</key>
              <delay>0</delay>
              <history>1w</history>
              <trends>90d</trends>
              <applications>
                <application>
                  <name>FAN</name>
                </application>
              </applications>
              <valuemap>
                <name>Huawei_RUNNING_STATUS</name>
              </valuemap>
              <request_method>POST</request_method>
              <trigger_prototypes>
                <trigger_prototype>
                  <expression>{last()}&lt;>27 and {last()}&lt;>2</expression>
                  <name>FAN "{#LOCATION}" running status is {ITEM.VALUE}</name>
                  <priority>HIGH</priority>
                </trigger_prototype>
              </trigger_prototypes>
            </item_prototype>
          </item_prototypes>
          <request_method>POST</request_method>
        </discovery_rule>
        <discovery_rule>
          <name>PortFibreChannel</name>
          <type>TRAP</type>
          <key>fc_port</key>
          <delay>0</delay>
          <lifetime>1d</lifetime>
          <item_prototypes>
            <item_prototype>
              <name>Health status of a Fibre Channel port "{#LOCATION}"</name>
              <type>TRAP</type>
              <key>health.fc_port.[{#LOCATION}]</key>
              <delay>0</delay>
              <history>1w</history>
              <trends>90d</trends>
              <applications>
                <application>
                  <name>FC health</name>
                </application>
              </applications>
              <valuemap>
                <name>Huawei_HEALTH_STATUS</name>
              </valuemap>
              <request_method>POST</request_method>
              <trigger_prototypes>
                <trigger_prototype>
                  <expression>{last()}&lt;>1</expression>
                  <name>PortFibreChannel "{#LOCATION}" health status is {ITEM.VALUE}</name>
                  <priority>HIGH</priority>
                </trigger_prototype>
              </trigger_prototypes>
            </item_prototype>
            <item_prototype>
              <name>Running status of a Fibre Channel port "{#LOCATION}"</name>
              <type>TRAP</type>
              <key>running.fc_port.[{#LOCATION}]</key>
              <delay>0</delay>
              <history>1w</history>
              <trends>90d</trends>
              <applications>
                <application>
                  <name>FC</name>
                </application>
              </applications>
              <valuemap>
                <name>Huawei_RUNNING_STATUS</name>
              </valuemap>
              <request_method>POST</request_method>
              <trigger_prototypes>
                <trigger_prototype>
                  <expression>{last()}=11</expression>
                  <name>PortFibreChannel "{#LOCATION}" running status is {ITEM.VALUE}</name>
                  <priority>HIGH</priority>
                </trigger_prototype>
              </trigger_prototypes>
            </item_prototype>
          </item_prototypes>
          <request_method>POST</request_method>
        </discovery_rule>
        <discovery_rule>
          <name>InterfaceModule</name>
          <type>TRAP</type>
          <key>intf_module</key>
          <delay>0</delay>
          <lifetime>1d</lifetime>
          <item_prototypes>
            <item_prototype>
              <name>Health status of an interface module "{#LOCATION}"</name>
              <type>TRAP</type>
              <key>health.intf_module.[{#LOCATION}]</key>
              <delay>0</delay>
              <history>1w</history>
              <trends>90d</trends>
              <applications>
                <application>
                  <name>Interface Module health</name>
                </application>
              </applications>
              <valuemap>
                <name>Huawei_HEALTH_STATUS</name>
              </valuemap>
              <request_method>POST</request_method>
              <trigger_prototypes>
                <trigger_prototype>
                  <expression>{last()}&lt;>1</expression>
                  <name>InterfaceModule "{#LOCATION}" health status is {ITEM.VALUE}</name>
                  <priority>HIGH</priority>
                </trigger_prototype>
              </trigger_prototypes>
            </item_prototype>
            <item_prototype>
              <name>Running status of an interface module "{#LOCATION}"</name>
              <type>TRAP</type>
              <key>running.intf_module.[{#LOCATION}]</key>
              <delay>0</delay>
              <history>1w</history>
              <trends>90d</trends>
              <applications>
                <application>
                  <name>Interface Module</name>
                </application>
              </applications>
              <valuemap>
                <name>Huawei_RUNNING_STATUS</name>
              </valuemap>
              <request_method>POST</request_method>
              <trigger_prototypes>
                <trigger_prototype>
                  <expression>{last()}&lt;>27 and {last()}&lt;>2</expression>
                  <name>InterfaceModule "{#LOCATION}" running status is {ITEM.VALUE}</name>
                  <priority>HIGH</priority>
                </trigger_prototype>
              </trigger_prototypes>
            </item_prototype>
          </item_prototypes>
          <request_method>POST</request_method>
        </discovery_rule>
        <discovery_rule>
          <name>Lun</name>
          <type>TRAP</type>
          <key>lun</key>
          <delay>0</delay>
          <lifetime>1d</lifetime>
          <item_prototypes>
            <item_prototype>
              <name>Health status of the LUN "{#NAME}"</name>
              <type>TRAP</type>
              <key>health.lun.[{#NAME}]</key>
              <delay>0</delay>
              <history>1w</history>
              <trends>60d</trends>
              <applications>
                <application>
                  <name>LUN health</name>
                </application>
              </applications>
              <valuemap>
                <name>Huawei_HEALTH_STATUS</name>
              </valuemap>
              <request_method>POST</request_method>
              <trigger_prototypes>
                <trigger_prototype>
                  <expression>{last()}&lt;>1</expression>
                  <name>LUN "{#NAME}" health status is {ITEM.VALUE}</name>
                  <priority>HIGH</priority>
                </trigger_prototype>
              </trigger_prototypes>
            </item_prototype>
            <item_prototype>
              <name>Running status of the LUN "{#NAME}"</name>
              <type>TRAP</type>
              <key>running.lun.[{#NAME}]</key>
              <delay>0</delay>
              <history>1w</history>
              <trends>60d</trends>
              <applications>
                <application>
                  <name>LUN health</name>
                </application>
              </applications>
              <valuemap>
                <name>Huawei_RUNNING_STATUS</name>
              </valuemap>
              <request_method>POST</request_method>
              <trigger_prototypes>
                <trigger_prototype>
                  <expression>{last()}&lt;>27</expression>
                  <name>LUN "{#NAME}" running status is {ITEM.VALUE}</name>
                  <priority>HIGH</priority>
                </trigger_prototype>
              </trigger_prototypes>
            </item_prototype>
          </item_prototypes>
          <request_method>POST</request_method>
        </discovery_rule>
        <discovery_rule>
          <name>PSU</name>
          <type>TRAP</type>
          <key>power</key>
          <delay>0</delay>
          <lifetime>1d</lifetime>
          <item_prototypes>
            <item_prototype>
              <name>Health Status of a PSU "{#LOCATION}"</name>
              <type>TRAP</type>
              <key>health.power.[{#LOCATION}]</key>
              <delay>0</delay>
              <history>1w</history>
              <trends>90d</trends>
              <applications>
                <application>
                  <name>PSU health</name>
                </application>
              </applications>
              <valuemap>
                <name>Huawei_HEALTH_STATUS</name>
              </valuemap>
              <request_method>POST</request_method>
              <trigger_prototypes>
                <trigger_prototype>
                  <expression>{last()}&lt;>1</expression>
                  <name>PSU "{#LOCATION}" health status is {ITEM.VALUE}</name>
                  <priority>HIGH</priority>
                </trigger_prototype>
              </trigger_prototypes>
            </item_prototype>
            <item_prototype>
              <name>Running Status of a PSU "{#LOCATION}"</name>
              <type>TRAP</type>
              <key>running.power.[{#LOCATION}]</key>
              <delay>0</delay>
              <history>1w</history>
              <trends>90d</trends>
              <applications>
                <application>
                  <name>PSU</name>
                </application>
              </applications>
              <valuemap>
                <name>Huawei_RUNNING_STATUS</name>
              </valuemap>
              <request_method>POST</request_method>
              <trigger_prototypes>
                <trigger_prototype>
                  <expression>{last()}&lt;>27</expression>
                  <name>PSU "{#LOCATION}" running status is {ITEM.VALUE}</name>
                  <priority>HIGH</priority>
                </trigger_prototype>
              </trigger_prototypes>
            </item_prototype>
          </item_prototypes>
          <request_method>POST</request_method>
        </discovery_rule>
        <discovery_rule>
          <name>PortSAS</name>
          <type>TRAP</type>
          <key>sas_port</key>
          <delay>0</delay>
          <lifetime>1d</lifetime>
          <item_prototypes>
            <item_prototype>
              <name>Health status of a SAS port "{#LOCATION}"</name>
              <type>TRAP</type>
              <key>health.sas_port.[{#LOCATION}]</key>
              <delay>0</delay>
              <history>1w</history>
              <trends>90d</trends>
              <applications>
                <application>
                  <name>SAS health</name>
                </application>
              </applications>
              <valuemap>
                <name>Huawei_HEALTH_STATUS</name>
              </valuemap>
              <request_method>POST</request_method>
              <trigger_prototypes>
                <trigger_prototype>
                  <expression>{last()}&lt;>1</expression>
                  <name>PortSAS "{#LOCATION}" health status is {ITEM.VALUE}</name>
                  <priority>HIGH</priority>
                </trigger_prototype>
              </trigger_prototypes>
            </item_prototype>
            <item_prototype>
              <name>Running status of a SAS port "{#LOCATION}"</name>
              <type>TRAP</type>
              <key>running.sas_port.[{#LOCATION}]</key>
              <delay>0</delay>
              <history>1w</history>
              <trends>90d</trends>
              <applications>
                <application>
                  <name>SAS</name>
                </application>
              </applications>
              <valuemap>
                <name>Huawei_RUNNING_STATUS</name>
              </valuemap>
              <request_method>POST</request_method>
              <trigger_prototypes>
                <trigger_prototype>
                  <expression>{last()}=11</expression>
                  <name>PortSAS "{#LOCATION}" running status is {ITEM.VALUE}</name>
                  <priority>HIGH</priority>
                </trigger_prototype>
              </trigger_prototypes>
            </item_prototype>
          </item_prototypes>
          <request_method>POST</request_method>
        </discovery_rule>
        <discovery_rule>
          <name>Pool</name>
          <type>TRAP</type>
          <key>storagepool</key>
          <delay>0</delay>
          <lifetime>1d</lifetime>
          <item_prototypes>
            <item_prototype>
              <name>Free capacity of a Pool "{#NAME}"</name>
              <type>TRAP</type>
              <key>free.capacity.storagepool.[{#NAME}]</key>
              <delay>0</delay>
              <history>1w</history>
              <trends>90d</trends>
              <units>B</units>
              <applications>
                <application>
                  <name>Pool</name>
                </application>
              </applications>
              <request_method>POST</request_method>
            </item_prototype>
            <item_prototype>
              <name>Health status of a Pool "{#NAME}"</name>
              <type>TRAP</type>
              <key>health.storagepool.[{#NAME}]</key>
              <delay>0</delay>
              <history>1w</history>
              <trends>90d</trends>
              <applications>
                <application>
                  <name>Pool</name>
                </application>
              </applications>
              <valuemap>
                <name>Huawei_HEALTH_STATUS</name>
              </valuemap>
              <request_method>POST</request_method>
              <trigger_prototypes>
                <trigger_prototype>
                  <expression>{last()}=2</expression>
                  <name>Pool "{#NAME}" health status is {ITEM.VALUE}</name>
                  <priority>DISASTER</priority>
                </trigger_prototype>
              </trigger_prototypes>
            </item_prototype>
            <item_prototype>
              <name>Running status of a Pool "{#NAME}"</name>
              <type>TRAP</type>
              <key>running.storagepool.[{#NAME}]</key>
              <delay>0</delay>
              <history>1w</history>
              <trends>90d</trends>
              <applications>
                <application>
                  <name>Pool</name>
                </application>
              </applications>
              <valuemap>
                <name>Huawei_RUNNING_STATUS</name>
              </valuemap>
              <request_method>POST</request_method>
              <trigger_prototypes>
                <trigger_prototype>
                  <expression>{last()}=28</expression>
                  <name>Pool "{#NAME}" running status is {ITEM.VALUE}</name>
                  <priority>DISASTER</priority>
                </trigger_prototype>
              </trigger_prototypes>
            </item_prototype>
            <item_prototype>
              <name>Subscribed capacity of a Pool "{#NAME}" in percent</name>
              <type>CALCULATED</type>
              <key>subscribed.capacity.percent.storagepool.[{#NAME}]</key>
              <delay>3m</delay>
              <history>1w</history>
              <trends>90d</trends>
              <value_type>FLOAT</value_type>
              <units>%</units>
              <params>(100*last("subscribed.capacity.storagepool.[{#NAME}]"))/last("total.capacity.storagepool.[{#NAME}]")</params>
              <applications>
                <application>
                  <name>Pool</name>
                </application>
              </applications>
              <request_method>POST</request_method>
              <trigger_prototypes>
                <trigger_prototype>
                  <expression>{last()}>{$SUBSCRIBED_PERCENT:"{#NAME}"}</expression>
                  <name>Subscribed capacity on pool "{#NAME}" > {$SUBSCRIBED_PERCENT:"{#NAME}"}%</name>
                  <priority>HIGH</priority>
                </trigger_prototype>
              </trigger_prototypes>
            </item_prototype>
            <item_prototype>
              <name>Subscribed capacity of a Pool "{#NAME}"</name>
              <type>TRAP</type>
              <key>subscribed.capacity.storagepool.[{#NAME}]</key>
              <delay>0</delay>
              <history>1w</history>
              <trends>90d</trends>
              <units>B</units>
              <applications>
                <application>
                  <name>Pool</name>
                </application>
              </applications>
              <request_method>POST</request_method>
            </item_prototype>
            <item_prototype>
              <name>Total capacity of a Pool "{#NAME}"</name>
              <type>TRAP</type>
              <key>total.capacity.storagepool.[{#NAME}]</key>
              <delay>0</delay>
              <history>1w</history>
              <trends>90d</trends>
              <units>B</units>
              <applications>
                <application>
                  <name>Pool</name>
                </application>
              </applications>
              <request_method>POST</request_method>
            </item_prototype>
            <item_prototype>
              <name>Used capacity of a Pool "{#NAME}" in percent</name>
              <type>CALCULATED</type>
              <key>used.capacity.percent.storagepool.[{#NAME}]</key>
              <delay>3m</delay>
              <value_type>FLOAT</value_type>
              <units>%</units>
              <params>(100*last("used.capacity.storagepool.[{#NAME}]"))/last("total.capacity.storagepool.[{#NAME}]")</params>
              <applications>
                <application>
                  <name>Pool</name>
                </application>
              </applications>
              <request_method>POST</request_method>
              <trigger_prototypes>
                <trigger_prototype>
                  <expression>{last()}>{$USED_PERCENT:"{#NAME}"}</expression>
                  <name>Used capacity on pool "{#NAME}" > {$USED_PERCENT:"{#NAME}"}%</name>
                  <priority>HIGH</priority>
                </trigger_prototype>
              </trigger_prototypes>
            </item_prototype>
            <item_prototype>
              <name>Used capacity of a Pool "{#NAME}"</name>
              <type>TRAP</type>
              <key>used.capacity.storagepool.[{#NAME}]</key>
              <delay>0</delay>
              <history>1w</history>
              <trends>90d</trends>
              <units>B</units>
              <applications>
                <application>
                  <name>Pool</name>
                </application>
              </applications>
              <request_method>POST</request_method>
            </item_prototype>
          </item_prototypes>
          <request_method>POST</request_method>
        </discovery_rule>
      </discovery_rules>
      <macros>
        <macro>
          <macro>{$API_PASSWORD}</macro>
        </macro>
        <macro>
          <macro>{$API_PORT}</macro>
          <value>8088</value>
        </macro>
        <macro>
          <macro>{$API_USER}</macro>
        </macro>
        <macro>
          <macro>{$SUBSCRIBED_PERCENT}</macro>
          <value>91</value>
        </macro>
        <macro>
          <macro>{$USED_PERCENT}</macro>
          <value>91</value>
        </macro>
      </macros>
    </template>
  </templates>
  <value_maps>
    <value_map>
      <name>Huawei_HEALTH_STATUS</name>
      <mappings>
        <mapping>
          <value>0</value>
          <newvalue>Unknown</newvalue>
        </mapping>
        <mapping>
          <value>1</value>
          <newvalue>Normal</newvalue>
        </mapping>
        <mapping>
          <value>2</value>
          <newvalue>Fault</newvalue>
        </mapping>
        <mapping>
          <value>3</value>
          <newvalue>Pre-fail</newvalue>
        </mapping>
        <mapping>
          <value>4</value>
          <newvalue>Partially broken</newvalue>
        </mapping>
        <mapping>
          <value>5</value>
          <newvalue>Degraded</newvalue>
        </mapping>
        <mapping>
          <value>6</value>
          <newvalue>Bad sectors found</newvalue>
        </mapping>
        <mapping>
          <value>7</value>
          <newvalue>Bit errors found</newvalue>
        </mapping>
        <mapping>
          <value>8</value>
          <newvalue>Consistent</newvalue>
        </mapping>
        <mapping>
          <value>9</value>
          <newvalue>Inconsistent</newvalue>
        </mapping>
        <mapping>
          <value>10</value>
          <newvalue>Busy</newvalue>
        </mapping>
        <mapping>
          <value>11</value>
          <newvalue>No input</newvalue>
        </mapping>
        <mapping>
          <value>12</value>
          <newvalue>Low battery</newvalue>
        </mapping>
        <mapping>
          <value>13</value>
          <newvalue>Single link fault</newvalue>
        </mapping>
        <mapping>
          <value>14</value>
          <newvalue>Invalid</newvalue>
        </mapping>
        <mapping>
          <value>15</value>
          <newvalue>Write protect</newvalue>
        </mapping>
      </mappings>
    </value_map>
    <value_map>
      <name>Huawei_RUNNING_STATUS</name>
      <mappings>
        <mapping>
          <value>0</value>
          <newvalue>Unknown</newvalue>
        </mapping>
        <mapping>
          <value>1</value>
          <newvalue>Normal</newvalue>
        </mapping>
        <mapping>
          <value>2</value>
          <newvalue>Running</newvalue>
        </mapping>
        <mapping>
          <value>5</value>
          <newvalue>sleep in high temperature</newvalue>
        </mapping>
        <mapping>
          <value>10</value>
          <newvalue>Link_up</newvalue>
        </mapping>
        <mapping>
          <value>11</value>
          <newvalue>Link_down</newvalue>
        </mapping>
        <mapping>
          <value>12</value>
          <newvalue>powering on</newvalue>
        </mapping>
        <mapping>
          <value>13</value>
          <newvalue>powered off</newvalue>
        </mapping>
        <mapping>
          <value>14</value>
          <newvalue>pre-copy</newvalue>
        </mapping>
        <mapping>
          <value>16</value>
          <newvalue>reconstruction</newvalue>
        </mapping>
        <mapping>
          <value>27</value>
          <newvalue>online</newvalue>
        </mapping>
        <mapping>
          <value>28</value>
          <newvalue>offline</newvalue>
        </mapping>
        <mapping>
          <value>32</value>
          <newvalue>balancing</newvalue>
        </mapping>
        <mapping>
          <value>48</value>
          <newvalue>charging</newvalue>
        </mapping>
        <mapping>
          <value>49</value>
          <newvalue>charging completed</newvalue>
        </mapping>
        <mapping>
          <value>50</value>
          <newvalue>discharging</newvalue>
        </mapping>
        <mapping>
          <value>53</value>
          <newvalue>initializing</newvalue>
        </mapping>
        <mapping>
          <value>103</value>
          <newvalue>power-on failed</newvalue>
        </mapping>
      </mappings>
    </value_map>
  </value_maps>
</zabbix_export>