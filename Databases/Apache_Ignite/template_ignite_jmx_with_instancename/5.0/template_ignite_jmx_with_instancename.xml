<?xml version="1.0" encoding="UTF-8"?>
<zabbix_export>
  <version>5.0</version>
  <date>2021-10-26T04:44:34Z</date>
  <groups>
    <group>
      <name>Templates/Applications</name>
    </group>
  </groups>
  <templates>
    <template>
      <template>App Ignite JMX</template>
      <name>App Ignite JMX</name>
      <groups>
        <group>
          <name>Templates/Applications</name>
        </group>
      </groups>
      <applications>
        <application>
          <name>Cache</name>
        </application>
        <application>
          <name>ChacheGroup</name>
        </application>
        <application>
          <name>Communication</name>
        </application>
        <application>
          <name>Data Region Metrics</name>
        </application>
        <application>
          <name>Discovery</name>
        </application>
        <application>
          <name>Local Node Metrics</name>
        </application>
        <application>
          <name>Partitions</name>
        </application>
        <application>
          <name>Queue</name>
        </application>
        <application>
          <name>Rebalance</name>
        </application>
        <application>
          <name>Snapshots</name>
        </application>
        <application>
          <name>Topology</name>
        </application>
        <application>
          <name>Transactions</name>
        </application>
      </applications>
      <discovery_rules>
        <discovery_rule>
          <name>Cache Metrics</name>
          <type>JMX</type>
          <key>jmx.discovery[beans,"org.apache:igniteInstanceName=*,group=*,name=\"org.apache.ignite.internal.processors.cache.CacheLocalMetricsMXBeanImpl\""]</key>
          <delay>30m</delay>
          <username>{$IGNITE_JMX_USER}</username>
          <password>{$IGNITE_JMX_PASS}</password>
          <lifetime>1d</lifetime>
          <item_prototypes>
            <item_prototype>
              <name>{#JMXIGNITEINSTANCENAME} - {#JMXGROUP} - CacheGets</name>
              <type>JMX</type>
              <key>jmx["{#JMXDOMAIN}:igniteInstanceName={#JMXIGNITEINSTANCENAME},group={#JMXGROUP},name=\"org.apache.ignite.internal.processors.cache.CacheLocalMetricsMXBeanImpl\"",CacheGets]</key>
              <delay>5m</delay>
              <trends>90d</trends>
              <units>ops</units>
              <username>{$IGNITE_JMX_USER}</username>
              <password>{$IGNITE_JMX_PASS}</password>
              <applications>
                <application>
                  <name>Cache</name>
                </application>
              </applications>
              <jmx_endpoint>service:jmx:rmi:///jndi/rmi://{HOST.CONN}:{HOST.PORT}/jmxrmi</jmx_endpoint>
            </item_prototype>
            <item_prototype>
              <name>{#JMXIGNITEINSTANCENAME} - {#JMXGROUP} - CachePuts</name>
              <type>JMX</type>
              <key>jmx["{#JMXDOMAIN}:igniteInstanceName={#JMXIGNITEINSTANCENAME},group={#JMXGROUP},name=\"org.apache.ignite.internal.processors.cache.CacheLocalMetricsMXBeanImpl\"",CachePuts]</key>
              <delay>5m</delay>
              <trends>90d</trends>
              <units>ops</units>
              <username>{$IGNITE_JMX_USER}</username>
              <password>{$IGNITE_JMX_PASS}</password>
              <applications>
                <application>
                  <name>Cache</name>
                </application>
              </applications>
              <jmx_endpoint>service:jmx:rmi:///jndi/rmi://{HOST.CONN}:{HOST.PORT}/jmxrmi</jmx_endpoint>
            </item_prototype>
            <item_prototype>
              <name>{#JMXIGNITEINSTANCENAME} - {#JMXGROUP} - CacheRemovals</name>
              <type>JMX</type>
              <key>jmx["{#JMXDOMAIN}:igniteInstanceName={#JMXIGNITEINSTANCENAME},group={#JMXGROUP},name=\"org.apache.ignite.internal.processors.cache.CacheLocalMetricsMXBeanImpl\"",CacheRemovals]</key>
              <delay>5m</delay>
              <trends>90d</trends>
              <units>ops</units>
              <username>{$IGNITE_JMX_USER}</username>
              <password>{$IGNITE_JMX_PASS}</password>
              <applications>
                <application>
                  <name>Cache</name>
                </application>
              </applications>
              <jmx_endpoint>service:jmx:rmi:///jndi/rmi://{HOST.CONN}:{HOST.PORT}/jmxrmi</jmx_endpoint>
            </item_prototype>
            <item_prototype>
              <name>{#JMXIGNITEINSTANCENAME} - {#JMXGROUP} - CacheSize</name>
              <type>JMX</type>
              <key>jmx["{#JMXDOMAIN}:igniteInstanceName={#JMXIGNITEINSTANCENAME},group={#JMXGROUP},name=\"org.apache.ignite.internal.processors.cache.CacheLocalMetricsMXBeanImpl\"",CacheSize]</key>
              <delay>5m</delay>
              <trends>90d</trends>
              <units>keys</units>
              <username>{$IGNITE_JMX_USER}</username>
              <password>{$IGNITE_JMX_PASS}</password>
              <applications>
                <application>
                  <name>Cache</name>
                </application>
              </applications>
              <jmx_endpoint>service:jmx:rmi:///jndi/rmi://{HOST.CONN}:{HOST.PORT}/jmxrmi</jmx_endpoint>
            </item_prototype>
            <item_prototype>
              <name>{#JMXIGNITEINSTANCENAME} - {#JMXGROUP} - CacheTxCommits</name>
              <type>JMX</type>
              <key>jmx["{#JMXDOMAIN}:igniteInstanceName={#JMXIGNITEINSTANCENAME},group={#JMXGROUP},name=\"org.apache.ignite.internal.processors.cache.CacheLocalMetricsMXBeanImpl\"",CacheTxCommits]</key>
              <delay>5m</delay>
              <trends>90d</trends>
              <units>tps</units>
              <username>{$IGNITE_JMX_USER}</username>
              <password>{$IGNITE_JMX_PASS}</password>
              <applications>
                <application>
                  <name>Cache</name>
                </application>
              </applications>
              <preprocessing>
                <step>
                  <type>CHANGE_PER_SECOND</type>
                  <params></params>
                </step>
              </preprocessing>
              <jmx_endpoint>service:jmx:rmi:///jndi/rmi://{HOST.CONN}:{HOST.PORT}/jmxrmi</jmx_endpoint>
            </item_prototype>
            <item_prototype>
              <name>{#JMXIGNITEINSTANCENAME} - {#JMXGROUP} - CacheTxRollbacks</name>
              <type>JMX</type>
              <key>jmx["{#JMXDOMAIN}:igniteInstanceName={#JMXIGNITEINSTANCENAME},group={#JMXGROUP},name=\"org.apache.ignite.internal.processors.cache.CacheLocalMetricsMXBeanImpl\"",CacheTxRollbacks]</key>
              <delay>5m</delay>
              <trends>90d</trends>
              <units>tps</units>
              <username>{$IGNITE_JMX_USER}</username>
              <password>{$IGNITE_JMX_PASS}</password>
              <applications>
                <application>
                  <name>Cache</name>
                </application>
              </applications>
              <preprocessing>
                <step>
                  <type>CHANGE_PER_SECOND</type>
                  <params></params>
                </step>
              </preprocessing>
              <jmx_endpoint>service:jmx:rmi:///jndi/rmi://{HOST.CONN}:{HOST.PORT}/jmxrmi</jmx_endpoint>
            </item_prototype>
            <item_prototype>
              <name>{#JMXIGNITEINSTANCENAME} - {#JMXGROUP} - HeapEntriesCount</name>
              <type>JMX</type>
              <key>jmx["{#JMXDOMAIN}:igniteInstanceName={#JMXIGNITEINSTANCENAME},group={#JMXGROUP},name=\"org.apache.ignite.internal.processors.cache.CacheLocalMetricsMXBeanImpl\"",HeapEntriesCount]</key>
              <delay>5m</delay>
              <trends>90d</trends>
              <units>keys</units>
              <username>{$IGNITE_JMX_USER}</username>
              <password>{$IGNITE_JMX_PASS}</password>
              <applications>
                <application>
                  <name>Cache</name>
                </application>
              </applications>
              <jmx_endpoint>service:jmx:rmi:///jndi/rmi://{HOST.CONN}:{HOST.PORT}/jmxrmi</jmx_endpoint>
            </item_prototype>
            <item_prototype>
              <name>{#JMXIGNITEINSTANCENAME} - {#JMXGROUP} - NodeKeyCount</name>
              <type>JMX</type>
              <key>jmx["{#JMXDOMAIN}:igniteInstanceName={#JMXIGNITEINSTANCENAME},group={#JMXGROUP},name=\"org.apache.ignite.internal.processors.cache.CacheLocalMetricsMXBeanImpl\"",Size]</key>
              <delay>5m</delay>
              <trends>90d</trends>
              <units>keys</units>
              <username>{$IGNITE_JMX_USER}</username>
              <password>{$IGNITE_JMX_PASS}</password>
              <applications>
                <application>
                  <name>Cache</name>
                </application>
              </applications>
              <jmx_endpoint>service:jmx:rmi:///jndi/rmi://{HOST.CONN}:{HOST.PORT}/jmxrmi</jmx_endpoint>
            </item_prototype>
          </item_prototypes>
          <trigger_prototypes>
            <trigger_prototype>
              <expression>{App Ignite JMX:jmx["{#JMXDOMAIN}:igniteInstanceName={#JMXIGNITEINSTANCENAME},group={#JMXGROUP},name=\"org.apache.ignite.internal.processors.cache.CacheLocalMetricsMXBeanImpl\"",HeapEntriesCount].last()}={App Ignite JMX:jmx["{#JMXDOMAIN}:igniteInstanceName={#JMXIGNITEINSTANCENAME},group={#JMXGROUP},name=\"org.apache.ignite.internal.processors.cache.CacheLocalMetricsMXBeanImpl\"",CacheSize].last()}</expression>
              <name>{#JMXIGNITEINSTANCENAME} - {#JMXGROUP} - All entries are in heap</name>
              <priority>INFO</priority>
              <description>All entries are in heap. Possibly you use eager queries it may cause out of memory exceptions for big caches.</description>
            </trigger_prototype>
            <trigger_prototype>
              <expression>{App Ignite JMX:jmx["{#JMXDOMAIN}:igniteInstanceName={#JMXIGNITEINSTANCENAME},group={#JMXGROUP},name=\"org.apache.ignite.internal.processors.cache.CacheLocalMetricsMXBeanImpl\"",CacheTxCommits].last()}&lt;{App Ignite JMX:jmx["{#JMXDOMAIN}:igniteInstanceName={#JMXIGNITEINSTANCENAME},group={#JMXGROUP},name=\"org.apache.ignite.internal.processors.cache.CacheLocalMetricsMXBeanImpl\"",CacheTxRollbacks].last()}</expression>
              <name>{#JMXIGNITEINSTANCENAME} - {#JMXGROUP} - There are more then 50% rollbacks</name>
              <priority>WARNING</priority>
              <dependencies>
                <dependency>
                  <name>{#JMXIGNITEINSTANCENAME} - {#JMXGROUP} - There is no success transactions for cache</name>
                  <expression>{App Ignite JMX:jmx["{#JMXDOMAIN}:igniteInstanceName={#JMXIGNITEINSTANCENAME},group={#JMXGROUP},name=\"org.apache.ignite.internal.processors.cache.CacheLocalMetricsMXBeanImpl\"",CacheTxCommits].last()}=0 and {App Ignite JMX:jmx["{#JMXDOMAIN}:igniteInstanceName={#JMXIGNITEINSTANCENAME},group={#JMXGROUP},name=\"org.apache.ignite.internal.processors.cache.CacheLocalMetricsMXBeanImpl\"",CacheTxRollbacks].last()}>0</expression>
                </dependency>
              </dependencies>
            </trigger_prototype>
            <trigger_prototype>
              <expression>{App Ignite JMX:jmx["{#JMXDOMAIN}:igniteInstanceName={#JMXIGNITEINSTANCENAME},group={#JMXGROUP},name=\"org.apache.ignite.internal.processors.cache.CacheLocalMetricsMXBeanImpl\"",CacheTxCommits].last()}=0 and {App Ignite JMX:jmx["{#JMXDOMAIN}:igniteInstanceName={#JMXIGNITEINSTANCENAME},group={#JMXGROUP},name=\"org.apache.ignite.internal.processors.cache.CacheLocalMetricsMXBeanImpl\"",CacheTxRollbacks].last()}>0</expression>
              <name>{#JMXIGNITEINSTANCENAME} - {#JMXGROUP} - There is no success transactions for cache</name>
              <priority>AVERAGE</priority>
            </trigger_prototype>
          </trigger_prototypes>
          <jmx_endpoint>service:jmx:rmi:///jndi/rmi://{HOST.CONN}:{HOST.PORT}/jmxrmi</jmx_endpoint>
        </discovery_rule>
        <discovery_rule>
          <name>Data Region Metrics</name>
          <type>JMX</type>
          <key>jmx.discovery[beans,"org.apache:igniteInstanceName=*,group=DataRegionMetrics,name=*"]</key>
          <delay>30m</delay>
          <lifetime>1d</lifetime>
          <item_prototypes>
            <item_prototype>
              <name>{#JMXIGNITEINSTANCENAME} - {#JMXNAME} - Checkpoint buffer utilization</name>
              <type>CALCULATED</type>
              <key>checkpointBufferUtilization[{#JMXIGNITEINSTANCENAME}_{#JMXNAME}]</key>
              <units>%</units>
              <params>max("jmx[\"{#JMXDOMAIN}:igniteInstanceName={#JMXIGNITEINSTANCENAME},group=DataRegionMetrics,name={#JMXNAME}\",CheckpointBufferSize]",5m)/100*max("jmx[\"{#JMXDOMAIN}:igniteInstanceName={#JMXIGNITEINSTANCENAME},group=DataRegionMetrics,name={#JMXNAME}\",UsedCheckpointBufferSize]",5m)</params>
              <applications>
                <application>
                  <name>Data Region Metrics</name>
                </application>
              </applications>
              <trigger_prototypes>
                <trigger_prototype>
                  <expression>{min(5)}>66</expression>
                  <name>{#JMXIGNITEINSTANCENAME} - {#JMXNAME} - Checkpoint buffer utilization > 66%</name>
                  <priority>WARNING</priority>
                  <description>Checkpoint buffer utilization is high. Threads will be throttled to avoid buffer overflow. It can be coused by high disk utilization.</description>
                  <dependencies>
                    <dependency>
                      <name>{#JMXIGNITEINSTANCENAME} - {#JMXNAME} - Checkpoint buffer utilization > 80%</name>
                      <expression>{App Ignite JMX:checkpointBufferUtilization[{#JMXIGNITEINSTANCENAME}_{#JMXNAME}].min(5)}>80</expression>
                    </dependency>
                  </dependencies>
                  <tags>
                    <tag>
                      <tag>ignite</tag>
                      <value>utilization</value>
                    </tag>
                  </tags>
                </trigger_prototype>
                <trigger_prototype>
                  <expression>{min(5)}>80</expression>
                  <name>{#JMXIGNITEINSTANCENAME} - {#JMXNAME} - Checkpoint buffer utilization > 80%</name>
                  <priority>HIGH</priority>
                  <description>Checkpoint buffer utilization is high. Threads will be throttled to avoid buffer overflow. It can be caused by high disk utilization.</description>
                  <tags>
                    <tag>
                      <tag>ignite</tag>
                      <value>utilization</value>
                    </tag>
                  </tags>
                </trigger_prototype>
              </trigger_prototypes>
            </item_prototype>
            <item_prototype>
              <name>{#JMXIGNITEINSTANCENAME} - {#JMXNAME} - DataRegion utilisation</name>
              <type>CALCULATED</type>
              <key>dataRegion.util[{#JMXIGNITEINSTANCENAME}_{#JMXNAME}]</key>
              <history>2w</history>
              <trends>30d</trends>
              <value_type>FLOAT</value_type>
              <units>%</units>
              <params>max("jmx[\"{#JMXDOMAIN}:igniteInstanceName={#JMXIGNITEINSTANCENAME},group=DataRegionMetrics,name={#JMXNAME}\",OffheapSize]",5m)/100*max("jmx[\"{#JMXDOMAIN}:igniteInstanceName={#JMXIGNITEINSTANCENAME},group=DataRegionMetrics,name={#JMXNAME}\",OffheapUsedSize]",5m)</params>
              <applications>
                <application>
                  <name>Data Region Metrics</name>
                </application>
              </applications>
              <trigger_prototypes>
                <trigger_prototype>
                  <expression>{last()}>80</expression>
                  <name>{#JMXIGNITEINSTANCENAME} - {#JMXNAME} - Data region utilization > 80%</name>
                  <priority>WARNING</priority>
                  <description>Data region utilization is high. Increase data region size or delete any data.</description>
                  <dependencies>
                    <dependency>
                      <name>{#JMXIGNITEINSTANCENAME} - {#JMXNAME} - Data region utilization > 90%</name>
                      <expression>{App Ignite JMX:dataRegion.util[{#JMXIGNITEINSTANCENAME}_{#JMXNAME}].last()}>90</expression>
                    </dependency>
                  </dependencies>
                  <tags>
                    <tag>
                      <tag>ignite</tag>
                      <value>storage_utilization</value>
                    </tag>
                  </tags>
                </trigger_prototype>
                <trigger_prototype>
                  <expression>{last()}>90</expression>
                  <name>{#JMXIGNITEINSTANCENAME} - {#JMXNAME} - Data region utilization > 90%</name>
                  <priority>AVERAGE</priority>
                  <description>Data region utilization is high. Increase data region size or delete any data.</description>
                  <dependencies>
                    <dependency>
                      <name>{#JMXIGNITEINSTANCENAME} - {#JMXNAME} - Data region utilization > 95%</name>
                      <expression>{App Ignite JMX:dataRegion.util[{#JMXIGNITEINSTANCENAME}_{#JMXNAME}].last()}>95</expression>
                    </dependency>
                  </dependencies>
                  <tags>
                    <tag>
                      <tag>ignite</tag>
                      <value>storage_utilization</value>
                    </tag>
                  </tags>
                </trigger_prototype>
                <trigger_prototype>
                  <expression>{last()}>95</expression>
                  <name>{#JMXIGNITEINSTANCENAME} - {#JMXNAME} - Data region utilization > 95%</name>
                  <priority>HIGH</priority>
                  <description>Data region utilization is high. Increase data region size or delete any data.</description>
                  <tags>
                    <tag>
                      <tag>ignite</tag>
                      <value>storage_utilization</value>
                    </tag>
                  </tags>
                </trigger_prototype>
              </trigger_prototypes>
            </item_prototype>
            <item_prototype>
              <name>{#JMXIGNITEINSTANCENAME} - {#JMXNAME} - AllocationRate</name>
              <type>JMX</type>
              <key>jmx["{#JMXDOMAIN}:igniteInstanceName={#JMXIGNITEINSTANCENAME},group=DataRegionMetrics,name={#JMXNAME}",AllocationRate]</key>
              <history>2w</history>
              <trends>30d</trends>
              <value_type>FLOAT</value_type>
              <units>pps</units>
              <username>{$IGNITE_JMX_USER}</username>
              <password>{$IGNITE_JMX_PASS}</password>
              <applications>
                <application>
                  <name>Data Region Metrics</name>
                </application>
              </applications>
              <jmx_endpoint>service:jmx:rmi:///jndi/rmi://{HOST.CONN}:{HOST.PORT}/jmxrmi</jmx_endpoint>
              <request_method>POST</request_method>
            </item_prototype>
            <item_prototype>
              <name>{#JMXIGNITEINSTANCENAME} - {#JMXNAME} - CheckpointBufferSize</name>
              <type>JMX</type>
              <key>jmx["{#JMXDOMAIN}:igniteInstanceName={#JMXIGNITEINSTANCENAME},group=DataRegionMetrics,name={#JMXNAME}",CheckpointBufferSize]</key>
              <history>2w</history>
              <trends>30d</trends>
              <value_type>FLOAT</value_type>
              <units>B</units>
              <username>{$IGNITE_JMX_USER}</username>
              <password>{$IGNITE_JMX_PASS}</password>
              <applications>
                <application>
                  <name>Data Region Metrics</name>
                </application>
              </applications>
              <jmx_endpoint>service:jmx:rmi:///jndi/rmi://{HOST.CONN}:{HOST.PORT}/jmxrmi</jmx_endpoint>
            </item_prototype>
            <item_prototype>
              <name>{#JMXIGNITEINSTANCENAME} - {#JMXNAME} - DirtyPages</name>
              <type>JMX</type>
              <key>jmx["{#JMXDOMAIN}:igniteInstanceName={#JMXIGNITEINSTANCENAME},group=DataRegionMetrics,name={#JMXNAME}",DirtyPages]</key>
              <history>2w</history>
              <trends>30d</trends>
              <units>p</units>
              <username>{$IGNITE_JMX_USER}</username>
              <password>{$IGNITE_JMX_PASS}</password>
              <applications>
                <application>
                  <name>Data Region Metrics</name>
                </application>
              </applications>
              <jmx_endpoint>service:jmx:rmi:///jndi/rmi://{HOST.CONN}:{HOST.PORT}/jmxrmi</jmx_endpoint>
              <request_method>POST</request_method>
            </item_prototype>
            <item_prototype>
              <name>{#JMXIGNITEINSTANCENAME} - {#JMXNAME} - EvictionRate</name>
              <type>JMX</type>
              <key>jmx["{#JMXDOMAIN}:igniteInstanceName={#JMXIGNITEINSTANCENAME},group=DataRegionMetrics,name={#JMXNAME}",EvictionRate]</key>
              <history>2w</history>
              <trends>30d</trends>
              <value_type>FLOAT</value_type>
              <units>pps</units>
              <username>{$IGNITE_JMX_USER}</username>
              <password>{$IGNITE_JMX_PASS}</password>
              <applications>
                <application>
                  <name>Data Region Metrics</name>
                </application>
              </applications>
              <jmx_endpoint>service:jmx:rmi:///jndi/rmi://{HOST.CONN}:{HOST.PORT}/jmxrmi</jmx_endpoint>
              <request_method>POST</request_method>
              <trigger_prototypes>
                <trigger_prototype>
                  <expression>{last()}>0</expression>
                  <name>{#JMXIGNITEINSTANCENAME} - {#JMXNAME} - Node started to evict pages</name>
                  <priority>INFO</priority>
                  <description>You store more data then region can accommodate. Data started to move to disk it can make requests work slower.</description>
                  <tags>
                    <tag>
                      <tag>ignite</tag>
                      <value>storage_utilization</value>
                    </tag>
                  </tags>
                </trigger_prototype>
              </trigger_prototypes>
            </item_prototype>
            <item_prototype>
              <name>{#JMXIGNITEINSTANCENAME} - {#JMXNAME} - MaxSize</name>
              <type>JMX</type>
              <key>jmx["{#JMXDOMAIN}:igniteInstanceName={#JMXIGNITEINSTANCENAME},group=DataRegionMetrics,name={#JMXNAME}",MaxSize]</key>
              <history>2w</history>
              <trends>30d</trends>
              <units>GB</units>
              <username>{$IGNITE_JMX_USER}</username>
              <password>{$IGNITE_JMX_PASS}</password>
              <applications>
                <application>
                  <name>Data Region Metrics</name>
                </application>
              </applications>
              <preprocessing>
                <step>
                  <type>MULTIPLIER</type>
                  <params>1048576</params>
                </step>
              </preprocessing>
              <jmx_endpoint>service:jmx:rmi:///jndi/rmi://{HOST.CONN}:{HOST.PORT}/jmxrmi</jmx_endpoint>
            </item_prototype>
            <item_prototype>
              <name>{#JMXIGNITEINSTANCENAME} - {#JMXNAME} - OffHeapSize</name>
              <type>JMX</type>
              <key>jmx["{#JMXDOMAIN}:igniteInstanceName={#JMXIGNITEINSTANCENAME},group=DataRegionMetrics,name={#JMXNAME}",OffHeapSize]</key>
              <history>2w</history>
              <trends>30d</trends>
              <units>B</units>
              <applications>
                <application>
                  <name>Data Region Metrics</name>
                </application>
              </applications>
              <jmx_endpoint>service:jmx:rmi:///jndi/rmi://{HOST.CONN}:{HOST.PORT}/jmxrmi</jmx_endpoint>
              <request_method>POST</request_method>
            </item_prototype>
            <item_prototype>
              <name>{#JMXIGNITEINSTANCENAME} - {#JMXNAME} - OffheapUsedSize</name>
              <type>JMX</type>
              <key>jmx["{#JMXDOMAIN}:igniteInstanceName={#JMXIGNITEINSTANCENAME},group=DataRegionMetrics,name={#JMXNAME}",OffheapUsedSize]</key>
              <history>2w</history>
              <trends>30d</trends>
              <units>B</units>
              <username>{$IGNITE_JMX_USER}</username>
              <password>{$IGNITE_JMX_PASS}</password>
              <applications>
                <application>
                  <name>Data Region Metrics</name>
                </application>
              </applications>
              <jmx_endpoint>service:jmx:rmi:///jndi/rmi://{HOST.CONN}:{HOST.PORT}/jmxrmi</jmx_endpoint>
              <request_method>POST</request_method>
            </item_prototype>
            <item_prototype>
              <name>{#JMXIGNITEINSTANCENAME} - {#JMXNAME} - PagesFillFactor</name>
              <type>JMX</type>
              <key>jmx["{#JMXDOMAIN}:igniteInstanceName={#JMXIGNITEINSTANCENAME},group=DataRegionMetrics,name={#JMXNAME}",PagesFillFactor]</key>
              <history>2w</history>
              <trends>30d</trends>
              <value_type>FLOAT</value_type>
              <username>{$IGNITE_JMX_USER}</username>
              <password>{$IGNITE_JMX_PASS}</password>
              <applications>
                <application>
                  <name>Data Region Metrics</name>
                </application>
              </applications>
              <jmx_endpoint>service:jmx:rmi:///jndi/rmi://{HOST.CONN}:{HOST.PORT}/jmxrmi</jmx_endpoint>
            </item_prototype>
            <item_prototype>
              <name>{#JMXIGNITEINSTANCENAME} - {#JMXNAME} - PagesReplaceRate</name>
              <type>JMX</type>
              <key>jmx["{#JMXDOMAIN}:igniteInstanceName={#JMXIGNITEINSTANCENAME},group=DataRegionMetrics,name={#JMXNAME}",PagesReplaceRate]</key>
              <history>2w</history>
              <trends>30d</trends>
              <value_type>FLOAT</value_type>
              <units>pps</units>
              <username>{$IGNITE_JMX_USER}</username>
              <password>{$IGNITE_JMX_PASS}</password>
              <applications>
                <application>
                  <name>Data Region Metrics</name>
                </application>
              </applications>
              <jmx_endpoint>service:jmx:rmi:///jndi/rmi://{HOST.CONN}:{HOST.PORT}/jmxrmi</jmx_endpoint>
              <request_method>POST</request_method>
            </item_prototype>
            <item_prototype>
              <name>{#JMXIGNITEINSTANCENAME} - {#JMXNAME} - UsedCheckpointBufferSize</name>
              <type>JMX</type>
              <key>jmx["{#JMXDOMAIN}:igniteInstanceName={#JMXIGNITEINSTANCENAME},group=DataRegionMetrics,name={#JMXNAME}",UsedCheckpointBufferSize]</key>
              <history>2w</history>
              <trends>30d</trends>
              <value_type>FLOAT</value_type>
              <units>B</units>
              <username>{$IGNITE_JMX_USER}</username>
              <password>{$IGNITE_JMX_PASS}</password>
              <applications>
                <application>
                  <name>Data Region Metrics</name>
                </application>
              </applications>
              <jmx_endpoint>service:jmx:rmi:///jndi/rmi://{HOST.CONN}:{HOST.PORT}/jmxrmi</jmx_endpoint>
              <request_method>POST</request_method>
            </item_prototype>
            <item_prototype>
              <name>{#JMXIGNITEINSTANCENAME} - {#JMXNAME} - OffHeapFree</name>
              <type>CALCULATED</type>
              <key>offHeapFree[{#JMXIGNITEINSTANCENAME}_{#JMXNAME}]</key>
              <history>2w</history>
              <trends>30d</trends>
              <units>B</units>
              <params>last("jmx[\"{#JMXDOMAIN}:igniteInstanceName={#JMXIGNITEINSTANCENAME},group=DataRegionMetrics,name={#JMXNAME}\",OffHeapSize]")-last("jmx[\"{#JMXDOMAIN}:igniteInstanceName={#JMXIGNITEINSTANCENAME},group=DataRegionMetrics,name={#JMXNAME}\",OffheapUsedSize]")</params>
              <applications>
                <application>
                  <name>Data Region Metrics</name>
                </application>
              </applications>
            </item_prototype>
          </item_prototypes>
          <jmx_endpoint>service:jmx:rmi:///jndi/rmi://{HOST.CONN}:{HOST.PORT}/jmxrmi</jmx_endpoint>
          <request_method>POST</request_method>
        </discovery_rule>
        <discovery_rule>
          <name>Ingite Kernal Metrics</name>
          <type>JMX</type>
          <key>jmx.discovery[beans,"org.apache:igniteInstanceName=*,group=Kernal,name=IgniteKernal"]</key>
          <delay>30m</delay>
          <username>{$IGNITE_JMX_USER}</username>
          <password>{$IGNITE_JMX_PASS}</password>
          <lifetime>1d</lifetime>
          <item_prototypes>
            <item_prototype>
              <name>{#JMXIGNITEINSTANCENAME} - CurrentCancelledJobs</name>
              <type>JMX</type>
              <key>jmx["{#JMXDOMAIN}:igniteInstanceName={#JMXIGNITEINSTANCENAME},group=Kernal,name=ClusterLocalNodeMetricsMXBeanImpl",CurrentCancelledJobs]</key>
              <username>{$IGNITE_JMX_USER}</username>
              <password>{$IGNITE_JMX_PASS}</password>
              <applications>
                <application>
                  <name>Topology</name>
                </application>
              </applications>
              <jmx_endpoint>service:jmx:rmi:///jndi/rmi://{HOST.CONN}:{HOST.PORT}/jmxrmi</jmx_endpoint>
            </item_prototype>
            <item_prototype>
              <name>{#JMXIGNITEINSTANCENAME} - CurrentPmeDuration</name>
              <type>JMX</type>
              <key>jmx["{#JMXDOMAIN}:igniteInstanceName={#JMXIGNITEINSTANCENAME},group=Kernal,name=ClusterLocalNodeMetricsMXBeanImpl",CurrentPmeDuration]</key>
              <delay>10s</delay>
              <units>ms</units>
              <username>{$IGNITE_JMX_USER}</username>
              <password>{$IGNITE_JMX_PASS}</password>
              <applications>
                <application>
                  <name>Topology</name>
                </application>
              </applications>
              <jmx_endpoint>service:jmx:rmi:///jndi/rmi://{HOST.CONN}:{HOST.PORT}/jmxrmi</jmx_endpoint>
              <trigger_prototypes>
                <trigger_prototype>
                  <expression>{last()}>60000</expression>
                  <name>{#JMXIGNITEINSTANCENAME} - Looks like PME is hung</name>
                  <priority>HIGH</priority>
                </trigger_prototype>
                <trigger_prototype>
                  <expression>{last()}>0</expression>
                  <name>{#JMXIGNITEINSTANCENAME} - PME on cluster</name>
                  <priority>INFO</priority>
                  <dependencies>
                    <dependency>
                      <name>{#JMXIGNITEINSTANCENAME} - Too long pme</name>
                      <expression>{App Ignite JMX:jmx["{#JMXDOMAIN}:igniteInstanceName={#JMXIGNITEINSTANCENAME},group=Kernal,name=ClusterLocalNodeMetricsMXBeanImpl",CurrentPmeDuration].last()}>10000</expression>
                    </dependency>
                  </dependencies>
                </trigger_prototype>
                <trigger_prototype>
                  <expression>{last()}>10000</expression>
                  <name>{#JMXIGNITEINSTANCENAME} - Too long pme</name>
                  <priority>WARNING</priority>
                  <dependencies>
                    <dependency>
                      <name>{#JMXIGNITEINSTANCENAME} - Looks like PME is hung</name>
                      <expression>{App Ignite JMX:jmx["{#JMXDOMAIN}:igniteInstanceName={#JMXIGNITEINSTANCENAME},group=Kernal,name=ClusterLocalNodeMetricsMXBeanImpl",CurrentPmeDuration].last()}>60000</expression>
                    </dependency>
                  </dependencies>
                </trigger_prototype>
              </trigger_prototypes>
            </item_prototype>
            <item_prototype>
              <name>{#JMXIGNITEINSTANCENAME} - CurrentRejectedJobs</name>
              <type>JMX</type>
              <key>jmx["{#JMXDOMAIN}:igniteInstanceName={#JMXIGNITEINSTANCENAME},group=Kernal,name=ClusterLocalNodeMetricsMXBeanImpl",CurrentRejectedJobs]</key>
              <username>{$IGNITE_JMX_USER}</username>
              <password>{$IGNITE_JMX_PASS}</password>
              <applications>
                <application>
                  <name>Topology</name>
                </application>
              </applications>
              <jmx_endpoint>service:jmx:rmi:///jndi/rmi://{HOST.CONN}:{HOST.PORT}/jmxrmi</jmx_endpoint>
            </item_prototype>
            <item_prototype>
              <name>{#JMXIGNITEINSTANCENAME} - CurrentThreadCount</name>
              <type>JMX</type>
              <key>jmx["{#JMXDOMAIN}:igniteInstanceName={#JMXIGNITEINSTANCENAME},group=Kernal,name=ClusterLocalNodeMetricsMXBeanImpl",CurrentThreadCount]</key>
              <username>{$IGNITE_JMX_USER}</username>
              <password>{$IGNITE_JMX_PASS}</password>
              <applications>
                <application>
                  <name>Topology</name>
                </application>
              </applications>
              <jmx_endpoint>service:jmx:rmi:///jndi/rmi://{HOST.CONN}:{HOST.PORT}/jmxrmi</jmx_endpoint>
              <trigger_prototypes>
                <trigger_prototype>
                  <expression>{last()}>1000</expression>
                  <name>{#JMXIGNITEINSTANCENAME} - Too many running threads</name>
                  <priority>WARNING</priority>
                  <dependencies>
                    <dependency>
                      <name>{#JMXIGNITEINSTANCENAME} - Looks like PME is hung</name>
                      <expression>{App Ignite JMX:jmx["{#JMXDOMAIN}:igniteInstanceName={#JMXIGNITEINSTANCENAME},group=Kernal,name=ClusterLocalNodeMetricsMXBeanImpl",CurrentPmeDuration].last()}>60000</expression>
                    </dependency>
                  </dependencies>
                </trigger_prototype>
              </trigger_prototypes>
            </item_prototype>
            <item_prototype>
              <name>{#JMXIGNITEINSTANCENAME} - CurrentWaitingJobs</name>
              <type>JMX</type>
              <key>jmx["{#JMXDOMAIN}:igniteInstanceName={#JMXIGNITEINSTANCENAME},group=Kernal,name=ClusterLocalNodeMetricsMXBeanImpl",CurrentWaitingJobs]</key>
              <username>{$IGNITE_JMX_USER}</username>
              <password>{$IGNITE_JMX_PASS}</password>
              <applications>
                <application>
                  <name>Topology</name>
                </application>
              </applications>
              <jmx_endpoint>service:jmx:rmi:///jndi/rmi://{HOST.CONN}:{HOST.PORT}/jmxrmi</jmx_endpoint>
              <trigger_prototypes>
                <trigger_prototype>
                  <expression>{last()}>10</expression>
                  <name>{#JMXIGNITEINSTANCENAME} - More then 10 jobs in queue</name>
                  <priority>WARNING</priority>
                </trigger_prototype>
              </trigger_prototypes>
            </item_prototype>
            <item_prototype>
              <name>{#JMXIGNITEINSTANCENAME} - HeapMemoryUsed</name>
              <type>JMX</type>
              <key>jmx["{#JMXDOMAIN}:igniteInstanceName={#JMXIGNITEINSTANCENAME},group=Kernal,name=ClusterLocalNodeMetricsMXBeanImpl",HeapMemoryUsed]</key>
              <units>B</units>
              <username>{$IGNITE_JMX_USER}</username>
              <password>{$IGNITE_JMX_PASS}</password>
              <applications>
                <application>
                  <name>Topology</name>
                </application>
              </applications>
              <jmx_endpoint>service:jmx:rmi:///jndi/rmi://{HOST.CONN}:{HOST.PORT}/jmxrmi</jmx_endpoint>
            </item_prototype>
            <item_prototype>
              <name>{#JMXIGNITEINSTANCENAME} - TotalBaselineNodes</name>
              <type>JMX</type>
              <key>jmx["{#JMXDOMAIN}:igniteInstanceName={#JMXIGNITEINSTANCENAME},group=Kernal,name=ClusterMetricsMXBeanImpl",TotalBaselineNodes]</key>
              <delay>5m</delay>
              <username>{$IGNITE_JMX_USER}</username>
              <password>{$IGNITE_JMX_PASS}</password>
              <applications>
                <application>
                  <name>Topology</name>
                </application>
              </applications>
              <jmx_endpoint>service:jmx:rmi:///jndi/rmi://{HOST.CONN}:{HOST.PORT}/jmxrmi</jmx_endpoint>
            </item_prototype>
            <item_prototype>
              <name>{#JMXIGNITEINSTANCENAME} - TotalClientNodes</name>
              <type>JMX</type>
              <key>jmx["{#JMXDOMAIN}:igniteInstanceName={#JMXIGNITEINSTANCENAME},group=Kernal,name=ClusterMetricsMXBeanImpl",TotalClientNodes]</key>
              <delay>5m</delay>
              <username>{$IGNITE_JMX_USER}</username>
              <password>{$IGNITE_JMX_PASS}</password>
              <applications>
                <application>
                  <name>Topology</name>
                </application>
              </applications>
              <jmx_endpoint>service:jmx:rmi:///jndi/rmi://{HOST.CONN}:{HOST.PORT}/jmxrmi</jmx_endpoint>
            </item_prototype>
            <item_prototype>
              <name>{#JMXIGNITEINSTANCENAME} - TotalNodes</name>
              <type>JMX</type>
              <key>jmx["{#JMXDOMAIN}:igniteInstanceName={#JMXIGNITEINSTANCENAME},group=Kernal,name=ClusterMetricsMXBeanImpl",TotalNodes]</key>
              <delay>5m</delay>
              <username>{$IGNITE_JMX_USER}</username>
              <password>{$IGNITE_JMX_PASS}</password>
              <applications>
                <application>
                  <name>Topology</name>
                </application>
              </applications>
              <jmx_endpoint>service:jmx:rmi:///jndi/rmi://{HOST.CONN}:{HOST.PORT}/jmxrmi</jmx_endpoint>
            </item_prototype>
            <item_prototype>
              <name>{#JMXIGNITEINSTANCENAME} - TotalServerNodes</name>
              <type>JMX</type>
              <key>jmx["{#JMXDOMAIN}:igniteInstanceName={#JMXIGNITEINSTANCENAME},group=Kernal,name=ClusterMetricsMXBeanImpl",TotalServerNodes]</key>
              <delay>5m</delay>
              <username>{$IGNITE_JMX_USER}</username>
              <password>{$IGNITE_JMX_PASS}</password>
              <applications>
                <application>
                  <name>Topology</name>
                </application>
              </applications>
              <jmx_endpoint>service:jmx:rmi:///jndi/rmi://{HOST.CONN}:{HOST.PORT}/jmxrmi</jmx_endpoint>
              <trigger_prototypes>
                <trigger_prototype>
                  <expression>{change()}>0</expression>
                  <name>{#JMXIGNITEINSTANCENAME} - Node added to topology</name>
                  <priority>INFO</priority>
                  <tags>
                    <tag>
                      <tag>ignite</tag>
                      <value>node_join</value>
                    </tag>
                  </tags>
                </trigger_prototype>
                <trigger_prototype>
                  <expression>{change()}&lt;0</expression>
                  <name>{#JMXIGNITEINSTANCENAME} - Server node left the topology</name>
                  <priority>WARNING</priority>
                  <tags>
                    <tag>
                      <tag>ignite</tag>
                      <value>node_left</value>
                    </tag>
                  </tags>
                </trigger_prototype>
              </trigger_prototypes>
            </item_prototype>
            <item_prototype>
              <name>{#JMXIGNITEINSTANCENAME} - IgniteVersion</name>
              <type>JMX</type>
              <key>jmx["{#JMXDOMAIN}:igniteInstanceName={#JMXIGNITEINSTANCENAME},group=Kernal,name=IgniteKernal",FullVersion]</key>
              <delay>10m</delay>
              <trends>0</trends>
              <value_type>CHAR</value_type>
              <username>{$IGNITE_JMX_USER}</username>
              <password>{$IGNITE_JMX_PASS}</password>
              <applications>
                <application>
                  <name>Topology</name>
                </application>
              </applications>
              <preprocessing>
                <step>
                  <type>REGEX</type>
                  <params>(.*)-\d+ \1</params>
                </step>
              </preprocessing>
              <jmx_endpoint>service:jmx:rmi:///jndi/rmi://{HOST.CONN}:{HOST.PORT}/jmxrmi</jmx_endpoint>
              <request_method>POST</request_method>
            </item_prototype>
            <item_prototype>
              <name>{#JMXIGNITEINSTANCENAME} - LocalNodeId</name>
              <type>JMX</type>
              <key>jmx["{#JMXDOMAIN}:igniteInstanceName={#JMXIGNITEINSTANCENAME},group=Kernal,name=IgniteKernal",LocalNodeId]</key>
              <trends>0</trends>
              <value_type>CHAR</value_type>
              <username>{$IGNITE_JMX_USER}</username>
              <password>{$IGNITE_JMX_PASS}</password>
              <applications>
                <application>
                  <name>Topology</name>
                </application>
              </applications>
              <preprocessing>
                <step>
                  <type>REGEX</type>
                  <params>(.*)-\d+ \1</params>
                </step>
              </preprocessing>
              <jmx_endpoint>service:jmx:rmi:///jndi/rmi://{HOST.CONN}:{HOST.PORT}/jmxrmi</jmx_endpoint>
            </item_prototype>
            <item_prototype>
              <name>{#JMXIGNITEINSTANCENAME} - UpTimeFormatted</name>
              <type>JMX</type>
              <key>jmx["{#JMXDOMAIN}:igniteInstanceName={#JMXIGNITEINSTANCENAME},group=Kernal,name=IgniteKernal",UpTimeFormatted]</key>
              <delay>2m</delay>
              <trends>0</trends>
              <value_type>CHAR</value_type>
              <username>{$IGNITE_JMX_USER}</username>
              <password>{$IGNITE_JMX_PASS}</password>
              <applications>
                <application>
                  <name>Local Node Metrics</name>
                </application>
              </applications>
              <jmx_endpoint>service:jmx:rmi:///jndi/rmi://{HOST.CONN}:{HOST.PORT}/jmxrmi</jmx_endpoint>
              <request_method>POST</request_method>
            </item_prototype>
            <item_prototype>
              <name>{#JMXIGNITEINSTANCENAME} - CommunicationOutMessagesQueueSize</name>
              <type>JMX</type>
              <key>jmx["{#JMXDOMAIN}:igniteInstanceName={#JMXIGNITEINSTANCENAME},group=SPIs,name=TcpCommunicationSpi",OutboundMessagesQueueSize]</key>
              <username>{$IGNITE_JMX_USER}</username>
              <password>{$IGNITE_JMX_PASS}</password>
              <applications>
                <application>
                  <name>Communication</name>
                </application>
                <application>
                  <name>Topology</name>
                </application>
              </applications>
              <jmx_endpoint>service:jmx:rmi:///jndi/rmi://{HOST.CONN}:{HOST.PORT}/jmxrmi</jmx_endpoint>
            </item_prototype>
            <item_prototype>
              <name>{#JMXIGNITEINSTANCENAME} - CommunicationReceivedMessagesPerSecond</name>
              <type>JMX</type>
              <key>jmx["{#JMXDOMAIN}:igniteInstanceName={#JMXIGNITEINSTANCENAME},group=SPIs,name=TcpCommunicationSpi",ReceivedMessagesCount]</key>
              <units>msg/s</units>
              <username>{$IGNITE_JMX_USER}</username>
              <password>{$IGNITE_JMX_PASS}</password>
              <applications>
                <application>
                  <name>Communication</name>
                </application>
                <application>
                  <name>Topology</name>
                </application>
              </applications>
              <preprocessing>
                <step>
                  <type>CHANGE_PER_SECOND</type>
                  <params></params>
                </step>
              </preprocessing>
              <jmx_endpoint>service:jmx:rmi:///jndi/rmi://{HOST.CONN}:{HOST.PORT}/jmxrmi</jmx_endpoint>
            </item_prototype>
            <item_prototype>
              <name>{#JMXIGNITEINSTANCENAME} - CommunicationReconnectCount</name>
              <type>JMX</type>
              <key>jmx["{#JMXDOMAIN}:igniteInstanceName={#JMXIGNITEINSTANCENAME},group=SPIs,name=TcpCommunicationSpi",ReconnectCount]</key>
              <username>{$IGNITE_JMX_USER}</username>
              <password>{$IGNITE_JMX_PASS}</password>
              <applications>
                <application>
                  <name>Communication</name>
                </application>
                <application>
                  <name>Topology</name>
                </application>
              </applications>
              <preprocessing>
                <step>
                  <type>SIMPLE_CHANGE</type>
                  <params></params>
                </step>
              </preprocessing>
              <jmx_endpoint>service:jmx:rmi:///jndi/rmi://{HOST.CONN}:{HOST.PORT}/jmxrmi</jmx_endpoint>
            </item_prototype>
            <item_prototype>
              <name>{#JMXIGNITEINSTANCENAME} - CommunicationSentMessagesPerSecond</name>
              <type>JMX</type>
              <key>jmx["{#JMXDOMAIN}:igniteInstanceName={#JMXIGNITEINSTANCENAME},group=SPIs,name=TcpCommunicationSpi",SentMessagesCount]</key>
              <units>msg/s</units>
              <username>{$IGNITE_JMX_USER}</username>
              <password>{$IGNITE_JMX_PASS}</password>
              <applications>
                <application>
                  <name>Communication</name>
                </application>
                <application>
                  <name>Topology</name>
                </application>
              </applications>
              <preprocessing>
                <step>
                  <type>CHANGE_PER_SECOND</type>
                  <params></params>
                </step>
              </preprocessing>
              <jmx_endpoint>service:jmx:rmi:///jndi/rmi://{HOST.CONN}:{HOST.PORT}/jmxrmi</jmx_endpoint>
            </item_prototype>
            <item_prototype>
              <name>{#JMXIGNITEINSTANCENAME} - CoordinatorSinceTimestamp</name>
              <type>JMX</type>
              <key>jmx["{#JMXDOMAIN}:igniteInstanceName={#JMXIGNITEINSTANCENAME},group=SPIs,name=TcpDiscoverySpi",CoordinatorSinceTimestamp]</key>
              <username>{$IGNITE_JMX_USER}</username>
              <password>{$IGNITE_JMX_PASS}</password>
              <applications>
                <application>
                  <name>Topology</name>
                </application>
              </applications>
              <jmx_endpoint>service:jmx:rmi:///jndi/rmi://{HOST.CONN}:{HOST.PORT}/jmxrmi</jmx_endpoint>
              <trigger_prototypes>
                <trigger_prototype>
                  <expression>{change()}>0</expression>
                  <recovery_mode>NONE</recovery_mode>
                  <name>{#JMXIGNITEINSTANCENAME} - Coordinator has changed</name>
                  <priority>WARNING</priority>
                  <description>Your coordinator just changed</description>
                  <manual_close>YES</manual_close>
                  <tags>
                    <tag>
                      <tag>ignite</tag>
                      <value>coordinator_changed</value>
                    </tag>
                  </tags>
                </trigger_prototype>
              </trigger_prototypes>
            </item_prototype>
            <item_prototype>
              <name>{#JMXIGNITEINSTANCENAME} - CurrentCoordinator</name>
              <type>JMX</type>
              <key>jmx["{#JMXDOMAIN}:igniteInstanceName={#JMXIGNITEINSTANCENAME},group=SPIs,name=TcpDiscoverySpi",Coordinator]</key>
              <delay>2m</delay>
              <trends>0</trends>
              <value_type>TEXT</value_type>
              <username>{$IGNITE_JMX_USER}</username>
              <password>{$IGNITE_JMX_PASS}</password>
              <applications>
                <application>
                  <name>Topology</name>
                </application>
              </applications>
              <jmx_endpoint>service:jmx:rmi:///jndi/rmi://{HOST.CONN}:{HOST.PORT}/jmxrmi</jmx_endpoint>
              <request_method>POST</request_method>
            </item_prototype>
            <item_prototype>
              <name>{#JMXIGNITEINSTANCENAME} - NodeOrder</name>
              <type>JMX</type>
              <key>jmx["{#JMXDOMAIN}:igniteInstanceName={#JMXIGNITEINSTANCENAME},group=SPIs,name=TcpDiscoverySpi",LocalNodeFormatted]</key>
              <delay>5m</delay>
              <username>{$IGNITE_JMX_USER}</username>
              <password>{$IGNITE_JMX_PASS}</password>
              <applications>
                <application>
                  <name>Topology</name>
                </application>
              </applications>
              <preprocessing>
                <step>
                  <type>REGEX</type>
                  <params>intOrder=(\d+) \1</params>
                </step>
              </preprocessing>
              <jmx_endpoint>service:jmx:rmi:///jndi/rmi://{HOST.CONN}:{HOST.PORT}/jmxrmi</jmx_endpoint>
            </item_prototype>
            <item_prototype>
              <name>{#JMXIGNITEINSTANCENAME} - DiscoveryMessageWorkerQueueSize</name>
              <type>JMX</type>
              <key>jmx["{#JMXDOMAIN}:igniteInstanceName={#JMXIGNITEINSTANCENAME},group=SPIs,name=TcpDiscoverySpi",MessageWorkerQueueSize]</key>
              <username>{$IGNITE_JMX_USER}</username>
              <password>{$IGNITE_JMX_PASS}</password>
              <applications>
                <application>
                  <name>Topology</name>
                </application>
              </applications>
              <jmx_endpoint>service:jmx:rmi:///jndi/rmi://{HOST.CONN}:{HOST.PORT}/jmxrmi</jmx_endpoint>
            </item_prototype>
            <item_prototype>
              <name>{#JMXIGNITEINSTANCENAME} - NodesLeft</name>
              <type>JMX</type>
              <key>jmx["{#JMXDOMAIN}:igniteInstanceName={#JMXIGNITEINSTANCENAME},group=SPIs,name=TcpDiscoverySpi",NodesLeft]</key>
              <delay>5m</delay>
              <username>{$IGNITE_JMX_USER}</username>
              <password>{$IGNITE_JMX_PASS}</password>
              <applications>
                <application>
                  <name>Topology</name>
                </application>
              </applications>
              <preprocessing>
                <step>
                  <type>SIMPLE_CHANGE</type>
                  <params></params>
                </step>
              </preprocessing>
              <jmx_endpoint>service:jmx:rmi:///jndi/rmi://{HOST.CONN}:{HOST.PORT}/jmxrmi</jmx_endpoint>
            </item_prototype>
            <item_prototype>
              <name>{#JMXIGNITEINSTANCENAME} - ReconnectCount</name>
              <type>JMX</type>
              <key>jmx["{#JMXDOMAIN}:igniteInstanceName={#JMXIGNITEINSTANCENAME},group=SPIs,name=TcpDiscoverySpi",ReconnectCount]</key>
              <username>{$IGNITE_JMX_USER}</username>
              <password>{$IGNITE_JMX_PASS}</password>
              <applications>
                <application>
                  <name>Topology</name>
                </application>
              </applications>
              <preprocessing>
                <step>
                  <type>SIMPLE_CHANGE</type>
                  <params></params>
                </step>
              </preprocessing>
              <jmx_endpoint>service:jmx:rmi:///jndi/rmi://{HOST.CONN}:{HOST.PORT}/jmxrmi</jmx_endpoint>
            </item_prototype>
            <item_prototype>
              <name>{#JMXIGNITEINSTANCENAME} - TotalProcessedMessages</name>
              <type>JMX</type>
              <key>jmx["{#JMXDOMAIN}:igniteInstanceName={#JMXIGNITEINSTANCENAME},group=SPIs,name=TcpDiscoverySpi",TotalProcessedMessages]</key>
              <units>msg/s</units>
              <username>{$IGNITE_JMX_USER}</username>
              <password>{$IGNITE_JMX_PASS}</password>
              <applications>
                <application>
                  <name>Discovery</name>
                </application>
                <application>
                  <name>Topology</name>
                </application>
              </applications>
              <preprocessing>
                <step>
                  <type>CHANGE_PER_SECOND</type>
                  <params></params>
                </step>
              </preprocessing>
              <jmx_endpoint>service:jmx:rmi:///jndi/rmi://{HOST.CONN}:{HOST.PORT}/jmxrmi</jmx_endpoint>
            </item_prototype>
            <item_prototype>
              <name>{#JMXIGNITEINSTANCENAME} - DiscoveryTotalReceivedMessages</name>
              <type>JMX</type>
              <key>jmx["{#JMXDOMAIN}:igniteInstanceName={#JMXIGNITEINSTANCENAME},group=SPIs,name=TcpDiscoverySpi",TotalReceivedMessages]</key>
              <units>msg/s</units>
              <username>{$IGNITE_JMX_USER}</username>
              <password>{$IGNITE_JMX_PASS}</password>
              <applications>
                <application>
                  <name>Discovery</name>
                </application>
                <application>
                  <name>Topology</name>
                </application>
              </applications>
              <preprocessing>
                <step>
                  <type>CHANGE_PER_SECOND</type>
                  <params></params>
                </step>
              </preprocessing>
              <jmx_endpoint>service:jmx:rmi:///jndi/rmi://{HOST.CONN}:{HOST.PORT}/jmxrmi</jmx_endpoint>
            </item_prototype>
            <item_prototype>
              <name>{#JMXIGNITEINSTANCENAME} - LockedKeysNumber</name>
              <type>JMX</type>
              <key>jmx["{#JMXDOMAIN}:igniteInstanceName={#JMXIGNITEINSTANCENAME},group=TransactionMetrics,name=TransactionMetricsMxBeanImpl",LockedKeysNumber]</key>
              <units>keys</units>
              <username>{$IGNITE_JMX_USER}</username>
              <password>{$IGNITE_JMX_PASS}</password>
              <applications>
                <application>
                  <name>Transactions</name>
                </application>
              </applications>
              <jmx_endpoint>service:jmx:rmi:///jndi/rmi://{HOST.CONN}:{HOST.PORT}/jmxrmi</jmx_endpoint>
            </item_prototype>
            <item_prototype>
              <name>{#JMXIGNITEINSTANCENAME} - OwnerTransactionsNumber</name>
              <type>JMX</type>
              <key>jmx["{#JMXDOMAIN}:igniteInstanceName={#JMXIGNITEINSTANCENAME},group=TransactionMetrics,name=TransactionMetricsMxBeanImpl",OwnerTransactionsNumber]</key>
              <units>trx</units>
              <username>{$IGNITE_JMX_USER}</username>
              <password>{$IGNITE_JMX_PASS}</password>
              <applications>
                <application>
                  <name>Transactions</name>
                </application>
              </applications>
              <jmx_endpoint>service:jmx:rmi:///jndi/rmi://{HOST.CONN}:{HOST.PORT}/jmxrmi</jmx_endpoint>
            </item_prototype>
            <item_prototype>
              <name>{#JMXIGNITEINSTANCENAME} - TransactionsCommittedNumber</name>
              <type>JMX</type>
              <key>jmx["{#JMXDOMAIN}:igniteInstanceName={#JMXIGNITEINSTANCENAME},group=TransactionMetrics,name=TransactionMetricsMxBeanImpl",TransactionsCommittedNumber]</key>
              <units>trx/s</units>
              <username>{$IGNITE_JMX_USER}</username>
              <password>{$IGNITE_JMX_PASS}</password>
              <applications>
                <application>
                  <name>Transactions</name>
                </application>
              </applications>
              <preprocessing>
                <step>
                  <type>CHANGE_PER_SECOND</type>
                  <params></params>
                </step>
              </preprocessing>
              <jmx_endpoint>service:jmx:rmi:///jndi/rmi://{HOST.CONN}:{HOST.PORT}/jmxrmi</jmx_endpoint>
            </item_prototype>
            <item_prototype>
              <name>{#JMXIGNITEINSTANCENAME} - TransactionsHoldingLockNumber</name>
              <type>JMX</type>
              <key>jmx["{#JMXDOMAIN}:igniteInstanceName={#JMXIGNITEINSTANCENAME},group=TransactionMetrics,name=TransactionMetricsMxBeanImpl",TransactionsHoldingLockNumber]</key>
              <units>trx/s</units>
              <username>{$IGNITE_JMX_USER}</username>
              <password>{$IGNITE_JMX_PASS}</password>
              <applications>
                <application>
                  <name>Transactions</name>
                </application>
              </applications>
              <preprocessing>
                <step>
                  <type>CHANGE_PER_SECOND</type>
                  <params></params>
                </step>
              </preprocessing>
              <jmx_endpoint>service:jmx:rmi:///jndi/rmi://{HOST.CONN}:{HOST.PORT}/jmxrmi</jmx_endpoint>
            </item_prototype>
            <item_prototype>
              <name>{#JMXIGNITEINSTANCENAME} - TransactionsRolledBackNumber</name>
              <type>JMX</type>
              <key>jmx["{#JMXDOMAIN}:igniteInstanceName={#JMXIGNITEINSTANCENAME},group=TransactionMetrics,name=TransactionMetricsMxBeanImpl",TransactionsRolledBackNumber]</key>
              <units>trx/s</units>
              <username>{$IGNITE_JMX_USER}</username>
              <password>{$IGNITE_JMX_PASS}</password>
              <applications>
                <application>
                  <name>Transactions</name>
                </application>
              </applications>
              <preprocessing>
                <step>
                  <type>CHANGE_PER_SECOND</type>
                  <params></params>
                </step>
              </preprocessing>
              <jmx_endpoint>service:jmx:rmi:///jndi/rmi://{HOST.CONN}:{HOST.PORT}/jmxrmi</jmx_endpoint>
            </item_prototype>
            <item_prototype>
              <name>{#JMXIGNITEINSTANCENAME} - StripedExecutor - QueueSize</name>
              <type>JMX</type>
              <key>jmx["{#JMXDOMAIN}:igniteInstanceName={#JMXIGNITEINSTANCENAME},group=\"Thread Pools\",name=StripedExecutor",TotalQueueSize]</key>
              <username>{$IGNITE_JMX_USER}</username>
              <password>{$IGNITE_JMX_PASS}</password>
              <applications>
                <application>
                  <name>Queue</name>
                </application>
              </applications>
              <jmx_endpoint>service:jmx:rmi:///jndi/rmi://{HOST.CONN}:{HOST.PORT}/jmxrmi</jmx_endpoint>
              <trigger_prototypes>
                <trigger_prototype>
                  <expression>{last()}>1000</expression>
                  <name>{#JMXIGNITEINSTANCENAME} - StripedExecutor - Too many messages in queue</name>
                  <priority>AVERAGE</priority>
                </trigger_prototype>
              </trigger_prototypes>
            </item_prototype>
          </item_prototypes>
          <trigger_prototypes>
            <trigger_prototype>
              <expression>{App Ignite JMX:jmx["{#JMXDOMAIN}:igniteInstanceName={#JMXIGNITEINSTANCENAME},group=Kernal,name=ClusterMetricsMXBeanImpl",TotalBaselineNodes].last()}&lt;{App Ignite JMX:jmx["{#JMXDOMAIN}:igniteInstanceName={#JMXIGNITEINSTANCENAME},group=Kernal,name=ClusterMetricsMXBeanImpl",TotalServerNodes].last()}</expression>
              <name>{#JMXIGNITEINSTANCENAME} - There are nodes is not in topology</name>
              <priority>INFO</priority>
            </trigger_prototype>
          </trigger_prototypes>
          <jmx_endpoint>service:jmx:rmi:///jndi/rmi://{HOST.CONN}:{HOST.PORT}/jmxrmi</jmx_endpoint>
          <request_method>POST</request_method>
        </discovery_rule>
        <discovery_rule>
          <name>Cache Groups</name>
          <type>JMX</type>
          <key>jmx.discovery[beans,"org.apache:igniteInstanceName=*,group=\"Cache groups\",name=*"]</key>
          <delay>30m</delay>
          <lifetime>2h</lifetime>
          <item_prototypes>
            <item_prototype>
              <name>{#JMXIGNITEINSTANCENAME} - {#JMXNAME} - Backups</name>
              <type>JMX</type>
              <key>jmx["{#JMXDOMAIN}:igniteInstanceName={#JMXIGNITEINSTANCENAME},group=\"Cache groups\",name={#JMXNAME}",Backups]</key>
              <delay>30m</delay>
              <trends>30d</trends>
              <username>{$IGNITE_JMX_USER}</username>
              <password>{$IGNITE_JMX_PASS}</password>
              <applications>
                <application>
                  <name>Partitions</name>
                </application>
                <application>
                  <name>Rebalance</name>
                </application>
              </applications>
              <jmx_endpoint>service:jmx:rmi:///jndi/rmi://{HOST.CONN}:{HOST.PORT}/jmxrmi</jmx_endpoint>
            </item_prototype>
            <item_prototype>
              <name>{#JMXIGNITEINSTANCENAME} - {#JMXNAME} - CacheList</name>
              <type>JMX</type>
              <key>jmx["{#JMXDOMAIN}:igniteInstanceName={#JMXIGNITEINSTANCENAME},group=\"Cache groups\",name={#JMXNAME}",Caches]</key>
              <delay>30m</delay>
              <trends>0</trends>
              <value_type>TEXT</value_type>
              <username>{$IGNITE_JMX_USER}</username>
              <password>{$IGNITE_JMX_PASS}</password>
              <applications>
                <application>
                  <name>ChacheGroup</name>
                </application>
                <application>
                  <name>Rebalance</name>
                </application>
              </applications>
              <jmx_endpoint>service:jmx:rmi:///jndi/rmi://{HOST.CONN}:{HOST.PORT}/jmxrmi</jmx_endpoint>
            </item_prototype>
            <item_prototype>
              <name>{#JMXIGNITEINSTANCENAME} - {#JMXNAME} - LocalNodeMovingPartitionsCount</name>
              <type>JMX</type>
              <key>jmx["{#JMXDOMAIN}:igniteInstanceName={#JMXIGNITEINSTANCENAME},group=\"Cache groups\",name={#JMXNAME}",LocalNodeMovingPartitionsCount]</key>
              <trends>30d</trends>
              <username>{$IGNITE_JMX_USER}</username>
              <password>{$IGNITE_JMX_PASS}</password>
              <applications>
                <application>
                  <name>Rebalance</name>
                </application>
              </applications>
              <jmx_endpoint>service:jmx:rmi:///jndi/rmi://{HOST.CONN}:{HOST.PORT}/jmxrmi</jmx_endpoint>
              <request_method>POST</request_method>
              <trigger_prototypes>
                <trigger_prototype>
                  <expression>{avg(35m)}>0</expression>
                  <recovery_mode>RECOVERY_EXPRESSION</recovery_mode>
                  <recovery_expression>{avg(35m)}=0</recovery_expression>
                  <name>{#JMXIGNITEINSTANCENAME} - {#JMXNAME} - Rebalance in progress</name>
                  <priority>INFO</priority>
                </trigger_prototype>
              </trigger_prototypes>
            </item_prototype>
            <item_prototype>
              <name>{#JMXIGNITEINSTANCENAME} - {#JMXNAME} - LocalNodeRentingEntriesCount</name>
              <type>JMX</type>
              <key>jmx["{#JMXDOMAIN}:igniteInstanceName={#JMXIGNITEINSTANCENAME},group=\"Cache groups\",name={#JMXNAME}",LocalNodeRentingEntriesCount]</key>
              <trends>30d</trends>
              <username>{$IGNITE_JMX_USER}</username>
              <password>{$IGNITE_JMX_PASS}</password>
              <applications>
                <application>
                  <name>Rebalance</name>
                </application>
              </applications>
              <jmx_endpoint>service:jmx:rmi:///jndi/rmi://{HOST.CONN}:{HOST.PORT}/jmxrmi</jmx_endpoint>
            </item_prototype>
            <item_prototype>
              <name>{#JMXIGNITEINSTANCENAME} - {#JMXNAME} - LocalNodeRentingPartitionsCount</name>
              <type>JMX</type>
              <key>jmx["{#JMXDOMAIN}:igniteInstanceName={#JMXIGNITEINSTANCENAME},group=\"Cache groups\",name={#JMXNAME}",LocalNodeRentingPartitionsCount]</key>
              <trends>30d</trends>
              <username>{$IGNITE_JMX_USER}</username>
              <password>{$IGNITE_JMX_PASS}</password>
              <applications>
                <application>
                  <name>Rebalance</name>
                </application>
              </applications>
              <jmx_endpoint>service:jmx:rmi:///jndi/rmi://{HOST.CONN}:{HOST.PORT}/jmxrmi</jmx_endpoint>
            </item_prototype>
            <item_prototype>
              <name>{#JMXIGNITEINSTANCENAME} - {#JMXNAME} - NumberOfPartitionCopies</name>
              <type>JMX</type>
              <key>jmx["{#JMXDOMAIN}:igniteInstanceName={#JMXIGNITEINSTANCENAME},group=\"Cache groups\",name={#JMXNAME}",MinimumNumberOfPartitionCopies]</key>
              <delay>10m</delay>
              <trends>30d</trends>
              <username>{$IGNITE_JMX_USER}</username>
              <password>{$IGNITE_JMX_PASS}</password>
              <applications>
                <application>
                  <name>Partitions</name>
                </application>
                <application>
                  <name>Rebalance</name>
                </application>
              </applications>
              <jmx_endpoint>service:jmx:rmi:///jndi/rmi://{HOST.CONN}:{HOST.PORT}/jmxrmi</jmx_endpoint>
              <request_method>POST</request_method>
              <trigger_prototypes>
                <trigger_prototype>
                  <expression>{last(35m)}=0</expression>
                  <recovery_mode>RECOVERY_EXPRESSION</recovery_mode>
                  <recovery_expression>{last(35m)}>=1</recovery_expression>
                  <name>{#JMXIGNITEINSTANCENAME} - {#JMXNAME} - There is no copy for partitions</name>
                  <priority>AVERAGE</priority>
                </trigger_prototype>
              </trigger_prototypes>
            </item_prototype>
          </item_prototypes>
          <trigger_prototypes>
            <trigger_prototype>
              <expression>{App Ignite JMX:jmx["{#JMXDOMAIN}:igniteInstanceName={#JMXIGNITEINSTANCENAME},group=\"Cache groups\",name={#JMXNAME}",Backups].last()}>={App Ignite JMX:jmx["{#JMXDOMAIN}:igniteInstanceName={#JMXIGNITEINSTANCENAME},group=\"Cache groups\",name={#JMXNAME}",MinimumNumberOfPartitionCopies].last()}</expression>
              <name>{#JMXIGNITEINSTANCENAME} - {#JMXNAME} - One or more backups are unavailiable</name>
              <priority>WARNING</priority>
            </trigger_prototype>
          </trigger_prototypes>
          <jmx_endpoint>service:jmx:rmi:///jndi/rmi://{HOST.CONN}:{HOST.PORT}/jmxrmi</jmx_endpoint>
          <request_method>POST</request_method>
        </discovery_rule>
        <discovery_rule>
          <name>Thread Pool Metrics</name>
          <type>JMX</type>
          <key>jmx.discovery[beans,"org.apache:igniteInstanceName=*,group=\"Thread Pools\",name=*"]</key>
          <delay>30m</delay>
          <username>{$IGNITE_JMX_USER}</username>
          <password>{$IGNITE_JMX_PASS}</password>
          <lifetime>1d</lifetime>
          <item_prototypes>
            <item_prototype>
              <name>{#JMXIGNITEINSTANCENAME} - {#JMXNAME} - QueueSize</name>
              <type>JMX</type>
              <key>jmx["{#JMXDOMAIN}:igniteInstanceName={#JMXIGNITEINSTANCENAME},group=\"Thread Pools\",name={#JMXNAME}",QueueSize]</key>
              <history>2w</history>
              <trends>30d</trends>
              <units>msg</units>
              <username>{$IGNITE_JMX_USER}</username>
              <password>{$IGNITE_JMX_PASS}</password>
              <applications>
                <application>
                  <name>Queue</name>
                </application>
              </applications>
              <preprocessing>
                <step>
                  <type>IN_RANGE</type>
                  <params>0</params>
                  <error_handler>DISCARD_VALUE</error_handler>
                </step>
              </preprocessing>
              <jmx_endpoint>service:jmx:rmi:///jndi/rmi://{HOST.CONN}:{HOST.PORT}/jmxrmi</jmx_endpoint>
              <request_method>POST</request_method>
              <trigger_prototypes>
                <trigger_prototype>
                  <expression>{min(5m)}>1000</expression>
                  <name>{#JMXIGNITEINSTANCENAME} - {#JMXNAME} - Too many messages in queue</name>
                  <priority>HIGH</priority>
                  <description>There are more then 1000 messages in {#JMXNAME} queue</description>
                  <tags>
                    <tag>
                      <tag>ignite</tag>
                      <value>queue</value>
                    </tag>
                  </tags>
                </trigger_prototype>
              </trigger_prototypes>
            </item_prototype>
          </item_prototypes>
          <jmx_endpoint>service:jmx:rmi:///jndi/rmi://{HOST.CONN}:{HOST.PORT}/jmxrmi</jmx_endpoint>
          <request_method>POST</request_method>
        </discovery_rule>
      </discovery_rules>
      <macros>
        <macro>
          <macro>{$IGNITE_JMX_PASS}</macro>
        </macro>
        <macro>
          <macro>{$IGNITE_JMX_USER}</macro>
        </macro>
      </macros>
    </template>
  </templates>
</zabbix_export>