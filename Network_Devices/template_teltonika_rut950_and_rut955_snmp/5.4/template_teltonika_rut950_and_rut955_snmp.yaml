zabbix_export:
  version: '5.4'
  date: '2021-10-22T10:58:48Z'
  groups:
    -
      uuid: 4918b88734c54bd094cff7585b5d71fc
      name: 'Templates/Network Devices'
  templates:
    -
      uuid: 852716e2f1c845dfa8d1285a72be1852
      template: 'Template Teltonika RUT950 and RUT955 SNMP'
      name: 'Template Teltonika RUT950 and RUT955 SNMP'
      description: |
        Monitors all parameters of Teltonika RUT9xx LTE routers
        
        Version 1.1 2021-08-04 by Pierre Fagrell: Added missing macros and value mappings for network interface discovery - required for traffic usage stats
        
        pierre@buggfix.se
      groups:
        -
          name: 'Templates/Network Devices'
      items:
        -
          uuid: 8d77383f457e4e64b7e6d9421360e8aa
          name: 'ICMP ping'
          type: SIMPLE
          key: icmpping
          history: 1w
          valuemap:
            name: 'TELTONIKA-MIB::ifOperStatus'
          tags:
            -
              tag: Application
              value: Status
          triggers:
            -
              uuid: efc49deb9f224bca8e15d71c5e1b9f36
              expression: 'max(/Template Teltonika RUT950 and RUT955 SNMP/icmpping,#3)=0'
              name: 'Unavailable by ICMP ping'
              priority: HIGH
              description: 'Last three attempts returned timeout.  Please check device connectivity.'
        -
          uuid: 322db158fd0c4fe1b8448b2b61a08e83
          name: 'ICMP loss'
          type: SIMPLE
          key: icmppingloss
          history: 1w
          value_type: FLOAT
          units: '%'
          tags:
            -
              tag: Application
              value: Status
          triggers:
            -
              uuid: 09acff1382bf43aa8cf39f1d1a0aa63e
              expression: 'min(/Template Teltonika RUT950 and RUT955 SNMP/icmppingloss,5m)>{$ICMP_LOSS_WARN} and min(/Template Teltonika RUT950 and RUT955 SNMP/icmppingloss,5m)<100'
              name: 'High ICMP ping loss'
              opdata: 'Loss: {ITEM.LASTVALUE1}'
              priority: WARNING
              dependencies:
                -
                  name: 'Unavailable by ICMP ping'
                  expression: 'max(/Template Teltonika RUT950 and RUT955 SNMP/icmpping,#3)=0'
        -
          uuid: c6ea1ee0806548fdb98af699ea6f3410
          name: 'ICMP response time'
          type: SIMPLE
          key: icmppingsec
          history: 1w
          value_type: FLOAT
          units: s
          tags:
            -
              tag: Application
              value: Status
          triggers:
            -
              uuid: b493aad066a94646941dd0becd86aa29
              expression: 'avg(/Template Teltonika RUT950 and RUT955 SNMP/icmppingsec,5m)>{$ICMP_RESPONSE_TIME_WARN}'
              name: 'High ICMP ping response time'
              opdata: 'Value: {ITEM.LASTVALUE1}'
              priority: WARNING
              dependencies:
                -
                  name: 'High ICMP ping loss'
                  expression: 'min(/Template Teltonika RUT950 and RUT955 SNMP/icmppingloss,5m)>{$ICMP_LOSS_WARN} and min(/Template Teltonika RUT950 and RUT955 SNMP/icmppingloss,5m)<100'
                -
                  name: 'Unavailable by ICMP ping'
                  expression: 'max(/Template Teltonika RUT950 and RUT955 SNMP/icmpping,#3)=0'
        -
          uuid: bfee8910c0794a0687d2f31e33fd812a
          name: 'SNMP Trap: TELTONIKA-MIB::signalChangeNotification'
          type: SNMP_TRAP
          key: 'snmptrap["\s\.1\.3\.6\.1\.4\.1\.48690\.4\.1\.1\s"]'
          delay: '0'
          trends: '0'
          value_type: LOG
          description: 'Signal strength trap'
          logtimefmt: 'hh:mm:ss dd/MM/yyyy'
          tags:
            -
              tag: Application
              value: 'TELTONIKA-MIB::mobileNotifications'
        -
          uuid: 0e65c5d5cab746ea869d72867e2c019b
          name: 'SNMP Trap: TELTONIKA-MIB::connectionTypeNotification'
          type: SNMP_TRAP
          key: 'snmptrap["\s\.1\.3\.6\.1\.4\.1\.48690\.4\.1\.2\s"]'
          delay: '0'
          trends: '0'
          value_type: LOG
          description: 'Connection type trap'
          logtimefmt: 'hh:mm:ss dd/MM/yyyy'
          tags:
            -
              tag: Application
              value: 'TELTONIKA-MIB::mobileNotifications'
        -
          uuid: f2ef7a09bcb44b20a667c9ea9fd56a4a
          name: 'SNMP Trap: TELTONIKA-MIB::digitalInputNotification'
          type: SNMP_TRAP
          key: 'snmptrap["\s\.1\.3\.6\.1\.4\.1\.48690\.4\.2\.1\s"]'
          delay: '0'
          trends: '0'
          value_type: LOG
          description: 'Digital input trap'
          logtimefmt: 'hh:mm:ss dd/MM/yyyy'
          tags:
            -
              tag: Application
              value: 'TELTONIKA-MIB::ioNotifications'
        -
          uuid: 7cb485007b8b4954a6490c9f32ced697
          name: 'SNMP Trap: TELTONIKA-MIB::digitalOutputNotification'
          type: SNMP_TRAP
          key: 'snmptrap["\s\.1\.3\.6\.1\.4\.1\.48690\.4\.2\.2\s"]'
          delay: '0'
          trends: '0'
          value_type: LOG
          description: 'Digital output trap'
          logtimefmt: 'hh:mm:ss dd/MM/yyyy'
          tags:
            -
              tag: Application
              value: 'TELTONIKA-MIB::ioNotifications'
        -
          uuid: a26edc4a1d644e9e82a117f59e87c91e
          name: 'SNMP Trap: TELTONIKA-MIB::relay0Notification'
          type: SNMP_TRAP
          key: 'snmptrap["\s\.1\.3\.6\.1\.4\.1\.48690\.4\.2\.8\s"]'
          delay: '0'
          trends: '0'
          value_type: LOG
          description: 'Relay trap'
          logtimefmt: 'hh:mm:ss dd/MM/yyyy'
          tags:
            -
              tag: Application
              value: 'TELTONIKA-MIB::ioNotifications'
        -
          uuid: 12eeb30cf40a47bf811d4c92ddedfcfe
          name: 'SNMP Trap: TELTONIKA-MIB::digitalInput2Notification'
          type: SNMP_TRAP
          key: 'snmptrap["\s\.1\.3\.6\.1\.4\.1\.48690\.4\.2\.12\s"]'
          delay: '0'
          trends: '0'
          value_type: LOG
          description: 'Digital input2 trap'
          logtimefmt: 'hh:mm:ss dd/MM/yyyy'
          tags:
            -
              tag: Application
              value: 'TELTONIKA-MIB::ioNotifications'
        -
          uuid: c1f50007bc204bbeb60ba6ffb8411d2d
          name: 'SNMP Trap: TELTONIKA-MIB::digitalIioNotification'
          type: SNMP_TRAP
          key: 'snmptrap["\s\.1\.3\.6\.1\.4\.1\.48690\.4\.2\.13\s"]'
          delay: '0'
          trends: '0'
          value_type: LOG
          description: 'Isolated Input trap'
          logtimefmt: 'hh:mm:ss dd/MM/yyyy'
          tags:
            -
              tag: Application
              value: 'TELTONIKA-MIB::ioNotifications'
        -
          uuid: 87da49998e7844e7ada0863c57c55a89
          name: 'SNMP Trap: TELTONIKA-MIB::digitalOutput2Notification'
          type: SNMP_TRAP
          key: 'snmptrap["\s\.1\.3\.6\.1\.4\.1\.48690\.4\.2\.14\s"]'
          delay: '0'
          trends: '0'
          value_type: LOG
          description: 'Isolated Output trap'
          logtimefmt: 'hh:mm:ss dd/MM/yyyy'
          tags:
            -
              tag: Application
              value: 'TELTONIKA-MIB::ioNotifications'
        -
          uuid: fa6eca51e97f4c3e98fc25e4200603b1
          name: 'CPU utilization'
          type: SNMP_AGENT
          snmp_oid: 'discovery[{#CPU.UTIL},1.3.6.1.2.1.25.3.3.1.2]'
          key: system.cpu.util
          delay: 3m
          history: 7d
          value_type: FLOAT
          units: '%'
          description: |
            MIB: HOST-RESOURCES-MIB
            The average, over the last minute, of the percentage of time that processors was not idle.
            Implementations may approximate this one minute smoothing period if necessary.
          preprocessing:
            -
              type: JSONPATH
              parameters:
                - '$..[''{#CPU.UTIL}''].avg()'
          tags:
            -
              tag: Application
              value: CPU
          triggers:
            -
              uuid: 15564011071e4434b1505009853b286d
              expression: 'min(/Template Teltonika RUT950 and RUT955 SNMP/system.cpu.util,5m)>{$CPU.UTIL.CRIT}'
              name: 'High CPU utilization (over {$CPU.UTIL.CRIT}% for 5m)'
              opdata: 'Current utilization: {ITEM.LASTVALUE1}'
              priority: WARNING
              description: 'CPU utilization is too high. The system might be slow to respond.'
        -
          uuid: 69c57ce61e7e4d6a95594a08c612cb23
          name: 'GPS:accuracy'
          type: SNMP_AGENT
          snmp_oid: .1.3.6.1.4.1.48690.3.3.0
          key: TELTONIKA-MIB.accuracy
          delay: 60m
          trends: '0'
          value_type: TEXT
          description: Accuracy
          tags:
            -
              tag: Application
              value: 'TELTONIKA-MIB::gps'
        -
          uuid: 991fb04cc84d498181380af4cce7a7e9
          name: batchNumber
          type: SNMP_AGENT
          snmp_oid: .1.3.6.1.4.1.48690.1.4.0
          key: TELTONIKA-MIB.batchNumber
          delay: 24h
          trends: '0'
          value_type: TEXT
          description: 'Router batch number'
          tags:
            -
              tag: Application
              value: 'TELTONIKA-MIB::device'
        -
          uuid: 3de7e74bd992448a8cd2bd6816feed30
          name: connectionType
          type: SNMP_AGENT
          snmp_oid: .1.3.6.1.4.1.48690.4.1.0.3.0
          key: TELTONIKA-MIB.connectionType
          delay: 24h
          trends: '0'
          value_type: TEXT
          description: 'Connection type'
          tags:
            -
              tag: Application
              value: 'TELTONIKA-MIB::mobileNotificationsObs'
        -
          uuid: 5782393b104c4db9b48a4c50ad1c3dd6
          name: 'GPS:datetime'
          type: SNMP_AGENT
          snmp_oid: .1.3.6.1.4.1.48690.3.4.0
          key: TELTONIKA-MIB.datetime
          delay: 60m
          trends: '0'
          value_type: TEXT
          description: 'GPS datetime'
          tags:
            -
              tag: Application
              value: 'TELTONIKA-MIB::gps'
        -
          uuid: b871b4b8f3504b15933f9d95a96c3fbf
          name: din2State
          type: SNMP_AGENT
          snmp_oid: .1.3.6.1.4.1.48690.4.2.0.12.0
          key: TELTONIKA-MIB.din2State
          delay: 30m
          trends: '0'
          value_type: TEXT
          description: 'Digital input2 state'
          tags:
            -
              tag: Application
              value: 'TELTONIKA-MIB::ioNotificationsObs'
        -
          uuid: 21f74dea41f84e7db2259b351ec002a8
          name: dinState
          type: SNMP_AGENT
          snmp_oid: .1.3.6.1.4.1.48690.4.2.0.1.0
          key: TELTONIKA-MIB.dinState
          delay: 30m
          trends: '0'
          value_type: TEXT
          description: 'Digital input state'
          tags:
            -
              tag: Application
              value: 'TELTONIKA-MIB::ioNotificationsObs'
        -
          uuid: f07d3c7a2a8b487c99470fb102f758bd
          name: dout2State
          type: SNMP_AGENT
          snmp_oid: .1.3.6.1.4.1.48690.4.2.0.14.0
          key: TELTONIKA-MIB.dout2State
          delay: 30m
          trends: '0'
          value_type: TEXT
          description: 'Digital output2 state'
          tags:
            -
              tag: Application
              value: 'TELTONIKA-MIB::ioNotificationsObs'
        -
          uuid: 73e7e3bb36cc4dd8ab7027936a02dc5d
          name: doutState
          type: SNMP_AGENT
          snmp_oid: .1.3.6.1.4.1.48690.4.2.0.2.0
          key: TELTONIKA-MIB.doutState
          delay: 60m
          trends: '0'
          value_type: TEXT
          description: 'Digital output state'
          tags:
            -
              tag: Application
              value: 'TELTONIKA-MIB::ioNotificationsObs'
        -
          uuid: aadb76a70fa14fffa5e03965dc769f9c
          name: fwVersion
          type: SNMP_AGENT
          snmp_oid: .1.3.6.1.4.1.48690.1.6.0
          key: TELTONIKA-MIB.fwVersion
          delay: 24h
          trends: '0'
          value_type: TEXT
          description: 'Router firmware version'
          tags:
            -
              tag: Application
              value: 'TELTONIKA-MIB::device'
          triggers:
            -
              uuid: 507b6bc0b926484ba771033281c57416
              expression: 'change(/Template Teltonika RUT950 and RUT955 SNMP/TELTONIKA-MIB.fwVersion)<>0'
              name: 'Firmware version changed to: {/Template Teltonika RUT950 and RUT955 SNMPv2/TELTONIKA-MIB.fwVersion}'
              manual_close: 'YES'
        -
          uuid: 6726f2a842484914a768e96fde4198a6
          name: hardwareRevision
          type: SNMP_AGENT
          snmp_oid: .1.3.6.1.4.1.48690.1.5.0
          key: TELTONIKA-MIB.hardwareRevision
          delay: 24h
          trends: '0'
          value_type: TEXT
          description: 'Router hardware revision'
          tags:
            -
              tag: Application
              value: 'TELTONIKA-MIB::device'
        -
          uuid: a02861870ad8483096a6e5fd540c3919
          name: hsAuth
          type: SNMP_AGENT
          snmp_oid: .1.3.6.1.4.1.48690.5.4.0
          key: TELTONIKA-MIB.hsAuth
          delay: 24h
          trends: '0'
          value_type: TEXT
          description: 'Authentication mode'
          tags:
            -
              tag: Application
              value: 'TELTONIKA-MIB::hotspot'
        -
          uuid: 44dc0de7d7714857a2ea6b37a731a36f
          name: hsIP
          type: SNMP_AGENT
          snmp_oid: .1.3.6.1.4.1.48690.5.2.0
          key: TELTONIKA-MIB.hsIP
          delay: 24h
          trends: '0'
          value_type: TEXT
          description: 'The IPv4 address'
          tags:
            -
              tag: Application
              value: 'TELTONIKA-MIB::hotspot'
        -
          uuid: 448e94c6573b4559afa6e8057908fc70
          name: hsNet
          type: SNMP_AGENT
          snmp_oid: .1.3.6.1.4.1.48690.5.3.0
          key: TELTONIKA-MIB.hsNet
          delay: 24h
          trends: '0'
          value_type: TEXT
          description: 'Network interfaces'
          tags:
            -
              tag: Application
              value: 'TELTONIKA-MIB::hotspot'
        -
          uuid: b86d71e685f740d69f919ff68c6d7d25
          name: hsSessionCount
          type: SNMP_AGENT
          snmp_oid: .1.3.6.1.4.1.48690.5.5.0
          key: TELTONIKA-MIB.hsSessionCount
          delay: 30m
          units: /sec
          description: 'Number of sessions'
          preprocessing:
            -
              type: CHANGE_PER_SECOND
              parameters:
                - ''
          tags:
            -
              tag: Application
              value: 'TELTONIKA-MIB::hotspot'
        -
          uuid: fbe78eb503b84cb09f474035e152f23b
          name: hsState
          type: SNMP_AGENT
          snmp_oid: .1.3.6.1.4.1.48690.5.1.0
          key: TELTONIKA-MIB.hsState
          delay: 60m
          value_type: FLOAT
          description: 'Hotspot state'
          valuemap:
            name: 'TELTONIKA-MIB::hsState'
          tags:
            -
              tag: Application
              value: 'TELTONIKA-MIB::hotspot'
        -
          uuid: 32ab4be7666845d7beb2a19146a28382
          name: iioState
          type: SNMP_AGENT
          snmp_oid: .1.3.6.1.4.1.48690.4.2.0.13.0
          key: TELTONIKA-MIB.iioState
          delay: 30m
          trends: '0'
          value_type: TEXT
          description: 'Isolated Input state'
          tags:
            -
              tag: Application
              value: 'TELTONIKA-MIB::ioNotificationsObs'
        -
          uuid: ba426009c07f40f984ceeafd8e002fe8
          name: 'GPS:latitude'
          type: SNMP_AGENT
          snmp_oid: .1.3.6.1.4.1.48690.3.1.0
          key: TELTONIKA-MIB.latitude
          delay: 60m
          trends: '0'
          value_type: TEXT
          description: 'Latitutde coordinates'
          tags:
            -
              tag: Application
              value: 'TELTONIKA-MIB::gps'
        -
          uuid: d6bff440e34745e5883bf294a9f71178
          name: 'GPS:longtitude'
          type: SNMP_AGENT
          snmp_oid: .1.3.6.1.4.1.48690.3.2.0
          key: TELTONIKA-MIB.longtitude
          delay: 60m
          trends: '0'
          value_type: TEXT
          description: 'Longtitude coordinates'
          tags:
            -
              tag: Application
              value: 'TELTONIKA-MIB::gps'
        -
          uuid: d093099285a742e0a5bf39922984110f
          name: modemDescription
          type: SNMP_AGENT
          snmp_oid: .1.3.6.1.4.1.48690.4.1.0.1.0
          key: TELTONIKA-MIB.modemDescription
          delay: 24h
          trends: '0'
          value_type: TEXT
          description: 'Modem description'
          tags:
            -
              tag: Application
              value: 'TELTONIKA-MIB::mobileNotificationsObs'
        -
          uuid: e1f1c92791af499c930b82b4ae258954
          name: modemNum
          type: SNMP_AGENT
          snmp_oid: .1.3.6.1.4.1.48690.2.1.0
          key: TELTONIKA-MIB.modemNum
          delay: 24h
          value_type: FLOAT
          description: 'The number of modems (regardless of their current state) present on this system.'
          tags:
            -
              tag: Application
              value: 'TELTONIKA-MIB::mobile'
        -
          uuid: 6117194c17744900b5b82c299e3c1758
          name: 'GPS:numSatellites'
          type: SNMP_AGENT
          snmp_oid: .1.3.6.1.4.1.48690.3.5.0
          key: TELTONIKA-MIB.numSatellites
          delay: 60m
          value_type: FLOAT
          description: 'Number of satellites'
          tags:
            -
              tag: Application
              value: 'TELTONIKA-MIB::gps'
        -
          uuid: 498cac345c1644b3a67d51efaefb2349
          name: productCode
          type: SNMP_AGENT
          snmp_oid: .1.3.6.1.4.1.48690.1.3.0
          key: TELTONIKA-MIB.productCode
          delay: 24h
          trends: '0'
          value_type: TEXT
          description: 'Router product code'
          tags:
            -
              tag: Application
              value: 'TELTONIKA-MIB::device'
        -
          uuid: fa29c449e96b4da59d68eb895fa06191
          name: routerName
          type: SNMP_AGENT
          snmp_oid: .1.3.6.1.4.1.48690.1.2.0
          key: TELTONIKA-MIB.routerName
          delay: 24h
          trends: '0'
          value_type: TEXT
          description: 'Router name'
          tags:
            -
              tag: Application
              value: 'TELTONIKA-MIB::device'
        -
          uuid: b662d91122504331bf4484fdf5ce3722
          name: serial
          type: SNMP_AGENT
          snmp_oid: .1.3.6.1.4.1.48690.1.1.0
          key: TELTONIKA-MIB.serial
          delay: 24h
          trends: '0'
          value_type: TEXT
          description: 'Serial number'
          tags:
            -
              tag: Application
              value: 'TELTONIKA-MIB::device'
        -
          uuid: 2a251f084baf45e7950a212f3c9f9dde
          name: signalStrength
          type: SNMP_AGENT
          snmp_oid: .1.3.6.1.4.1.48690.4.1.0.2.0
          key: TELTONIKA-MIB.signalStrength
          delay: 30m
          value_type: FLOAT
          description: 'Modem signal strength'
          tags:
            -
              tag: Application
              value: 'TELTONIKA-MIB::mobileNotificationsObs'
        -
          uuid: ff1e4af92a214c63b6e96ded6935e8cc
          name: 'SNMP Bad Community Names'
          type: SNMP_AGENT
          snmp_oid: .1.3.6.1.2.1.11.4.0
          key: TELTONIKA-MIB.snmpBadCommunity
          delay: 60m
          description: |
            The total number of community-based SNMP messages (for
            example,  SNMPv1) delivered to the SNMP entity which
            used an SNMP community name not known to said entity.
          tags:
            -
              tag: Application
              value: 'TELTONIKA-MIB::device'
          triggers:
            -
              uuid: 6dac338ea0454072a3ad145b30960e29
              expression: 'change(/Template Teltonika RUT950 and RUT955 SNMP/TELTONIKA-MIB.snmpBadCommunity)>0'
              recovery_mode: NONE
              name: 'SNMP Bad Community Names increased'
              priority: WARNING
              description: 'This should never increase with proper firewall rules'
              manual_close: 'YES'
      discovery_rules:
        -
          uuid: c0248a78d58441ef8b958f6cb1d9a2eb
          name: 'Network interfaces discovery'
          type: SNMP_AGENT
          snmp_oid: 'discovery[{#IFOPERSTATUS},1.3.6.1.2.1.2.2.1.8,{#IFADMINSTATUS},1.3.6.1.2.1.2.2.1.7,{#IFALIAS},1.3.6.1.2.1.31.1.1.1.18,{#IFNAME},1.3.6.1.2.1.31.1.1.1.1,{#IFDESCR},1.3.6.1.2.1.2.2.1.2,{#IFTYPE},1.3.6.1.2.1.2.2.1.3]'
          key: net.if.discovery
          delay: 1h
          filter:
            evaltype: AND
            conditions:
              -
                macro: '{#IFADMINSTATUS}'
                value: '{$NET.IF.IFADMINSTATUS.MATCHES}'
                formulaid: A
              -
                macro: '{#IFADMINSTATUS}'
                value: '{$NET.IF.IFADMINSTATUS.NOT_MATCHES}'
                operator: NOT_MATCHES_REGEX
                formulaid: B
              -
                macro: '{#IFOPERSTATUS}'
                value: '{$NET.IF.IFOPERSTATUS.MATCHES}'
                formulaid: I
              -
                macro: '{#IFOPERSTATUS}'
                value: '{$NET.IF.IFOPERSTATUS.NOT_MATCHES}'
                operator: NOT_MATCHES_REGEX
                formulaid: J
              -
                macro: '{#IFNAME}'
                value: '{$NET.IF.IFNAME.MATCHES}'
                formulaid: G
              -
                macro: '{#IFNAME}'
                value: '{$NET.IF.IFNAME.NOT_MATCHES}'
                operator: NOT_MATCHES_REGEX
                formulaid: H
              -
                macro: '{#IFDESCR}'
                value: '{$NET.IF.IFDESCR.MATCHES}'
                formulaid: E
              -
                macro: '{#IFDESCR}'
                value: '{$NET.IF.IFDESCR.NOT_MATCHES}'
                operator: NOT_MATCHES_REGEX
                formulaid: F
              -
                macro: '{#IFALIAS}'
                value: '{$NET.IF.IFALIAS.MATCHES}'
                formulaid: C
              -
                macro: '{#IFALIAS}'
                value: '{$NET.IF.IFALIAS.NOT_MATCHES}'
                operator: NOT_MATCHES_REGEX
                formulaid: D
              -
                macro: '{#IFTYPE}'
                value: '{$NET.IF.IFTYPE.MATCHES}'
                formulaid: K
              -
                macro: '{#IFTYPE}'
                value: '{$NET.IF.IFTYPE.NOT_MATCHES}'
                operator: NOT_MATCHES_REGEX
                formulaid: L
          description: 'Discovering interfaces from IF-MIB.'
          item_prototypes:
            -
              uuid: 3878ffe997d74e769d58700232a98eeb
              name: 'Interface {#IFNAME}({#IFALIAS}): Inbound packets discarded'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.2.1.2.2.1.13.{#SNMPINDEX}'
              key: 'net.if.in.discards[ifInDiscards.{#SNMPINDEX}]'
              delay: 30m
              history: 7d
              description: |
                MIB: IF-MIB
                The number of inbound packets which were chosen to be discarded
                even though no errors had been detected to prevent their being deliverable to a higher-layer protocol.
                One possible reason for discarding such a packet could be to free up buffer space.
                Discontinuities in the value of this counter can occur at re-initialization of the management system,
                and at other times as indicated by the value of ifCounterDiscontinuityTime.
              preprocessing:
                -
                  type: CHANGE_PER_SECOND
                  parameters:
                    - ''
              tags:
                -
                  tag: Application
                  value: 'Interface {#IFNAME}({#IFALIAS})'
            -
              uuid: e8730f5a9b164c4a875736263a0893d3
              name: 'Interface {#IFNAME}({#IFALIAS}): Inbound packets with errors'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.2.1.2.2.1.14.{#SNMPINDEX}'
              key: 'net.if.in.errors[ifInErrors.{#SNMPINDEX}]'
              delay: 30m
              history: 7d
              description: |
                MIB: IF-MIB
                For packet-oriented interfaces, the number of inbound packets that contained errors preventing them from being deliverable to a higher-layer protocol.  For character-oriented or fixed-length interfaces, the number of inbound transmission units that contained errors preventing them from being deliverable to a higher-layer protocol. Discontinuities in the value of this counter can occur at re-initialization of the management system, and at other times as indicated by the value of ifCounterDiscontinuityTime.
              preprocessing:
                -
                  type: CHANGE_PER_SECOND
                  parameters:
                    - ''
              tags:
                -
                  tag: Application
                  value: 'Interface {#IFNAME}({#IFALIAS})'
            -
              uuid: adad53d24d8b4d248df9da9291ded365
              name: 'Interface {#IFNAME}({#IFALIAS}): Bits received'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.2.1.31.1.1.1.6.{#SNMPINDEX}'
              key: 'net.if.in[ifHCInOctets.{#SNMPINDEX}]'
              delay: 3m
              history: 7d
              units: bps
              description: |
                MIB: IF-MIB
                The total number of octets received on the interface, including framing characters. This object is a 64-bit version of ifInOctets. Discontinuities in the value of this counter can occur at re-initialization of the management system, and at other times as indicated by the value of ifCounterDiscontinuityTime.
              preprocessing:
                -
                  type: CHANGE_PER_SECOND
                  parameters:
                    - ''
                -
                  type: MULTIPLIER
                  parameters:
                    - '8'
              tags:
                -
                  tag: Application
                  value: 'Interface {#IFNAME}({#IFALIAS})'
            -
              uuid: c9179d7bffc549939dde6404d5ee5286
              name: 'Interface {#IFNAME}({#IFALIAS}): Outbound packets discarded'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.2.1.2.2.1.19.{#SNMPINDEX}'
              key: 'net.if.out.discards[ifOutDiscards.{#SNMPINDEX}]'
              delay: 30m
              history: 7d
              description: |
                MIB: IF-MIB
                The number of outbound packets which were chosen to be discarded
                even though no errors had been detected to prevent their being deliverable to a higher-layer protocol.
                One possible reason for discarding such a packet could be to free up buffer space.
                Discontinuities in the value of this counter can occur at re-initialization of the management system,
                and at other times as indicated by the value of ifCounterDiscontinuityTime.
              preprocessing:
                -
                  type: CHANGE_PER_SECOND
                  parameters:
                    - ''
              tags:
                -
                  tag: Application
                  value: 'Interface {#IFNAME}({#IFALIAS})'
            -
              uuid: 3e1ce325eeb544e78f79d0e62817fa42
              name: 'Interface {#IFNAME}({#IFALIAS}): Outbound packets with errors'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.2.1.2.2.1.20.{#SNMPINDEX}'
              key: 'net.if.out.errors[ifOutErrors.{#SNMPINDEX}]'
              delay: 30m
              history: 7d
              description: |
                MIB: IF-MIB
                For packet-oriented interfaces, the number of outbound packets that contained errors preventing them from being deliverable to a higher-layer protocol.  For character-oriented or fixed-length interfaces, the number of outbound transmission units that contained errors preventing them from being deliverable to a higher-layer protocol. Discontinuities in the value of this counter can occur at re-initialization of the management system, and at other times as indicated by the value of ifCounterDiscontinuityTime.
              preprocessing:
                -
                  type: CHANGE_PER_SECOND
                  parameters:
                    - ''
              tags:
                -
                  tag: Application
                  value: 'Interface {#IFNAME}({#IFALIAS})'
            -
              uuid: 092f94529b484fae91172ba60033809d
              name: 'Interface {#IFNAME}({#IFALIAS}): Bits sent'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.2.1.31.1.1.1.10.{#SNMPINDEX}'
              key: 'net.if.out[ifHCOutOctets.{#SNMPINDEX}]'
              delay: 3m
              history: 7d
              units: bps
              description: |
                MIB: IF-MIB
                The total number of octets transmitted out of the interface, including framing characters. This object is a 64-bit version of ifOutOctets.Discontinuities in the value of this counter can occur at re-initialization of the management system, and at other times as indicated by the value of ifCounterDiscontinuityTime.
              preprocessing:
                -
                  type: CHANGE_PER_SECOND
                  parameters:
                    - ''
                -
                  type: MULTIPLIER
                  parameters:
                    - '8'
              tags:
                -
                  tag: Application
                  value: 'Interface {#IFNAME}({#IFALIAS})'
            -
              uuid: 741b912bb97d4523be9a31ede57f4cfd
              name: 'Interface {#IFNAME}({#IFALIAS}): Speed'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.2.1.31.1.1.1.15.{#SNMPINDEX}'
              key: 'net.if.speed[ifHighSpeed.{#SNMPINDEX}]'
              delay: 30m
              history: 7d
              trends: 0d
              units: bps
              description: |
                MIB: IF-MIB
                An estimate of the interface's current bandwidth in units of 1,000,000 bits per second. If this object reports a value of `n' then the speed of the interface is somewhere in the range of `n-500,000' to`n+499,999'.  For interfaces which do not vary in bandwidth or for those where no accurate estimation can be made, this object should contain the nominal bandwidth. For a sub-layer which has no concept of bandwidth, this object should be zero.
              preprocessing:
                -
                  type: MULTIPLIER
                  parameters:
                    - '1000000'
                -
                  type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 1h
              tags:
                -
                  tag: Application
                  value: 'Interface {#IFNAME}({#IFALIAS})'
            -
              uuid: ed40569db136488e817e88bc6e54eab5
              name: 'Interface {#IFNAME}({#IFALIAS}): Operational status'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.2.1.2.2.1.8.{#SNMPINDEX}'
              key: 'net.if.status[ifOperStatus.{#SNMPINDEX}]'
              delay: 3m
              history: 7d
              trends: '0'
              description: |
                MIB: IF-MIB
                The current operational state of the interface.
                - The testing(3) state indicates that no operational packet scan be passed
                - If ifAdminStatus is down(2) then ifOperStatus should be down(2)
                - If ifAdminStatus is changed to up(1) then ifOperStatus should change to up(1) if the interface is ready to transmit and receive network traffic
                - It should change todormant(5) if the interface is waiting for external actions (such as a serial line waiting for an incoming connection)
                - It should remain in the down(2) state if and only if there is a fault that prevents it from going to the up(1) state
                - It should remain in the notPresent(6) state if the interface has missing(typically, hardware) components.
              valuemap:
                name: 'TELTONIKA-MIB::ifOperStatus'
              tags:
                -
                  tag: Application
                  value: 'Interface {#IFNAME}({#IFALIAS})'
              trigger_prototypes:
                -
                  uuid: 14159c76b82e4af3bf05d85a9f55db4e
                  expression: '{$IFCONTROL:"{#IFNAME}"}=1 and last(/Template Teltonika RUT950 and RUT955 SNMP/net.if.status[ifOperStatus.{#SNMPINDEX}])=2 and (last(/Template Teltonika RUT950 and RUT955 SNMP/net.if.status[ifOperStatus.{#SNMPINDEX}],#1)<>last(/Template Teltonika RUT950 and RUT955 SNMP/net.if.status[ifOperStatus.{#SNMPINDEX}],#2))'
                  recovery_mode: RECOVERY_EXPRESSION
                  recovery_expression: 'last(/Template Teltonika RUT950 and RUT955 SNMP/net.if.status[ifOperStatus.{#SNMPINDEX}])<>2 or {$IFCONTROL:"{#IFNAME}"}=0'
                  name: 'Interface {#IFNAME}({#IFALIAS}): Link down'
                  opdata: 'Current state: {ITEM.LASTVALUE1}'
                  priority: AVERAGE
                  description: |
                    This trigger expression works as follows:
                    1. Can be triggered if operations status is down.
                    2. {$IFCONTROL:"{#IFNAME}"}=1 - user can redefine Context macro to value - 0. That marks this interface as not important. No new trigger will be fired if this interface is down.
                    3. {TEMPLATE_NAME:METRIC.diff()}=1) - trigger fires only if operational status was up(1) sometime before. (So, do not fire 'ethernal off' interfaces.)
                    
                    WARNING: if closed manually - won't fire again on next poll, because of .diff.
                  manual_close: 'YES'
            -
              uuid: 6e89a8f3e28c4d758d4d70d7f36b7c02
              name: 'Interface {#IFNAME}({#IFALIAS}): Total daily traffic'
              type: CALCULATED
              key: 'net.if.total[daily.{#SNMPINDEX}]'
              delay: 6m
              units: B
              params: |
                last(//net.if.total[daily.{#SNMPINDEX}])+
                (avg(//net.if.total[ifbps.{#SNMPINDEX}],6m))*45+
                (time()>000000)*(time()<001200)*(last(//net.if.total[daily.{#SNMPINDEX}])>0)*-10*last(//net.if.total[daily.{#SNMPINDEX}])
              description: |
                Total traffic sent and received today. Resets to 0 at midnight each day.
                x bits/s / 8 = x bytes/s
                x bytes/s * 60 = x bytes/min
                x bytes/min * 6 = x bytes since last update
                60*6/8=45
              preprocessing:
                -
                  type: CHECK_NOT_SUPPORTED
                  parameters:
                    - ''
                  error_handler: CUSTOM_VALUE
                  error_handler_params: '0'
                -
                  type: IN_RANGE
                  parameters:
                    - '0'
                    - ''
                  error_handler: CUSTOM_VALUE
                  error_handler_params: '0'
              tags:
                -
                  tag: Application
                  value: 'Interface {#IFNAME}({#IFALIAS})'
              trigger_prototypes:
                -
                  uuid: 47811bc3ea4d49c1939bff3b7f5bc136
                  expression: 'last(/Template Teltonika RUT950 and RUT955 SNMP/net.if.total[daily.{#SNMPINDEX}])>{$IF.UTIL.DAILY}'
                  name: 'Interface {#IFNAME}({#IFALIAS}): High daily traffic usage (>{$IF.UTIL.DAILY:"{#IFNAME}"} )'
                  priority: INFO
                  manual_close: 'YES'
            -
              uuid: d6756735f49544b2b990805fd9c70dd7
              name: 'Interface {#IFNAME}({#IFALIAS}): Bits sent+received'
              type: CALCULATED
              key: 'net.if.total[ifbps.{#SNMPINDEX}]'
              history: 7d
              trends: 30d
              units: bps
              params: |
                (last(//net.if.in[ifHCInOctets.{#SNMPINDEX}])+
                last(//net.if.out[ifHCOutOctets.{#SNMPINDEX}]))*(
                nodata(//net.if.in[ifHCInOctets.{#SNMPINDEX}],10m)=0)
              description: |
                MIB: IF-MIB
                The total number of octets received and sent on the interface.
                Will be 0 if host offline or rebooted to prevent "not supported" on calculation in total traffic.
              preprocessing:
                -
                  type: CHECK_NOT_SUPPORTED
                  parameters:
                    - ''
                  error_handler: CUSTOM_VALUE
                  error_handler_params: '0'
                -
                  type: IN_RANGE
                  parameters:
                    - '0'
                    - ''
                  error_handler: CUSTOM_VALUE
                  error_handler_params: '0'
              tags:
                -
                  tag: Application
                  value: 'Interface {#IFNAME}({#IFALIAS})'
            -
              uuid: 9f7145c013a24ee49de5b478a054cf6b
              name: 'Interface {#IFNAME}({#IFALIAS}): Total monthly traffic'
              type: CALCULATED
              key: 'net.if.total[monthly.{#SNMPINDEX}]'
              delay: 12m
              units: B
              params: |
                last(//net.if.total[monthly.{#SNMPINDEX}])+
                (avg(//net.if.total[ifbps.{#SNMPINDEX}],12m))*90+
                (dayofmonth()=1)*(time()>000000)*(time()<002400)*(last(//net.if.total[monthly.{#SNMPINDEX}])>0)*-10*last(//net.if.total[monthly.{#SNMPINDEX}])
              description: 'Total traffic sent and received this month. Resets to 0 the first day every month.'
              preprocessing:
                -
                  type: CHECK_NOT_SUPPORTED
                  parameters:
                    - ''
                  error_handler: CUSTOM_VALUE
                  error_handler_params: '0'
                -
                  type: IN_RANGE
                  parameters:
                    - '0'
                    - ''
                  error_handler: CUSTOM_VALUE
                  error_handler_params: '0'
              tags:
                -
                  tag: Application
                  value: 'Interface {#IFNAME}({#IFALIAS})'
              trigger_prototypes:
                -
                  uuid: 4cd33aa2d1be414688514a6a712eb625
                  expression: 'last(/Template Teltonika RUT950 and RUT955 SNMP/net.if.total[monthly.{#SNMPINDEX}])>{$IF.UTIL.MONTHLY}'
                  name: 'Interface {#IFNAME}({#IFALIAS}): High monthly traffic usage (>{$IF.UTIL.MONTHLY:"{#IFNAME}"} )'
                  priority: INFO
                  manual_close: 'YES'
            -
              uuid: 013d7310ec80471ab44d40835f6da7b8
              name: 'Interface {#IFNAME}({#IFALIAS}): Total weekly traffic'
              type: CALCULATED
              key: 'net.if.total[weekly.{#SNMPINDEX}]'
              delay: 12m
              history: 365d
              units: B
              params: |
                last(//net.if.total[weekly.{#SNMPINDEX}])+
                (avg(//net.if.total[ifbps.{#SNMPINDEX}],12m))*90+
                (dayofweek()=1)*(time()>000000)*(time()<002400)*(last(//net.if.total[weekly.{#SNMPINDEX}])>0)*-10*last(//net.if.total[weekly.{#SNMPINDEX}])
              description: 'Total traffic sent and received this week. Resets to 0 every Monday.'
              preprocessing:
                -
                  type: CHECK_NOT_SUPPORTED
                  parameters:
                    - ''
                  error_handler: CUSTOM_VALUE
                  error_handler_params: '0'
                -
                  type: IN_RANGE
                  parameters:
                    - '0'
                    - ''
                  error_handler: CUSTOM_VALUE
                  error_handler_params: '0'
              tags:
                -
                  tag: Application
                  value: 'Interface {#IFNAME}({#IFALIAS})'
              trigger_prototypes:
                -
                  uuid: cb620fe3f94046ebadc4e2a6d371e250
                  expression: 'last(/Template Teltonika RUT950 and RUT955 SNMP/net.if.total[weekly.{#SNMPINDEX}])>{$IF.UTIL.WEEKLY}'
                  name: 'Interface {#IFNAME}({#IFALIAS}): High weekly traffic usage (>{$IF.UTIL.WEEKLY:"{#IFNAME}"} )'
                  priority: INFO
                  manual_close: 'YES'
            -
              uuid: e61c68e1c50c4ce3907d2314d6e3d1ce
              name: 'Interface {#IFNAME}({#IFALIAS}): Interface type'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.2.1.2.2.1.3.{#SNMPINDEX}'
              key: 'net.if.type[ifType.{#SNMPINDEX}]'
              delay: 1h
              history: 7d
              trends: '0'
              description: |
                MIB: IF-MIB
                The type of interface.
                Additional values for ifType are assigned by the Internet Assigned NumbersAuthority (IANA),
                through updating the syntax of the IANAifType textual convention.
              valuemap:
                name: 'TELTONIKA-MIB::ifType'
              preprocessing:
                -
                  type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 1d
              tags:
                -
                  tag: Application
                  value: 'Interface {#IFNAME}({#IFALIAS})'
          trigger_prototypes:
            -
              uuid: 8c0583fcdb7b46fbb0555679e6790c51
              expression: |
                change(/Template Teltonika RUT950 and RUT955 SNMP/net.if.speed[ifHighSpeed.{#SNMPINDEX}])<0 and last(/Template Teltonika RUT950 and RUT955 SNMP/net.if.speed[ifHighSpeed.{#SNMPINDEX}])>0
                and (
                last(/Template Teltonika RUT950 and RUT955 SNMP/net.if.type[ifType.{#SNMPINDEX}])=6 or
                last(/Template Teltonika RUT950 and RUT955 SNMP/net.if.type[ifType.{#SNMPINDEX}])=7 or
                last(/Template Teltonika RUT950 and RUT955 SNMP/net.if.type[ifType.{#SNMPINDEX}])=11 or
                last(/Template Teltonika RUT950 and RUT955 SNMP/net.if.type[ifType.{#SNMPINDEX}])=62 or
                last(/Template Teltonika RUT950 and RUT955 SNMP/net.if.type[ifType.{#SNMPINDEX}])=69 or
                last(/Template Teltonika RUT950 and RUT955 SNMP/net.if.type[ifType.{#SNMPINDEX}])=117
                )
                and
                (last(/Template Teltonika RUT950 and RUT955 SNMP/net.if.status[ifOperStatus.{#SNMPINDEX}])<>2)
              recovery_mode: RECOVERY_EXPRESSION
              recovery_expression: |
                (change(/Template Teltonika RUT950 and RUT955 SNMP/net.if.speed[ifHighSpeed.{#SNMPINDEX}])>0 and last(/Template Teltonika RUT950 and RUT955 SNMP/net.if.speed[ifHighSpeed.{#SNMPINDEX}],#2)>0) or
                (last(/Template Teltonika RUT950 and RUT955 SNMP/net.if.status[ifOperStatus.{#SNMPINDEX}])=2)
              name: 'Interface {#IFNAME}({#IFALIAS}): Ethernet has changed to lower speed than it was before'
              opdata: 'Current reported speed: {ITEM.LASTVALUE1}'
              priority: INFO
              description: 'This Ethernet connection has transitioned down from its known maximum speed. This might be a sign of autonegotiation issues. Ack to close.'
              manual_close: 'YES'
              dependencies:
                -
                  name: 'Interface {#IFNAME}({#IFALIAS}): Link down'
                  expression: '{$IFCONTROL:"{#IFNAME}"}=1 and last(/Template Teltonika RUT950 and RUT955 SNMP/net.if.status[ifOperStatus.{#SNMPINDEX}])=2 and (last(/Template Teltonika RUT950 and RUT955 SNMP/net.if.status[ifOperStatus.{#SNMPINDEX}],#1)<>last(/Template Teltonika RUT950 and RUT955 SNMP/net.if.status[ifOperStatus.{#SNMPINDEX}],#2))'
                  recovery_expression: 'last(/Template Teltonika RUT950 and RUT955 SNMP/net.if.status[ifOperStatus.{#SNMPINDEX}])<>2 or {$IFCONTROL:"{#IFNAME}"}=0'
            -
              uuid: 94b3588745c744e2a560880b6e6535fe
              expression: |
                (avg(/Template Teltonika RUT950 and RUT955 SNMP/net.if.in[ifHCInOctets.{#SNMPINDEX}],15m)>({$IF.UTIL.MAX:"{#IFNAME}"}/100)*last(/Template Teltonika RUT950 and RUT955 SNMP/net.if.speed[ifHighSpeed.{#SNMPINDEX}]) or
                avg(/Template Teltonika RUT950 and RUT955 SNMP/net.if.out[ifHCOutOctets.{#SNMPINDEX}],15m)>({$IF.UTIL.MAX:"{#IFNAME}"}/100)*last(/Template Teltonika RUT950 and RUT955 SNMP/net.if.speed[ifHighSpeed.{#SNMPINDEX}])) and
                last(/Template Teltonika RUT950 and RUT955 SNMP/net.if.speed[ifHighSpeed.{#SNMPINDEX}])>0
              recovery_mode: RECOVERY_EXPRESSION
              recovery_expression: |
                avg(/Template Teltonika RUT950 and RUT955 SNMP/net.if.in[ifHCInOctets.{#SNMPINDEX}],15m)<(({$IF.UTIL.MAX:"{#IFNAME}"}-3)/100)*last(/Template Teltonika RUT950 and RUT955 SNMP/net.if.speed[ifHighSpeed.{#SNMPINDEX}]) and
                avg(/Template Teltonika RUT950 and RUT955 SNMP/net.if.out[ifHCOutOctets.{#SNMPINDEX}],15m)<(({$IF.UTIL.MAX:"{#IFNAME}"}-3)/100)*last(/Template Teltonika RUT950 and RUT955 SNMP/net.if.speed[ifHighSpeed.{#SNMPINDEX}])
              name: 'Interface {#IFNAME}({#IFALIAS}): High bandwidth usage (>{$IF.UTIL.MAX:"{#IFNAME}"}% )'
              opdata: 'In: {ITEM.LASTVALUE1}, out: {ITEM.LASTVALUE3}, speed: {ITEM.LASTVALUE2}'
              priority: WARNING
              description: 'The network interface utilization is close to its estimated maximum bandwidth.'
              manual_close: 'YES'
              dependencies:
                -
                  name: 'Interface {#IFNAME}({#IFALIAS}): Link down'
                  expression: '{$IFCONTROL:"{#IFNAME}"}=1 and last(/Template Teltonika RUT950 and RUT955 SNMP/net.if.status[ifOperStatus.{#SNMPINDEX}])=2 and (last(/Template Teltonika RUT950 and RUT955 SNMP/net.if.status[ifOperStatus.{#SNMPINDEX}],#1)<>last(/Template Teltonika RUT950 and RUT955 SNMP/net.if.status[ifOperStatus.{#SNMPINDEX}],#2))'
                  recovery_expression: 'last(/Template Teltonika RUT950 and RUT955 SNMP/net.if.status[ifOperStatus.{#SNMPINDEX}])<>2 or {$IFCONTROL:"{#IFNAME}"}=0'
            -
              uuid: a90b699c8f554c869209407c680686a7
              expression: |
                min(/Template Teltonika RUT950 and RUT955 SNMP/net.if.in.errors[ifInErrors.{#SNMPINDEX}],5m)>{$IF.ERRORS.WARN:"{#IFNAME}"}
                or min(/Template Teltonika RUT950 and RUT955 SNMP/net.if.out.errors[ifOutErrors.{#SNMPINDEX}],5m)>{$IF.ERRORS.WARN:"{#IFNAME}"}
              recovery_mode: RECOVERY_EXPRESSION
              recovery_expression: |
                max(/Template Teltonika RUT950 and RUT955 SNMP/net.if.in.errors[ifInErrors.{#SNMPINDEX}],5m)<{$IF.ERRORS.WARN:"{#IFNAME}"}*0.8
                and max(/Template Teltonika RUT950 and RUT955 SNMP/net.if.out.errors[ifOutErrors.{#SNMPINDEX}],5m)<{$IF.ERRORS.WARN:"{#IFNAME}"}*0.8
              name: 'Interface {#IFNAME}({#IFALIAS}): High error rate (>{$IF.ERRORS.WARN:"{#IFNAME}"} for 5m)'
              opdata: 'errors in: {ITEM.LASTVALUE1}, errors out: {ITEM.LASTVALUE2}'
              priority: WARNING
              description: 'Recovers when below 80% of {$IF.ERRORS.WARN:"{#IFNAME}"} threshold'
              manual_close: 'YES'
              dependencies:
                -
                  name: 'Interface {#IFNAME}({#IFALIAS}): Link down'
                  expression: '{$IFCONTROL:"{#IFNAME}"}=1 and last(/Template Teltonika RUT950 and RUT955 SNMP/net.if.status[ifOperStatus.{#SNMPINDEX}])=2 and (last(/Template Teltonika RUT950 and RUT955 SNMP/net.if.status[ifOperStatus.{#SNMPINDEX}],#1)<>last(/Template Teltonika RUT950 and RUT955 SNMP/net.if.status[ifOperStatus.{#SNMPINDEX}],#2))'
                  recovery_expression: 'last(/Template Teltonika RUT950 and RUT955 SNMP/net.if.status[ifOperStatus.{#SNMPINDEX}])<>2 or {$IFCONTROL:"{#IFNAME}"}=0'
          graph_prototypes:
            -
              uuid: 0b3abdd721784d2e8fe255a7c4fb1b0f
              name: 'Interface {#IFNAME}({#IFALIAS}): Network traffic'
              graph_items:
                -
                  drawtype: GRADIENT_LINE
                  color: 1A7C11
                  item:
                    host: 'Template Teltonika RUT950 and RUT955 SNMP'
                    key: 'net.if.in[ifHCInOctets.{#SNMPINDEX}]'
                -
                  sortorder: '1'
                  drawtype: BOLD_LINE
                  color: 2774A4
                  item:
                    host: 'Template Teltonika RUT950 and RUT955 SNMP'
                    key: 'net.if.out[ifHCOutOctets.{#SNMPINDEX}]'
                -
                  sortorder: '2'
                  color: F63100
                  yaxisside: RIGHT
                  item:
                    host: 'Template Teltonika RUT950 and RUT955 SNMP'
                    key: 'net.if.out.errors[ifOutErrors.{#SNMPINDEX}]'
                -
                  sortorder: '3'
                  color: A54F10
                  yaxisside: RIGHT
                  item:
                    host: 'Template Teltonika RUT950 and RUT955 SNMP'
                    key: 'net.if.in.errors[ifInErrors.{#SNMPINDEX}]'
                -
                  sortorder: '4'
                  color: FC6EA3
                  yaxisside: RIGHT
                  item:
                    host: 'Template Teltonika RUT950 and RUT955 SNMP'
                    key: 'net.if.out.discards[ifOutDiscards.{#SNMPINDEX}]'
                -
                  sortorder: '5'
                  color: 6C59DC
                  yaxisside: RIGHT
                  item:
                    host: 'Template Teltonika RUT950 and RUT955 SNMP'
                    key: 'net.if.in.discards[ifInDiscards.{#SNMPINDEX}]'
            -
              uuid: e91a0f09ab5543d280da1f04e2e48450
              name: 'Interface {#IFNAME}({#IFALIAS}): Network traffic total monthly usage'
              graph_items:
                -
                  sortorder: '1'
                  color: 199C0D
                  item:
                    host: 'Template Teltonika RUT950 and RUT955 SNMP'
                    key: 'net.if.total[monthly.{#SNMPINDEX}]'
        -
          uuid: 38455a7132894b4dba0eb2703934276c
          name: 'hsSessionEntry Discovery'
          type: SNMP_AGENT
          snmp_oid: 'discovery[{#HSSURL},.1.3.6.1.4.1.48690.5.6.1.13,{#HSSUPBANDWIDTH},.1.3.6.1.4.1.48690.5.6.1.12,{#HSSDWBANDWIDTH},.1.3.6.1.4.1.48690.5.6.1.11,{#HSSIDLETIMEOUT},.1.3.6.1.4.1.48690.5.6.1.10,{#HSSTIMELIMIT},.1.3.6.1.4.1.48690.5.6.1.9]'
          key: TELTONIKA-MIB.hsSessionEntry
          delay: 1h
          description: 'An entry containing information of a particular hotspot session.'
          item_prototypes:
            -
              uuid: ef581b43b23f41098048421b94880fd5
              name: 'hssDwBandwidth for {#SNMPINDEX}'
              type: SNMP_AGENT
              snmp_oid: '.1.3.6.1.4.1.48690.5.6.1.11.{#SNMPINDEX}'
              key: 'hssDwBandwidth[{#SNMPINDEX}]'
              delay: '300'
              units: /sec
              description: 'Max download bandwidth in b/s. Cannot be accessed using SNMPv1.'
              preprocessing:
                -
                  type: CHANGE_PER_SECOND
                  parameters:
                    - ''
              tags:
                -
                  tag: Application
                  value: 'TELTONIKA-MIB::hotspot'
            -
              uuid: 96b4e0a5f5464d9b83e2aed096a4ccf3
              name: 'hssDwLimit for {#SNMPINDEX}'
              type: SNMP_AGENT
              snmp_oid: '.1.3.6.1.4.1.48690.5.6.1.7.{#SNMPINDEX}'
              key: 'hssDwLimit[{#SNMPINDEX}]'
              delay: '300'
              units: /sec
              description: 'Download limit in bytes. Cannot be accessed using SNMPv1.'
              preprocessing:
                -
                  type: CHANGE_PER_SECOND
                  parameters:
                    - ''
              tags:
                -
                  tag: Application
                  value: 'TELTONIKA-MIB::hotspot'
            -
              uuid: 63d49b09d1c541ac98ba179742aa1d1a
              name: 'hssIdleTimeout for {#SNMPINDEX}'
              type: SNMP_AGENT
              snmp_oid: '.1.3.6.1.4.1.48690.5.6.1.10.{#SNMPINDEX}'
              key: 'hssIdleTimeout[{#SNMPINDEX}]'
              delay: '300'
              value_type: FLOAT
              description: 'Idle timeout in sec.'
              tags:
                -
                  tag: Application
                  value: 'TELTONIKA-MIB::hotspot'
            -
              uuid: 25789df2102440adab0bb5d940f65d54
              name: 'hssID for {#SNMPINDEX}'
              type: SNMP_AGENT
              snmp_oid: '.1.3.6.1.4.1.48690.5.6.1.4.{#SNMPINDEX}'
              key: 'hssID[{#SNMPINDEX}]'
              delay: '300'
              trends: '0'
              value_type: TEXT
              description: 'Session ID'
              tags:
                -
                  tag: Application
                  value: 'TELTONIKA-MIB::hotspot'
            -
              uuid: 73ffeeab325e44fab4da14c34b91abd6
              name: 'hssIndex for {#SNMPINDEX}'
              type: SNMP_AGENT
              snmp_oid: '.1.3.6.1.4.1.48690.5.6.1.1.{#SNMPINDEX}'
              key: 'hssIndex[{#SNMPINDEX}]'
              delay: '300'
              value_type: FLOAT
              description: 'A unique value, greater than zero, for each session.'
              tags:
                -
                  tag: Application
                  value: 'TELTONIKA-MIB::hotspot'
            -
              uuid: 574e765a99ee4111bad4d124fb977761
              name: 'hssIP for {#SNMPINDEX}'
              type: SNMP_AGENT
              snmp_oid: '.1.3.6.1.4.1.48690.5.6.1.3.{#SNMPINDEX}'
              key: 'hssIP[{#SNMPINDEX}]'
              delay: '300'
              trends: '0'
              value_type: TEXT
              description: 'Clients IP address'
              tags:
                -
                  tag: Application
                  value: 'TELTONIKA-MIB::hotspot'
            -
              uuid: bf22cc65365f44978be44d971b0a17f5
              name: 'hssMAC for {#SNMPINDEX}'
              type: SNMP_AGENT
              snmp_oid: '.1.3.6.1.4.1.48690.5.6.1.2.{#SNMPINDEX}'
              key: 'hssMAC[{#SNMPINDEX}]'
              delay: '300'
              trends: '0'
              value_type: TEXT
              description: 'Clients MAC address'
              tags:
                -
                  tag: Application
                  value: 'TELTONIKA-MIB::hotspot'
            -
              uuid: f9194d115c2d41f4bc111d95edb5926d
              name: 'hssState for {#SNMPINDEX}'
              type: SNMP_AGENT
              snmp_oid: '.1.3.6.1.4.1.48690.5.6.1.6.{#SNMPINDEX}'
              key: 'hssState[{#SNMPINDEX}]'
              delay: '300'
              value_type: FLOAT
              description: 'Session state'
              valuemap:
                name: 'TELTONIKA-MIB::hssState'
              tags:
                -
                  tag: Application
                  value: 'TELTONIKA-MIB::hotspot'
            -
              uuid: ae4d7a13cfa947189693a632660c65dd
              name: 'hssTimeLimit for {#SNMPINDEX}'
              type: SNMP_AGENT
              snmp_oid: '.1.3.6.1.4.1.48690.5.6.1.9.{#SNMPINDEX}'
              key: 'hssTimeLimit[{#SNMPINDEX}]'
              delay: '300'
              units: /sec
              description: 'Time limit in sec. Cannot be accessed using SNMPv1.'
              preprocessing:
                -
                  type: CHANGE_PER_SECOND
                  parameters:
                    - ''
              tags:
                -
                  tag: Application
                  value: 'TELTONIKA-MIB::hotspot'
            -
              uuid: f8342f9cefaa43d7b4c79b42f82eb6b0
              name: 'hssUpBandwidth for {#SNMPINDEX}'
              type: SNMP_AGENT
              snmp_oid: '.1.3.6.1.4.1.48690.5.6.1.12.{#SNMPINDEX}'
              key: 'hssUpBandwidth[{#SNMPINDEX}]'
              delay: '300'
              units: /sec
              description: 'Max upwnload bandwidth in b/s. Cannot be accessed using SNMPv1.'
              preprocessing:
                -
                  type: CHANGE_PER_SECOND
                  parameters:
                    - ''
              tags:
                -
                  tag: Application
                  value: 'TELTONIKA-MIB::hotspot'
            -
              uuid: 0be9882fc153439ba5683c890740b78d
              name: 'hssUpLimit for {#SNMPINDEX}'
              type: SNMP_AGENT
              snmp_oid: '.1.3.6.1.4.1.48690.5.6.1.8.{#SNMPINDEX}'
              key: 'hssUpLimit[{#SNMPINDEX}]'
              delay: '300'
              units: /sec
              description: 'Upload limit in bytes. Cannot be accessed using SNMPv1.'
              preprocessing:
                -
                  type: CHANGE_PER_SECOND
                  parameters:
                    - ''
              tags:
                -
                  tag: Application
                  value: 'TELTONIKA-MIB::hotspot'
            -
              uuid: c9673f7ef8ce4b98b7a385850adcb4b9
              name: 'hssURL for {#SNMPINDEX}'
              type: SNMP_AGENT
              snmp_oid: '.1.3.6.1.4.1.48690.5.6.1.13.{#SNMPINDEX}'
              key: 'hssURL[{#SNMPINDEX}]'
              delay: '300'
              trends: '0'
              value_type: TEXT
              description: 'Original URL'
              tags:
                -
                  tag: Application
                  value: 'TELTONIKA-MIB::hotspot'
            -
              uuid: ea5bbdf788134ed6b7d3efba1b36b83d
              name: 'hssUsername for {#SNMPINDEX}'
              type: SNMP_AGENT
              snmp_oid: '.1.3.6.1.4.1.48690.5.6.1.5.{#SNMPINDEX}'
              key: 'hssUsername[{#SNMPINDEX}]'
              delay: '300'
              trends: '0'
              value_type: TEXT
              description: Username
              tags:
                -
                  tag: Application
                  value: 'TELTONIKA-MIB::hotspot'
        -
          uuid: adca4fd47ae34ce1988b79dcfdcad249
          name: 'modemEntry Discovery'
          type: SNMP_AGENT
          snmp_oid: 'discovery[{#SNMPVALUE},.1.3.6.1.4.1.48690.2.2.1.2,{#MRSRQ},.1.3.6.1.4.1.48690.2.2.1.21,{#MRSRP},.1.3.6.1.4.1.48690.2.2.1.20,{#MSINR},.1.3.6.1.4.1.48690.2.2.1.19,{#MCELLID},.1.3.6.1.4.1.48690.2.2.1.18,{#MTEMPERATURE},.1.3.6.1.4.1.48690.2.2.1.17,{#OPERATOR},.1.3.6.1.4.1.48690.2.2.1.13,{#OPERATORNUMBER},1.3.6.1.4.1.48690.2.2.1.14]'
          key: TELTONIKA-MIB.modemEntry
          delay: 1h
          lifetime: '32000000'
          description: 'An entry containing information of a particular interface.'
          item_prototypes:
            -
              uuid: 13e8eb2387fe4a20b3a2073a78fd0657
              name: 'ICMP loss - operator {#OPERATOR}'
              type: CALCULATED
              key: 'icmppingloss-[{#OPERATORNUMBER}]'
              history: 365d
              value_type: FLOAT
              units: '%'
              params: |
                (last(//mOperatorNumber[{#SNMPVALUE}])<>{#OPERATORNUMBER})*9999.0+
                last(//icmppingloss)
              preprocessing:
                -
                  type: IN_RANGE
                  parameters:
                    - '-1000.0'
                    - '2000.0'
              tags:
                -
                  tag: Application
                  value: 'TELTONIKA-MIB::mobile'
            -
              uuid: 8ed512fee24b46e8a4905edd797db1e0
              name: 'ICMP response time - operator {#OPERATOR}'
              type: CALCULATED
              key: 'icmppingsec-[{#OPERATORNUMBER}]'
              history: 365d
              value_type: FLOAT
              units: s
              params: |
                (last(//mOperatorNumber[{#SNMPVALUE}])<>{#OPERATORNUMBER})*9999.0+
                last(//icmppingsec)
              preprocessing:
                -
                  type: IN_RANGE
                  parameters:
                    - '-1000.0'
                    - '2000.0'
              tags:
                -
                  tag: Application
                  value: 'TELTONIKA-MIB::mobile'
            -
              uuid: 8a811eb217ec44478273f1d0030c6341
              name: 'mdCellID for {#SNMPVALUE}'
              type: SNMP_AGENT
              snmp_oid: '.1.3.6.1.4.1.48690.2.2.1.18.{#SNMPINDEX}'
              key: 'mCellID[{#SNMPVALUE}]'
              delay: 10m
              trends: '0'
              value_type: TEXT
              description: 'CELL ID'
              preprocessing:
                -
                  type: NOT_MATCHES_REGEX
                  parameters:
                    - n/a
                  error_handler: DISCARD_VALUE
              tags:
                -
                  tag: Application
                  value: 'TELTONIKA-MIB::mobile'
            -
              uuid: 571eac138da8470cad804809c1d5d999
              name: 'mdConnectionState for {#SNMPVALUE}'
              type: SNMP_AGENT
              snmp_oid: '.1.3.6.1.4.1.48690.2.2.1.15.{#SNMPINDEX}'
              key: 'mConnectionState[{#SNMPVALUE}]'
              delay: 10m
              trends: '0'
              value_type: TEXT
              description: 'Sata session connection state'
              tags:
                -
                  tag: Application
                  value: 'TELTONIKA-MIB::mobile'
              trigger_prototypes:
                -
                  uuid: d4b21238e00349da9e082e0cd20fa3d2
                  expression: 'last(/Template Teltonika RUT950 and RUT955 SNMP/mConnectionState[{#SNMPVALUE}])<>"Connected"'
                  recovery_mode: RECOVERY_EXPRESSION
                  recovery_expression: 'last(/Template Teltonika RUT950 and RUT955 SNMP/mConnectionState[{#SNMPVALUE}])="Connected"'
                  name: 'Modem not Connected'
                  priority: WARNING
            -
              uuid: 379655397da34e23b66ec1038abe3c3f
              name: 'mdConnectionType for {#SNMPVALUE}'
              type: SNMP_AGENT
              snmp_oid: '.1.3.6.1.4.1.48690.2.2.1.16.{#SNMPINDEX}'
              key: 'mConnectionType[{#SNMPVALUE}]'
              delay: 10m
              trends: '0'
              value_type: TEXT
              description: 'Data session connection type'
              tags:
                -
                  tag: Application
                  value: 'TELTONIKA-MIB::mobile'
            -
              uuid: dd7aa9f3172e40399269fb1effd65848
              name: 'mdDescr for {#SNMPVALUE}'
              type: SNMP_AGENT
              snmp_oid: '.1.3.6.1.4.1.48690.2.2.1.2.{#SNMPINDEX}'
              key: 'mDescr[{#SNMPVALUE}]'
              delay: 60m
              trends: '0'
              value_type: TEXT
              description: 'A textual string containing information about the modem.'
              tags:
                -
                  tag: Application
                  value: 'TELTONIKA-MIB::mobile'
            -
              uuid: a78679c4591c488d804acf8fb605f3b0
              name: 'mdIMEI for {#SNMPVALUE}'
              type: SNMP_AGENT
              snmp_oid: '.1.3.6.1.4.1.48690.2.2.1.3.{#SNMPINDEX}'
              key: 'mImei[{#SNMPVALUE}]'
              delay: 60m
              trends: '0'
              value_type: TEXT
              description: 'Modem IMEI'
              tags:
                -
                  tag: Application
                  value: 'TELTONIKA-MIB::mobile'
            -
              uuid: 475907073cf24de587509272f636c342
              name: 'mdIMSI for {#SNMPVALUE}'
              type: SNMP_AGENT
              snmp_oid: '.1.3.6.1.4.1.48690.2.2.1.8.{#SNMPINDEX}'
              key: 'mIMSI[{#SNMPVALUE}]'
              delay: 10m
              trends: '0'
              value_type: TEXT
              description: 'IMSI for simcard'
              tags:
                -
                  tag: Application
                  value: 'TELTONIKA-MIB::mobile'
              trigger_prototypes:
                -
                  uuid: 7fe8172277fb46c1b87658a9b3233a4e
                  expression: 'change(/Template Teltonika RUT950 and RUT955 SNMP/mIMSI[{#SNMPVALUE}])=1'
                  name: 'IMSI changed'
                  priority: INFO
                  manual_close: 'YES'
            -
              uuid: e39223a5fc05429bb0f2ce75e051e17e
              name: 'mdIndex for {#SNMPVALUE}'
              type: SNMP_AGENT
              snmp_oid: '.1.3.6.1.4.1.48690.2.2.1.1.{#SNMPINDEX}'
              key: 'mIndex[{#SNMPVALUE}]'
              delay: 60m
              value_type: FLOAT
              description: 'A unique value, greater than zero, for each modem.'
              tags:
                -
                  tag: Application
                  value: 'TELTONIKA-MIB::mobile'
            -
              uuid: cc62a3b61dba4166a626d2bbbc598128
              name: 'mdManufacturer for {#SNMPVALUE}'
              type: SNMP_AGENT
              snmp_oid: '.1.3.6.1.4.1.48690.2.2.1.5.{#SNMPINDEX}'
              key: 'mManufacturer[{#SNMPVALUE}]'
              delay: 60m
              trends: '0'
              value_type: TEXT
              description: 'Modem manufacturer'
              tags:
                -
                  tag: Application
                  value: 'TELTONIKA-MIB::mobile'
            -
              uuid: 0463ce8e65134d0c9cdd7f51a87671c5
              name: 'mdModel for {#SNMPVALUE}'
              type: SNMP_AGENT
              snmp_oid: '.1.3.6.1.4.1.48690.2.2.1.4.{#SNMPINDEX}'
              key: 'mModel[{#SNMPVALUE}]'
              delay: 60m
              trends: '0'
              value_type: TEXT
              description: 'Modem model'
              tags:
                -
                  tag: Application
                  value: 'TELTONIKA-MIB::mobile'
            -
              uuid: fa768354e46d4ce99783f525029b9208
              name: 'mdNetState for {#SNMPVALUE}'
              type: SNMP_AGENT
              snmp_oid: '.1.3.6.1.4.1.48690.2.2.1.11.{#SNMPINDEX}'
              key: 'mNetState[{#SNMPVALUE}]'
              delay: 10m
              trends: '0'
              value_type: TEXT
              description: 'Mobile network registration status'
              tags:
                -
                  tag: Application
                  value: 'TELTONIKA-MIB::mobile'
            -
              uuid: 70cf1ccb6cd4401687e04232409beda3
              name: 'mdOperatorNumber for {#SNMPVALUE}'
              type: SNMP_AGENT
              snmp_oid: '.1.3.6.1.4.1.48690.2.2.1.14.{#SNMPINDEX}'
              key: 'mOperatorNumber[{#SNMPVALUE}]'
              delay: 3m
              trends: '0'
              value_type: TEXT
              description: 'Operator number (MCC+MNC)'
              preprocessing:
                -
                  type: NOT_MATCHES_REGEX
                  parameters:
                    - N\/A
                  error_handler: DISCARD_VALUE
              tags:
                -
                  tag: Application
                  value: 'TELTONIKA-MIB::mobile'
            -
              uuid: 7a5415104412459892ad2d5b5869307e
              name: 'mdOperator for {#SNMPVALUE}'
              type: SNMP_AGENT
              snmp_oid: '.1.3.6.1.4.1.48690.2.2.1.13.{#SNMPINDEX}'
              key: 'mOperator[{#SNMPVALUE}]'
              delay: 3m
              trends: '0'
              value_type: TEXT
              description: 'Operator currently in use'
              preprocessing:
                -
                  type: NOT_MATCHES_REGEX
                  parameters:
                    - N\/A
                  error_handler: DISCARD_VALUE
                -
                  type: NOT_MATCHES_REGEX
                  parameters:
                    - n\/a
              tags:
                -
                  tag: Application
                  value: 'TELTONIKA-MIB::mobile'
              trigger_prototypes:
                -
                  uuid: a42a17a9df844d5191ec4cbc7de3afec
                  expression: 'change(/Template Teltonika RUT950 and RUT955 SNMP/mOperator[{#SNMPVALUE}])=1'
                  name: 'Mobile operator changed'
                  priority: INFO
            -
              uuid: de9ad8e6258541448fd36ebd0cc91282
              name: 'mdPinState for {#SNMPVALUE}'
              type: SNMP_AGENT
              snmp_oid: '.1.3.6.1.4.1.48690.2.2.1.10.{#SNMPINDEX}'
              key: 'mPinState[{#SNMPVALUE}]'
              delay: 10m
              trends: '0'
              value_type: TEXT
              description: 'PIN status'
              preprocessing:
                -
                  type: NOT_MATCHES_REGEX
                  parameters:
                    - unknown
                  error_handler: DISCARD_VALUE
              tags:
                -
                  tag: Application
                  value: 'TELTONIKA-MIB::mobile'
              trigger_prototypes:
                -
                  uuid: 561a99951fb84a289749318c2d1e8110
                  expression: 'last(/Template Teltonika RUT950 and RUT955 SNMP/mPinState[{#SNMPVALUE}])<>"READY"'
                  recovery_mode: RECOVERY_EXPRESSION
                  recovery_expression: 'last(/Template Teltonika RUT950 and RUT955 SNMP/mPinState[{#SNMPVALUE}])="READY"'
                  name: 'Simcard PIN not READY'
                  priority: WARNING
            -
              uuid: c79badf6f2d14191b4721ba5cd1f5c61
              name: 'mdRevision for {#SNMPVALUE}'
              type: SNMP_AGENT
              snmp_oid: '.1.3.6.1.4.1.48690.2.2.1.6.{#SNMPINDEX}'
              key: 'mRevision[{#SNMPVALUE}]'
              delay: 60m
              trends: '0'
              value_type: TEXT
              description: 'Modem revision'
              tags:
                -
                  tag: Application
                  value: 'TELTONIKA-MIB::mobile'
            -
              uuid: 1ed068adda92440f950fdc4b1e6987bb
              name: 'mdRSRP for {#SNMPVALUE} operator {#OPERATOR} cellID {#MCELLID}'
              type: CALCULATED
              key: 'mRSRP[{#SNMPVALUE}-{#MCELLID}]'
              delay: 3m
              history: 365d
              value_type: FLOAT
              units: dBm
              params: |
                (last(//mCellID[{#SNMPVALUE}])<>{#MCELLID})*9999.0+
                last(//mRSRP[{#SNMPVALUE}])
              description: |
                (4G only) Reference Signal Receive Power is the average power of Resource Elements (RE) that carry cell specific Reference Signals (RS) over the entire bandwidth. RSRP does a better job of measuring signal power from a specific sector while potentially excluding noise and interference from other sectors.
                -44 to -80 Excellent. -81 to -109 Good. -110 to -120 Slow <-121 Unusable
              preprocessing:
                -
                  type: IN_RANGE
                  parameters:
                    - '-1000.0'
                    - '2000.0'
              tags:
                -
                  tag: Application
                  value: 'TELTONIKA-MIB::mobile'
            -
              uuid: f71731350acc41f6af41082ae5de6dc4
              name: 'mdRSRP for {#SNMPVALUE} operator {#OPERATOR}'
              type: CALCULATED
              key: 'mRSRP[{#SNMPVALUE}-{#OPERATORNUMBER}]'
              delay: 3m
              history: 365d
              value_type: FLOAT
              units: dBm
              params: |
                (last(//mOperatorNumber[{#SNMPVALUE}])<>{#OPERATORNUMBER})*9999.0+
                last(//mRSRP[{#SNMPVALUE}])
              description: |
                (4G only)  Reference Signal Receive Power is the average power of Resource Elements (RE) that carry cell specific Reference Signals (RS) over the entire bandwidth. RSRP does a better job of measuring signal power from a specific sector while potentially excluding noise and interference from other sectors.
                -44 to -80 Excellent. -81 to -109 Good. -110 to -120 Slow <-121 Unusable
              preprocessing:
                -
                  type: IN_RANGE
                  parameters:
                    - '-1000.0'
                    - '2000.0'
              tags:
                -
                  tag: Application
                  value: 'TELTONIKA-MIB::mobile'
            -
              uuid: 1a718874208b4d27a6722c0c9e116862
              name: 'mdRSRP for {#SNMPVALUE}'
              type: SNMP_AGENT
              snmp_oid: '.1.3.6.1.4.1.48690.2.2.1.20.{#SNMPINDEX}'
              key: 'mRSRP[{#SNMPVALUE}]'
              delay: 3m
              history: 365d
              value_type: FLOAT
              units: dBm
              description: |
                (4G only) Reference Signal Receive Power is the average power of Resource Elements (RE) that carry cell specific Reference Signals (RS) over the entire bandwidth. RSRP does a better job of measuring signal power from a specific sector while potentially excluding noise and interference from other sectors.
                -44 to -80 Excellent. -81 to -109 Good. -110 to -120 Slow <-121 Unusable
              preprocessing:
                -
                  type: IN_RANGE
                  parameters:
                    - '-150'
                    - '-20'
                  error_handler: DISCARD_VALUE
              tags:
                -
                  tag: Application
                  value: 'TELTONIKA-MIB::mobile'
              trigger_prototypes:
                -
                  uuid: ff499f5656d9404babafdcf8518e4cad
                  expression: 'last(/Template Teltonika RUT950 and RUT955 SNMP/mRSRP[{#SNMPVALUE}])<-109'
                  recovery_mode: RECOVERY_EXPRESSION
                  recovery_expression: 'last(/Template Teltonika RUT950 and RUT955 SNMP/mRSRP[{#SNMPVALUE}])>-110'
                  name: 'Low Signal RSRP'
                  priority: INFO
                  description: 'Signal Strength RSRP < -109.'
            -
              uuid: 44a14189040d45dc8cfc9662e81725e5
              name: 'mdRSRQ for {#SNMPVALUE}'
              type: SNMP_AGENT
              snmp_oid: '.1.3.6.1.4.1.48690.2.2.1.21.{#SNMPINDEX}'
              key: 'mRSRQ[{#SNMPVALUE}]'
              delay: 3m
              history: 365d
              value_type: FLOAT
              units: dBm
              description: |
                (4G only) Quality considering also RSSI and the number of used Resource Blocks (N).
                RSRQ = (N * RSRP) / RSSI measured over the same bandwidth.
                RSRQ is a C/I type of measurement and it indicates the quality of the received reference signal. The RSRQ measurement provides additional information when RSRP is not sufficient to make a reliable handover or cell reselection decision. 
                 -3 to -10	Excellent. -11 to -15 Good. -16 to -19 Slow. –<-19.5 Unusable
              preprocessing:
                -
                  type: IN_RANGE
                  parameters:
                    - '-30'
                    - '-1'
                  error_handler: DISCARD_VALUE
              tags:
                -
                  tag: Application
                  value: 'TELTONIKA-MIB::mobile'
            -
              uuid: 67b1a51d48c94a02a2efbfd07e426f29
              name: 'mdSerial for {#SNMPVALUE}'
              type: SNMP_AGENT
              snmp_oid: '.1.3.6.1.4.1.48690.2.2.1.7.{#SNMPINDEX}'
              key: 'mSerial[{#SNMPVALUE}]'
              delay: 60m
              trends: '0'
              value_type: TEXT
              description: 'Serial number'
              tags:
                -
                  tag: Application
                  value: 'TELTONIKA-MIB::mobile'
            -
              uuid: eb4c5e6299a64574acb81a823ede7082
              name: 'mdRSSI for {#SNMPVALUE} operator {#OPERATOR} cellID {#MCELLID}'
              type: CALCULATED
              key: 'mSignal[{#SNMPVALUE}-{#MCELLID}]'
              delay: 3m
              history: 365d
              value_type: FLOAT
              units: dBm
              params: |
                (last(//mCellID[{#SNMPVALUE}])<>{#MCELLID})*9999.0+
                last(//mSignal[{#SNMPVALUE}])
              description: |
                > -65 Excellent. -64 to -75 Good. -76 to -85 Decent, may disconnect. -86 to -100 Slow with frequent disconnects.-101 to -125 Unusable.
                
                The average total received power observed only in OFDM symbols containing reference symbols for antenna port 0 (i.e., OFDM symbol 0 & 4 in a slot) in the measurement bandwidth over N resource blocks.
                The total received power of the carrier RSSI includes the power from co-channel serving & non-serving cells, adjacent channel interference, thermal noise, etc. Total measured over 12-subcarriers including RS from Serving Cell, Traffic in the Serving Cell
              preprocessing:
                -
                  type: IN_RANGE
                  parameters:
                    - '-1000.0'
                    - '2000.0'
              tags:
                -
                  tag: Application
                  value: 'TELTONIKA-MIB::mobile'
            -
              uuid: 60ce966d1a914884962f50d19c43ec8c
              name: 'mdRSSI for {#SNMPVALUE} operator {#OPERATOR}'
              type: CALCULATED
              key: 'mSignal[{#SNMPVALUE}-{#OPERATORNUMBER}]'
              delay: 3m
              history: 365d
              value_type: FLOAT
              units: dBm
              params: |
                (last(//mOperatorNumber[{#SNMPVALUE}])<>{#OPERATORNUMBER})*9999.0+
                last(//mSignal[{#SNMPVALUE}])
              description: |
                > -65 Excellent. -64 to -75 Good. -76 to -85 Decent, may disconnect. -86 to -100 Slow with frequent disconnects.-101 to -125 Unusable.
                
                The average total received power observed only in OFDM symbols containing reference symbols for antenna port 0 (i.e., OFDM symbol 0 & 4 in a slot) in the measurement bandwidth over N resource blocks.
                The total received power of the carrier RSSI includes the power from co-channel serving & non-serving cells, adjacent channel interference, thermal noise, etc. Total measured over 12-subcarriers including RS from Serving Cell, Traffic in the Serving Cell
              preprocessing:
                -
                  type: IN_RANGE
                  parameters:
                    - '-1000.0'
                    - '2000.0'
              tags:
                -
                  tag: Application
                  value: 'TELTONIKA-MIB::mobile'
            -
              uuid: c5e83ee5780f403d9005aa9afbd8dc23
              name: 'mdRSSI for {#SNMPVALUE}'
              type: SNMP_AGENT
              snmp_oid: '.1.3.6.1.4.1.48690.2.2.1.12.{#SNMPINDEX}'
              key: 'mSignal[{#SNMPVALUE}]'
              delay: 3m
              value_type: FLOAT
              units: dBm
              description: |
                > -65 Excellent. -64 to -75 Good. -76 to -85 Decent, may disconnect. -86 to -100 Slow with frequent disconnects.-101 to -125 Unusable.
                
                The average total received power observed only in OFDM symbols containing reference symbols for antenna port 0 (i.e., OFDM symbol 0 & 4 in a slot) in the measurement bandwidth over N resource blocks.
                The total received power of the carrier RSSI includes the power from co-channel serving & non-serving cells, adjacent channel interference, thermal noise, etc. Total measured over 12-subcarriers including RS from Serving Cell, Traffic in the Serving Cell
              preprocessing:
                -
                  type: IN_RANGE
                  parameters:
                    - '-180'
                    - '-40'
                  error_handler: DISCARD_VALUE
              tags:
                -
                  tag: Application
                  value: 'TELTONIKA-MIB::mobile'
              trigger_prototypes:
                -
                  uuid: 433f8b2a3e054e1cb523cf0e768f1a55
                  expression: 'last(/Template Teltonika RUT950 and RUT955 SNMP/mSignal[{#SNMPVALUE}])<-82'
                  recovery_mode: RECOVERY_EXPRESSION
                  recovery_expression: 'last(/Template Teltonika RUT950 and RUT955 SNMP/mSignal[{#SNMPVALUE}])>-80'
                  name: 'Low Signal RSSI'
                  priority: INFO
                -
                  uuid: dd161e5a5491475f879c0249a74ea813
                  expression: 'nodata(/Template Teltonika RUT950 and RUT955 SNMP/mSignal[{#SNMPVALUE}],600)=1'
                  name: 'Router offline (SNMP timeout RSSI)'
                  priority: WARNING
                  description: 'No SNMP data was collected for 600 seconds'
            -
              uuid: f6b9251576ea41a0929afaf9e26ddf86
              name: 'mdSimState for {#SNMPVALUE}'
              type: SNMP_AGENT
              snmp_oid: '.1.3.6.1.4.1.48690.2.2.1.9.{#SNMPINDEX}'
              key: 'mSimState[{#SNMPVALUE}]'
              delay: 10m
              trends: '0'
              value_type: TEXT
              description: 'SIM status'
              preprocessing:
                -
                  type: NOT_MATCHES_REGEX
                  parameters:
                    - unknown
                  error_handler: DISCARD_VALUE
              tags:
                -
                  tag: Application
                  value: 'TELTONIKA-MIB::mobile'
              trigger_prototypes:
                -
                  uuid: 61e5f5f912974ae68f3de395c6829d25
                  expression: 'last(/Template Teltonika RUT950 and RUT955 SNMP/mSimState[{#SNMPVALUE}])<>"inserted"'
                  recovery_mode: RECOVERY_EXPRESSION
                  recovery_expression: 'last(/Template Teltonika RUT950 and RUT955 SNMP/mSimState[{#SNMPVALUE}])="inserted"'
                  name: 'Simcard not inserted'
                  priority: WARNING
            -
              uuid: 7f18d650691b4ceb926cf7fc1f11bee2
              name: 'mdSINR for {#SNMPVALUE}'
              type: SNMP_AGENT
              snmp_oid: '.1.3.6.1.4.1.48690.2.2.1.19.{#SNMPINDEX}'
              key: 'mSINR[{#SNMPVALUE}]'
              delay: 3m
              value_type: FLOAT
              units: dB
              description: '>=20 Excellent. 20 to 13 Good. 13 to 11 Decent to slow, near 0 disconnects. <= 0 dB Unusable'
              preprocessing:
                -
                  type: IN_RANGE
                  parameters:
                    - '-100.0'
                    - '100.0'
                  error_handler: DISCARD_VALUE
              tags:
                -
                  tag: Application
                  value: 'TELTONIKA-MIB::mobile'
            -
              uuid: 349b210efdee4a6fb121fa00cf602f82
              name: 'mdTemperature for {#SNMPVALUE}'
              type: SNMP_AGENT
              snmp_oid: '.1.3.6.1.4.1.48690.2.2.1.17.{#SNMPINDEX}'
              key: 'mTemperature[{#SNMPVALUE}]'
              delay: 60m
              value_type: FLOAT
              description: 'Modem temperature'
              preprocessing:
                -
                  type: NOT_MATCHES_REGEX
                  parameters:
                    - '0'
                  error_handler: DISCARD_VALUE
              tags:
                -
                  tag: Application
                  value: 'TELTONIKA-MIB::mobile'
            -
              uuid: 475bf1b01b824445aa1ae8238abf7e56
              name: 'mdTraffic monthly for {#SNMPVALUE} operator {#OPERATOR}'
              type: CALCULATED
              key: 'mTraffic[{#SNMPVALUE}-{#OPERATORNUMBER}]'
              delay: 12m
              history: 365d
              units: B
              params: |
                last(//mTraffic[{#SNMPVALUE}-{#OPERATORNUMBER}])+
                (avg(//net.if.total[ifbps.11],12m))*90*(last(//mOperatorNumber[{#SNMPVALUE}])={#OPERATORNUMBER})+
                (dayofmonth()=1)*(time()>000000)*(time()<002400)*(last(//mTraffic[{#SNMPVALUE}-{#OPERATORNUMBER}])>0)*-10*last(//mTraffic[{#SNMPVALUE}-{#OPERATORNUMBER}])
              description: |
                Accumulated monthly mobile data usage for each operator
                Tested on RUT950 where wwan is always index 11
                If your router has dual modems there will probably be multiple wwan interfaces so this item can be disabled.
              preprocessing:
                -
                  type: CHECK_NOT_SUPPORTED
                  parameters:
                    - ''
                  error_handler: CUSTOM_VALUE
                  error_handler_params: '0'
                -
                  type: IN_RANGE
                  parameters:
                    - '0'
                    - ''
              tags:
                -
                  tag: Application
                  value: 'TELTONIKA-MIB::mobile'
              trigger_prototypes:
                -
                  uuid: e6861b134cf44171a58c136275940125
                  expression: 'last(/Template Teltonika RUT950 and RUT955 SNMP/mTraffic[{#SNMPVALUE}-{#OPERATORNUMBER}])>{$IF.UTIL.MONTHLY}'
                  name: 'High monthly traffic usage for {#SNMPVALUE} operator {#OPERATOR} (>{$IF.UTIL.MONTHLY})'
                  opdata: 'mTraffic[{#SNMPVALUE}-{#OPERATORNUMBER}]'
                  priority: INFO
                  manual_close: 'YES'
          graph_prototypes:
            -
              uuid: f362a61c62524f40a73519809f1801c9
              name: 'ICMP by operator {#SNMPVALUE} - {#OPERATOR}'
              graph_items:
                -
                  sortorder: '1'
                  color: FF4000
                  item:
                    host: 'Template Teltonika RUT950 and RUT955 SNMP'
                    key: 'icmppingloss-[{#OPERATORNUMBER}]'
                -
                  sortorder: '2'
                  color: 00FF00
                  yaxisside: RIGHT
                  item:
                    host: 'Template Teltonika RUT950 and RUT955 SNMP'
                    key: 'icmppingsec-[{#OPERATORNUMBER}]'
            -
              uuid: 5684067275aa4bf5bdcd9bba5379d137
              name: 'Traffic monthly for {#SNMPVALUE} operator {#OPERATOR}'
              graph_items:
                -
                  sortorder: '1'
                  color: 199C0D
                  item:
                    host: 'Template Teltonika RUT950 and RUT955 SNMP'
                    key: 'mTraffic[{#SNMPVALUE}-{#OPERATORNUMBER}]'
            -
              uuid: 351c4d56df6641e8ac50e6763bbd5131
              name: '{#SNMPVALUE} - {#OPERATOR} - RSRP by operator'
              graph_items:
                -
                  sortorder: '1'
                  color: 199C0D
                  item:
                    host: 'Template Teltonika RUT950 and RUT955 SNMP'
                    key: 'mRSRP[{#SNMPVALUE}-{#OPERATORNUMBER}]'
                -
                  sortorder: '2'
                  color: F7941D
                  item:
                    host: 'Template Teltonika RUT950 and RUT955 SNMP'
                    key: 'icmppingloss-[{#OPERATORNUMBER}]'
                -
                  sortorder: '3'
                  color: FC6EA3
                  item:
                    host: 'Template Teltonika RUT950 and RUT955 SNMP'
                    key: 'icmppingsec-[{#OPERATORNUMBER}]'
            -
              uuid: ecf316d053c94fe7aa75c85973df58a7
              name: '{#SNMPVALUE} - {#OPERATOR} - {#MCELLID} Signal by cellID'
              graph_items:
                -
                  sortorder: '1'
                  color: 199C0D
                  item:
                    host: 'Template Teltonika RUT950 and RUT955 SNMP'
                    key: 'mRSRP[{#SNMPVALUE}-{#MCELLID}]'
                -
                  sortorder: '2'
                  color: F63100
                  item:
                    host: 'Template Teltonika RUT950 and RUT955 SNMP'
                    key: 'mSignal[{#SNMPVALUE}-{#MCELLID}]'
            -
              uuid: 17b0950bc19c4dd8aa7098bc625c0b71
              name: '{#SNMPVALUE} Signal levels combined'
              graph_items:
                -
                  sortorder: '1'
                  color: 199C0D
                  item:
                    host: 'Template Teltonika RUT950 and RUT955 SNMP'
                    key: 'mRSRP[{#SNMPVALUE}]'
                -
                  sortorder: '2'
                  color: F63100
                  item:
                    host: 'Template Teltonika RUT950 and RUT955 SNMP'
                    key: 'mRSRQ[{#SNMPVALUE}]'
                -
                  sortorder: '3'
                  color: 2774A4
                  item:
                    host: 'Template Teltonika RUT950 and RUT955 SNMP'
                    key: 'mSignal[{#SNMPVALUE}]'
                -
                  sortorder: '4'
                  color: F7941D
                  yaxisside: RIGHT
                  item:
                    host: 'Template Teltonika RUT950 and RUT955 SNMP'
                    key: 'mSINR[{#SNMPVALUE}]'
        -
          uuid: 8de7e666c8de4f19a221a879fa058823
          name: 'Network ARP Entry'
          type: SNMP_AGENT
          snmp_oid: 'discovery[{#IPNETADDRESS}, 1.3.6.1.2.1.4.22.1.3, {#IPPHYSADDRESS}, 1.3.6.1.2.1.4.22.1.2]'
          key: TELTONIKA-MIB.netArpEntry
          delay: 1h
          item_prototypes:
            -
              uuid: 96dee2f1d7924b6894ad2eb539b29c5c
              name: 'Network ARP entry {#IPPHYSADDRESS}'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.2.1.4.22.1.3.{#SNMPINDEX}'
              key: 'NetArpEntry[{#IPPHYSADDRESS}]'
              delay: 30m
              trends: '0'
              value_type: TEXT
        -
          uuid: ce155f14a0ad4fe485926be381ec42e6
          name: 'Network IP'
          type: SNMP_AGENT
          snmp_oid: 'discovery[{#IFNETADDRESS}, 1.3.6.1.2.1.4.20.1.1, {#IFINDEX}, 1.3.6.1.2.1.4.20.1.2, {#IFNETMASK}, 1.3.6.1.2.1.4.20.1.3]'
          key: TELTONIKA-MIB.netIP
          delay: 10m
          filter:
            conditions:
              -
                macro: '{#IFNETADDRESS}'
                value: 127.0.0.1
                operator: NOT_MATCHES_REGEX
                formulaid: A
          item_prototypes:
            -
              uuid: b6ccdd2d41344f868802c9c3f46c85fd
              name: 'Network Interface #{#IFINDEX} IP'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.2.1.4.20.1.1.{#SNMPINDEX}'
              key: 'netInterfaceIP[{#IFINDEX}]'
              delay: 10m
              trends: '0'
              value_type: TEXT
              trigger_prototypes:
                -
                  uuid: ca068c898947414ebd3d978e5a9b0949
                  expression: '(last(/Template Teltonika RUT950 and RUT955 SNMP/netInterfaceIP[{#IFINDEX}],#1)<>last(/Template Teltonika RUT950 and RUT955 SNMP/netInterfaceIP[{#IFINDEX}],#2))>0'
                  name: 'IP Changed on Interface {#IFINDEX}'
            -
              uuid: 84603e5e0efe48d4bd874215e45096ae
              name: 'Network Interface #{#IFINDEX} Netmask'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.2.1.4.20.1.3.{#SNMPINDEX}'
              key: 'netInterfaceNetmask[{#IFINDEX}]'
              delay: 1d
              trends: '0'
              value_type: TEXT
        -
          uuid: 42faf6c6f7dd4596b1c9cf55d8b9b592
          name: 'Storage discovery'
          type: SNMP_AGENT
          snmp_oid: 'discovery[{#FSNAME},1.3.6.1.2.1.25.2.3.1.3,{#FSTYPE},1.3.6.1.2.1.25.2.3.1.2,{#ALLOC_UNITS},1.3.6.1.2.1.25.2.3.1.4]'
          key: 'vfs.fs.discovery[snmp]'
          delay: 1h
          filter:
            evaltype: AND
            conditions:
              -
                macro: '{#FSTYPE}'
                value: '{$VFS.FS.FSTYPE.MATCHES}'
                formulaid: C
              -
                macro: '{#FSTYPE}'
                value: '{$VFS.FS.FSTYPE.NOT_MATCHES}'
                operator: NOT_MATCHES_REGEX
                formulaid: D
              -
                macro: '{#FSNAME}'
                value: '{$VFS.FS.FSNAME.MATCHES}'
                formulaid: A
              -
                macro: '{#FSNAME}'
                value: '{$VFS.FS.FSNAME.NOT_MATCHES}'
                operator: NOT_MATCHES_REGEX
                formulaid: B
          description: 'HOST-RESOURCES-MIB::hrStorage discovery with storage filter.'
          item_prototypes:
            -
              uuid: cac50e065b414d39af11c48351399812
              name: 'Storage {#FSNAME}: Space utilization'
              type: CALCULATED
              key: 'vfs.fs.pused[storageUsedPercentage.{#SNMPINDEX}]'
              delay: 1d
              history: 7d
              value_type: FLOAT
              units: '%'
              params: '(last(//vfs.fs.used[hrStorageUsed.{#SNMPINDEX}])/last(//vfs.fs.total[hrStorageSize.{#SNMPINDEX}]))*100'
              description: 'Space utilization in % for {#FSNAME}'
              preprocessing:
                -
                  type: CHECK_NOT_SUPPORTED
                  parameters:
                    - ''
              tags:
                -
                  tag: Application
                  value: 'Filesystem {#FSNAME}'
            -
              uuid: 91894df13dee4ddcb083286e3d857b92
              name: 'Storage {#FSNAME}: Total space'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.2.1.25.2.3.1.5.{#SNMPINDEX}'
              key: 'vfs.fs.total[hrStorageSize.{#SNMPINDEX}]'
              delay: 1d
              history: 7d
              units: B
              description: |
                MIB: HOST-RESOURCES-MIB
                The size of the storage represented by this entry, in units of hrStorageAllocationUnits.
                This object is writable to allow remote configuration of the size of the storage area in those cases where such an operation makes sense and is possible on the underlying system.
                For example, the amount of main storage allocated to a buffer pool might be modified or the amount of disk space allocated to virtual storage might be modified.
              preprocessing:
                -
                  type: MULTIPLIER
                  parameters:
                    - '{#ALLOC_UNITS}'
              tags:
                -
                  tag: Application
                  value: 'Filesystem {#FSNAME}'
            -
              uuid: 6bc61bca52cc4770a20fe7c3d67e6add
              name: 'Storage {#FSNAME}: Used space'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.2.1.25.2.3.1.6.{#SNMPINDEX}'
              key: 'vfs.fs.used[hrStorageUsed.{#SNMPINDEX}]'
              delay: 1d
              history: 7d
              units: B
              description: |
                MIB: HOST-RESOURCES-MIB
                The amount of the storage represented by this entry that is allocated, in units of hrStorageAllocationUnits.
              preprocessing:
                -
                  type: MULTIPLIER
                  parameters:
                    - '{#ALLOC_UNITS}'
              tags:
                -
                  tag: Application
                  value: 'Filesystem {#FSNAME}'
          trigger_prototypes:
            -
              uuid: 02c138b6ce354d3ca9bd773b0eb82966
              expression: |
                last(/Template Teltonika RUT950 and RUT955 SNMP/vfs.fs.pused[storageUsedPercentage.{#SNMPINDEX}])>{$VFS.FS.PUSED.MAX.CRIT:"{#FSNAME}"} and
                ((last(/Template Teltonika RUT950 and RUT955 SNMP/vfs.fs.total[hrStorageSize.{#SNMPINDEX}])-last(/Template Teltonika RUT950 and RUT955 SNMP/vfs.fs.used[hrStorageUsed.{#SNMPINDEX}]))<5G or timeleft(/Template Teltonika RUT950 and RUT955 SNMP/vfs.fs.pused[storageUsedPercentage.{#SNMPINDEX}],1h,100)<1d) and {#FSNAME} <> "/rom"
              name: 'Teltonika {#FSNAME}: Disk space is critically low (used > {$VFS.FS.PUSED.MAX.CRIT:"{#FSNAME}"}%)'
              opdata: 'Space used: {ITEM.LASTVALUE3} of {ITEM.LASTVALUE2} ({ITEM.LASTVALUE1})'
              priority: AVERAGE
              description: |
                Two conditions should match: First, space utilization should be above {$VFS.FS.PUSED.MAX.CRIT:"{#FSNAME}"}.
                 Second condition should be one of the following:
                 - The disk free space is less than 5G.
                 - The disk will be full in less than 24 hours.
              manual_close: 'YES'
            -
              uuid: b3eb559ac2db47d4bf4a854b9c8ff5e6
              expression: |
                last(/Template Teltonika RUT950 and RUT955 SNMP/vfs.fs.pused[storageUsedPercentage.{#SNMPINDEX}])>{$VFS.FS.PUSED.MAX.WARN:"{#FSNAME}"} and
                ((last(/Template Teltonika RUT950 and RUT955 SNMP/vfs.fs.total[hrStorageSize.{#SNMPINDEX}])-last(/Template Teltonika RUT950 and RUT955 SNMP/vfs.fs.used[hrStorageUsed.{#SNMPINDEX}]))<10G or timeleft(/Template Teltonika RUT950 and RUT955 SNMP/vfs.fs.pused[storageUsedPercentage.{#SNMPINDEX}],1h,100)<1d) and {#FSNAME} <> "/rom"
              name: 'Teltonika {#FSNAME}: Disk space is low (used > {$VFS.FS.PUSED.MAX.WARN:"{#FSNAME}"}%)'
              opdata: 'Space used: {ITEM.LASTVALUE3} of {ITEM.LASTVALUE2} ({ITEM.LASTVALUE1})'
              priority: WARNING
              description: |
                Two conditions should match: First, space utilization should be above {$VFS.FS.PUSED.MAX.WARN:"{#FSNAME}"}.
                 Second condition should be one of the following:
                 - The disk free space is less than 10G.
                 - The disk will be full in less than 24 hours.
              manual_close: 'YES'
              dependencies:
                -
                  name: 'Teltonika {#FSNAME}: Disk space is critically low (used > {$VFS.FS.PUSED.MAX.CRIT:"{#FSNAME}"}%)'
                  expression: |
                    last(/Template Teltonika RUT950 and RUT955 SNMP/vfs.fs.pused[storageUsedPercentage.{#SNMPINDEX}])>{$VFS.FS.PUSED.MAX.CRIT:"{#FSNAME}"} and
                    ((last(/Template Teltonika RUT950 and RUT955 SNMP/vfs.fs.total[hrStorageSize.{#SNMPINDEX}])-last(/Template Teltonika RUT950 and RUT955 SNMP/vfs.fs.used[hrStorageUsed.{#SNMPINDEX}]))<5G or timeleft(/Template Teltonika RUT950 and RUT955 SNMP/vfs.fs.pused[storageUsedPercentage.{#SNMPINDEX}],1h,100)<1d) and {#FSNAME} <> "/rom"
            -
              uuid: e27799e19e5d4d42ac9633019c785039
              expression: |
                last(/Template Teltonika RUT950 and RUT955 SNMP/vfs.fs.pused[storageUsedPercentage.{#SNMPINDEX}])>{$VFS.FS.PUSED.MAX.CRIT:"{#FSNAME}"} and
                ((last(/Template Teltonika RUT950 and RUT955 SNMP/vfs.fs.total[hrStorageSize.{#SNMPINDEX}])-last(/Template Teltonika RUT950 and RUT955 SNMP/vfs.fs.used[hrStorageUsed.{#SNMPINDEX}]))<5G or timeleft(/Template Teltonika RUT950 and RUT955 SNMP/vfs.fs.pused[storageUsedPercentage.{#SNMPINDEX}],1h,100)<1d)
              name: '{#FSNAME}: Disk space is critically low (used > {$VFS.FS.PUSED.MAX.CRIT:"{#FSNAME}"}%)'
              opdata: 'Space used: {ITEM.LASTVALUE3} of {ITEM.LASTVALUE2} ({ITEM.LASTVALUE1})'
              status: DISABLED
              discover: NO_DISCOVER
              priority: AVERAGE
              description: |
                Two conditions should match: First, space utilization should be above {$VFS.FS.PUSED.MAX.CRIT:"{#FSNAME}"}.
                 Second condition should be one of the following:
                 - The disk free space is less than 5G.
                 - The disk will be full in less than 24 hours.
              manual_close: 'YES'
            -
              uuid: 882eeb3c676a4251b3367a303abd8336
              expression: |
                last(/Template Teltonika RUT950 and RUT955 SNMP/vfs.fs.pused[storageUsedPercentage.{#SNMPINDEX}])>{$VFS.FS.PUSED.MAX.WARN:"{#FSNAME}"} and
                ((last(/Template Teltonika RUT950 and RUT955 SNMP/vfs.fs.total[hrStorageSize.{#SNMPINDEX}])-last(/Template Teltonika RUT950 and RUT955 SNMP/vfs.fs.used[hrStorageUsed.{#SNMPINDEX}]))<10G or timeleft(/Template Teltonika RUT950 and RUT955 SNMP/vfs.fs.pused[storageUsedPercentage.{#SNMPINDEX}],1h,100)<1d)
              name: '{#FSNAME}: Disk space is low (used > {$VFS.FS.PUSED.MAX.WARN:"{#FSNAME}"}%)'
              opdata: 'Space used: {ITEM.LASTVALUE3} of {ITEM.LASTVALUE2} ({ITEM.LASTVALUE1})'
              status: DISABLED
              discover: NO_DISCOVER
              priority: WARNING
              description: |
                Two conditions should match: First, space utilization should be above {$VFS.FS.PUSED.MAX.WARN:"{#FSNAME}"}.
                 Second condition should be one of the following:
                 - The disk free space is less than 10G.
                 - The disk will be full in less than 24 hours.
              manual_close: 'YES'
              dependencies:
                -
                  name: '{#FSNAME}: Disk space is critically low (used > {$VFS.FS.PUSED.MAX.CRIT:"{#FSNAME}"}%)'
                  expression: |
                    last(/Template Teltonika RUT950 and RUT955 SNMP/vfs.fs.pused[storageUsedPercentage.{#SNMPINDEX}])>{$VFS.FS.PUSED.MAX.CRIT:"{#FSNAME}"} and
                    ((last(/Template Teltonika RUT950 and RUT955 SNMP/vfs.fs.total[hrStorageSize.{#SNMPINDEX}])-last(/Template Teltonika RUT950 and RUT955 SNMP/vfs.fs.used[hrStorageUsed.{#SNMPINDEX}]))<5G or timeleft(/Template Teltonika RUT950 and RUT955 SNMP/vfs.fs.pused[storageUsedPercentage.{#SNMPINDEX}],1h,100)<1d)
          graph_prototypes:
            -
              uuid: 8743aaebd5f34a81b2744217376772eb
              name: '{#FSNAME}: Disk space usage'
              width: '600'
              height: '340'
              type: PIE
              show_3d: 'YES'
              graph_items:
                -
                  color: '969696'
                  calc_fnc: LAST
                  type: GRAPH_SUM
                  item:
                    host: 'Template Teltonika RUT950 and RUT955 SNMP'
                    key: 'vfs.fs.total[hrStorageSize.{#SNMPINDEX}]'
                -
                  sortorder: '1'
                  color: C80000
                  calc_fnc: LAST
                  item:
                    host: 'Template Teltonika RUT950 and RUT955 SNMP'
                    key: 'vfs.fs.used[hrStorageUsed.{#SNMPINDEX}]'
        -
          uuid: 5f06d9015e4d4a83b0db9db3b5a8b8b8
          name: 'Memory discovery'
          type: SNMP_AGENT
          snmp_oid: 'discovery[{#MEMNAME},1.3.6.1.2.1.25.2.3.1.3,{#MEMTYPE},1.3.6.1.2.1.25.2.3.1.2,{#ALLOC_UNITS},1.3.6.1.2.1.25.2.3.1.4]'
          key: vm.memory.discovery
          delay: 1h
          filter:
            evaltype: AND
            conditions:
              -
                macro: '{#MEMTYPE}'
                value: '{$MEMORY.TYPE.MATCHES}'
                formulaid: C
              -
                macro: '{#MEMTYPE}'
                value: '{$MEMORY.TYPE.NOT_MATCHES}'
                operator: NOT_MATCHES_REGEX
                formulaid: D
              -
                macro: '{#MEMNAME}'
                value: '{$MEMORY.NAME.MATCHES}'
                formulaid: A
              -
                macro: '{#MEMNAME}'
                value: '{$MEMORY.NAME.NOT_MATCHES}'
                operator: NOT_MATCHES_REGEX
                formulaid: B
          description: 'HOST-RESOURCES-MIB::hrStorage discovery with memory filter'
          item_prototypes:
            -
              uuid: 56d62a488f6240589b17b99423bf3103
              name: '{#MEMNAME}: Total memory'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.2.1.25.2.3.1.5.{#SNMPINDEX}'
              key: 'vm.memory.total[hrStorageSize.{#SNMPINDEX}]'
              delay: 1d
              history: 7d
              units: B
              description: |
                MIB: HOST-RESOURCES-MIB
                The size of the storage represented by this entry, in units of hrStorageAllocationUnits.
                This object is writable to allow remote configuration of the size of the storage area in those cases where such an operation makes sense and is possible on the underlying system.
                For example, the amount of main memory allocated to a buffer pool might be modified or the amount of disk space allocated to virtual memory might be modified.
              preprocessing:
                -
                  type: MULTIPLIER
                  parameters:
                    - '{#ALLOC_UNITS}'
              tags:
                -
                  tag: Application
                  value: Memory
            -
              uuid: 338260f4acea40b083439e8513ead969
              name: '{#MEMNAME}: Used memory'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.2.1.25.2.3.1.6.{#SNMPINDEX}'
              key: 'vm.memory.used[hrStorageUsed.{#SNMPINDEX}]'
              delay: 10m
              history: 7d
              units: B
              description: |
                MIB: HOST-RESOURCES-MIB
                The amount of the storage represented by this entry that is allocated, in units of hrStorageAllocationUnits.
              preprocessing:
                -
                  type: MULTIPLIER
                  parameters:
                    - '{#ALLOC_UNITS}'
              tags:
                -
                  tag: Application
                  value: Memory
            -
              uuid: ec8b06e543b845ba9dce770f90fdedbb
              name: '{#MEMNAME}: Memory utilization'
              type: CALCULATED
              key: 'vm.memory.util[memoryUsedPercentage.{#SNMPINDEX}]'
              delay: 10m
              history: 7d
              value_type: FLOAT
              units: '%'
              params: 'last(//vm.memory.used[hrStorageUsed.{#SNMPINDEX}])/last(//vm.memory.total[hrStorageSize.{#SNMPINDEX}])*100'
              description: 'Memory utilization in %'
              tags:
                -
                  tag: Application
                  value: Memory
              trigger_prototypes:
                -
                  uuid: c99466e38e58477c8ec2c61a5314773a
                  expression: 'min(/Template Teltonika RUT950 and RUT955 SNMP/vm.memory.util[memoryUsedPercentage.{#SNMPINDEX}],5m)>{$MEMORY.UTIL.MAX}'
                  name: '{#MEMNAME}: High memory utilization (>{$MEMORY.UTIL.MAX}% for 5m)'
                  priority: AVERAGE
                  description: 'The system is running out of free memory.'
          graph_prototypes:
            -
              uuid: 1aa36a5bba9647eaa3c347ed97fee4cd
              name: '{#MEMNAME}: Memory utilization'
              ymin_type_1: FIXED
              ymax_type_1: FIXED
              graph_items:
                -
                  drawtype: GRADIENT_LINE
                  color: 1A7C11
                  item:
                    host: 'Template Teltonika RUT950 and RUT955 SNMP'
                    key: 'vm.memory.util[memoryUsedPercentage.{#SNMPINDEX}]'
      macros:
        -
          macro: '{$CPU.UTIL.CRIT}'
          value: '90'
        -
          macro: '{$ICMP_LOSS_WARN}'
          value: '20'
        -
          macro: '{$ICMP_RESPONSE_TIME_WARN}'
          value: '0.25'
        -
          macro: '{$IF.ERRORS.WARN}'
          value: '2'
        -
          macro: '{$IF.UTIL.DAILY}'
          value: 5G
          description: 'Daily traffic usage'
        -
          macro: '{$IF.UTIL.MAX}'
          value: '90'
          description: 'percentage of interface speed'
        -
          macro: '{$IF.UTIL.MONTHLY}'
          value: 15G
          description: 'Warning lever for high traffic consumption'
        -
          macro: '{$IF.UTIL.WEEKLY}'
          value: 10G
          description: 'Weekly traffic usage'
        -
          macro: '{$IFCONTROL}'
          value: '1'
        -
          macro: '{$MEMORY.NAME.MATCHES}'
          value: '.*'
        -
          macro: '{$MEMORY.NAME.NOT_MATCHES}'
          value: CHANGE_IF_NEEDED
        -
          macro: '{$MEMORY.TYPE.MATCHES}'
          value: '.*(\.2|hrStorageRam)$'
        -
          macro: '{$MEMORY.TYPE.NOT_MATCHES}'
          value: CHANGE_IF_NEEDED
        -
          macro: '{$MEMORY.UTIL.MAX}'
          value: '90'
        -
          macro: '{$NET.IF.IFADMINSTATUS.MATCHES}'
          value: '^.*'
          description: 'Ignore notPresent(6)'
        -
          macro: '{$NET.IF.IFADMINSTATUS.NOT_MATCHES}'
          value: ^2$
          description: 'Ignore down(2) administrative status'
        -
          macro: '{$NET.IF.IFALIAS.MATCHES}'
          value: '.*'
        -
          macro: '{$NET.IF.IFALIAS.NOT_MATCHES}'
          value: CHANGE_IF_NEEDED
        -
          macro: '{$NET.IF.IFDESCR.MATCHES}'
          value: '.*'
        -
          macro: '{$NET.IF.IFDESCR.NOT_MATCHES}'
          value: CHANGE_IF_NEEDED
        -
          macro: '{$NET.IF.IFNAME.MATCHES}'
          value: '^.*$'
        -
          macro: '{$NET.IF.IFNAME.NOT_MATCHES}'
          value: '(^Software Loopback Interface|^NULL[0-9.]*$|^[Ll]o[0-9.]*$|^[Ss]ystem$|^Nu[0-9.]*$|^veth[0-9a-z]+$|docker[0-9]+|br-[a-z0-9]{12})'
          description: 'Filter out loopbacks, nulls, docker veth links and docker0 bridge by default'
        -
          macro: '{$NET.IF.IFOPERSTATUS.MATCHES}'
          value: '^.*$'
        -
          macro: '{$NET.IF.IFOPERSTATUS.NOT_MATCHES}'
          value: ^6$
          description: 'Ignore notPresent(6)'
        -
          macro: '{$NET.IF.IFTYPE.MATCHES}'
          value: '.*'
        -
          macro: '{$NET.IF.IFTYPE.NOT_MATCHES}'
          value: CHANGE_IF_NEEDED
        -
          macro: '{$OID}'
          value: .1.3.6.1.4.1.48690
        -
          macro: '{$OID_MOD}'
          value: TELTONIKA-MIB
        -
          macro: '{$OID_PATH}'
          value: iso.org.dod.internet.private.enterprises.teltonika
        -
          macro: '{$SNMP_COMMUNITY}'
          value: public
        -
          macro: '{$SNMP_PORT}'
          value: '161'
        -
          macro: '{$VFS.FS.FSNAME.MATCHES}'
          value: .+
        -
          macro: '{$VFS.FS.FSNAME.NOT_MATCHES}'
          value: ^(/dev|/sys|/run|/proc|/rom|.+/shm$)
        -
          macro: '{$VFS.FS.FSTYPE.MATCHES}'
          value: '.*(\.4|\.9|hrStorageFixedDisk|hrStorageFlashMemory)$'
        -
          macro: '{$VFS.FS.FSTYPE.NOT_MATCHES}'
          value: CHANGE_IF_NEEDED
        -
          macro: '{$VFS.FS.PUSED.MAX.CRIT}'
          value: '90'
        -
          macro: '{$VFS.FS.PUSED.MAX.WARN}'
          value: '80'
      dashboards:
        -
          uuid: 65e480334626428e9132f820747078fa
          name: 'Signal and ping'
          pages:
            -
              widgets:
                -
                  type: GRAPH_PROTOTYPE
                  width: '24'
                  height: '4'
                  fields:
                    -
                      type: GRAPH_PROTOTYPE
                      name: graphid
                      value:
                        name: 'ICMP by operator {#SNMPVALUE} - {#OPERATOR}'
                        host: 'Template Teltonika RUT950 and RUT955 SNMP'
                -
                  type: GRAPH_PROTOTYPE
                  'y': '4'
                  width: '24'
                  height: '4'
                  fields:
                    -
                      type: INTEGER
                      name: source_type
                      value: '3'
                    -
                      type: ITEM_PROTOTYPE
                      name: itemid
                      value:
                        key: 'mSignal[{#SNMPVALUE}-{#OPERATORNUMBER}]'
                        host: 'Template Teltonika RUT950 and RUT955 SNMP'
                -
                  type: GRAPH_PROTOTYPE
                  'y': '8'
                  width: '24'
                  height: '5'
                  fields:
                    -
                      type: GRAPH_PROTOTYPE
                      name: graphid
                      value:
                        name: '{#SNMPVALUE} - {#OPERATOR} - RSRP by operator'
                        host: 'Template Teltonika RUT950 and RUT955 SNMP'
                -
                  type: GRAPH_PROTOTYPE
                  'y': '13'
                  width: '24'
                  height: '6'
                  fields:
                    -
                      type: INTEGER
                      name: columns
                      value: '1'
                    -
                      type: GRAPH_PROTOTYPE
                      name: graphid
                      value:
                        name: '{#SNMPVALUE} Signal levels combined'
                        host: 'Template Teltonika RUT950 and RUT955 SNMP'
                -
                  type: GRAPH_PROTOTYPE
                  'y': '19'
                  width: '24'
                  height: '12'
                  fields:
                    -
                      type: INTEGER
                      name: rows
                      value: '3'
                    -
                      type: GRAPH_PROTOTYPE
                      name: graphid
                      value:
                        name: '{#SNMPVALUE} - {#OPERATOR} - {#MCELLID} Signal by cellID'
                        host: 'Template Teltonika RUT950 and RUT955 SNMP'
        -
          uuid: f84c646ebf184d0c9bb856f01e7a6a9c
          name: Traffic
          pages:
            -
              widgets:
                -
                  type: GRAPH_PROTOTYPE
                  'y': '3'
                  width: '19'
                  height: '10'
                  fields:
                    -
                      type: INTEGER
                      name: rows
                      value: '4'
                    -
                      type: GRAPH_PROTOTYPE
                      name: graphid
                      value:
                        name: 'Interface {#IFNAME}({#IFALIAS}): Network traffic total monthly usage'
                        host: 'Template Teltonika RUT950 and RUT955 SNMP'
                -
                  type: GRAPH_PROTOTYPE
                  name: 'Traffic by operator'
                  width: '19'
                  height: '3'
                  fields:
                    -
                      type: INTEGER
                      name: source_type
                      value: '3'
                    -
                      type: ITEM_PROTOTYPE
                      name: itemid
                      value:
                        key: 'mTraffic[{#SNMPVALUE}-{#OPERATORNUMBER}]'
                        host: 'Template Teltonika RUT950 and RUT955 SNMP'
      valuemaps:
        -
          uuid: 8907ad41a51149518ce51dd4b1f05db4
          name: 'TELTONIKA-MIB::hssState'
          mappings:
            -
              value: '1'
              newvalue: authorized
            -
              value: '0'
              newvalue: notAuthorized
        -
          uuid: fa663c9071574232af3325a11843a6fe
          name: 'TELTONIKA-MIB::hsState'
          mappings:
            -
              value: '1'
              newvalue: enabled
            -
              value: '0'
              newvalue: disabled
        -
          uuid: fb2742b945074b6db01f1300ddb0bc42
          name: 'TELTONIKA-MIB::ifOperStatus'
          mappings:
            -
              value: '0'
              newvalue: down
            -
              value: '1'
              newvalue: up
            -
              value: '2'
              newvalue: down
            -
              value: '4'
              newvalue: unknown
            -
              value: '5'
              newvalue: dormant
            -
              value: '6'
              newvalue: notPresent
            -
              value: '7'
              newvalue: lowerLayerDown
        -
          uuid: 03630b96dc394c3cba8acb3ed5b8f36f
          name: 'TELTONIKA-MIB::ifType'
          mappings:
            -
              value: '1'
              newvalue: other
            -
              value: '6'
              newvalue: ethernetCsmacd
            -
              value: '23'
              newvalue: ppp
            -
              value: '24'
              newvalue: softwareLoopback
            -
              value: '48'
              newvalue: modem
            -
              value: '117'
              newvalue: gigabitEthernet
            -
              value: '131'
              newvalue: tunnel
  graphs:
    -
      uuid: ee8e00aa57564b2d9874bcda2a4f1aad
      name: 'CPU utilization'
      ymin_type_1: FIXED
      ymax_type_1: FIXED
      graph_items:
        -
          drawtype: GRADIENT_LINE
          color: 1A7C11
          item:
            host: 'Template Teltonika RUT950 and RUT955 SNMP'
            key: system.cpu.util
