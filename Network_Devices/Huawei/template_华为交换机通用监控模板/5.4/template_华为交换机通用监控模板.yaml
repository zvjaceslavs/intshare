zabbix_export:
  version: '5.4'
  date: '2021-11-21T22:09:37Z'
  groups:
    -
      uuid: 36bff6c29af64692839d077febfc7079
      name: 'Templates/Network devices'
  templates:
    -
      uuid: 2297a568cf524e73bb0ec14e9cb004f1
      template: monitor_Switch_Huawei
      name: 华为交换机监控模板
      description: |
        ## Overview
        
        华为交换机监控模板
        
        
        已在S系列、CloudEngine系列设备完成验证
        
        
        主要包括CPU利用率、内存利用率、端口状态、端口带宽利用率、端口报文速率、实体状态监控
        
        
        将宏 {$CLOUD\_SNMP\_COMMUNITY} 替换为实际团体字即可
        
        
         
        
        
        
        ## Author
        
        zhangzhefeng
        
        
      groups:
        -
          name: 'Templates/Network devices'
      items:
        -
          uuid: 4673924a6ed84b92a3a8a4ef25f6b98f
          name: ping丢包率
          type: SIMPLE
          key: 'icmppingloss[,10,,,]'
          delay: 5m
          history: 7d
          trends: 0d
          value_type: FLOAT
          units: '%'
          tags:
            -
              tag: Application
              value: ping检测
          triggers:
            -
              uuid: 29c429eb6b43463682f1b55fc42a30b9
              expression: 'avg(/monitor_Switch_Huawei/icmppingloss[,10,,,],10m)>{$ICMP_LOSS_WARN}'
              name: 'ICMP ping 丢包'
              priority: AVERAGE
              type: MULTIPLE
              manual_close: 'YES'
              dependencies:
                -
                  name: 'ICMP ping不可达'
                  expression: 'last(/monitor_Switch_Huawei/icmpping[,5,,,],#1)=0 and last(/monitor_Switch_Huawei/icmpping[,5,,,],#2)=1'
        -
          uuid: 774fa11189294538870cb7f02ea217a9
          name: ping时延
          type: SIMPLE
          key: 'icmppingsec[,10,,,,avg]'
          delay: 5m
          history: 7d
          trends: 0d
          value_type: FLOAT
          units: s
          tags:
            -
              tag: Application
              value: ping检测
          triggers:
            -
              uuid: d4db800720104a3a8bdbbb515d7d28b6
              expression: 'min(/monitor_Switch_Huawei/icmppingsec[,10,,,,avg],10m)>{$ICMP_RESPONSE_TIME_WARN}'
              name: 'ICMP ping 时延高'
              priority: AVERAGE
              type: MULTIPLE
              manual_close: 'YES'
              dependencies:
                -
                  name: 'ICMP ping不可达'
                  expression: 'last(/monitor_Switch_Huawei/icmpping[,5,,,],#1)=0 and last(/monitor_Switch_Huawei/icmpping[,5,,,],#2)=1'
        -
          uuid: c825996d26694df8a2472ec9617a41f2
          name: 'ICMP ping'
          type: SIMPLE
          key: 'icmpping[,5,,,]'
          history: 7d
          trends: 0d
          tags:
            -
              tag: Application
              value: ping检测
          triggers:
            -
              uuid: e3c91285636d4635b9c315490a73fbaf
              expression: 'last(/monitor_Switch_Huawei/icmpping[,5,,,],#1)=0 and last(/monitor_Switch_Huawei/icmpping[,5,,,],#2)=1'
              name: 'ICMP ping不可达'
              priority: HIGH
              type: MULTIPLE
              manual_close: 'YES'
            -
              uuid: 380fd276f9e14a98b3186e5838f834f5
              expression: 'last(/monitor_Switch_Huawei/icmpping[,5,,,],#1)=0'
              name: 监控失效（ping不通）
              priority: INFO
              manual_close: 'YES'
              tags:
                -
                  tag: 监控失效原因
                  value: ping不通
        -
          uuid: aaea62a92d324f7f87b3033b9c4d3331
          name: trap消息
          type: SNMP_TRAP
          key: 'snmptrap[""]'
          delay: '0'
          history: 30d
          trends: '0'
          value_type: LOG
          tags:
            -
              tag: Application
              value: trap消息
          triggers:
            -
              uuid: 71871868d1414c44b5c0f2f3f5bc9958
              expression: 'find(/monitor_Switch_Huawei/snmptrap[""],,"iregexp",".*")=1'
              name: trap告警
              priority: AVERAGE
              type: MULTIPLE
              manual_close: 'YES'
            -
              uuid: 6e10a36bed0a476ab4318e1efeb2a3c4
              expression: 'find(/monitor_Switch_Huawei/snmptrap[""],,"iregexp","coldStart")=1'
              name: 冷重启告警
              priority: HIGH
              type: MULTIPLE
              manual_close: 'YES'
            -
              uuid: 5a450df630a44128981aaf8ac0f02889
              expression: 'find(/monitor_Switch_Huawei/snmptrap[""],,"iregexp","warmStart")=1'
              name: 热重启告警
              priority: HIGH
              type: MULTIPLE
              manual_close: 'YES'
            -
              uuid: 79bbfded29a54d09afae893f534fc9f9
              expression: 'find(/monitor_Switch_Huawei/snmptrap[""],,"iregexp","linkDown")=1'
              name: 端口down
              priority: HIGH
              type: MULTIPLE
              manual_close: 'YES'
        -
          uuid: fed3e03bd30c40e09d4960b53ccd975f
          name: 系统信息
          type: SNMP_AGENT
          snmp_oid: 1.3.6.1.2.1.1.1.0
          key: SystemDescription
          delay: 1h
          history: 3d
          trends: '0'
          value_type: TEXT
          tags:
            -
              tag: Application
              value: 系统信息
          triggers:
            -
              uuid: 5a3f166e20ac49ab8cc3df9e0282e258
              expression: 'nodata(/monitor_Switch_Huawei/SystemDescription,12h)=1'
              name: 监控失效（snmp不通）
              priority: INFO
              manual_close: 'YES'
              tags:
                -
                  tag: 监控失效原因
                  value: snmp不通
        -
          uuid: 267927ca763940259d64d3b668738a2f
          name: 运行时间
          type: SNMP_AGENT
          snmp_oid: 1.3.6.1.2.1.1.3.0
          key: SystemUpTime
          delay: 1h
          history: 3d
          trends: '0'
          value_type: TEXT
          tags:
            -
              tag: Application
              value: 系统信息
      discovery_rules:
        -
          uuid: 51ba5d73dbd542b5b7bf36a3c67861dd
          name: 板卡发现
          type: SNMP_AGENT
          snmp_oid: 'discovery[{#ENTITYDESCR},1.3.6.1.2.1.47.1.1.1.1.7,{#ENTITYTYPE},1.3.6.1.2.1.47.1.1.1.1.5]'
          key: BoardDiscovery
          delay: 12h
          filter:
            conditions:
              -
                macro: '{#ENTITYTYPE}'
                value: '9'
                formulaid: A
          lifetime: 0d
          item_prototypes:
            -
              uuid: 16bed8ea325346a0b8077019a783185e
              name: 'CPU利用率 {#ENTITYDESCR}'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.4.1.2011.5.25.31.1.1.1.1.5.{#SNMPINDEX}'
              key: 'CPUUsage.[{#SNMPINDEX}]'
              delay: 5m
              history: 3d
              trends: 0d
              units: '%'
              tags:
                -
                  tag: Application
                  value: CPU情况
              trigger_prototypes:
                -
                  uuid: 6f95791d3be84cd8a5e61d9798bf7648
                  expression: 'min(/monitor_Switch_Huawei/CPUUsage.[{#SNMPINDEX}],#2)>{$CPU_USAGE_THRESHOLD}'
                  name: CPU利用率高
                  priority: HIGH
                  description: '2个周期CPU利用率均大于宏{$CPU_USAGE_THRESHOLD}'
                  type: MULTIPLE
                  manual_close: 'YES'
            -
              uuid: ef51697b62f5467e912213b4c0973ecb
              name: '温度 {#ENTITYDESCR}'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.4.1.2011.5.25.31.1.1.1.1.11.{#SNMPINDEX}'
              key: 'hwEntityTemperature.[{#SNMPINDEX}]'
              delay: 5m
              history: 3d
              trends: 0d
              units: ℃
              tags:
                -
                  tag: Application
                  value: 温度情况
            -
              uuid: 6877d58c74fb4ab988482a571690f272
              name: '内存利用率 {#ENTITYDESCR}'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.4.1.2011.5.25.31.1.1.1.1.7.{#SNMPINDEX}'
              key: 'MemoryUsage.[{#SNMPINDEX}]'
              delay: 5m
              history: 3d
              trends: 0d
              units: '%'
              tags:
                -
                  tag: Application
                  value: 内存情况
              trigger_prototypes:
                -
                  uuid: 281a219b331844f1a97cfdf0a743eee8
                  expression: 'min(/monitor_Switch_Huawei/MemoryUsage.[{#SNMPINDEX}],#2)>{$MEMORY_USAGE_THRESHOLD}'
                  name: 内存利用率高
                  priority: HIGH
                  type: MULTIPLE
                  manual_close: 'YES'
        -
          uuid: b48006cdabf142cda9cfafc24b2abcc2
          name: 实体发现
          type: SNMP_AGENT
          snmp_oid: 'discovery[{#ENTITYDESCR},1.3.6.1.2.1.47.1.1.1.1.7,{#ENTITYTYPE},1.3.6.1.2.1.47.1.1.1.1.5]'
          key: EntityDiscovery
          delay: 12h
          filter:
            conditions:
              -
                macro: '{#ENTITYTYPE}'
                value: 6|7|9
                formulaid: A
          lifetime: 0d
          item_prototypes:
            -
              uuid: cf002184bda34badb086ef5dc5066371
              name: '实体告警状态 {#ENTITYDESCR}'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.4.1.2011.5.25.31.1.1.1.1.4.{#SNMPINDEX}'
              key: 'EntityAlarmStatus.[{#SNMPINDEX}]'
              delay: 10m
              history: 3d
              trends: 0d
              valuemap:
                name: private-HwAlarmStatus
              preprocessing:
                -
                  type: HEX_TO_DECIMAL
                  parameters:
                    - ''
              tags:
                -
                  tag: Application
                  value: 实体情况
              trigger_prototypes:
                -
                  uuid: c996ff0998bd4a728f88bbdbf95f907b
                  expression: 'last(/monitor_Switch_Huawei/EntityAlarmStatus.[{#SNMPINDEX}],#1)=5'
                  name: '{#ENTITYDESCR} 实体告警状态alarmOutstanding'
                  priority: HIGH
                  manual_close: 'YES'
                -
                  uuid: 489e7e0620b94c43beebb34a37ad2303
                  expression: 'last(/monitor_Switch_Huawei/EntityAlarmStatus.[{#SNMPINDEX}],#1)=2'
                  name: '{#ENTITYDESCR} 实体告警状态critical'
                  priority: HIGH
                  manual_close: 'YES'
                -
                  uuid: dc2cdd44d80b404aaeb4f81f4852a364
                  expression: 'last(/monitor_Switch_Huawei/EntityAlarmStatus.[{#SNMPINDEX}],#1)=1'
                  name: '{#ENTITYDESCR} 实体告警状态underRepair'
                  priority: HIGH
                  manual_close: 'YES'
            -
              uuid: 8b02001d80e8401c92d1e301d51b93b4
              name: '实体运行状态 {#ENTITYDESCR}'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.4.1.2011.5.25.31.1.1.1.1.2.{#SNMPINDEX}'
              key: 'EntityOperationStatus.[{#SNMPINDEX}]'
              delay: 10m
              history: 3d
              trends: 0d
              valuemap:
                name: private-hwEntityOperStatus
              tags:
                -
                  tag: Application
                  value: 实体情况
              trigger_prototypes:
                -
                  uuid: 8e53959bd7624d0abb8aac5aefbd3617
                  expression: 'last(/monitor_Switch_Huawei/EntityOperationStatus.[{#SNMPINDEX}],#1)=2'
                  name: '{#ENTITYDESCR} 实体运行状态disabled'
                  priority: HIGH
                  manual_close: 'YES'
                -
                  uuid: 2745f52cf0f844fabd543ac108f3a4d6
                  expression: 'last(/monitor_Switch_Huawei/EntityOperationStatus.[{#SNMPINDEX}],#1)=4'
                  name: '{#ENTITYDESCR} 实体运行状态offline'
                  priority: HIGH
                  manual_close: 'YES'
        -
          uuid: 4cc990adbe1248b08d1155c9791fe8a2
          name: 端口发现
          type: SNMP_AGENT
          snmp_oid: 'discovery[{#IFDESCR},IF-MIB::ifDescr,{#IFALIAS},IF-MIB::ifAlias]'
          key: InterfaceDiscovery_status
          delay: 12h
          filter:
            conditions:
              -
                macro: '{#IFDESCR}'
                value: '.*Vlan.*'
                operator: NOT_MATCHES_REGEX
                formulaid: A
          lifetime: 0d
          description: |
            You may also consider using IF-MIB::ifType or IF-MIB::ifAlias for discovery depending on your filtering needs.
            
            {$CLOUD_SNMP_COMMUNITY} is a global macro.
          item_prototypes:
            -
              uuid: 553d5f18e6664571b0ac8dd7cfafcb46
              name: '端口:{#IFDESCR}({#IFALIAS})状态'
              type: SNMP_AGENT
              snmp_oid: 'IF-MIB::ifOperStatus.{#SNMPINDEX}'
              key: 'InterfaceOperationStatus.[{#SNMPINDEX}]'
              delay: 5m
              history: 3d
              trends: 0d
              description: 'The current operational state of the interface.'
              tags:
                -
                  tag: Application
                  value: 端口状态
              trigger_prototypes:
                -
                  uuid: 79819fb8510a42c58303abd05274c077
                  expression: 'last(/monitor_Switch_Huawei/InterfaceOperationStatus.[{#SNMPINDEX}],#2)=1 and  last(/monitor_Switch_Huawei/InterfaceOperationStatus.[{#SNMPINDEX}],#1)<>1 and last(/monitor_Switch_Huawei/InterfaceOperationStatus.[{#SNMPINDEX}],#1)<>2'
                  recovery_mode: RECOVERY_EXPRESSION
                  recovery_expression: 'last(/monitor_Switch_Huawei/InterfaceOperationStatus.[{#SNMPINDEX}],#2)=1 and  last(/monitor_Switch_Huawei/InterfaceOperationStatus.[{#SNMPINDEX}],#1)=1'
                  name: '{#IFDESCR} 端口状态异常'
                  priority: AVERAGE
                  description: 因2019年10月1日二长7楼163方向防火墙出现状态7的告警，特增加此触发器
                  type: MULTIPLE
                  manual_close: 'YES'
                -
                  uuid: 89de77a14e55479c8fb420c7f18d29b2
                  expression: 'last(/monitor_Switch_Huawei/InterfaceOperationStatus.[{#SNMPINDEX}],#2)=1 and  last(/monitor_Switch_Huawei/InterfaceOperationStatus.[{#SNMPINDEX}],#1)=2'
                  recovery_mode: RECOVERY_EXPRESSION
                  recovery_expression: 'last(/monitor_Switch_Huawei/InterfaceOperationStatus.[{#SNMPINDEX}],#2)=1 and  last(/monitor_Switch_Huawei/InterfaceOperationStatus.[{#SNMPINDEX}],#1)=1'
                  name: '端口:{#IFDESCR} down'
                  priority: HIGH
                  type: MULTIPLE
                  manual_close: 'YES'
                  tags:
                    -
                      tag: 端口描述
                      value: '{#IFALIAS}'
        -
          uuid: 7a43a8785b2d42efb3a3ba320936ed28
          name: 端口发现
          type: SNMP_AGENT
          snmp_oid: 'discovery[{#IFDESCR},IF-MIB::ifDescr,{#IFSTATUS},IF-MIB::ifOperStatus,{#IFALIAS},IF-MIB::ifAlias]'
          key: InterfaceDiscovery_traffic
          delay: 12h
          filter:
            evaltype: AND
            conditions:
              -
                macro: '{#IFSTATUS}'
                value: '1'
                formulaid: E
              -
                macro: '{#IFDESCR}'
                value: '.*Vlan.*'
                operator: NOT_MATCHES_REGEX
                formulaid: B
              -
                macro: '{#IFDESCR}'
                value: '.*Loop.*'
                operator: NOT_MATCHES_REGEX
                formulaid: A
              -
                macro: '{#IFDESCR}'
                value: '.*VLAN.*'
                operator: NOT_MATCHES_REGEX
                formulaid: C
              -
                macro: '{#IFDESCR}'
                value: '.*NULL.*'
                operator: NOT_MATCHES_REGEX
                formulaid: D
          lifetime: 0d
          item_prototypes:
            -
              uuid: e45428e81beb446da24fe8c3254f1e65
              name: '端口带宽 {#IFDESCR}({#IFALIAS})'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.2.1.31.1.1.1.15.{#SNMPINDEX}'
              key: 'InterfaceBandwidth.[{#SNMPINDEX},{#IFDESCR}]'
              delay: 12h
              history: 3d
              trends: 0d
              units: Mbps
              tags:
                -
                  tag: Application
                  value: 端口带宽
            -
              uuid: a8741ddbe2b24a37bc529a8d419593d1
              name: '入方向带宽利用率 {#IFDESCR}({#IFALIAS})'
              type: CALCULATED
              key: 'InterfaceInBandwidthUsage.[{#SNMPINDEX},{#IFDESCR}]'
              delay: 10m
              history: 30d
              trends: 0d
              value_type: FLOAT
              units: '%'
              params: 'last(//InterfaceInTraffic.[{#SNMPINDEX},{#IFDESCR}])/last(//InterfaceBandwidth.[{#SNMPINDEX},{#IFDESCR}])/10000'
              tags:
                -
                  tag: Application
                  value: 入方向带宽利用率
              trigger_prototypes:
                -
                  uuid: b3dc7b8a41f3413d91cf5c2634518f4a
                  expression: 'last(/monitor_Switch_Huawei/InterfaceInBandwidthUsage.[{#SNMPINDEX},{#IFDESCR}])>{$BANDWIDTH_USAGE_IN_THRESHOLD}'
                  name: '{#IFDESCR} 入方向带宽利用率高'
                  priority: HIGH
                  type: MULTIPLE
                  manual_close: 'YES'
                  tags:
                    -
                      tag: 端口描述
                      value: '{#IFALIAS}'
            -
              uuid: 4a9ef5aac10c42c696840f9257c92284
              name: '入方向广播报文速率 {#IFDESCR}({#IFALIAS})'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.2.1.31.1.1.1.9.{#SNMPINDEX}'
              key: 'InterfaceInBroadcastPacketsTraffic.[{#SNMPINDEX},{#IFDESCR}]'
              delay: 10m
              history: 30d
              trends: 0d
              units: pps
              preprocessing:
                -
                  type: CHANGE_PER_SECOND
                  parameters:
                    - ''
              tags:
                -
                  tag: Application
                  value: 入方向广播包流量
            -
              uuid: c5c4399617a34eb7aa7354a9916d3068
              name: '入方向组播报文速率 {#IFDESCR}({#IFALIAS})'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.2.1.31.1.1.1.9.{#SNMPINDEX}'
              key: 'InterfaceInMulticastPacketsTraffic.[{#SNMPINDEX},{#IFDESCR}]'
              delay: 10m
              history: 30d
              trends: 0d
              preprocessing:
                -
                  type: CHANGE_PER_SECOND
                  parameters:
                    - ''
              tags:
                -
                  tag: Application
                  value: 入方向组播报文速率
            -
              uuid: eb264519f0f0458eb5caee86594efbd5
              name: '入方向错包 {#IFDESCR}({#IFALIAS})'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.2.1.2.2.1.14.{#SNMPINDEX}'
              key: 'InterfaceInPacketError.[{#SNMPINDEX},{#IFDESCR}]'
              delay: 30m
              history: 7d
              trends: 0d
              units: pps
              preprocessing:
                -
                  type: CHANGE_PER_SECOND
                  parameters:
                    - ''
              tags:
                -
                  tag: Application
                  value: 入方向错包
              trigger_prototypes:
                -
                  uuid: 4b2f222f043742d59ebb7657bc48da45
                  expression: 'last(/monitor_Switch_Huawei/InterfaceInPacketError.[{#SNMPINDEX},{#IFDESCR}])>{$ERROR_PACKETS_IN_THRESHOLD}'
                  name: '{#IFDESCR} 入方向错包率高'
                  priority: HIGH
                  type: MULTIPLE
                  manual_close: 'YES'
                  tags:
                    -
                      tag: 端口描述
                      value: '{#IFALIAS}'
            -
              uuid: d6090aa7004e4e2a9c639abb5abaa7e0
              name: '入方向流量 {#IFDESCR}({#IFALIAS})'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.2.1.31.1.1.1.6.{#SNMPINDEX}'
              key: 'InterfaceInTraffic.[{#SNMPINDEX},{#IFDESCR}]'
              delay: 10m
              history: 30d
              trends: 0d
              units: bps
              preprocessing:
                -
                  type: MULTIPLIER
                  parameters:
                    - '8'
                -
                  type: CHANGE_PER_SECOND
                  parameters:
                    - ''
              tags:
                -
                  tag: Application
                  value: 入方向流量
            -
              uuid: 64359495e5c047d58b88692a639c66cf
              name: '入方向单播报文速率 {#IFDESCR}({#IFALIAS})'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.2.1.31.1.1.1.7.{#SNMPINDEX}'
              key: 'InterfaceInUnicastPacketsTraffic.[{#SNMPINDEX},{#IFDESCR}]'
              delay: 10m
              history: 30d
              trends: 0d
              units: pps
              preprocessing:
                -
                  type: CHANGE_PER_SECOND
                  parameters:
                    - ''
              tags:
                -
                  tag: Application
                  value: 入方向单播报文速率
            -
              uuid: bf29ce8305aa4215b18f82fc2ed1db87
              name: '出方向带宽利用率 {#IFDESCR}({#IFALIAS})'
              type: CALCULATED
              key: 'InterfaceOutBandwidthUsage[{#SNMPINDEX},{#IFDESCR}]'
              delay: 10m
              history: 30d
              trends: 0d
              value_type: FLOAT
              units: '%'
              params: 'last(//InterfaceOutTraffic.[{#SNMPINDEX},{#IFDESCR}])/last(//InterfaceBandwidth.[{#SNMPINDEX},{#IFDESCR}])/10000'
              tags:
                -
                  tag: Application
                  value: 出方向带宽利用率
              trigger_prototypes:
                -
                  uuid: f5aa69d1e20249818369257a8ff97412
                  expression: 'last(/monitor_Switch_Huawei/InterfaceOutBandwidthUsage[{#SNMPINDEX},{#IFDESCR}])>{$BANDWIDTH_USAGE_OUT_THRESHOLD}'
                  name: '{#IFDESCR} 出方向带宽利用率高'
                  priority: HIGH
                  type: MULTIPLE
                  manual_close: 'YES'
                  tags:
                    -
                      tag: 端口描述
                      value: '{#IFALIAS}'
            -
              uuid: 20e1b2ce563445b49aa33086d8d75426
              name: '出方向广播报文速率 {#IFDESCR}({#IFALIAS})'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.2.1.31.1.1.1.13.{#SNMPINDEX}'
              key: 'InterfaceOutBroadcastPacketTraffic.[{#SNMPINDEX},{#IFDESCR}]'
              delay: 10m
              history: 30d
              trends: 0d
              units: pps
              preprocessing:
                -
                  type: CHANGE_PER_SECOND
                  parameters:
                    - ''
              tags:
                -
                  tag: Application
                  value: 出方向广播报文速率
            -
              uuid: 0b20a4a7cbd74b538497627a5c249d41
              name: '出方向组播报文速率 {#IFDESCR}({#IFALIAS})'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.2.1.31.1.1.1.12.{#SNMPINDEX}'
              key: 'InterfaceOutMulticastPackestTraffic.[{#SNMPINDEX},{#IFDESCR}]'
              delay: 10m
              history: 3d
              trends: 0d
              units: pps
              preprocessing:
                -
                  type: CHANGE_PER_SECOND
                  parameters:
                    - ''
              tags:
                -
                  tag: Application
                  value: 出方向组播报文速率
            -
              uuid: f0a242008bb94039b5e5ba031dec0c14
              name: '出方向错包 {#IFDESCR}({#IFALIAS})'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.2.1.2.2.1.20.{#SNMPINDEX}'
              key: 'InterfaceOutPacketError.[{#SNMPINDEX},{#IFDESCR}]'
              delay: 30m
              history: 7d
              trends: 0d
              units: pps
              preprocessing:
                -
                  type: CHANGE_PER_SECOND
                  parameters:
                    - ''
              tags:
                -
                  tag: Application
                  value: 出方向错包
              trigger_prototypes:
                -
                  uuid: 100d11a12d6149f896aa77b344ce30a4
                  expression: 'last(/monitor_Switch_Huawei/InterfaceOutPacketError.[{#SNMPINDEX},{#IFDESCR}])>{$ERROR_PACKETS_OUT_THRESHOLD}'
                  name: '{#IFDESCR} 出方向错包率高'
                  priority: HIGH
                  type: MULTIPLE
                  manual_close: 'YES'
                  tags:
                    -
                      tag: 端口描述
                      value: '{#IFALIAS}'
            -
              uuid: 9b2db0c2882b44829c91f50c72577298
              name: '出方向流量 {#IFDESCR}({#IFALIAS})'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.2.1.31.1.1.1.10.{#SNMPINDEX}'
              key: 'InterfaceOutTraffic.[{#SNMPINDEX},{#IFDESCR}]'
              delay: 10m
              history: 30d
              trends: 0d
              units: bps
              preprocessing:
                -
                  type: MULTIPLIER
                  parameters:
                    - '8'
                -
                  type: CHANGE_PER_SECOND
                  parameters:
                    - ''
              tags:
                -
                  tag: Application
                  value: 出方向流量
            -
              uuid: d57abe5ba24e4b57af0b0f51db4f9b1c
              name: '出方向单播报文速率 {#IFDESCR}({#IFALIAS})'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.2.1.31.1.1.1.11.{#SNMPINDEX}'
              key: 'InterfaceOutUnicastPacketsTraffic.[{#SNMPINDEX},{#IFDESCR}]'
              delay: 10m
              history: 30d
              trends: 0d
              units: pps
              preprocessing:
                -
                  type: CHANGE_PER_SECOND
                  parameters:
                    - ''
              tags:
                -
                  tag: Application
                  value: 出方向单播报文速率
      macros:
        -
          macro: '{$BANDWIDTH_USAGE_IN_THRESHOLD}'
          value: '90'
        -
          macro: '{$BANDWIDTH_USAGE_OUT_THRESHOLD}'
          value: '90'
        -
          macro: '{$CLOUD_SNMP_COMMUNITY}'
          value: public
        -
          macro: '{$CPU_USAGE_THRESHOLD}'
          value: '80'
        -
          macro: '{$ERROR_PACKETS_IN_THRESHOLD}'
          value: '10'
        -
          macro: '{$ERROR_PACKETS_OUT_THRESHOLD}'
          value: '10'
        -
          macro: '{$ICMP_LOSS_WARN}'
          value: '0.1'
        -
          macro: '{$ICMP_RESPONSE_TIME_WARN}'
          value: '30'
        -
          macro: '{$MEMORY_USAGE_THRESHOLD}'
          value: '80'
      valuemaps:
        -
          uuid: cdb064a755984a5f8ce657b862660d58
          name: private-HwAlarmStatus
          mappings:
            -
              value: '0'
              newvalue: notSupported
            -
              value: '1'
              newvalue: underRepair
            -
              value: '2'
              newvalue: critical
            -
              value: '3'
              newvalue: major
            -
              value: '4'
              newvalue: minor
            -
              value: '5'
              newvalue: alarmOutstanding
            -
              value: '6'
              newvalue: warning
            -
              value: '7'
              newvalue: indeterminate
        -
          uuid: da91e0438faa4b10878d632dba22280f
          name: private-hwEntityOperStatus
          mappings:
            -
              value: '1'
              newvalue: notSupported
            -
              value: '2'
              newvalue: disabled
            -
              value: '3'
              newvalue: enabled
            -
              value: '4'
              newvalue: offline
            -
              value: '11'
              newvalue: up
            -
              value: '12'
              newvalue: down
            -
              value: '13'
              newvalue: connect
            -
              value: '15'
              newvalue: protocolUp
            -
              value: '16'
              newvalue: linkUp
            -
              value: '17'
              newvalue: linkDown
            -
              value: '18'
              newvalue: present
            -
              value: '19'
              newvalue: absent
