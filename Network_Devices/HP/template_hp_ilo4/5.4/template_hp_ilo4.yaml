zabbix_export:
  version: '5.4'
  date: '2021-11-21T21:40:44Z'
  groups:
    -
      uuid: 7df96b18c230490a9a0a9e2307226338
      name: Templates
  templates:
    -
      uuid: 6a67960975ff4a0192b0dba38498ad72
      template: 'SNMP HP Server Health'
      name: 'SNMP HP Server Health'
      groups:
        -
          name: Templates
      items:
        -
          uuid: e9ac16b3cff647368587d0f97a431cbd
          name: 'Global Storage Health'
          type: SNMP_AGENT
          snmp_oid: 1.3.6.1.4.1.232.3.1.3.0
          key: cpqDaMibCondition
          delay: 60s
          description: 'The overall condition (status) of the system represented by this MIB.'
          valuemap:
            name: 'HP Insight System Status'
          tags:
            -
              tag: Application
              value: 'Storage Health'
          triggers:
            -
              uuid: 9f844894899c45ceb0c9936d81226c40
              expression: 'last(/SNMP HP Server Health/cpqDaMibCondition)<>2'
              name: 'The storage overall condition on {HOST.NAME} not in OK status'
              priority: HIGH
        -
          uuid: 99081c46c5334beda9ebf37418111438
          name: 'Automatic Server Recovery condition'
          type: SNMP_AGENT
          snmp_oid: 1.3.6.1.4.1.232.6.2.5.17.0
          key: cpqHeAsrCondition
          delay: '60'
          description: 'This value specifies the overall condition of the ASR feature.'
          valuemap:
            name: 'HP Insight System Status'
          tags:
            -
              tag: Application
              value: 'ASR Health'
          triggers:
            -
              uuid: 0084b980ffc74a66ac5dbbdfa3b84834
              expression: 'last(/SNMP HP Server Health/cpqHeAsrCondition)<>2'
              name: 'Automatic Server Recovery condition on {HOST.NAME} not in OK status'
              priority: HIGH
        -
          uuid: 0e725f29eccb418999fa33a444d47f19
          name: 'Automatic Server Recovery status'
          type: SNMP_AGENT
          snmp_oid: 1.3.6.1.4.1.232.6.2.5.1.0
          key: cpqHeAsrStatus
          delay: 60s
          description: 'The Automatic Server Recovery feature status.  If this object is currently other(1) or notAvailable(2) all set operations will fail.  Any attempt to set this object to other(1) or notAvailable(2) by a management station will fail.  Setting this object to disabled(3) or enabled(4) will disable or enable the ASR feature.  Setting this object to disabled(3) will disable the following objects: cpqHeAsrPagerStatus cpqHeAsrDialInStatus cpqHeAsrDialOutStatus'
          valuemap:
            name: 'HP ASR Status'
          tags:
            -
              tag: Application
              value: 'ASR Health'
        -
          uuid: 748754643039426b89d32fbab75fe5e5
          name: 'Event Log Condition'
          type: SNMP_AGENT
          snmp_oid: 1.3.6.1.4.1.232.6.2.11.2.0
          key: cpqHeEventLogCondition
          delay: 60s
          description: 'This value specifies the overall condition of the Integrated Management Log feature.'
          valuemap:
            name: 'HP Insight System Status'
          tags:
            -
              tag: Application
              value: 'System Health'
          triggers:
            -
              uuid: 68c476aa92cf42ee9cb2086f9525d244
              expression: 'last(/SNMP HP Server Health/cpqHeEventLogCondition)<>2'
              name: 'Event Log condition on {HOST.NAME} not in OK status'
              priority: HIGH
        -
          uuid: f2850723f25a46b6a9cb4f111915b1de
          name: 'Power supply condition'
          type: SNMP_AGENT
          snmp_oid: 1.3.6.1.4.1.232.6.2.9.1.0
          key: cpqHeFltTolPwrSupplyCondition
          delay: 60s
          description: 'This value specifies the overall condition of the fault tolerant power supply sub-system.'
          valuemap:
            name: 'HP Insight System Status'
          tags:
            -
              tag: Application
              value: 'Power Health'
          triggers:
            -
              uuid: 3754a1a904b94c97a8160f7d9afdd93a
              expression: 'last(/SNMP HP Server Health/cpqHeFltTolPwrSupplyCondition)<>2'
              name: 'Power supply condition on {HOST.NAME} not in OK status'
              priority: HIGH
        -
          uuid: 575888e24c2a46c39f9b6ba41c607510
          name: 'Global System Health'
          type: SNMP_AGENT
          snmp_oid: 1.3.6.1.4.1.232.6.1.3.0
          key: cpqHeMibCondition
          delay: 60s
          description: 'The overall condition.  This object represents the overall status of the server health system represented by this MIB.'
          valuemap:
            name: 'HP Insight System Status'
          tags:
            -
              tag: Application
              value: 'System Health'
          triggers:
            -
              uuid: 4129c8d7d9574ab884162ca05724b72e
              expression: 'last(/SNMP HP Server Health/cpqHeMibCondition)<>2'
              name: 'The overall condition on {HOST.NAME} not in OK status'
              priority: HIGH
        -
          uuid: 3208b54670d044aea205f2a64a055e73
          name: 'Memory Status'
          type: SNMP_AGENT
          snmp_oid: 1.3.6.1.4.1.232.6.2.14.4.0
          key: cpqHeResilientMemCondition
          delay: 60s
          description: 'This value specifies the current condition of the Advanced Memory Protection subsystem.  The following states are supported:  other(1) The system does not support fault tolerant memory or the state cannot be determined by the Management Agent.  ok(2) This system is operating normally.  degraded(3) The system is running in a degraded state because the Advanced Memory Protection subsystem has been engaged.'
          valuemap:
            name: 'HP Insight System Status'
          tags:
            -
              tag: Application
              value: 'Memory Health'
          triggers:
            -
              uuid: ab26c2ef1ea341999c59ec7a58884f85
              expression: 'last(/SNMP HP Server Health/cpqHeResilientMemCondition)<>2'
              name: 'Memory condition on {HOST.NAME} not in OK status'
              priority: HIGH
        -
          uuid: 61f9766f168d4369a9fa56938d0fed2d
          name: 'Total Memory Size'
          type: SNMP_AGENT
          snmp_oid: 1.3.6.1.4.1.232.6.2.14.8.0
          key: cpqHeResilientMemTotalMemSize
          delay: 1h
          units: MB
          description: 'This value specifies the total size of memory including memory seen by the Operating System and the memory used for spare, mirrored, or RAID configurations in MB (1 MB = 1048576 bytes).  If this system does not support Advanced Memory Protection or this value cannot be determined, then a value of 0 will be returned.'
          tags:
            -
              tag: Application
              value: 'Memory Health'
        -
          uuid: 38486af2694d443485b064de4b01c3f0
          name: 'Advanced Memory Protection type'
          type: SNMP_AGENT
          snmp_oid: 1.3.6.1.4.1.232.6.2.14.1.0
          key: cpqHeResilientMemTypeActive
          delay: '60'
          description: 'This value specifies the type of Advanced Memory Protection fault tolerance currently active on the system.  The following connection states are supported:  other(1) The Advanced Memory Protection fault tolerance cannot be determined by the Management Agent.  You may need to upgrade your software.  none(2) This system is not configured for Advanced Memory Protection fault tolerance or Advanced Memory Protection is not available on this system.  onLineSpare(3) This system is configured for Online Spare Advanced Memory Protection.  mirrored(4) This system is configured for Mirrored Advanced Memory Protection.  advancedECC(5) This system is configured for the Advanced ECC type of Advanced Memory Protection.  mirroredSingleBoard(6) This system is configured for Mirrored Advanced Memory Protection within a single memory board.  mirroredDualBoard(7) This system is configured for Mirrored Advanced Memory Protection within a dual memory board configuration. The mirrored memory may be swapped with memory on the same memory board or with memory on the second memory board.  xor(8) This system is configured for Advanced Memory Protection using the XOR engine.  lockStep(9) This system is configured for LockStep type of Advanced Memory Protection.  onLineSpareChannel(10) This system is configured for Online Spare Channel Advanced Memory Protection.  onLineSpareRank(11) This system is configured for Online Spare Rank Advanced Memory Protection.  mirroringIntrasocket(12) This system is configured for Mirrored Intrasocket Advanced Memory Protection between memory of single processor or board.  mirroringIntersocket(13) This system is configured for Mirrored Intersocket Advanced Memory Protection between memory of two processors or boards.'
          valuemap:
            name: 'HP Memory Protection Types'
          tags:
            -
              tag: Application
              value: 'Memory Health'
        -
          uuid: 30cb2f9a21a54e7db3dc1262a54a0937
          name: 'Overall Thermal condition'
          type: SNMP_AGENT
          snmp_oid: 1.3.6.1.4.1.232.6.2.6.1.0
          key: cpqHeThermalCondition
          delay: 60s
          description: 'This value specifies the overall condition of the system''s thermal environment.'
          valuemap:
            name: 'HP Insight System Status'
          tags:
            -
              tag: Application
              value: 'Temp Health'
          triggers:
            -
              uuid: 40d45bad59534a59a334b444f5d684f5
              expression: 'last(/SNMP HP Server Health/cpqHeThermalCondition)<>2'
              name: 'Overall Thermal condition on {HOST.NAME} not in OK status'
              priority: HIGH
        -
          uuid: cf7ee92519514415a00920101cb93c3d
          name: 'CPU Fan Status'
          type: SNMP_AGENT
          snmp_oid: 1.3.6.1.4.1.232.6.2.6.5.0
          key: cpqHeThermalCPUFanStatus
          delay: 60s
          description: 'The status of the processor fan(s) in the system.  This value will be one of the following: other(1) Fan status detection is not supported by this system or driver.  ok(2) All fans are operating properly.  failed(4) A fan is not operating properly.  The system will be shutdown if the failed(4) condition occurs.'
          valuemap:
            name: 'HP Insight System Status'
          tags:
            -
              tag: Application
              value: 'FAN Health'
          triggers:
            -
              uuid: 1c51405750f84cf4a4b840a25afb5d27
              expression: 'last(/SNMP HP Server Health/cpqHeThermalCPUFanStatus)=4'
              name: 'CPU Fan Status on {HOST.NAME} failed'
              priority: HIGH
        -
          uuid: ed815cf9eb2a493b977895f757026d1c
          name: 'System Fan Status'
          type: SNMP_AGENT
          snmp_oid: 1.3.6.1.4.1.232.6.2.6.4.0
          key: cpqHeThermalSystemFanStatus
          delay: 60s
          description: 'The status of the fan(s) in the system.  This value will be one of the following: other(1) Fan status detection is not supported by this system or driver.  ok(2) All fans are operating properly.  degraded(3) A non-required fan is not operating properly.  failed(4) A required fan is not operating properly.  If the cpqHeThermalDegradedAction is set to shutdown(3) the system will be shutdown if the failed(4) condition occurs.'
          valuemap:
            name: 'HP Insight System Status'
          tags:
            -
              tag: Application
              value: 'FAN Health'
          triggers:
            -
              uuid: 372cd038b1174497afda37aa66ff70ae
              expression: 'last(/SNMP HP Server Health/cpqHeThermalSystemFanStatus)<>2'
              name: 'System Fan Status on {HOST.NAME} not in OK status'
              priority: HIGH
        -
          uuid: 799bacff6656452492aaabb88ea56fba
          name: 'Temp Status'
          type: SNMP_AGENT
          snmp_oid: 1.3.6.1.4.1.232.6.2.6.3.0
          key: cpqHeThermalSystemTempStatus
          delay: 60s
          description: 'The status of the system''s temperature sensors:  This value will be one of the following: other(1) Temp sensing is not supported by this system or driver.  ok(2) All temp sensors are within normal operating range.  degraded(3) A temp sensor is outside of normal operating range.  failed(4) A temp sensor detects a condition that could permanently damage the system.  The system will automatically shutdown if the failed(4) condition results, so it is unlikely that this value will ever be returned by the agent.  If the cpqHeThermalDegradedAction is set to shutdown(3) the system will be shutdown if the degraded(3) condition occurs.'
          valuemap:
            name: 'HP Insight System Status'
          tags:
            -
              tag: Application
              value: 'Temp Health'
      discovery_rules:
        -
          uuid: 392e5e10cc484d9b9c2197dd08be9bba
          name: 'Array Accelerator Board Controller'
          type: SNMP_AGENT
          snmp_oid: 'discovery[{#SNMPVALUE},.1.3.6.1.4.1.232.3.2.2.2.1.1]'
          key: 'cpqDaAccelCntlrIndex-[{#SNMPVALUE}]'
          delay: 1h
          description: 'Array Accelerator Board Controller Index.  This value is a logical number whose meaning is OS dependent. The value has a direct mapping to the controller table index such that controller ''i'' has accelerator table entry ''i''.'
          item_prototypes:
            -
              uuid: f504442993d14e408320951663bed415
              name: 'Array Accelerator Board Controller $1 Status'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.4.1.232.3.2.2.2.1.9.{#SNMPINDEX}'
              key: 'cpqDaAccelCondition[{#SNMPVALUE}]'
              delay: 60s
              description: 'The condition of the device.  This value represents the overall condition of this array accelerator.'
              valuemap:
                name: 'HP Insight System Status'
              tags:
                -
                  tag: Application
                  value: 'Storage Health'
              trigger_prototypes:
                -
                  uuid: f707d18ed36a430ea25cff1b0e0420d9
                  expression: 'last(/SNMP HP Server Health/cpqDaAccelCondition[{#SNMPVALUE}])=1'
                  name: 'Array Accelerator Board Controller [{#SNMPVALUE}] need check (Other)'
                  priority: WARNING
                -
                  uuid: 591f7f15c59c4d628b01cdd1ff06fbe1
                  expression: 'last(/SNMP HP Server Health/cpqDaAccelCondition[{#SNMPVALUE}])>2'
                  name: 'Array Accelerator Board Controller [{#SNMPVALUE}] not OK'
                  priority: HIGH
        -
          uuid: 187414db51a04793a23cdf6720822b4b
          name: 'RAID Controller'
          type: SNMP_AGENT
          snmp_oid: 'discovery[{#SNMPVALUE},.1.3.6.1.4.1.232.3.2.2.1.1.1]'
          key: 'cpqDaCntlrIndex-[{#SNMPVALUE}]'
          delay: 1h
          description: 'Array Controller Index.  This value is a logical number whose meaning is OS dependent. Each physical controller has one unique controller number associated with it.'
          item_prototypes:
            -
              uuid: 283dfd8c61d64f9e8088a53628d65a9a
              name: 'RAID Controller $1 Condition'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.4.1.232.3.2.2.1.1.6.{#SNMPINDEX}'
              key: 'cpqDaCntlrCondition[{#SNMPVALUE}]'
              delay: 60s
              description: 'The condition of the device.  This value represents the overall condition of this controller, and any associated logical drives, physical drives, and array accelerators.'
              valuemap:
                name: 'HP Insight System Status'
              tags:
                -
                  tag: Application
                  value: 'Storage Health'
              trigger_prototypes:
                -
                  uuid: 7cc358289dc24adcb43fa076c79f284a
                  expression: 'last(/SNMP HP Server Health/cpqDaCntlrCondition[{#SNMPVALUE}])=1'
                  recovery_mode: RECOVERY_EXPRESSION
                  recovery_expression: 'last(/SNMP HP Server Health/cpqDaCntlrCondition[{#SNMPVALUE}])=2'
                  name: 'RAID Controller [{#SNMPVALUE}] need  check (Other)'
                  priority: WARNING
                  manual_close: 'YES'
                -
                  uuid: 5b38a25d7c1e4354a0b548cd0097b1bc
                  expression: 'last(/SNMP HP Server Health/cpqDaCntlrCondition[{#SNMPVALUE}])>2'
                  recovery_mode: RECOVERY_EXPRESSION
                  recovery_expression: 'last(/SNMP HP Server Health/cpqDaCntlrCondition[{#SNMPVALUE}])=2'
                  name: 'RAID Controller  [{#SNMPVALUE}] not OK'
                  priority: HIGH
                  manual_close: 'YES'
        -
          uuid: db8c6641f4ae4632a11644bb742a5a96
          name: 'Logical Drive discovery'
          type: SNMP_AGENT
          snmp_oid: 'discovery[{#SNMPVALUE},.1.3.6.1.4.1.232.3.2.3.1.1.2]'
          key: 'cpqDaLogDrvIndex-[{#SNMPVALUE}]'
          delay: 1h
          description: 'Drive Array Logical Drive Index.  This logical drive number keeps track of multiple instances of logical drives which are on the same controller.  For each controller index value, the logical drive index starts at 1 and increments for each logical drive.'
          item_prototypes:
            -
              uuid: 51995358ea414d9d92db7aa0591699f5
              name: 'Logical Drive $1 condition'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.4.1.232.3.2.3.1.1.11.{#SNMPINDEX}'
              key: 'cpqDaLogDrvCondition[{#SNMPVALUE}]'
              delay: 60s
              description: 'The Logical Drive condition.  This value represents the overall condition of this logical drive and any associated physical drives.'
              valuemap:
                name: 'HP Insight System Status'
              tags:
                -
                  tag: Application
                  value: 'Storage Health'
              trigger_prototypes:
                -
                  uuid: db2356836fa7404fb0062c1a0c5e543b
                  expression: 'last(/SNMP HP Server Health/cpqDaLogDrvCondition[{#SNMPVALUE}])=1'
                  name: 'Check Logical Drive [{#SNMPVALUE}] on {HOST.NAME} status (Other)'
                  priority: WARNING
                -
                  uuid: 6b50907d09554d24b5d133e5e98f4df9
                  expression: 'last(/SNMP HP Server Health/cpqDaLogDrvCondition[{#SNMPVALUE}])>2'
                  name: 'Logical Drive [{#SNMPVALUE}] on {HOST.NAME} Failure'
                  priority: HIGH
        -
          uuid: 74e368a498fc42d3958b7054f867e99e
          name: 'Physical Drive discovery'
          type: SNMP_AGENT
          snmp_oid: 'discovery[{#SNMPVALUE},.1.3.6.1.4.1.232.3.2.5.1.1.2]'
          key: 'cpqDaPhyDrvIndex-[{#SNMPVALUE}]'
          delay: 1h
          description: 'Drive Array Physical Drive Index.  This index is used for selecting the physical drive table entry. This number, along with the cpqDaPhyDrvCntlrIndex uniquely identify a specific physical drive.'
          item_prototypes:
            -
              uuid: c4865722655144268d6a0086420f6c74
              name: 'Physical Drive $1 Condition'
              type: SNMP_AGENT
              snmp_oid: '.1.3.6.1.4.1.232.3.2.5.1.1.37.{#SNMPINDEX}'
              key: 'cpqDaPhyDrvCondition[{#SNMPVALUE}]'
              delay: 60s
              description: 'The condition of the device. This value represents the overall condition of this physical drive.'
              valuemap:
                name: 'HP Physical Drive Status'
              tags:
                -
                  tag: Application
                  value: 'Storage Health'
              trigger_prototypes:
                -
                  uuid: 1f0b25f5ad0c470fb793eb147272c5b2
                  expression: 'last(/SNMP HP Server Health/cpqDaPhyDrvCondition[{#SNMPVALUE}])=1'
                  name: 'Physical drive [{#SNMPVALUE}] need check (Other)'
                  priority: WARNING
                -
                  uuid: 97dc1e9f784648ba815cea6babee080e
                  expression: 'last(/SNMP HP Server Health/cpqDaPhyDrvCondition[{#SNMPVALUE}])<>2'
                  name: 'Physical drive [{#SNMPVALUE}] not OK'
                  priority: HIGH
        -
          uuid: 211211e8e1494c95ae71c05cf8da0874
          name: 'Drive Array Spare Controller discovery'
          type: SNMP_AGENT
          snmp_oid: 'discovery[{#SNMPVALUE},.1.3.6.1.4.1.232.3.2.4.1.1.1]'
          key: 'cpqDaSpareCntlrIndex-[{#SNMPVALUE}]'
          delay: 1h
          description: 'Drive Array Spare Controller Index.  This index maps the spare drive back to the controller to which it is attached.  The value of this index is the same as the one used under the controller group.'
          item_prototypes:
            -
              uuid: 77a98ff9ba4d40e880b7e9ca2e5b591b
              name: 'Drive Array Spare Controller $1 condition'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.4.1.232.3.2.4.1.1.6.{#SNMPINDEX}'
              key: 'cpqDaSpareCondition[{#SNMPVALUE}]'
              delay: 60s
              description: 'The Spare Drive condition.  This value represents the overall condition of this spare drive and any associated physical drives.'
              valuemap:
                name: 'HP Insight System Status'
              tags:
                -
                  tag: Application
                  value: 'Storage Health'
              trigger_prototypes:
                -
                  uuid: b225a57871e0469d90a9c83f3c072ef3
                  expression: 'last(/SNMP HP Server Health/cpqDaSpareCondition[{#SNMPVALUE}])>2'
                  name: 'Drive Array Spare Controller [{#SNMPVALUE}] on {HOST.NAME} Failure'
                  priority: HIGH
                -
                  uuid: 2312c21bc732499eacebfbf003ef186c
                  expression: 'last(/SNMP HP Server Health/cpqDaSpareCondition[{#SNMPVALUE}])=1'
                  name: 'Drive Array Spare Controller [{#SNMPVALUE}] on {HOST.NAME} status (Other)'
                  priority: WARNING
        -
          uuid: 2b56b23994f04bebbda81b955992eef8
          name: 'Fan discovery'
          type: SNMP_AGENT
          snmp_oid: 'discovery[{#SNMPVALUE},.1.3.6.1.4.1.232.6.2.6.7.1.2]'
          key: 'cpqHeFltTolFanIndex[{#SNMPVALUE}]'
          delay: 1h
          description: 'A number that uniquely specifies this fan description.'
          item_prototypes:
            -
              uuid: 387c9a17054b4d73b8be972d28323482
              name: 'FAN $1 condition'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.4.1.232.6.2.6.7.1.9.{#SNMPINDEX}'
              key: 'cpqHeFltTolFanCondition[{#SNMPVALUE}]'
              delay: 60s
              description: 'The condition of the fan.  This value will be one of the following: other(1) Fan status detection is not supported by this system or driver.  ok(2) The fan is operating properly.  degraded(3) A redundant fan is not operating properly.  failed(4) A non-redundant fan is not operating properly.'
              valuemap:
                name: 'HP Insight System Status'
              tags:
                -
                  tag: Application
                  value: 'FAN Health'
              trigger_prototypes:
                -
                  uuid: 7c332c8229454fb894481616469a1e1f
                  expression: 'last(/SNMP HP Server Health/cpqHeFltTolFanCondition[{#SNMPVALUE}])<>2'
                  name: 'Fan $1 condition on {HOST.NAME} not in OK status'
                  priority: HIGH
            -
              uuid: b3e3222a9bec4949bf333ba4f020970d
              name: 'FAN $1 location'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.4.1.232.6.2.6.7.1.3.{#SNMPINDEX}'
              key: 'cpqHeFltTolFanLocale[{#SNMPVALUE}]'
              delay: 1h
              description: 'This specifies the location of the fan in the system.'
              valuemap:
                name: 'HP location'
              tags:
                -
                  tag: Application
                  value: 'FAN Health'
            -
              uuid: dc8fe4a116574f60a902d8d6fa12aef5
              name: 'FAN $1 present'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.4.1.232.6.2.6.7.1.4.{#SNMPINDEX}'
              key: 'cpqHeFltTolFanPresent[{#SNMPVALUE}]'
              delay: 1h
              valuemap:
                name: 'HP Presence'
              tags:
                -
                  tag: Application
                  value: 'FAN Health'
            -
              uuid: 3e67b92646e0496ba560a7b122fc5436
              name: 'FAN $1 redundant'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.4.1.232.6.2.6.7.1.7.{#SNMPINDEX}'
              key: 'cpqHeFltTolFanRedundant[{#SNMPVALUE}]'
              delay: 1h
              description: 'This specifies if the fan is in a redundant configuration.'
              valuemap:
                name: 'HP Redundancy'
              tags:
                -
                  tag: Application
                  value: 'FAN Health'
              trigger_prototypes:
                -
                  uuid: c57e8554694847358bc95f0d16cbfda5
                  expression: 'last(/SNMP HP Server Health/cpqHeFltTolFanRedundant[{#SNMPVALUE}])<>3'
                  name: 'Fan $1 on {HOST.NAME} not redundant'
                  priority: AVERAGE
        -
          uuid: b05cec5d334045a5b0598801d8bfc2a5
          name: 'Power Supply Bay'
          type: SNMP_AGENT
          snmp_oid: 'discovery[{#SNMPVALUE},.1.3.6.1.4.1.232.6.2.9.3.1.2]'
          key: 'cpqHeFltTolPowerSupplyBay-[{#SNMPVALUE}]'
          delay: 1h
          description: 'The bay number to index within this chassis.'
          item_prototypes:
            -
              uuid: 746678b7e579445d8d74e84a2a565819
              name: 'Power Supply $1 Max Watts'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.4.1.232.6.2.9.3.1.8.{#SNMPINDEX}'
              key: 'cpqHeFltTolPowerSupplyCapacityMaximum[{#SNMPVALUE}]'
              delay: 60s
              units: W
              description: 'The maximum capacity of the power supply in watts.'
              tags:
                -
                  tag: Application
                  value: 'Power Health'
            -
              uuid: ff20e85c585a471fa99b1cb15ec4d776
              name: 'Power Supply $1 Capacity Usage'
              type: CALCULATED
              key: 'cpqHeFltTolPowerSupplyCapacityUsedPerc[{#SNMPVALUE}]'
              delay: 60s
              value_type: FLOAT
              units: '%'
              params: 'last(//cpqHeFltTolPowerSupplyCapacityUsed[{#SNMPVALUE}])/(last(//cpqHeFltTolPowerSupplyCapacityMaximum[{#SNMPVALUE}])/100)'
              tags:
                -
                  tag: Application
                  value: 'Power Health'
              trigger_prototypes:
                -
                  uuid: 4e2bbd2587804b599ca036c618965e97
                  expression: 'avg(/SNMP HP Server Health/cpqHeFltTolPowerSupplyCapacityUsedPerc[{#SNMPVALUE}],15m)>75'
                  recovery_mode: RECOVERY_EXPRESSION
                  recovery_expression: 'avg(/SNMP HP Server Health/cpqHeFltTolPowerSupplyCapacityUsedPerc[{#SNMPVALUE}],15m)<75'
                  name: 'Power Supply [{#SNMPVALUE}] High Usage'
                  priority: WARNING
                  manual_close: 'YES'
            -
              uuid: 20e94295d1ab4acea4c1ac773a60dd29
              name: 'Power Supply $1 Used Watts'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.4.1.232.6.2.9.3.1.7.{#SNMPINDEX}'
              key: 'cpqHeFltTolPowerSupplyCapacityUsed[{#SNMPVALUE}]'
              delay: 60s
              units: W
              description: 'The currently used capacity of the power supply in watts.'
              tags:
                -
                  tag: Application
                  value: 'Power Health'
            -
              uuid: 207a9ea03eb7408fabc0d141934f6a1d
              name: 'Power Supply $1 Condition'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.4.1.232.6.2.9.3.1.4.{#SNMPINDEX}'
              key: 'cpqHeFltTolPowerSupplyCondition[{#SNMPVALUE}]'
              delay: 60s
              description: 'The condition of the power supply.  This value will be one of the following:  other(1) The status could not be determined or not present.  ok(2) The power supply is operating normally.  degraded(3) A temperature sensor, fan or other power supply component is outside of normal operating range.  failed(4) A power supply component detects a condition that could permanently damage the system.'
              valuemap:
                name: 'HP Insight System Status'
              tags:
                -
                  tag: Application
                  value: 'Power Health'
              trigger_prototypes:
                -
                  uuid: e5e65f415e37405dbcc70cc17d6b8d84
                  expression: 'last(/SNMP HP Server Health/cpqHeFltTolPowerSupplyCondition[{#SNMPVALUE}])>2'
                  recovery_mode: RECOVERY_EXPRESSION
                  recovery_expression: 'last(/SNMP HP Server Health/cpqHeFltTolPowerSupplyCondition[{#SNMPVALUE}])=2'
                  name: 'Power Supply [{#SNMPVALUE}] is not OK'
                  priority: HIGH
                  manual_close: 'YES'
            -
              uuid: 6a8fb61759a246a08b9b9bfacac05dfa
              name: 'Power Supply $1 Voltage'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.4.1.232.6.2.9.3.1.6.{#SNMPINDEX}'
              key: 'cpqHeFltTolPowerSupplyMainVoltage[{#SNMPVALUE}]'
              delay: 60s
              units: V
              description: 'The input main voltage of the power supply in volts.'
              tags:
                -
                  tag: Application
                  value: 'Power Health'
              trigger_prototypes:
                -
                  uuid: 4c2d851e7f7545c5841b31368fa9ca99
                  expression: 'last(/SNMP HP Server Health/cpqHeFltTolPowerSupplyMainVoltage[{#SNMPVALUE}])>240'
                  recovery_mode: RECOVERY_EXPRESSION
                  recovery_expression: 'last(/SNMP HP Server Health/cpqHeFltTolPowerSupplyMainVoltage[{#SNMPVALUE}])>220 and last(/SNMP HP Server Health/cpqHeFltTolPowerSupplyMainVoltage[{#SNMPVALUE}])<240'
                  name: 'Power Supply [{#SNMPVALUE}] high input voltage'
                  priority: WARNING
                  manual_close: 'YES'
                -
                  uuid: e4d1a04f124e4a2983983b6b03d837e6
                  expression: 'last(/SNMP HP Server Health/cpqHeFltTolPowerSupplyMainVoltage[{#SNMPVALUE}])<210'
                  recovery_mode: RECOVERY_EXPRESSION
                  recovery_expression: 'last(/SNMP HP Server Health/cpqHeFltTolPowerSupplyMainVoltage[{#SNMPVALUE}])>210 and last(/SNMP HP Server Health/cpqHeFltTolPowerSupplyMainVoltage[{#SNMPVALUE}])<240'
                  name: 'Power Supply [{#SNMPVALUE}] low input voltage'
                  priority: WARNING
                  manual_close: 'YES'
            -
              uuid: 4c44e01ab1c54880ab5f2d60408170ea
              name: 'Power Supply $1 Presence'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.4.1.232.6.2.9.3.1.3.{#SNMPINDEX}'
              key: 'cpqHeFltTolPowerSupplyPresent[{#SNMPVALUE}]'
              delay: 60s
              description: 'Indicates whether the power supply is present in the chassis.'
              valuemap:
                name: 'HP Presence'
              tags:
                -
                  tag: Application
                  value: 'Power Health'
            -
              uuid: 7cdc19cac1354f9b93cf284646ca9ec7
              name: 'Power Supply $1 Redundancy'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.4.1.232.6.2.9.3.1.9.{#SNMPINDEX}'
              key: 'cpqHeFltTolPowerSupplyRedundant[{#SNMPVALUE}]'
              delay: 60s
              description: 'The redundancy state of the power supply.  This value will be one of the following: other(1) The redundancy state could not be determined.  notRedundant(2) The power supply is not operating in a redundant state.  redundant(3) The power supply is operating in a redundant state.'
              valuemap:
                name: 'HP Redundancy'
              tags:
                -
                  tag: Application
                  value: 'Power Health'
              trigger_prototypes:
                -
                  uuid: eb0ebdfd80824a75b706005d04804c7c
                  expression: 'last(/SNMP HP Server Health/cpqHeFltTolPowerSupplyRedundant[{#SNMPVALUE}])=2'
                  recovery_mode: RECOVERY_EXPRESSION
                  recovery_expression: 'last(/SNMP HP Server Health/cpqHeFltTolPowerSupplyRedundant[{#SNMPVALUE}])=3'
                  name: 'Power Supply [{#SNMPVALUE}] has no redundancy.'
                  priority: HIGH
                  manual_close: 'YES'
            -
              uuid: e9a564776b6b40258645e1312456dd14
              name: 'Power Supply $1 Status'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.4.1.232.6.2.9.3.1.5.{#SNMPINDEX}'
              key: 'cpqHeFltTolPowerSupplyStatus[{#SNMPVALUE}]'
              delay: 60s
              description: 'The status of the power supply.'
              valuemap:
                name: 'HP Power Supply Status'
              tags:
                -
                  tag: Application
                  value: 'Power Health'
              trigger_prototypes:
                -
                  uuid: 4ea6760ee2424097b3a5d7dfc05fda22
                  expression: 'last(/SNMP HP Server Health/cpqHeFltTolPowerSupplyStatus[{#SNMPVALUE}])<>1'
                  name: 'Power Supply Status [{#SNMPVALUE}] is not OK'
                  priority: HIGH
                  manual_close: 'YES'
          graph_prototypes:
            -
              uuid: a7690b536e77442386f522d4db44eef0
              name: 'Power Supply {#SNMPVALUE} input voltage'
              yaxismin: '200'
              yaxismax: '260'
              ymin_type_1: FIXED
              ymax_type_1: FIXED
              graph_items:
                -
                  drawtype: GRADIENT_LINE
                  color: CC0000
                  item:
                    host: 'SNMP HP Server Health'
                    key: 'cpqHeFltTolPowerSupplyMainVoltage[{#SNMPVALUE}]'
            -
              uuid: da5db87882dd49299e8ec5f46f4cf8ea
              name: 'Power Supply {#SNMPVALUE} Usage Level'
              ymin_type_1: FIXED
              ymax_type_1: FIXED
              graph_items:
                -
                  drawtype: GRADIENT_LINE
                  color: 00BB00
                  item:
                    host: 'SNMP HP Server Health'
                    key: 'cpqHeFltTolPowerSupplyCapacityUsedPerc[{#SNMPVALUE}]'
        -
          uuid: a28c580126e0430c83a275517a195aa8
          name: 'Temp discovery'
          type: SNMP_AGENT
          snmp_oid: 'discovery[{#SNMPVALUE},.1.3.6.1.4.1.232.6.2.6.8.1.2]'
          key: 'cpqHeTemperatureIndex[{#SNMPVALUE}]'
          delay: 1h
          description: 'A number that uniquely specifies this temperature sensor description.'
          item_prototypes:
            -
              uuid: 49e1b05534ef479d939e11ac117a4090
              name: 'Temperature $1 celsius'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.4.1.232.6.2.6.8.1.4.{#SNMPINDEX}'
              key: 'cpqHeTemperatureCelsius[{#SNMPVALUE}]'
              delay: 60s
              units: C
              description: 'This is the current temperature sensor reading in degrees celsius.  If this value cannot be determined by software, then a value of -99 will be returned.'
              valuemap:
                name: 'HP location'
              tags:
                -
                  tag: Application
                  value: 'Temp Health'
            -
              uuid: 6fa694ae78824a6883ff0ceb78ae56d8
              name: 'Temperature $1 condition'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.4.1.232.6.2.6.8.1.6.{#SNMPINDEX}'
              key: 'cpqHeTemperatureCondition[{#SNMPVALUE}]'
              delay: 60s
              description: 'The Temperature sensor condition.  This value will be one of the following: other(1) Temperature could not be determined.  ok(2) The temperature sensor is within normal operating range.  degraded(3) The temperature sensor is outside of normal operating range.  failed(4) The temperature sensor detects a condition that could permanently damage the system.  The system will automatically shutdown if the failed(4) condition results, so it is unlikely that this value will ever be returned by the agent.  If the cpqHeThermalDegradedAction is set to shutdown(3) the system will be shutdown if the degraded(3) condition occurs.'
              valuemap:
                name: 'HP Insight System Status'
              tags:
                -
                  tag: Application
                  value: 'Temp Health'
              trigger_prototypes:
                -
                  uuid: 623c1a716fa740699b06a06545f43428
                  expression: 'last(/SNMP HP Server Health/cpqHeTemperatureCondition[{#SNMPVALUE}])<>2'
                  name: 'Temperature $1 condition on {HOST.NAME} not in OK status'
                  priority: HIGH
            -
              uuid: b08b09ed176b43129989748767a5d9e8
              name: 'Temperature $1 location'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.4.1.232.6.2.6.8.1.3.{#SNMPINDEX}'
              key: 'cpqHeTemperatureLocale[{#SNMPVALUE}]'
              delay: 1h
              description: 'This specifies the location of the temperature sensor present in the system.'
              valuemap:
                name: 'HP location'
              tags:
                -
                  tag: Application
                  value: 'Temp Health'
      valuemaps:
        -
          uuid: 12c6e531602c40a881a58638c519b599
          name: 'HP ASR Status'
          mappings:
            -
              value: '1'
              newvalue: Other
            -
              value: '2'
              newvalue: NotAvailiable
            -
              value: '3'
              newvalue: Disabled
            -
              value: '4'
              newvalue: Enabled
        -
          uuid: eb0e24e33b334b6ab947fa557c568086
          name: 'HP Insight System Status'
          mappings:
            -
              value: '1'
              newvalue: Other
            -
              value: '2'
              newvalue: OK
            -
              value: '3'
              newvalue: Degraded
            -
              value: '4'
              newvalue: Failed
        -
          uuid: f9d6b1a721f6431abb8e59d22c50308b
          name: 'HP location'
          mappings:
            -
              value: '1'
              newvalue: Other
            -
              value: '2'
              newvalue: Unknown
            -
              value: '3'
              newvalue: System
            -
              value: '4'
              newvalue: SystemBoard
            -
              value: '5'
              newvalue: IOBoard
            -
              value: '6'
              newvalue: CPU
            -
              value: '7'
              newvalue: Memory
            -
              value: '8'
              newvalue: Storage
            -
              value: '9'
              newvalue: RemovableMedia
            -
              value: '10'
              newvalue: PowerSupply
            -
              value: '11'
              newvalue: Ambient
            -
              value: '12'
              newvalue: Chassis
            -
              value: '13'
              newvalue: BridgeCard
            -
              value: '14'
              newvalue: ManagementBoard
            -
              value: '15'
              newvalue: Backplane
            -
              value: '16'
              newvalue: NetworkSlot
            -
              value: '17'
              newvalue: BladeSlot
            -
              value: '18'
              newvalue: Virtual
        -
          uuid: 7a14ab4a022747d590817c4abff4d216
          name: 'HP Memory Protection Types'
          mappings:
            -
              value: '1'
              newvalue: Other
            -
              value: '2'
              newvalue: None
            -
              value: '3'
              newvalue: 'Online Spare'
            -
              value: '4'
              newvalue: Mirrored
            -
              value: '5'
              newvalue: 'Advanced ECC'
            -
              value: '6'
              newvalue: 'Mirrored Single Board'
            -
              value: '7'
              newvalue: 'Mirrored Dual Board'
            -
              value: '8'
              newvalue: XOR
            -
              value: '9'
              newvalue: LockStep
        -
          uuid: 5c9a34349f3c477f92724917fbb037d6
          name: 'HP Physical Drive Status'
          mappings:
            -
              value: '1'
              newvalue: Other
            -
              value: '2'
              newvalue: OK
            -
              value: '3'
              newvalue: Failed
            -
              value: '4'
              newvalue: 'Predictive Failure'
            -
              value: '5'
              newvalue: Erasing
            -
              value: '6'
              newvalue: 'Erase Done'
            -
              value: '7'
              newvalue: 'Erase Pending'
        -
          uuid: b112b81eb17b427aaf655aec14e84595
          name: 'HP Power Supply Status'
          mappings:
            -
              value: '1'
              newvalue: NoError
            -
              value: '2'
              newvalue: GeneralFailure
            -
              value: '3'
              newvalue: BistFailure
            -
              value: '4'
              newvalue: FanFailure
            -
              value: '5'
              newvalue: TempFailure
            -
              value: '6'
              newvalue: InterlockOpen
            -
              value: '7'
              newvalue: EpromFailed
            -
              value: '8'
              newvalue: VrefFailed
            -
              value: '9'
              newvalue: DacFailed
            -
              value: '10'
              newvalue: RamTestFailed
            -
              value: '11'
              newvalue: VoltageChannelFailde
            -
              value: '12'
              newvalue: OrringDiodeFailed
            -
              value: '13'
              newvalue: BrownOut
            -
              value: '14'
              newvalue: GiveUpOnStartup
            -
              value: '15'
              newvalue: NVRamInvalid
            -
              value: '16'
              newvalue: CalibrationTableInvalid
        -
          uuid: 4d0a46c2c922415ba4933e365c8fc214
          name: 'HP Presence'
          mappings:
            -
              value: '1'
              newvalue: Other
            -
              value: '2'
              newvalue: Absent
            -
              value: '3'
              newvalue: Present
        -
          uuid: 16f8f74df40e4afa8a0477b920cb7009
          name: 'HP Redundancy'
          mappings:
            -
              value: '1'
              newvalue: Other
            -
              value: '2'
              newvalue: 'Not Redundant'
            -
              value: '3'
              newvalue: Redundant
