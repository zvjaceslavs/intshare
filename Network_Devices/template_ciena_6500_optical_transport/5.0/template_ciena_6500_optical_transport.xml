<?xml version="1.0" encoding="UTF-8"?>
<zabbix_export><version>5.0</version><date>2021-11-21T22:01:45Z</date><groups><group><name>Templates</name></group></groups><templates><template><template>Ciena 6500 2</template><name>Ciena 6500 2</name><description>## Overview

This template will discover and monitor various optical interfaces - mainly light levels and baselines and alert if light levels fall outside of VARIANCE macro. Also will report when OSC has no light and serve a clear indication that there is a fiber issue.


No MIBs required. Used OIDs.


No Dependencies - just enable SNMP with v2 community on the shelf and set SNMP\_COMMUNITY macro in template.



## Author

Dustin Howard

</description><groups><group><name>Templates</name></group></groups><applications><application><name>Alarms</name></application><application><name>Backups</name></application><application><name>Ethernet Interface</name></application><application><name>General</name></application><application><name>Inventory</name></application><application><name>Optical AMP/OSC</name></application><application><name>Optical Transport Interface</name></application></applications><items><item><name>Number of Critical Alarms</name><type>SNMP_AGENT</type><snmp_oid>1.3.6.1.4.1.562.68.11.4.1.1.0</snmp_oid><key>ciena.critical.alarms</key><delay>5m</delay><value_type>FLOAT</value_type><description>This is the number of critical alarms that currently exist at this node which may have one or more shelves.</description><applications><application><name>Alarms</name></application></applications><triggers><trigger><expression>({change()}&gt;0) and ({TRIGGER.VALUE}=0)</expression><recovery_mode>RECOVERY_EXPRESSION</recovery_mode><recovery_expression>(({change()}&lt;0) and ({TRIGGER.VALUE}=1)&#13;
and&#13;
{last(#1)}={last(#288)})</recovery_expression><name>Critical Alarm Exists</name><priority>HIGH</priority><description>Critical alarms exist on node. For alarm details you will need to connect to host via site manager.</description><manual_close>YES</manual_close></trigger></triggers></item><item><name>Number of Major Alarms</name><type>SNMP_AGENT</type><snmp_oid>1.3.6.1.4.1.562.68.11.4.1.2.0</snmp_oid><key>ciena.major.alarms</key><delay>5m</delay><value_type>FLOAT</value_type><description>This is the number of major alarms that currently exist at this node which may have one or more shelves.</description><applications><application><name>Alarms</name></application></applications><triggers><trigger><expression>({change()}&gt;0) and ({TRIGGER.VALUE}=0)</expression><recovery_mode>RECOVERY_EXPRESSION</recovery_mode><recovery_expression>(({change()}&lt;0) and ({TRIGGER.VALUE}=1)&#13;
and&#13;
{last(#1)}={last(#288)})</recovery_expression><name>Major Alarm Exists</name><priority>AVERAGE</priority><description>Major alarms exist on node. For alarm details you will need to connect to host via site manager.</description><manual_close>YES</manual_close></trigger></triggers></item><item><name>Number of Minor Alarms</name><type>SNMP_AGENT</type><snmp_oid>1.3.6.1.4.1.562.68.11.4.1.3.0</snmp_oid><key>ciena.minor.alarms</key><delay>5m</delay><value_type>FLOAT</value_type><description>This is the number of minor alarms that currently exist at this node which may have one or more shelves.</description><applications><application><name>Alarms</name></application></applications><triggers><trigger><expression>({change()}&gt;0) and ({TRIGGER.VALUE}=0)</expression><recovery_mode>RECOVERY_EXPRESSION</recovery_mode><recovery_expression>(({change()}&lt;0) and ({TRIGGER.VALUE}=1)&#13;
and&#13;
{last(#1)}={last(#288)})</recovery_expression><name>Minor Alarm Exists</name><priority>WARNING</priority><description>Minor alarms exist on node. For alarm details you will need to connect to host via site manager.</description><manual_close>YES</manual_close></trigger></triggers></item><item><name>Number of Warnings</name><type>SNMP_AGENT</type><snmp_oid>1.3.6.1.4.1.562.68.11.4.1.4.0</snmp_oid><key>ciena.warnings</key><delay>5m</delay><value_type>FLOAT</value_type><description>This is the number of warnings that currently exist at this node which may have one or more shelves.</description><applications><application><name>Alarms</name></application></applications><triggers><trigger><expression>({change()}&gt;0) and ({TRIGGER.VALUE}=0)</expression><recovery_mode>RECOVERY_EXPRESSION</recovery_mode><recovery_expression>(({change()}&lt;0) and ({TRIGGER.VALUE}=1)&#13;
and&#13;
{last(#1)}={last(#288)})</recovery_expression><name>Warning Alarm Exists</name><priority>INFO</priority><description>Warning alarms exist on node. For alarm details you will need to connect to host via site manager.</description><manual_close>YES</manual_close></trigger></triggers></item><item><name>Software Version</name><type>SNMP_AGENT</type><snmp_oid>1.3.6.1.4.1.562.68.11.1.1.5.0</snmp_oid><key>software.version</key><delay>6h</delay><history>14d</history><trends>0</trends><value_type>CHAR</value_type><inventory_link>OS</inventory_link><applications><application><name>General</name></application></applications></item><item><name>Device Uptime</name><type>SNMP_AGENT</type><snmp_oid>1.3.6.1.2.1.1.3.0</snmp_oid><key>system.uptime</key><delay>5m</delay><history>14d</history><trends>0</trends><units>s</units><description>The time (in seconds) since the network management portion of the system was last re-initialized.</description><preprocessing><step><type>MULTIPLIER</type><params>0.01</params></step></preprocessing><triggers><trigger><expression>{last(#1)}&lt;8m&#13;
and&#13;
{last(#3)}&lt;42948779</expression><name>System Restarted</name><priority>AVERAGE</priority><description>This trigger will indicate if the device has restarted.  The uptime is less than 10 minutes.</description></trigger></triggers></item></items><discovery_rules><discovery_rule><name>Shelf Inventory Discovery</name><type>SNMP_AGENT</type><snmp_oid>discovery[{#DESCRIPTION},.1.3.6.1.2.1.47.1.1.1.1.2,{#MODEL},.1.3.6.1.2.1.47.1.1.1.1.13,{#CONTAINER},.1.3.6.1.2.1.47.1.1.1.1.7]</snmp_oid><key>enventory.discovery</key><delay>1d;wd1h8</delay><filter><conditions><condition><macro>{#MODEL}</macro><value>.</value><formulaid>A</formulaid></condition></conditions></filter><item_prototypes><item_prototype><name>Serial Number: &quot;{#DESCRIPTION}&quot; in {#CONTAINER} MODEL-{#MODEL}</name><type>SNMP_AGENT</type><snmp_oid>1.3.6.1.2.1.47.1.1.1.1.11.{#SNMPINDEX}</snmp_oid><key>serial.number.[{#SNMPINDEX}]</key><delay>1d</delay><trends>0</trends><value_type>CHAR</value_type><description>The serial number for this module.</description><applications><application><name>Inventory</name></application></applications></item_prototype></item_prototypes></discovery_rule><discovery_rule><name>Ethernet Interface Discovery</name><type>SNMP_AGENT</type><snmp_oid>discovery[{#IFADMINSTATUS},1.3.6.1.2.1.2.2.1.7,{#IFDESCR},1.3.6.1.2.1.2.2.1.2]</snmp_oid><key>ethernet.transport.if.discovery</key><delay>1d;wd1h14</delay><filter><evaltype>AND</evaltype><conditions><condition><macro>{#IFDESCR}</macro><value>ETH</value><formulaid>B</formulaid></condition><condition><macro>{#IFADMINSTATUS}</macro><value>1</value><formulaid>A</formulaid></condition></conditions></filter><item_prototypes><item_prototype><name>{#IFDESCR}: Bits Received</name><type>SNMP_AGENT</type><snmp_oid>1.3.6.1.2.1.31.1.1.1.6.{#SNMPINDEX}</snmp_oid><key>ciena6500.ethernet.if.bits.in[{#SNMPINDEX}]</key><delay>5m</delay><units>bps</units><description>The total number of bits per second received on the interface.</description><applications><application><name>Ethernet Interface</name></application></applications><preprocessing><step><type>CHANGE_PER_SECOND</type><params/></step><step><type>MULTIPLIER</type><params>8</params></step></preprocessing></item_prototype><item_prototype><name>{#IFDESCR}: Bits Sent</name><type>SNMP_AGENT</type><snmp_oid>1.3.6.1.2.1.31.1.1.1.10.{#SNMPINDEX}</snmp_oid><key>ciena6500.ethernet.if.bits.out[{#SNMPINDEX}]</key><delay>5m</delay><units>bps</units><description>The total number of bits per second sent on the interface.</description><applications><application><name>Ethernet Interface</name></application></applications><preprocessing><step><type>CHANGE_PER_SECOND</type><params/></step><step><type>MULTIPLIER</type><params>8</params></step></preprocessing></item_prototype><item_prototype><name>{#IFDESCR}: Ethernet Errors</name><type>SNMP_AGENT</type><snmp_oid>1.3.6.1.2.1.2.2.1.14.{#SNMPINDEX}</snmp_oid><key>ciena6500.ethernet.if.errors.in[{#SNMPINDEX}]</key><delay>5m</delay><units>errors per second</units><description>The average number of inbound packets per second that contained errors preventing them from being deliverable to a higher-layer protocol.</description><applications><application><name>Ethernet Interface</name></application></applications><preprocessing><step><type>CHANGE_PER_SECOND</type><params/></step></preprocessing></item_prototype><item_prototype><name>{#IFDESCR}: Admin status</name><type>SNMP_AGENT</type><snmp_oid>1.3.6.1.2.1.2.2.1.7.{#SNMPINDEX}</snmp_oid><key>ethernet.if.status[ifAdminStatus.{#SNMPINDEX}]</key><delay>5m</delay><description>The administrative state of the interface.</description><applications><application><name>Ethernet Interface</name></application></applications><valuemap><name>Interface Admin Status</name></valuemap></item_prototype><item_prototype><name>{#IFDESCR}: Operational status</name><type>SNMP_AGENT</type><snmp_oid>1.3.6.1.2.1.2.2.1.8.{#SNMPINDEX}</snmp_oid><key>ethernet.if.status[ifOperStatus.{#SNMPINDEX}]</key><delay>5m</delay><description>The operational state of the interface.</description><applications><application><name>Ethernet Interface</name></application></applications><valuemap><name>Interface Operational Status</name></valuemap></item_prototype></item_prototypes><trigger_prototypes><trigger_prototype><expression>{Ciena 6500 2:ethernet.if.status[ifOperStatus.{#SNMPINDEX}].last(#1)}&lt;&gt;1 and {Ciena 6500 2:ethernet.if.status[ifAdminStatus.{#SNMPINDEX}].last(#1,1)}=1</expression><name>{#IFDESCR} DOWN</name><priority>WARNING</priority><description>The operational status of this Ethernet interface is DOWN.</description></trigger_prototype></trigger_prototypes><graph_prototypes><graph_prototype><name>{#IFDESCR}): Ethernet traffic</name><graph_items><graph_item><drawtype>GRADIENT_LINE</drawtype><color>4CAF50</color><item><host>Ciena 6500 2</host><key>ciena6500.ethernet.if.bits.in[{#SNMPINDEX}]</key></item></graph_item><graph_item><sortorder>1</sortorder><drawtype>BOLD_LINE</drawtype><color>2774A4</color><item><host>Ciena 6500 2</host><key>ciena6500.ethernet.if.bits.out[{#SNMPINDEX}]</key></item></graph_item><graph_item><sortorder>2</sortorder><drawtype>BOLD_LINE</drawtype><color>F63100</color><item><host>Ciena 6500 2</host><key>ciena6500.ethernet.if.errors.in[{#SNMPINDEX}]</key></item></graph_item></graph_items></graph_prototype></graph_prototypes></discovery_rule><discovery_rule><name>Optical OSC Discovery</name><type>SNMP_AGENT</type><snmp_oid>discovery[{#PORTNAME},.1.3.6.1.4.1.562.68.10.1.1.1.1.1.3,{#CHECKNAME},.1.3.6.1.4.1.562.68.10.1.1.1.1.1.4]</snmp_oid><key>optical.osc.discovery</key><delay>1d;wd1h9</delay><filter><conditions><condition><macro>{#CHECKNAME}</macro><value>OPR-OCH NEND RCV</value><formulaid>A</formulaid></condition><condition><macro>{#PORTNAME}</macro><value>OSC-.*</value><formulaid>B</formulaid></condition></conditions></filter><item_prototypes><item_prototype><name>{#PORTNAME} &quot;{#CHECKNAME}&quot;</name><type>SNMP_AGENT</type><snmp_oid>1.3.6.1.4.1.562.68.10.1.1.1.1.1.6.{#SNMPINDEX}</snmp_oid><key>optical.osc[{#PORTNAME}.{#CHECKNAME}]</key><value_type>FLOAT</value_type><units>dbm</units><description>The OSC received light level in dbm.</description><applications><application><name>Optical AMP/OSC</name></application></applications></item_prototype></item_prototypes></discovery_rule><discovery_rule><name>Optical OSC Spanloss Discovery</name><type>SNMP_AGENT</type><snmp_oid>discovery[{#PORTNAME},.1.3.6.1.4.1.562.68.10.1.1.1.1.1.3,{#CHECKNAME},.1.3.6.1.4.1.562.68.10.1.1.1.1.1.4]</snmp_oid><key>optical.osc.spanloss.discovery</key><delay>1d;wd1h10</delay><filter><conditions><condition><macro>{#PORTNAME}</macro><value>OSC.*</value><formulaid>B</formulaid></condition><condition><macro>{#CHECKNAME}</macro><value>SPANLOSS-OCH NEND RCV</value><formulaid>A</formulaid></condition></conditions></filter><item_prototypes><item_prototype><name>{#PORTNAME} &quot;{#CHECKNAME}&quot;</name><type>SNMP_AGENT</type><snmp_oid>1.3.6.1.4.1.562.68.10.1.1.1.1.1.6.{#SNMPINDEX}</snmp_oid><key>optical.osc.spanloss[{#PORTNAME}.{#CHECKNAME}]</key><value_type>FLOAT</value_type><units>db</units><description>The span loss ont he receive fiber in db.</description><applications><application><name>Optical AMP/OSC</name></application></applications><trigger_prototypes><trigger_prototype><expression>{sum(#2)}=0 or {last(#1)}&lt;-44</expression><name>{#PORTNAME} has No Light</name><priority>HIGH</priority><description>The last two values for &quot;{#CHECKNAME}&quot;  is 0.  The check reports 0db when the OSC circuit cannot determine the spanloss. This would indicate a loss of light.</description></trigger_prototype></trigger_prototypes></item_prototype></item_prototypes></discovery_rule><discovery_rule><name>Optical AMP Rx Discovery</name><type>SNMP_AGENT</type><snmp_oid>discovery[{#PORTNAME},.1.3.6.1.4.1.562.68.10.1.1.1.1.1.3,{#CHECKNAME},.1.3.6.1.4.1.562.68.10.1.1.1.1.1.4,{#INDEX},.1.3.6.1.4.1.562.68.10.1.1.1.1.1.1]</snmp_oid><key>optical.rx.discovery</key><delay>1d;wd1h13</delay><filter><conditions><condition><macro>{#CHECKNAME}</macro><value>OPIN-OTS NEND NA</value><formulaid>A</formulaid></condition><condition><macro>{#PORTNAME}</macro><value>.*AMP.*</value><formulaid>B</formulaid></condition></conditions></filter><item_prototypes><item_prototype><name>{#PORTNAME} &quot;Optical Receive Power&quot; baseline</name><type>SNMP_AGENT</type><snmp_oid>1.3.6.1.4.1.562.68.10.1.1.3.1.1.6.{#INDEX}.52</snmp_oid><key>optical.baseline[{#PORTNAME}.OPIN]</key><delay>5m</delay><value_type>FLOAT</value_type><units>dbm</units><description>The baseline set on the shelf.  This can be re-initialized when needed via site manager.</description><applications><application><name>Optical AMP/OSC</name></application></applications></item_prototype><item_prototype><name>{#PORTNAME} &quot;Optical Receive Power&quot;</name><type>SNMP_AGENT</type><snmp_oid>1.3.6.1.4.1.562.68.10.1.1.1.1.1.6.{#INDEX}.52</snmp_oid><key>optical.rx[{#PORTNAME}.OPIN]</key><delay>5m</delay><value_type>FLOAT</value_type><units>dbm</units><applications><application><name>Optical AMP/OSC</name></application></applications></item_prototype></item_prototypes><trigger_prototypes><trigger_prototype><expression>(({Ciena 6500 2:optical.rx[{#PORTNAME}.OPIN].last(#1)}&lt;{Ciena 6500 2:optical.baseline[{#PORTNAME}.OPIN].last(#1)}-{$OPTICAL_VARIANCE}) or &#13;
({Ciena 6500 2:optical.rx[{#PORTNAME}.OPIN].last(#1)}&gt;{Ciena 6500 2:optical.baseline[{#PORTNAME}.OPIN].last(#1)}+{$OPTICAL_VARIANCE}))</expression><name>{#PORTNAME} Optical Rx Power crossed baseline thresholds</name><priority>INFO</priority><description>The optical power level it more than {$OPTICAL_VARIANCE}db from the baseline value.  This could be due to a new fiber event or the baselines may need to be reset.  First verify the optical path then decide weather to reset the baselines. The baseline value can be reset in the PMs on the Ciena shelf.</description></trigger_prototype></trigger_prototypes></discovery_rule><discovery_rule><name>Optical Transport Interface Discovery</name><type>SNMP_AGENT</type><snmp_oid>discovery[{#IFTYPE},.1.3.6.1.2.1.2.2.1.3,{#IFADMINSTATUS},1.3.6.1.2.1.2.2.1.7,{#IFDESCR},1.3.6.1.2.1.2.2.1.2,{#CONNPRESENT},.1.3.6.1.2.1.31.1.1.1.17]</snmp_oid><key>optical.transport.if.discovery</key><delay>1d;wd1h11</delay><filter><evaltype>AND</evaltype><conditions><condition><macro>{#IFTYPE}</macro><value>196</value><formulaid>C</formulaid></condition><condition><macro>{#IFADMINSTATUS}</macro><value>1</value><formulaid>B</formulaid></condition><condition><macro>{#CONNPRESENT}</macro><value>1</value><formulaid>A</formulaid></condition></conditions></filter><item_prototypes><item_prototype><name>{#IFDESCR}: Admin Status</name><type>SNMP_AGENT</type><snmp_oid>1.3.6.1.2.1.2.2.1.7.{#SNMPINDEX}</snmp_oid><key>net.if.status[ifAdminStatus.{#SNMPINDEX}]</key><delay>5m</delay><description>The administrative status of the port.</description><applications><application><name>Optical Transport Interface</name></application></applications><valuemap><name>Interface Admin Status</name></valuemap></item_prototype><item_prototype><name>{#IFDESCR}: Operational status</name><type>SNMP_AGENT</type><snmp_oid>1.3.6.1.2.1.2.2.1.8.{#SNMPINDEX}</snmp_oid><key>net.if.status[ifOperStatus.{#SNMPINDEX}]</key><delay>5m</delay><description>The operational status of the port.</description><applications><application><name>Optical Transport Interface</name></application></applications><valuemap><name>Interface Operational Status</name></valuemap></item_prototype><item_prototype><name>{#IFDESCR}: Optical Power Received</name><type>SNMP_AGENT</type><snmp_oid>1.3.6.1.4.1.562.68.10.1.1.1.1.1.6.{#SNMPINDEX}.32</snmp_oid><key>net.if.status[opr.och.nend.rcv.{#SNMPINDEX}]</key><delay>5m</delay><value_type>FLOAT</value_type><units>dbm</units><description>The optical power received at this port in dbm.</description><applications><application><name>Optical Transport Interface</name></application></applications></item_prototype><item_prototype><name>{#IFDESCR}: Optical Power Transmitted</name><type>SNMP_AGENT</type><snmp_oid>1.3.6.1.4.1.562.68.10.1.1.1.1.1.6.{#SNMPINDEX}.34</snmp_oid><key>net.if.status[opr.och.nend.trmt.{#SNMPINDEX}]</key><delay>5m</delay><value_type>FLOAT</value_type><units>dbm</units><description>The optical power transmitted at this port in dbm.</description><applications><application><name>Optical Transport Interface</name></application></applications></item_prototype><item_prototype><name>{#IFDESCR}: Post-FEC bit error rate</name><type>SNMP_AGENT</type><snmp_oid>1.3.6.1.4.1.562.68.10.1.1.1.1.1.6.{#SNMPINDEX}.42</snmp_oid><key>net.if.status[post.fec.ber.{#SNMPINDEX}]</key><delay>5m</delay><trends>0</trends><value_type>CHAR</value_type><description>Post-FEC bit error rate estimate, optical channel transport unit</description><applications><application><name>Optical Transport Interface</name></application></applications></item_prototype><item_prototype><name>{#IFDESCR}: Pre-FEC bit error rate</name><type>SNMP_AGENT</type><snmp_oid>1.3.6.1.4.1.562.68.10.1.1.1.1.1.6.{#SNMPINDEX}.43</snmp_oid><key>net.if.status[pre.fec.ber.{#SNMPINDEX}]</key><delay>5m</delay><trends>0</trends><value_type>CHAR</value_type><description>Pre-FEC bit error rate, optical channel transport unit</description><applications><application><name>Optical Transport Interface</name></application></applications></item_prototype><item_prototype><name>{#IFDESCR}: Uncorrected FEC block</name><type>SNMP_AGENT</type><snmp_oid>1.3.6.1.4.1.562.68.10.1.1.1.1.1.6.{#SNMPINDEX}.189</snmp_oid><key>net.if.status[uncorrected.fec.block.{#SNMPINDEX}]</key><delay>5m</delay><units>block error</units><description>Uncorrected FEC blocks, Optical Transport Unit.</description><applications><application><name>Optical Transport Interface</name></application></applications></item_prototype></item_prototypes><trigger_prototypes><trigger_prototype><expression>{Ciena 6500 2:net.if.status[ifOperStatus.{#SNMPINDEX}].last(#1)}&lt;&gt;1 and {Ciena 6500 2:net.if.status[ifAdminStatus.{#SNMPINDEX}].last(#1,1)}=1</expression><name>{#IFDESCR} DOWN</name><priority>AVERAGE</priority><description>The interface status is not UP for this DWDM transport interface.  This indicates the DWDM wave is down and could be a result of a fiber cut.</description></trigger_prototype></trigger_prototypes></discovery_rule><discovery_rule><name>Optical AMP Tx Discovery</name><type>SNMP_AGENT</type><snmp_oid>discovery[{#PORTNAME},.1.3.6.1.4.1.562.68.10.1.1.1.1.1.3,{#CHECKNAME},.1.3.6.1.4.1.562.68.10.1.1.1.1.1.4,{#INDEX},.1.3.6.1.4.1.562.68.10.1.1.1.1.1.1]</snmp_oid><key>optical.tx.discovery</key><delay>1d;wd1h12</delay><filter><evaltype>AND</evaltype><conditions><condition><macro>{#PORTNAME}</macro><value>.*AMP.*</value><formulaid>B</formulaid></condition><condition><macro>{#CHECKNAME}</macro><value>ORL-OTS NEND NA</value><formulaid>A</formulaid></condition></conditions></filter><item_prototypes><item_prototype><name>{#PORTNAME} &quot;Optical Transmit Power&quot; baseline</name><type>SNMP_AGENT</type><snmp_oid>1.3.6.1.4.1.562.68.10.1.1.3.1.1.6.{#INDEX}.55</snmp_oid><key>optical.tx.baseline[{#PORTNAME}.OPOUT]</key><delay>5m</delay><value_type>FLOAT</value_type><units>dbm</units><description>The baseline set on the shelf.  This can be re-initialized when needed via site manager.</description><applications><application><name>Optical AMP/OSC</name></application></applications></item_prototype><item_prototype><name>{#PORTNAME} &quot;Optical Return Loss&quot; baseline</name><type>SNMP_AGENT</type><snmp_oid>1.3.6.1.4.1.562.68.10.1.1.3.1.1.6.{#INDEX}.51</snmp_oid><key>optical.tx.baseline[{#PORTNAME}.ORL]</key><delay>5m</delay><value_type>FLOAT</value_type><units>dbm</units><description>The baseline set on the shelf.  This can be re-initialized when needed via site manager.</description><applications><application><name>Optical AMP/OSC</name></application></applications></item_prototype><item_prototype><name>{#PORTNAME} &quot;Optical Transmit Power&quot;</name><type>SNMP_AGENT</type><snmp_oid>1.3.6.1.4.1.562.68.10.1.1.1.1.1.6.{#INDEX}.55</snmp_oid><key>optical.tx[{#PORTNAME}.OPOUT]</key><delay>5m</delay><value_type>FLOAT</value_type><units>dbm</units><description>The optical transit power for this port in dbm.</description><applications><application><name>Optical AMP/OSC</name></application></applications></item_prototype><item_prototype><name>{#PORTNAME} &quot;Optical Return Loss&quot;</name><type>SNMP_AGENT</type><snmp_oid>1.3.6.1.4.1.562.68.10.1.1.1.1.1.6.{#INDEX}.51</snmp_oid><key>optical.tx[{#PORTNAME}.ORL]</key><delay>5m</delay><value_type>FLOAT</value_type><units>dbm</units><description>Optical Return Loss (ORL) is similar to SNR.  The higher the ORL, the better.</description><applications><application><name>Optical AMP/OSC</name></application></applications><trigger_prototypes><trigger_prototype><expression>{last(#1)}&lt;30</expression><name>{#PORTNAME} LOW &quot;Optical Return Loss&quot;</name><priority>WARNING</priority><description>Optical Return Loss (ORL) is similar to SNR.  The higher the ORL, the better.  The minimum ORL is 30db.  Anything lower than 30db indicates a fiber issue, such as a dirty connector or improper fiber mating.</description></trigger_prototype></trigger_prototypes></item_prototype></item_prototypes><trigger_prototypes><trigger_prototype><expression>({Ciena 6500 2:optical.tx[{#PORTNAME}.ORL].last(#1)}&lt;{Ciena 6500 2:optical.tx.baseline[{#PORTNAME}.ORL].last(#1)}-{$OPTICAL_VARIANCE}) or &#13;
({Ciena 6500 2:optical.tx[{#PORTNAME}.ORL].last(#1)}&gt;{Ciena 6500 2:optical.tx.baseline[{#PORTNAME}.ORL].last(#1)}+{$OPTICAL_VARIANCE})</expression><name>{#PORTNAME} Optical Return Loss crossed baseline thresholds</name><priority>INFO</priority><description>The optical return loss it more than {$OPTICAL_VARIANCE}db from the baseline value.  This could be due to a new fiber event or the baselines may need to be reset.  First verify the optical path then decide weather to reset the baselines. The baseline value can be reset in the PMs on the Ciena shelf.</description></trigger_prototype><trigger_prototype><expression>({Ciena 6500 2:optical.tx[{#PORTNAME}.OPOUT].last(#1)}&lt;{Ciena 6500 2:optical.tx.baseline[{#PORTNAME}.OPOUT].last(#1)}-{$OPTICAL_VARIANCE}) or &#13;
({Ciena 6500 2:optical.tx[{#PORTNAME}.OPOUT].last(#1)}&gt;{Ciena 6500 2:optical.tx.baseline[{#PORTNAME}.OPOUT].last(#1)}+{$OPTICAL_VARIANCE})</expression><name>{#PORTNAME} Optical Tx Power crossed baseline thresholds</name><priority>INFO</priority><description>The optical power level is more than {$OPTICAL_VARIANCE}db from the baseline value.  This could be due to a new fiber event or the baselines may need to be reset.  First verify the optical path then decide weather to reset the baselines. The baseline value can be reset in the PMs on the Ciena shelf.</description></trigger_prototype></trigger_prototypes></discovery_rule></discovery_rules><macros><macro><macro>{$OPTICAL_VARIANCE}</macro><value>2</value><description>the allowed variance from baselines in db</description></macro><macro><macro>{$SNMP_COMMUNITY}</macro><value>secret</value></macro></macros></template></templates><value_maps><value_map><name>Interface Admin Status</name><mappings><mapping><value>1</value><newvalue>up</newvalue></mapping><mapping><value>2</value><newvalue>down</newvalue></mapping><mapping><value>3</value><newvalue>testing</newvalue></mapping></mappings></value_map><value_map><name>Interface Operational Status</name><mappings><mapping><value>1</value><newvalue>up</newvalue></mapping><mapping><value>2</value><newvalue>down</newvalue></mapping><mapping><value>3</value><newvalue>testing</newvalue></mapping></mappings></value_map></value_maps></zabbix_export>
