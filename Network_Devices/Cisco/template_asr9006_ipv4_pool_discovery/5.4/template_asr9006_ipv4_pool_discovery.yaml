zabbix_export:
  version: '5.4'
  date: '2021-10-22T10:58:23Z'
  groups:
    -
      uuid: 020a9a869bf24a63a842729b67659088
      name: ASR-9006
  templates:
    -
      uuid: dada158835de41b393fbbd3b4bda97eb
      template: 'Template for ASR9006 IPv4 Pool discovery'
      name: 'Template for ASR9006 IPv4 Pool discovery'
      description: |
        Discovering pool name and vrf name from ASR9006
        and represents Used & Free IP addresses
        Mokhtari Tce
        mohamadreza.mokhtari@gmail.com
      groups:
        -
          name: ASR-9006
      discovery_rules:
        -
          uuid: 6bc928ad03af4e60b6a1b1bc6bba9a0e
          name: 'ASR9006 Pool Discovery'
          type: SNMP_AGENT
          snmp_oid: 'discovery[{#POOLNAME},1.3.6.1.4.1.9.9.748.1.2.2.1.4,{#VRF},1.3.6.1.4.1.9.9.748.1.2.2.1.6]'
          key: pool.ip.discovery
          delay: 1h
          description: |
            Discovering pool name and vrf name from ASR9006
            Mokhtari Tce
            mohamadreza.mokhtari@gmail.com
          item_prototypes:
            -
              uuid: 1eaf546920c3422faa8e7db056947170
              name: 'Pool {#POOLNAME} Free IP Address'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.4.1.9.9.748.1.2.2.1.11.{#SNMPINDEX}'
              key: 'pool.ip.free.[ipfree.{#SNMPINDEX}]'
              tags:
                -
                  tag: Application
                  value: IPv4
            -
              uuid: 07d47e8907c14603ab28e54d519adf59
              name: 'Pool {#POOLNAME} Used IP Address'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.4.1.9.9.748.1.2.2.1.10.{#SNMPINDEX}'
              key: 'pool.ip.used.[used.{#SNMPINDEX}]'
              tags:
                -
                  tag: Application
                  value: IPv4
          trigger_prototypes:
            -
              uuid: 593045ade5c049a9a9ffe41e0e1ac60a
              expression: 'last(/Template for ASR9006 IPv4 Pool discovery/pool.ip.free.[ipfree.{#SNMPINDEX}]) < (1/100) * last(/Template for ASR9006 IPv4 Pool discovery/pool.ip.used.[used.{#SNMPINDEX}])'
              recovery_mode: RECOVERY_EXPRESSION
              recovery_expression: 'last(/Template for ASR9006 IPv4 Pool discovery/pool.ip.free.[ipfree.{#SNMPINDEX}])> (2/100) * last(/Template for ASR9006 IPv4 Pool discovery/pool.ip.used.[used.{#SNMPINDEX}])'
              name: 'Pool {#POOLNAME} Free IP Address less than (1/100) * {Template for ASR9006 Pool discovery:pool.ip.used.[used.{#SNMPINDEX}].last()}'
              priority: DISASTER
            -
              uuid: cc9c28d7138a4510ab5c4b15a53e4797
              expression: 'last(/Template for ASR9006 IPv4 Pool discovery/pool.ip.free.[ipfree.{#SNMPINDEX}]) < (2/100) * last(/Template for ASR9006 IPv4 Pool discovery/pool.ip.used.[used.{#SNMPINDEX}])'
              recovery_mode: RECOVERY_EXPRESSION
              recovery_expression: 'last(/Template for ASR9006 IPv4 Pool discovery/pool.ip.free.[ipfree.{#SNMPINDEX}])> (3/100) * last(/Template for ASR9006 IPv4 Pool discovery/pool.ip.used.[used.{#SNMPINDEX}])'
              name: 'Pool {#POOLNAME} Free IP Address less than (2/100) * {Template for ASR9006 Pool discovery:pool.ip.used.[used.{#SNMPINDEX}].last()}'
              priority: HIGH
            -
              uuid: d4fd2efbe6c243a4892be8c5020d0daa
              expression: 'last(/Template for ASR9006 IPv4 Pool discovery/pool.ip.free.[ipfree.{#SNMPINDEX}]) < (3/100) * last(/Template for ASR9006 IPv4 Pool discovery/pool.ip.used.[used.{#SNMPINDEX}])'
              recovery_mode: RECOVERY_EXPRESSION
              recovery_expression: 'last(/Template for ASR9006 IPv4 Pool discovery/pool.ip.free.[ipfree.{#SNMPINDEX}])> (4/100) * last(/Template for ASR9006 IPv4 Pool discovery/pool.ip.used.[used.{#SNMPINDEX}])'
              name: 'Pool {#POOLNAME} Free IP Address less than (3/100) * {Template for ASR9006 Pool discovery:pool.ip.used.[used.{#SNMPINDEX}].last()}'
              priority: AVERAGE
            -
              uuid: 4de0f85156144815be377c100d75e7a1
              expression: 'last(/Template for ASR9006 IPv4 Pool discovery/pool.ip.free.[ipfree.{#SNMPINDEX}]) < (4/100) * last(/Template for ASR9006 IPv4 Pool discovery/pool.ip.used.[used.{#SNMPINDEX}])'
              recovery_mode: RECOVERY_EXPRESSION
              recovery_expression: 'last(/Template for ASR9006 IPv4 Pool discovery/pool.ip.free.[ipfree.{#SNMPINDEX}])> (5/100) * last(/Template for ASR9006 IPv4 Pool discovery/pool.ip.used.[used.{#SNMPINDEX}])'
              name: 'Pool {#POOLNAME} Free IP Address less than (4/100) * {Template for ASR9006 Pool discovery:pool.ip.used.[used.{#SNMPINDEX}].last()}'
              priority: WARNING
          graph_prototypes:
            -
              uuid: 9215ed8845df40da9035c809ee28162c
              name: 'Pool {#POOLNAME} Free IP Address'
              ymin_type_1: FIXED
              graph_items:
                -
                  sortorder: '1'
                  drawtype: GRADIENT_LINE
                  color: 9C27B0
                  item:
                    host: 'Template for ASR9006 IPv4 Pool discovery'
                    key: 'pool.ip.free.[ipfree.{#SNMPINDEX}]'
            -
              uuid: 04e9e28fe7cf4381a441f51871d35d79
              name: 'Pool {#POOLNAME} Used IP Address'
              ymin_type_1: FIXED
              graph_items:
                -
                  sortorder: '1'
                  drawtype: GRADIENT_LINE
                  color: 1A7C11
                  item:
                    host: 'Template for ASR9006 IPv4 Pool discovery'
                    key: 'pool.ip.used.[used.{#SNMPINDEX}]'
