zabbix_export:
  version: '5.4'
  date: '2021-11-09T08:49:25Z'
  groups:
    -
      uuid: e0242822f07b4633a283b8dc935d3dd9
      name: Templates_Created
  templates:
    -
      uuid: 54cbcfcd4a624faba6cd32ba1ab1c33c
      template: 'Cisco ASR 9K Health SNMP'
      name: 'Cisco ASR 9K Health SNMP'
      description: |
        ## Description
        
        Template Cisco ASR 9k Health -CPU -Memory -Power Supply -Temperature ( RSP e LC ) -FAN ( FAN and FANTray ) -Power Consumption By: Flavio Gomes Figueira Camacho Junior Require: Firmware / Software .IOS XR 5.3.1 .IOS XR 5.3.4 ValueMap .CISCO-ENTITY-FRU-CONTROL-MIB::PowerOperType .ENTITY-SENSORS-MIB::EntitySensorStatus .CISCO-ENTITY-FRU-CONTROL-MIB::CefcFanTrayStatusEntry .CISCO-ENTITY-SENSOR-MIB::SensorStatus Base: CISCO-MEMORY-POOL-MIB.mib http://www.circitor.fr/Mibs/Html/C/CISCO-MEMORY-POOL-MIB.php CISCO-PROCESS-MIB.mib http://www.circitor.fr/Mibs/Html/C/CISCO-PROCESS-MIB.php ENTITY-MIB http://www.circitor.fr/Mibs/Html/E/ENTITY-MIB.php CISCO-ENTITY-FRU-CONTROL-MIB.mib https://circitor.fr/Mibs/Html/C/CISCO-ENTITY-FRU-CONTROL-MIB.php CISCO-ENTITY-SENSOR-MIB.mib http://www.circitor.fr/Mibs/Html/C/CISCO-ENTITY-SENSOR-MIB.php https://share.zabbix.com/network_devices/cisco/template-cisco-asr-9k External Scripts and Value Mapping on my Github: https://github.com/flaviojunior1995/Zabbix-Templates
        
        ## Overview
        
        Template Cisco ASR 9k Health
        
        
        -CPU
        
        
        -Memory
        
        
        -Power Supply
        
        
        -Temperature ( RSP e LC )
        
        
        -FAN ( FAN and FANTray )
        
        
        -Power Consumption
        
        
         
        
        
        By: Flavio Gomes Figueira Camacho Junior
        
        
         
        
        
        Require:
        
        
        Firmware / Software
        
        
        .IOS XR 5.3.1
        
        
        .IOS XR 5.3.4
        
        
        ValueMap
        
        
        .CISCO-ENTITY-FRU-CONTROL-MIB::PowerOperType
        
        
        .CISCO-ENTITY-FRU-CONTROL-MIB::CefcFanTrayStatusEntry
        
        
        .CISCO-ENTITY-SENSOR-MIB::SensorStatus
        
        
        .ENTITY-SENSORS-MIB::EntitySensorStatus
        
        
         
        
        
        Base:
        
        
        CISCO-MEMORY-POOL-MIB.mib 
        
        
        http://www.circitor.fr/Mibs/Html/C/CISCO-MEMORY-POOL-MIB.php
        
        
        CISCO-PROCESS-MIB.mib
        
        
        http://www.circitor.fr/Mibs/Html/C/CISCO-PROCESS-MIB.php
        
        
        ENTITY-MIB
        
        
        http://www.circitor.fr/Mibs/Html/E/ENTITY-MIB.php
        
        
        CISCO-ENTITY-FRU-CONTROL-MIB.mib
        
        
        https://circitor.fr/Mibs/Html/C/CISCO-ENTITY-FRU-CONTROL-MIB.php
        
        
        CISCO-ENTITY-SENSOR-MIB.mib
        
        
        http://www.circitor.fr/Mibs/Html/C/CISCO-ENTITY-SENSOR-MIB.php
        
        
        https://share.zabbix.com/network\_devices/cisco/template-cisco-asr-9k
        
        
         
        
        
        External Scripts and Value Mapping on my Github:
        
        
        https://github.com/flaviojunior1995/Zabbix-Templates
        
        
        
        ## Author
        
        Flavio Camacho Junior
        
        
      groups:
        -
          name: Templates_Created
      items:
        -
          uuid: 36c0aef90d884faaaa9402630d486079
          name: 'Power Consumption'
          type: CALCULATED
          key: powerConsumption
          value_type: FLOAT
          units: W
          params: '( last(//entPhysicalContainedInCurrent["current 0/PS0/M0/SP"]) * last(//entPhysicalContainedInVoltage["voltage 0/PS0/M0/SP"]) ) +( last(//entPhysicalContainedInCurrent["current 0/PS0/M1/SP"]) * last(//entPhysicalContainedInVoltage["voltage 0/PS0/M1/SP"]) ) +( last(//entPhysicalContainedInCurrent["current 0/PS0/M2/SP"]) * last(//entPhysicalContainedInVoltage["voltage 0/PS0/M2/SP"]) ) +( last(//entPhysicalContainedInCurrent["current 0/PS1/M0/SP"]) * last(//entPhysicalContainedInVoltage["voltage 0/PS1/M0/SP"]) ) +( last(//entPhysicalContainedInCurrent["current 0/PS1/M1/SP"]) * last(//entPhysicalContainedInVoltage["voltage 0/PS1/M1/SP"]) ) +( last(//entPhysicalContainedInCurrent["current 0/PS1/M2/SP"]) * last(//entPhysicalContainedInVoltage["voltage 0/PS1/M2/SP"]) )'
          tags:
            -
              tag: Application
              value: 'Power Consumption'
      discovery_rules:
        -
          uuid: 8b970962bc694be78b53ae0daa08e7cc
          name: 'Memory Pool Discovery'
          type: SNMP_AGENT
          snmp_oid: 'discovery[{#SNMPVALUE},.1.3.6.1.4.1.9.9.48.1.1.1.2]'
          key: 'ciscoMemoryPoolName["Memory"]'
          delay: 1h
          filter:
            conditions:
              -
                macro: '{#SNMPVALUE}'
                value: ^(image|reserved)
                operator: NOT_MATCHES_REGEX
                formulaid: A
          description: |
            CISCO-MEMORY-POOL-MIB::ciscoMemoryPoolName
            
            A textual name assigned to the memory pool.
          item_prototypes:
            -
              uuid: 49707d736a7c4c38b29c55da59877825
              name: 'Free memory on Memory Pool "$1"'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.4.1.9.9.48.1.1.1.6.{#SNMPINDEX}'
              key: 'ciscoMemoryPoolFree["{#SNMPVALUE}"]'
              delay: 5m
              units: B
              description: |
                CISCO-MEMORY-POOL-MIB::ciscoMemoryPoolFree
                
                Indicates the number of bytes from the memory pool that are currently unused on the managed device.
              tags:
                -
                  tag: Application
                  value: Memory
                -
                  tag: Application
                  value: 'Memory {#SNMPVALUE}'
            -
              uuid: 592f68739de94eab808ea80597755f12
              name: 'Total Memory Pool "$1"'
              type: CALCULATED
              key: 'ciscoMemoryPoolTotal["{#SNMPVALUE}"]'
              delay: 1h
              history: 7d
              trends: 180d
              units: B
              params: 'last(//ciscoMemoryPoolFree["{#SNMPVALUE}"]) + last(//ciscoMemoryPoolUsed["{#SNMPVALUE}"])'
              tags:
                -
                  tag: Application
                  value: Memory
                -
                  tag: Application
                  value: 'Memory {#SNMPVALUE}'
            -
              uuid: c94b4078b73b4ecebba53f6a2d9ac85a
              name: 'Used memory on Memory Pool "$1"'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.4.1.9.9.48.1.1.1.5.{#SNMPINDEX}'
              key: 'ciscoMemoryPoolUsed["{#SNMPVALUE}"]'
              delay: 5m
              units: B
              description: |
                CISCO-MEMORY-POOL-MIB::ciscoMemoryPoolUsed
                
                Indicates the number of bytes from the memory pool that are currently in use by applications on the managed device.
              tags:
                -
                  tag: Application
                  value: Memory
                -
                  tag: Application
                  value: 'Memory {#SNMPVALUE}'
            -
              uuid: e16327ce384a4190937a772ad8ca2e5f
              name: 'Utilization on Memory Pool "$1"'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.4.1.9.9.48.1.2.1.2.{#SNMPINDEX}'
              key: 'ciscoMemoryPoolUtilization5Min["{#SNMPVALUE}"]'
              delay: 5m
              units: '%'
              description: |
                CISCO-MEMORY-POOL-MIB::ciscoMemoryPoolUtilization5Min
                
                This is the memory pool utilization for 5 minutes.
              tags:
                -
                  tag: Application
                  value: Memory
                -
                  tag: Application
                  value: 'Memory {#SNMPVALUE}'
              trigger_prototypes:
                -
                  uuid: cb78d94407d64edcad734beb649a8ced
                  expression: 'last(/Cisco ASR 9K Health SNMP/ciscoMemoryPoolUtilization5Min["{#SNMPVALUE}"]) > {$MEMORY_HIGH_WARNING}'
                  name: 'High utilization of Memory Pool "{#SNMPVALUE}"'
                  priority: AVERAGE
          trigger_prototypes:
            -
              uuid: 515f1bae7aa74daaa854735d05c6e951
              expression: '( last(/Cisco ASR 9K Health SNMP/ciscoMemoryPoolUsed["{#SNMPVALUE}"]) * 100 ) / last(/Cisco ASR 9K Health SNMP/ciscoMemoryPoolTotal["{#SNMPVALUE}"]) > {$MEMORY_HIGH_ALARM}'
              name: 'High memory utilizarion alarm on Pool "{#SNMPVALUE}"'
              priority: HIGH
          graph_prototypes:
            -
              uuid: c28724eb6542492ab8ea0695fb8eaf26
              name: 'Memory Utilization Pool "{#SNMPVALUE}"'
              graph_items:
                -
                  drawtype: GRADIENT_LINE
                  color: 00FF00
                  item:
                    host: 'Cisco ASR 9K Health SNMP'
                    key: 'ciscoMemoryPoolUtilization5Min["{#SNMPVALUE}"]'
            -
              uuid: 84006adba5734edcb83ed8967de1b6a2
              name: 'Memory {#SNMPVALUE}'
              graph_items:
                -
                  drawtype: BOLD_LINE
                  color: 00FF00
                  item:
                    host: 'Cisco ASR 9K Health SNMP'
                    key: 'ciscoMemoryPoolTotal["{#SNMPVALUE}"]'
                -
                  sortorder: '1'
                  drawtype: GRADIENT_LINE
                  color: FF0000
                  item:
                    host: 'Cisco ASR 9K Health SNMP'
                    key: 'ciscoMemoryPoolUsed["{#SNMPVALUE}"]'
        -
          uuid: 235c2df64f984cd48f8b69dbec4a2852
          name: 'CPU Discovery'
          type: SNMP_AGENT
          snmp_oid: 'discovery[{#SNMPVALUE},.1.3.6.1.4.1.9.9.109.1.1.1.1.2]'
          key: 'cpmCPUTotalPhysicalIndex["CPU"]'
          delay: 1h
          description: |
            CISCO-PROCESS-MIB::cpmCPUTotalPhysicalIndex
            
            The entPhysicalIndex of the physical entity for which the CPU statistics in this entry are maintained. The physical entity can be a CPU chip, a group of CPUs, a CPU card etc. The exact type of this entity is described by its entPhysicalVendorType value. If the CPU statistics in this entry correspond to more than one physical entity (or to no physical entity), or if the entPhysicalTable is not supported on the SNMP agent, the value of this object must be zero.
          item_prototypes:
            -
              uuid: 127bd0ffb39a462fb40a1cab04a96880
              name: 'CPU #$1 Usage 1min Rev'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.4.1.9.9.109.1.1.1.1.7.{#SNMPINDEX}'
              key: 'cpmCPUTotal1minRev["{#SNMPINDEX}"]'
              units: '%'
              description: |
                CISCO-PROCESS-MIB::cpmCPUTotal1minRev
                
                The overall CPU busy percentage in the last 1 minute period. This object deprecates the object cpmCPUTotal1min and increases the value range to (0..100).
              tags:
                -
                  tag: Application
                  value: CPU
              trigger_prototypes:
                -
                  uuid: 9b74c18991664c60aac424dc39338286
                  expression: 'last(/Cisco ASR 9K Health SNMP/cpmCPUTotal1minRev["{#SNMPINDEX}"])>{$CPU_HIGH_ALARM}'
                  name: 'High CPU Alarm #{#SNMPINDEX} 1min Usage'
                  priority: HIGH
                -
                  uuid: c4631c06ec204572a3a08c9e915cf79b
                  expression: 'last(/Cisco ASR 9K Health SNMP/cpmCPUTotal1minRev["{#SNMPINDEX}"])>{$CPU_HIGH_WARNING}'
                  name: 'High CPU Warning  #{#SNMPINDEX} 1min Usage'
                  priority: AVERAGE
            -
              uuid: d980ebcfb5944eae967b02e6a6f53097
              name: 'CPU #$1 Usage 5min Rev'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.4.1.9.9.109.1.1.1.1.8.{#SNMPINDEX}'
              key: 'cpmCPUTotal5minRev["{#SNMPINDEX}"]'
              delay: 5m
              units: '%'
              description: |
                CISCO-PROCESS-MIB::cpmCPUTotal5minRev
                
                The overall CPU busy percentage in the last 5 minute period. This object deprecates the object cpmCPUTotal5min and increases the value range to (0..100).
              tags:
                -
                  tag: Application
                  value: CPU
              trigger_prototypes:
                -
                  uuid: 6b1aa835029c408490fa958e6d9da347
                  expression: 'last(/Cisco ASR 9K Health SNMP/cpmCPUTotal5minRev["{#SNMPINDEX}"])>{$CPU_HIGH_ALARM}'
                  name: 'High CPU Alarm #{#SNMPINDEX} 5min Usage'
                  priority: HIGH
                -
                  uuid: 3cc4d9399ee04cfd824325dc463775e1
                  expression: 'last(/Cisco ASR 9K Health SNMP/cpmCPUTotal5minRev["{#SNMPINDEX}"])>{$CPU_HIGH_WARNING}'
                  name: 'High CPU Warning #{#SNMPINDEX} 5min Usage'
                  priority: AVERAGE
          graph_prototypes:
            -
              uuid: 8800a1a65afa438691f96cc98254544a
              name: 'CPU #"{#SNMPINDEX}" 1min Usage'
              graph_items:
                -
                  drawtype: GRADIENT_LINE
                  color: 00FF00
                  item:
                    host: 'Cisco ASR 9K Health SNMP'
                    key: 'cpmCPUTotal1minRev["{#SNMPINDEX}"]'
            -
              uuid: 791eedb44ef042de979e4cc886a7214e
              name: 'CPU #"{#SNMPINDEX}" 5min Usage'
              graph_items:
                -
                  drawtype: GRADIENT_LINE
                  color: 00FF00
                  item:
                    host: 'Cisco ASR 9K Health SNMP'
                    key: 'cpmCPUTotal5minRev["{#SNMPINDEX}"]'
        -
          uuid: a23f5c4f97874422bdb01acf6f5dd5a6
          name: 'FAN Sensor Discovery'
          type: SNMP_AGENT
          snmp_oid: 'discovery[{#SNMPVALUE},.1.3.6.1.2.1.47.1.1.1.1.7]'
          key: 'entPhysicalName["FAN"]'
          delay: 1h
          filter:
            conditions:
              -
                macro: '{#SNMPVALUE}'
                value: ^speed
                formulaid: A
          description: 'The textual name of the physical entity.'
          item_prototypes:
            -
              uuid: 612a0ad0bc704b52beb7488526ca81f5
              name: 'Status of FAN Sensor "{#SNMPVALUE}"/{#SNMPINDEX}'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.4.1.9.9.91.1.1.1.1.5.{#SNMPINDEX}'
              key: 'entSensorStatus["{#SNMPVALUE}",FAN,{#SNMPINDEX}]'
              history: 30d
              trends: '0'
              description: |
                CISCO-ENTITY-SENSOR-MIB::entSensorStatus
                
                This variable indicates the present operational status of the sensor.
              valuemap:
                name: 'ENTITY-SENSORS-MIB::EntitySensorStatus'
              tags:
                -
                  tag: Application
                  value: FAN
              trigger_prototypes:
                -
                  uuid: fa540a37d26541439b8beb9033a25b69
                  expression: 'last(/Cisco ASR 9K Health SNMP/entSensorStatus["{#SNMPVALUE}",FAN,{#SNMPINDEX}])=3'
                  name: 'FAN Sensor "{#SNMPVALUE}"/{#SNMPINDEX} is nonoperational'
                  priority: HIGH
                -
                  uuid: 344685ee744346abbf72d65085076014
                  expression: 'last(/Cisco ASR 9K Health SNMP/entSensorStatus["{#SNMPVALUE}",FAN,{#SNMPINDEX}])=2'
                  name: 'FAN Sensor "{#SNMPVALUE}"/{#SNMPINDEX} is unavailable'
                  priority: AVERAGE
            -
              uuid: d7a9bfd0f8104f66aef573d22d5e0640
              name: 'Speed of FAN Sensor "{#SNMPVALUE}"/{#SNMPINDEX}'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.4.1.9.9.91.1.1.1.1.4.{#SNMPINDEX}'
              key: 'entSensorValue["{#SNMPVALUE}",FAN,{#SNMPINDEX}]'
              delay: 5m
              units: rpm
              description: |
                CISCO-ENTITY-SENSOR-MIB::entSensorValue
                
                This variable reports the most recent measurement seen by the sensor.
              tags:
                -
                  tag: Application
                  value: FAN
          graph_prototypes:
            -
              uuid: 6c50d765a03d47dc8c3f67814ea772ba
              name: 'FAN speed "{#SNMPVALUE}"/{#SNMPINDEX}'
              show_work_period: 'NO'
              show_triggers: 'NO'
              graph_items:
                -
                  color: 199C0D
                  item:
                    host: 'Cisco ASR 9K Health SNMP'
                    key: 'entSensorValue["{#SNMPVALUE}",FAN,{#SNMPINDEX}]'
        -
          uuid: 058d851aeb494abdb8b056183eb890f3
          name: 'FAN Tray Sensor Discovery'
          type: SNMP_AGENT
          snmp_oid: 'discovery[{#SNMPVALUE},.1.3.6.1.2.1.47.1.1.1.1.7]'
          key: 'entPhysicalName["FAN Tray"]'
          delay: 1h
          filter:
            conditions:
              -
                macro: '{#SNMPVALUE}'
                value: ^fantray
                formulaid: A
          description: 'The textual name of the physical entity.'
          item_prototypes:
            -
              uuid: 639e2b1eadd5409fbb0245857f734b1c
              name: 'Operational Status of "$1"'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.4.1.9.9.117.1.4.1.1.1.{#SNMPINDEX}'
              key: 'cefcFanTrayOperStatus["{#SNMPVALUE}"]'
              history: 30d
              trends: '0'
              description: |
                CISCO-ENTITY-FRU-CONTROL-MIB::cefcFanTrayOperStatus
                
                The operational state of the fan or fan tray.
              valuemap:
                name: 'CISCO-ENTITY-FRU-CONTROL-MIB::CefcFanTrayStatusEntry'
              tags:
                -
                  tag: Application
                  value: FAN
              trigger_prototypes:
                -
                  uuid: 05facca01bd24d27be94c5ce73a80005
                  expression: 'last(/Cisco ASR 9K Health SNMP/cefcFanTrayOperStatus["{#SNMPVALUE}"])=4'
                  name: 'Status of "{#SNMPVALUE}" is in partial failure'
                  priority: AVERAGE
                -
                  uuid: 1243d880dae6467e886f3efccdf0a3b9
                  expression: 'last(/Cisco ASR 9K Health SNMP/cefcFanTrayOperStatus["{#SNMPVALUE}"])=3'
                  name: 'Status of "{#SNMPVALUE}" is powered down'
                  priority: HIGH
                -
                  uuid: 9953d63d14c445b393035f1ef84b585b
                  expression: 'last(/Cisco ASR 9K Health SNMP/cefcFanTrayOperStatus["{#SNMPVALUE}"])=1'
                  name: 'Status of "{#SNMPVALUE}" is unknown'
                  priority: INFO
        -
          uuid: f36d1f9e80674780a2325e6d69ac5df5
          name: 'Temperature LC Discovery'
          type: SNMP_AGENT
          snmp_oid: 'discovery[{#SNMPVALUE},.1.3.6.1.2.1.47.1.1.1.1.7,{#SNMPDESC},.1.3.6.1.2.1.47.1.1.1.1.2]'
          key: 'entPhysicalName["LC"]'
          delay: 1h
          filter:
            evaltype: AND
            conditions:
              -
                macro: '{#SNMPVALUE}'
                value: '^temperature [0-1]/[0-9]/CPU[0-1]$'
                formulaid: B
              -
                macro: '{#SNMPDESC}'
                value: 'Hot Temperature SensorHotspot0'
                formulaid: A
          description: 'The textual name of the physical entity.'
          item_prototypes:
            -
              uuid: 693928ff511e4038b110e348ab5f3417
              name: 'Status of Temperature Sensor "$1"'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.4.1.9.9.91.1.1.1.1.5.{#SNMPINDEX}'
              key: 'entSensorStatus["{#SNMPVALUE}","Temperature LC"]'
              history: 30d
              trends: '0'
              description: |
                CISCO-ENTITY-SENSOR-MIB::entSensorStatus
                
                This variable indicates the present operational status of the sensor.
              valuemap:
                name: 'ENTITY-SENSORS-MIB::EntitySensorStatus'
              tags:
                -
                  tag: Application
                  value: 'Temperature LC'
                -
                  tag: Application
                  value: 'Temperature LC {#SNMPVALUE}'
              trigger_prototypes:
                -
                  uuid: 5e892df0c7b14bd8b9d48f55782c0e71
                  expression: 'last(/Cisco ASR 9K Health SNMP/entSensorStatus["{#SNMPVALUE}","Temperature LC"])=3'
                  name: 'Temperature Sensor "{#SNMPVALUE}" is nonoperational'
                  priority: HIGH
                -
                  uuid: 01c00da370904146af37caef3df9d48b
                  expression: 'last(/Cisco ASR 9K Health SNMP/entSensorStatus["{#SNMPVALUE}","Temperature LC"])=2'
                  name: 'Temperature Sensor "{#SNMPVALUE}" is unavailable'
                  priority: AVERAGE
            -
              uuid: 95a54fdc381b43dbb916fb17d8640e22
              name: 'Thresholds::"$1" | Temperature Alarm'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.4.1.9.9.91.1.2.1.1.4.{#SNMPINDEX}.6'
              key: 'entSensorThresholdValue["{#SNMPVALUE}","Temperature LC","Alarm"]'
              delay: 1h
              history: 7d
              trends: 180d
              value_type: FLOAT
              units: °C
              preprocessing:
                -
                  type: MULTIPLIER
                  parameters:
                    - '0.1'
              tags:
                -
                  tag: Application
                  value: 'Temperature LC'
                -
                  tag: Application
                  value: 'Temperature LC {#SNMPVALUE}'
            -
              uuid: 27b2b33076854ed295c868821bbc920e
              name: 'Temperature on Sensor "$1"'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.4.1.9.9.91.1.1.1.1.4.{#SNMPINDEX}'
              key: 'entSensorValue["{#SNMPVALUE}","Temperature LC"]'
              units: °C
              description: |
                CISCO-ENTITY-SENSOR-MIB::entSensorValue
                
                This variable reports the most recent measurement seen by the sensor.
              preprocessing:
                -
                  type: MULTIPLIER
                  parameters:
                    - '0.1'
              tags:
                -
                  tag: Application
                  value: 'Temperature LC'
                -
                  tag: Application
                  value: 'Temperature LC {#SNMPVALUE}'
          trigger_prototypes:
            -
              uuid: 602a399a507441bca15607ca6a830d89
              expression: 'last(/Cisco ASR 9K Health SNMP/entSensorValue["{#SNMPVALUE}","Temperature LC"])>last(/Cisco ASR 9K Health SNMP/entSensorThresholdValue["{#SNMPVALUE}","Temperature LC","Alarm"])'
              name: 'High Temperature Alarm "{#SNMPVALUE}"'
              priority: HIGH
          graph_prototypes:
            -
              uuid: 4b978127e77848be9e975e83b4cf94b1
              name: 'Temperature LC "{#SNMPVALUE}"'
              graph_items:
                -
                  drawtype: GRADIENT_LINE
                  color: 00FF00
                  item:
                    host: 'Cisco ASR 9K Health SNMP'
                    key: 'entSensorValue["{#SNMPVALUE}","Temperature LC"]'
                -
                  sortorder: '1'
                  drawtype: BOLD_LINE
                  color: FF0000
                  item:
                    host: 'Cisco ASR 9K Health SNMP'
                    key: 'entSensorThresholdValue["{#SNMPVALUE}","Temperature LC","Alarm"]'
        -
          uuid: 3b44ee180f5d4b23abb66e04bf4050d2
          name: 'Power Supply Sensors Discovery'
          type: SNMP_AGENT
          snmp_oid: 'discovery[{#SNMPVALUE},.1.3.6.1.2.1.47.1.1.1.1.7]'
          key: 'entPhysicalName["Power Supply"]'
          delay: 1h
          filter:
            conditions:
              -
                macro: '{#SNMPVALUE}'
                value: ^power\-module
                formulaid: A
          lifetime: '0'
          description: 'The textual name of the physical entity.'
          item_prototypes:
            -
              uuid: 3afe257570a84fa5baca98bcec117150
              name: 'Current Supplied by PowerSupply "$1"'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.4.1.9.9.117.1.1.2.1.3.{#SNMPINDEX}'
              key: 'cefcFRUCurrent["{#SNMPVALUE}","Power Supply"]'
              delay: 30m
              history: 30d
              trends: '0'
              value_type: FLOAT
              units: W
              description: |
                CISCO-ENTITY-FRU-CONTROL-MIB::cefcFRUCurrent
                
                Current supplied by the FRU (positive values) or current required to operate the FRU (negative values).
              tags:
                -
                  tag: Application
                  value: 'Power Supply'
            -
              uuid: 141ee72316d542afa05115c7a9dd117b
              name: 'Operational Status of PowerSupply "$1"'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.4.1.9.9.117.1.1.2.1.2.{#SNMPINDEX}'
              key: 'cefcFRUPowerOperStatus["{#SNMPVALUE}","Power Supply"]'
              history: 30d
              trends: '0'
              description: |
                CISCO-ENTITY-FRU-CONTROL-MIB::cefcFRUPowerOperStatus
                
                Operational FRU power state.
              valuemap:
                name: 'CISCO-ENTITY-FRU-CONTROL-MIB::PowerOperType'
              tags:
                -
                  tag: Application
                  value: 'Power Supply'
              trigger_prototypes:
                -
                  uuid: 8f09db5160e940e3a71844d611ea67f2
                  expression: 'last(/Cisco ASR 9K Health SNMP/cefcFRUPowerOperStatus["{#SNMPVALUE}","Power Supply"])=11'
                  name: 'Connector rating exceeded on Power Supply "{#SNMPVALUE}"'
                  priority: AVERAGE
                -
                  uuid: a9f8ccf508924420b57c4d122ee85c30
                  expression: 'last(/Cisco ASR 9K Health SNMP/cefcFRUPowerOperStatus["{#SNMPVALUE}","Power Supply"])=10'
                  name: 'Cooling capacity is insufficient on Power Supply "{#SNMPVALUE}"'
                  priority: HIGH
                -
                  uuid: 2d8f77c37f574c2486546f9301dd677f
                  expression: 'last(/Cisco ASR 9K Health SNMP/cefcFRUPowerOperStatus["{#SNMPVALUE}","Power Supply"])=9'
                  name: 'FAN failed on Power Supply "{#SNMPVALUE}"'
                  priority: WARNING
                -
                  uuid: f98008058b3d43e89a89e3ad76125cfd
                  expression: 'last(/Cisco ASR 9K Health SNMP/cefcFRUPowerOperStatus["{#SNMPVALUE}","Power Supply"])=7'
                  name: 'FAN problem on Power Supply "{#SNMPVALUE}"'
                  priority: AVERAGE
                -
                  uuid: 9014f2e6ce834016b091430e1842f51d
                  expression: 'last(/Cisco ASR 9K Health SNMP/cefcFRUPowerOperStatus["{#SNMPVALUE}","Power Supply"])=5'
                  name: 'Power problem on Power Supply "{#SNMPVALUE}"'
                  priority: AVERAGE
                -
                  uuid: e899f3365592483593c83fb03b5ff8d2
                  expression: 'last(/Cisco ASR 9K Health SNMP/cefcFRUPowerOperStatus["{#SNMPVALUE}","Power Supply"])=8 and last(/Cisco ASR 9K Health SNMP/cefcFRUPowerOperStatus["{#SNMPVALUE}","Power Supply"])=12'
                  name: 'Power Supply "{#SNMPVALUE}" is failed'
                  priority: HIGH
                -
                  uuid: 9e1c70682c6643b39f40f15518a6deb1
                  expression: 'last(/Cisco ASR 9K Health SNMP/cefcFRUPowerOperStatus["{#SNMPVALUE}","Power Supply"])=1'
                  name: 'Power Supply "{#SNMPVALUE}" is powered off'
                  priority: WARNING
                -
                  uuid: 445edb9558484ef2833ca75083be7516
                  expression: 'last(/Cisco ASR 9K Health SNMP/cefcFRUPowerOperStatus["{#SNMPVALUE}","Power Supply"])=4'
                  name: 'System power is insufficient on Power Supply "{#SNMPVALUE}"'
                  priority: HIGH
                -
                  uuid: 122018b72c3e4a19b29046f148e95fb7
                  expression: 'last(/Cisco ASR 9K Health SNMP/cefcFRUPowerOperStatus["{#SNMPVALUE}","Power Supply"])=6'
                  name: 'Temperature problem on Power Supply "{#SNMPVALUE}"'
                  priority: HIGH
        -
          uuid: 9ac20eefd6d548b2839227b01f1352e8
          name: 'Power Supply Current (A) Discovery'
          type: SNMP_AGENT
          snmp_oid: 'discovery[{#SNMPVALUE},.1.3.6.1.2.1.47.1.1.1.1.7]'
          key: 'entPhysicalName["Power Supply Current"]'
          delay: 1h
          filter:
            conditions:
              -
                macro: '{#SNMPVALUE}'
                value: '^current [0|1]/PS[0|1]/M[0-2]/SP$'
                formulaid: A
          description: 'The textual name of the physical entity.'
          item_prototypes:
            -
              uuid: 0bdd4ddfdd72414f89ced676e8fd7f89
              name: '"$1"'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.4.1.9.9.91.1.1.1.1.4.{#SNMPINDEX}'
              key: 'entPhysicalContainedInCurrent["{#SNMPVALUE}"]'
              value_type: FLOAT
              units: A
              preprocessing:
                -
                  type: MULTIPLIER
                  parameters:
                    - '0.001'
              tags:
                -
                  tag: Application
                  value: 'Power Current'
          graph_prototypes:
            -
              uuid: 9ab60417e16d4c90bc87e92987e33395
              name: 'Current "{#SNMPVALUE}"'
              graph_items:
                -
                  drawtype: BOLD_LINE
                  color: FFFF00
                  item:
                    host: 'Cisco ASR 9K Health SNMP'
                    key: 'entPhysicalContainedInCurrent["{#SNMPVALUE}"]'
        -
          uuid: 2e32fc79349f4d899c30aec636640ec4
          name: 'Power Supply Voltage (V) Discovery'
          type: SNMP_AGENT
          snmp_oid: 'discovery[{#SNMPVALUE},.1.3.6.1.2.1.47.1.1.1.1.7]'
          key: 'entPhysicalName["Power Supply Voltage"]'
          delay: 1h
          filter:
            conditions:
              -
                macro: '{#SNMPVALUE}'
                value: '^voltage [0|1]/PS[0|1]/M[0-2]/SP$'
                formulaid: A
          description: 'The textual name of the physical entity.'
          item_prototypes:
            -
              uuid: 94c38c84c5d64a6e97393faab2409039
              name: '"$1"'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.4.1.9.9.91.1.1.1.1.4.{#SNMPINDEX}'
              key: 'entPhysicalContainedInVoltage["{#SNMPVALUE}"]'
              value_type: FLOAT
              units: V
              preprocessing:
                -
                  type: MULTIPLIER
                  parameters:
                    - '0.001'
              tags:
                -
                  tag: Application
                  value: 'Power Voltage'
          graph_prototypes:
            -
              uuid: 565e95bb31764685a1757a4c3b180544
              name: 'Voltage "{#SNMPVALUE}"'
              graph_items:
                -
                  drawtype: BOLD_LINE
                  color: 00FF00
                  item:
                    host: 'Cisco ASR 9K Health SNMP'
                    key: 'entPhysicalContainedInVoltage["{#SNMPVALUE}"]'
        -
          uuid: 59067ae4cc6a446499f097c739815988
          name: 'Temperature RSP Discovery'
          type: SNMP_AGENT
          snmp_oid: 'discovery[{#SNMPVALUE},.1.3.6.1.2.1.47.1.1.1.1.7,{#SNMPDESC},.1.3.6.1.2.1.47.1.1.1.1.2]'
          key: 'entPhysicalName["RSP"]'
          delay: 1h
          filter:
            evaltype: AND
            conditions:
              -
                macro: '{#SNMPVALUE}'
                value: '^temperature [0-1]/RSP[0-1]/CPU[0-1]$'
                formulaid: B
              -
                macro: '{#SNMPDESC}'
                value: 'Hot Temperature SensorHotspot0'
                formulaid: A
          description: 'The textual name of the physical entity.'
          item_prototypes:
            -
              uuid: 81e5ea79a81e43ac906fbf0b70129b0a
              name: 'Status of Temperature Sensor "$1"'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.4.1.9.9.91.1.1.1.1.5.{#SNMPINDEX}'
              key: 'entSensorStatus["{#SNMPVALUE}","Temperature RSP"]'
              history: 30d
              trends: '0'
              description: |
                CISCO-ENTITY-SENSOR-MIB::entSensorStatus
                
                This variable indicates the present operational status of the sensor.
              valuemap:
                name: 'CISCO-ENTITY-SENSOR-MIB::SensorStatus'
              tags:
                -
                  tag: Application
                  value: 'Temperature RSP'
                -
                  tag: Application
                  value: 'Temperature RSP {#SNMPVALUE}'
              trigger_prototypes:
                -
                  uuid: 8c834bbfc69544598c41ba3d66bbbcd8
                  expression: 'last(/Cisco ASR 9K Health SNMP/entSensorStatus["{#SNMPVALUE}","Temperature RSP"])=3'
                  name: 'Temperature Sensor "{#SNMPVALUE}" is nonoperational'
                  priority: HIGH
                -
                  uuid: 0b8678193cc043e7bfb09a093a3d68e8
                  expression: 'last(/Cisco ASR 9K Health SNMP/entSensorStatus["{#SNMPVALUE}","Temperature RSP"])=2'
                  name: 'Temperature Sensor "{#SNMPVALUE}" is unavailable'
                  priority: AVERAGE
            -
              uuid: d12d6e3e36734a968a18e674627fbdb1
              name: 'Thresholds::"$1" | Temperature Alarm'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.4.1.9.9.91.1.2.1.1.4.{#SNMPINDEX}.6'
              key: 'entSensorThresholdValue["{#SNMPVALUE}","Temperature RSP","Alarm"]'
              delay: 1h
              history: 7d
              trends: 180d
              units: °C
              preprocessing:
                -
                  type: MULTIPLIER
                  parameters:
                    - '0.1'
              tags:
                -
                  tag: Application
                  value: 'Temperature RSP'
                -
                  tag: Application
                  value: 'Temperature RSP {#SNMPVALUE}'
            -
              uuid: 5a3f16875d7045a38d96bab1fb640cb4
              name: 'Temperature on Sensor "$1"'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.4.1.9.9.91.1.1.1.1.4.{#SNMPINDEX}'
              key: 'entSensorValue["{#SNMPVALUE}","Temperature RSP"]'
              value_type: FLOAT
              units: °C
              description: |
                CISCO-ENTITY-SENSOR-MIB::entSensorValue
                
                This variable reports the most recent measurement seen by the sensor.
              preprocessing:
                -
                  type: MULTIPLIER
                  parameters:
                    - '0.1'
              tags:
                -
                  tag: Application
                  value: 'Temperature RSP'
                -
                  tag: Application
                  value: 'Temperature RSP {#SNMPVALUE}'
          trigger_prototypes:
            -
              uuid: b13e443859374abbb470fdbeeccfc439
              expression: 'last(/Cisco ASR 9K Health SNMP/entSensorValue["{#SNMPVALUE}","Temperature RSP"])>last(/Cisco ASR 9K Health SNMP/entSensorThresholdValue["{#SNMPVALUE}","Temperature RSP","Alarm"])'
              name: 'High Temperature Alarm "{#SNMPVALUE}"'
              priority: HIGH
          graph_prototypes:
            -
              uuid: 09de6c3689614239882408b018004238
              name: 'Temperature RSP "{#SNMPVALUE}"'
              graph_items:
                -
                  drawtype: GRADIENT_LINE
                  color: 00FF00
                  item:
                    host: 'Cisco ASR 9K Health SNMP'
                    key: 'entSensorValue["{#SNMPVALUE}","Temperature RSP"]'
                -
                  sortorder: '1'
                  color: FF0000
                  item:
                    host: 'Cisco ASR 9K Health SNMP'
                    key: 'entSensorThresholdValue["{#SNMPVALUE}","Temperature RSP","Alarm"]'
      macros:
        -
          macro: '{$CPU_HIGH_ALARM}'
          value: '80'
          description: '% maximum alarm cpu'
        -
          macro: '{$CPU_HIGH_WARNING}'
          value: '70'
          description: '% maximum warning cpu'
        -
          macro: '{$MEMORY_HIGH_ALARM}'
          value: '80'
          description: '% maximum alarm memory'
        -
          macro: '{$MEMORY_HIGH_WARNING}'
          value: '70'
          description: '% maximum warning memory'
      dashboards:
        -
          uuid: 0dc7835e200c47979ed7a82c3e784a12
          name: 'Screen CPU'
          pages:
            -
              widgets:
                -
                  type: GRAPH_PROTOTYPE
                  width: '24'
                  height: '5'
                  fields:
                    -
                      type: INTEGER
                      name: source_type
                      value: '2'
                    -
                      type: INTEGER
                      name: columns
                      value: '1'
                    -
                      type: INTEGER
                      name: rows
                      value: '1'
                    -
                      type: GRAPH_PROTOTYPE
                      name: graphid
                      value:
                        name: 'CPU #"{#SNMPINDEX}" 1min Usage'
                        host: 'Cisco ASR 9K Health SNMP'
                -
                  type: GRAPH_PROTOTYPE
                  'y': '5'
                  width: '24'
                  height: '5'
                  fields:
                    -
                      type: INTEGER
                      name: source_type
                      value: '2'
                    -
                      type: INTEGER
                      name: columns
                      value: '1'
                    -
                      type: INTEGER
                      name: rows
                      value: '1'
                    -
                      type: GRAPH_PROTOTYPE
                      name: graphid
                      value:
                        name: 'CPU #"{#SNMPINDEX}" 5min Usage'
                        host: 'Cisco ASR 9K Health SNMP'
        -
          uuid: faa8d504cda94cb4972d0f262c3f1296
          name: 'Screen FAN'
          pages:
            -
              widgets:
                -
                  type: GRAPH_PROTOTYPE
                  width: '24'
                  height: '5'
                  fields:
                    -
                      type: INTEGER
                      name: source_type
                      value: '2'
                    -
                      type: INTEGER
                      name: columns
                      value: '1'
                    -
                      type: INTEGER
                      name: rows
                      value: '1'
                    -
                      type: GRAPH_PROTOTYPE
                      name: graphid
                      value:
                        name: 'FAN speed "{#SNMPVALUE}"/{#SNMPINDEX}'
                        host: 'Cisco ASR 9K Health SNMP'
        -
          uuid: 62dfe5f1dd5c4eaa8c3423d55d514870
          name: 'Screen Memory'
          pages:
            -
              widgets:
                -
                  type: GRAPH_PROTOTYPE
                  width: '24'
                  height: '5'
                  fields:
                    -
                      type: INTEGER
                      name: source_type
                      value: '2'
                    -
                      type: INTEGER
                      name: columns
                      value: '1'
                    -
                      type: INTEGER
                      name: rows
                      value: '1'
                    -
                      type: GRAPH_PROTOTYPE
                      name: graphid
                      value:
                        name: 'Memory {#SNMPVALUE}'
                        host: 'Cisco ASR 9K Health SNMP'
                -
                  type: GRAPH_PROTOTYPE
                  'y': '5'
                  width: '24'
                  height: '5'
                  fields:
                    -
                      type: INTEGER
                      name: source_type
                      value: '2'
                    -
                      type: INTEGER
                      name: columns
                      value: '1'
                    -
                      type: INTEGER
                      name: rows
                      value: '1'
                    -
                      type: GRAPH_PROTOTYPE
                      name: graphid
                      value:
                        name: 'Memory Utilization Pool "{#SNMPVALUE}"'
                        host: 'Cisco ASR 9K Health SNMP'
        -
          uuid: 85d8b086c0524d0ab57d56d15d0fc7ec
          name: 'Screen Power'
          pages:
            -
              widgets:
                -
                  type: GRAPH_CLASSIC
                  width: '24'
                  height: '5'
                  fields:
                    -
                      type: INTEGER
                      name: source_type
                      value: '0'
                    -
                      type: GRAPH
                      name: graphid
                      value:
                        name: 'Power Consumption'
                        host: 'Cisco ASR 9K Health SNMP'
                -
                  type: GRAPH_PROTOTYPE
                  'y': '5'
                  width: '24'
                  height: '5'
                  fields:
                    -
                      type: INTEGER
                      name: source_type
                      value: '2'
                    -
                      type: INTEGER
                      name: columns
                      value: '1'
                    -
                      type: INTEGER
                      name: rows
                      value: '1'
                    -
                      type: GRAPH_PROTOTYPE
                      name: graphid
                      value:
                        name: 'Current "{#SNMPVALUE}"'
                        host: 'Cisco ASR 9K Health SNMP'
                -
                  type: GRAPH_PROTOTYPE
                  'y': '10'
                  width: '24'
                  height: '5'
                  fields:
                    -
                      type: INTEGER
                      name: source_type
                      value: '2'
                    -
                      type: INTEGER
                      name: columns
                      value: '1'
                    -
                      type: INTEGER
                      name: rows
                      value: '1'
                    -
                      type: GRAPH_PROTOTYPE
                      name: graphid
                      value:
                        name: 'Voltage "{#SNMPVALUE}"'
                        host: 'Cisco ASR 9K Health SNMP'
        -
          uuid: 25100a1e4b084f15b0c46ac1c20bbd28
          name: 'Screen Temperature'
          pages:
            -
              widgets:
                -
                  type: GRAPH_PROTOTYPE
                  width: '24'
                  height: '5'
                  fields:
                    -
                      type: INTEGER
                      name: source_type
                      value: '2'
                    -
                      type: INTEGER
                      name: columns
                      value: '1'
                    -
                      type: INTEGER
                      name: rows
                      value: '1'
                    -
                      type: GRAPH_PROTOTYPE
                      name: graphid
                      value:
                        name: 'Temperature RSP "{#SNMPVALUE}"'
                        host: 'Cisco ASR 9K Health SNMP'
                -
                  type: GRAPH_PROTOTYPE
                  'y': '5'
                  width: '24'
                  height: '5'
                  fields:
                    -
                      type: INTEGER
                      name: source_type
                      value: '2'
                    -
                      type: INTEGER
                      name: columns
                      value: '1'
                    -
                      type: INTEGER
                      name: rows
                      value: '1'
                    -
                      type: GRAPH_PROTOTYPE
                      name: graphid
                      value:
                        name: 'Temperature LC "{#SNMPVALUE}"'
                        host: 'Cisco ASR 9K Health SNMP'
      valuemaps:
        -
          uuid: 51da940cdc184d11ad28f5e03e8949cf
          name: 'CISCO-ENTITY-FRU-CONTROL-MIB::CefcFanTrayStatusEntry'
          mappings:
            -
              value: '1'
              newvalue: unknown
            -
              value: '2'
              newvalue: up
            -
              value: '3'
              newvalue: down
            -
              value: '4'
              newvalue: warning
        -
          uuid: 0c4efbcbad0a42f79c18e0eecb4f88b4
          name: 'CISCO-ENTITY-FRU-CONTROL-MIB::PowerOperType'
          mappings:
            -
              value: '1'
              newvalue: offEnvOther
            -
              value: '2'
              newvalue: 'on'
            -
              value: '3'
              newvalue: offAdmin
            -
              value: '4'
              newvalue: offDenied
            -
              value: '5'
              newvalue: offEnvPower
            -
              value: '6'
              newvalue: offEnvTemp
            -
              value: '7'
              newvalue: offEnvFan
            -
              value: '8'
              newvalue: failed
            -
              value: '9'
              newvalue: onButFanFail
            -
              value: '10'
              newvalue: offCooling
            -
              value: '11'
              newvalue: offConnectorRating
            -
              value: '12'
              newvalue: onButInlinePowerFail
        -
          uuid: 3aa4485e61f14c1a9d1803a87edb8b28
          name: 'CISCO-ENTITY-SENSOR-MIB::SensorStatus'
          mappings:
            -
              value: '1'
              newvalue: ok
            -
              value: '2'
              newvalue: unavailable
            -
              value: '3'
              newvalue: nonoperational
        -
          uuid: 8ae5e328dd314861badf41f97c323347
          name: 'ENTITY-SENSORS-MIB::EntitySensorStatus'
          mappings:
            -
              value: '1'
              newvalue: ok
            -
              value: '2'
              newvalue: unavailable
            -
              value: '3'
              newvalue: nonoperational
  graphs:
    -
      uuid: cd556cf3015741fd9b8d413837be4259
      name: 'Power Consumption'
      graph_items:
        -
          drawtype: GRADIENT_LINE
          color: FF0000
          item:
            host: 'Cisco ASR 9K Health SNMP'
            key: powerConsumption
