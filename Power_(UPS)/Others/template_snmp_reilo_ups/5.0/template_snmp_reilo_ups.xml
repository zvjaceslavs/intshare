<?xml version="1.0" encoding="UTF-8"?>
<zabbix_export><version>5.0</version><date>2021-11-21T21:36:52Z</date><groups><group><name>Templates</name></group></groups><templates><template><template>SNMP Reillo UPS</template><name>SNMP Reillo UPS</name><description>## Overview

 SNMP Template for REILLLO UPS, tested with Zabbix 3.4 (should work in older versions) Battery Status, Input/output load, Alarms. This template requires [Reillo MIB files](http://www.riello-ups.com/downloads/25-netman-204) (RFC1628A.MIB ) to be import into Zabbix server. 



## Author

Sing Kingdavong

</description><groups><group><name>Templates</name></group></groups><applications><application><name>General</name></application><application><name>SNMP agent</name></application><application><name>UPS</name></application></applications><items><item><name>Alarms Present</name><type>SNMP_AGENT</type><snmp_oid>UPS-MIB::upsAlarmsPresent.0</snmp_oid><key>upsAlarmsPresent</key><delay>60s</delay><history>30d</history><trends>60d</trends><units>alarms</units><applications><application><name>UPS</name></application></applications><triggers><trigger><expression>{last()}&gt;0</expression><name>Alarm present!</name><priority>HIGH</priority><tags><tag><tag>POWER</tag></tag></tags></trigger></triggers></item><item><name>Battery Current</name><type>SNMP_AGENT</type><snmp_oid>UPS-MIB::upsBatteryCurrent.0</snmp_oid><key>upsBatteryCurrent</key><delay>60s</delay><history>30d</history><trends>60d</trends><units>A</units><applications><application><name>UPS</name></application></applications><preprocessing><step><type>MULTIPLIER</type><params>0.1</params></step></preprocessing></item><item><name>Battery Status</name><type>SNMP_AGENT</type><snmp_oid>UPS-MIB::upsBatteryStatus.0</snmp_oid><key>upsBatteryStatus</key><delay>60s</delay><history>30d</history><trends>60d</trends><applications><application><name>UPS</name></application></applications><valuemap><name>upsBatteryStatus</name></valuemap><triggers><trigger><expression>{last()}&lt;&gt;2 and {prev()}&lt;&gt;2</expression><name>Battery status has changed!</name><priority>AVERAGE</priority><tags><tag><tag>POWER</tag></tag></tags></trigger></triggers></item><item><name>Battery Temperature</name><type>SNMP_AGENT</type><snmp_oid>UPS-MIB::upsBatteryTemperature.0</snmp_oid><key>upsBatteryTemperature</key><delay>60s</delay><history>30d</history><trends>60d</trends><units>ºC</units><applications><application><name>UPS</name></application></applications><triggers><trigger><expression>{min(300)}&gt;22</expression><name>Temperature of batteries above 22ºC</name><priority>WARNING</priority><tags><tag><tag>POWER</tag></tag></tags></trigger><trigger><expression>{min(300)}&gt;25</expression><name>Temperature of batteries above 25ºC</name><priority>HIGH</priority><description>All batteries have a rated capacity which is determined based on specified conditions.  The rated capacity of a UPS battery is based on an ambient temperature of 25°C (77°F).  Operating the UPS under these conditions will maximize the life of the UPS and result in optimal performance.  While a UPS will continue to operate in varying temperatures, it is important to note that this will likely result in diminishing the performance and lifespan of your battery.  A general rule to remember is that for every 8.3°C (15°F) above the ambient temperature of 25°C (77°F), the life of the battery will be reduced by 50 percent.  Therefore, keeping a UPS at a comfortable temperature is crucial to maximizing UPS life and capabilities.</description><tags><tag><tag>POWER</tag></tag></tags></trigger><trigger><expression>{max(300)}&lt;19</expression><name>Temperature of batteries below 19ºC</name><priority>AVERAGE</priority><description>Under 19º battery capacity will get reduced although life will be extended</description><tags><tag><tag>POWER</tag></tag></tags></trigger></triggers></item><item><name>Battery Voltage</name><type>SNMP_AGENT</type><snmp_oid>UPS-MIB::upsBatteryVoltage.0</snmp_oid><key>upsBatteryVoltage</key><delay>60s</delay><history>30d</history><trends>60d</trends><units>V</units><applications><application><name>UPS</name></application></applications><preprocessing><step><type>MULTIPLIER</type><params>0.1</params></step></preprocessing><triggers><trigger><expression>{max(#2)}&lt;({$NOMINAL_VOLTAGE}*0.9)</expression><name>Battery voltage under {$NOMINAL_VOLTAGE}</name><priority>HIGH</priority><tags><tag><tag>POWER</tag></tag></tags></trigger></triggers></item><item><name>Bypass frequency</name><type>SNMP_AGENT</type><snmp_oid>UPS-MIB::upsBypassFrequency.0</snmp_oid><key>upsBypassFrequency</key><delay>60s</delay><history>30d</history><trends>60d</trends><units>Hz</units><applications><application><name>UPS</name></application></applications><preprocessing><step><type>MULTIPLIER</type><params>0.1</params></step></preprocessing><triggers><trigger><expression>{min(#2)}&gt;{$NOMINAL_FREQUENCY}+1 or {max(#2)}&lt;{$NOMINAL_FREQUENCY}-1</expression><name>Bypass frecuency is not {$NOMINAL_FREQUENCY}</name><priority>HIGH</priority><tags><tag><tag>POWER</tag></tag></tags></trigger></triggers></item><item><name>Estimated Charge Remaining</name><type>SNMP_AGENT</type><snmp_oid>UPS-MIB::upsEstimatedChargeRemaining.0</snmp_oid><key>upsEstimatedChargeRemaining</key><delay>60s</delay><history>30d</history><trends>60d</trends><units>%</units><applications><application><name>UPS</name></application></applications><triggers><trigger><expression>{change()}&gt;0 and {last()}&lt;100</expression><name>Batteries are charging</name><priority>INFO</priority><tags><tag><tag>POWER</tag></tag></tags></trigger><trigger><expression>{change()}&lt;0 and {last()}&gt;0</expression><name>Batteries are discharging</name><priority>WARNING</priority><tags><tag><tag>POWER</tag></tag></tags></trigger></triggers></item><item><name>Estimated Minutes Remaining</name><type>SNMP_AGENT</type><snmp_oid>UPS-MIB::upsEstimatedMinutesRemaining.0</snmp_oid><key>upsEstimatedMinutesRemaining</key><delay>60s</delay><history>30d</history><trends>60d</trends><units>minutes</units><applications><application><name>UPS</name></application></applications><triggers><trigger><expression>{max(#2)}&lt;5</expression><name>Estimated battery minutes remaining &lt; 5</name><priority>AVERAGE</priority><tags><tag><tag>POWER</tag></tag></tags></trigger></triggers></item><item><name>Ups Agent Version</name><type>SNMP_AGENT</type><snmp_oid>UPS-MIB::upsIdentAgentSoftwareVersion.0</snmp_oid><key>upsIdentAgentSoftwareVersion</key><delay>86400</delay><history>30d</history><trends>0</trends><value_type>CHAR</value_type><inventory_link>SOFTWARE</inventory_link><applications><application><name>General</name></application></applications></item><item><name>Model name</name><type>SNMP_AGENT</type><snmp_oid>UPS-MIB::upsIdentModel.0</snmp_oid><key>upsIdentModel</key><delay>86400</delay><history>30d</history><trends>0</trends><value_type>CHAR</value_type><inventory_link>MODEL</inventory_link><applications><application><name>General</name></application></applications></item><item><name>Software version</name><type>SNMP_AGENT</type><snmp_oid>UPS-MIB::upsIdentUPSSoftwareVersion.0</snmp_oid><key>upsIdentUPSSoftwareVersion</key><delay>86400</delay><history>30d</history><trends>0</trends><value_type>CHAR</value_type><inventory_link>OS</inventory_link><applications><application><name>General</name></application></applications></item><item><name>Input Line Bads</name><type>SNMP_AGENT</type><snmp_oid>UPS-MIB::upsInputLineBads.0</snmp_oid><key>upsInputLineBads</key><delay>60s</delay><history>30d</history><trends>60d</trends><applications><application><name>UPS</name></application></applications><triggers><trigger><expression>{change()}&gt;0</expression><name>Input Line Bads detected</name><priority>WARNING</priority><tags><tag><tag>POWER</tag></tag></tags></trigger></triggers></item><item><name>Output frequency</name><type>SNMP_AGENT</type><snmp_oid>UPS-MIB::upsOutputFrequency.0</snmp_oid><key>upsOutputFrequency</key><delay>60s</delay><history>30d</history><trends>60d</trends><units>Hz</units><applications><application><name>UPS</name></application></applications><preprocessing><step><type>MULTIPLIER</type><params>0.1</params></step></preprocessing><triggers><trigger><expression>{min(#2)}&gt;{$NOMINAL_FREQUENCY}+1 or {max(#2)}&lt;{$NOMINAL_FREQUENCY}-1</expression><name>Output frecuency is not {$NOMINAL_FREQUENCY}</name><priority>HIGH</priority><tags><tag><tag>POWER</tag></tag></tags></trigger></triggers></item><item><name>Output source</name><type>SNMP_AGENT</type><snmp_oid>UPS-MIB::upsOutputSource.0</snmp_oid><key>upsOutputSource</key><delay>60s</delay><history>30d</history><trends>60d</trends><applications><application><name>UPS</name></application></applications><valuemap><name>upsOutputSource</name></valuemap><triggers><trigger><expression>{last()}&lt;&gt;3 and {prev()}&lt;&gt;3</expression><name>Output source has changed!</name><priority>AVERAGE</priority><tags><tag><tag>POWER</tag></tag></tags></trigger></triggers></item><item><name>Seconds on Battery</name><type>SNMP_AGENT</type><snmp_oid>UPS-MIB::upsSecondsOnBattery.0</snmp_oid><key>upsSecondsOnBattery</key><delay>60s</delay><history>30d</history><trends>60d</trends><units>seconds</units><applications><application><name>UPS</name></application></applications></item><item><name>Agent availability</name><type>INTERNAL</type><key>zabbix[host,snmp,available]</key><delay>30s</delay><history>7d</history><description>The agent always returns 1 for this item. It could be used in combination with nodata() for availability check.</description><applications><application><name>SNMP agent</name></application></applications><valuemap><name>Host availability</name></valuemap></item></items><discovery_rules><discovery_rule><name>Bypass lines</name><type>SNMP_AGENT</type><snmp_oid>discovery[{#SNMPVALUE},UPS-MIB::upsBypassNumLines]</snmp_oid><key>upsBypassNumLines</key><delay>15s</delay><lifetime>0</lifetime><item_prototypes><item_prototype><name>Line {#SNMPVALUE} Bypass Current</name><type>SNMP_AGENT</type><snmp_oid>UPS-MIB::upsBypassCurrent.{#SNMPINDEX}</snmp_oid><key>upsBypassCurrent[{#SNMPVALUE}]</key><delay>60s</delay><history>30d</history><trends>60d</trends><units>A (RMS)</units><applications><application><name>UPS</name></application></applications><preprocessing><step><type>MULTIPLIER</type><params>0.1</params></step></preprocessing></item_prototype><item_prototype><name>Line {#SNMPVALUE} Bypass Power</name><type>SNMP_AGENT</type><snmp_oid>UPS-MIB::upsBypassPower.{#SNMPINDEX}</snmp_oid><key>upsBypassPower[{#SNMPVALUE}]</key><delay>60s</delay><history>30d</history><trends>60d</trends><units>W</units><applications><application><name>UPS</name></application></applications></item_prototype><item_prototype><name>Line {#SNMPVALUE} Bypass Voltage</name><type>SNMP_AGENT</type><snmp_oid>UPS-MIB::upsBypassVoltage.{#SNMPINDEX}</snmp_oid><key>upsBypassVoltage[{#SNMPVALUE}]</key><delay>60s</delay><history>30d</history><trends>60d</trends><units>V (RMS)</units><applications><application><name>UPS</name></application></applications><trigger_prototypes><trigger_prototype><expression>{max(#2)}&lt;({$NOMINAL_VOLTAGE}*0.9)</expression><name>Bypass voltage on line {#SNMPVALUE} below {$NOMINAL_VOLTAGE}</name><priority>HIGH</priority><manual_close>YES</manual_close><tags><tag><tag>POWER</tag></tag></tags></trigger_prototype></trigger_prototypes></item_prototype></item_prototypes></discovery_rule><discovery_rule><name>Input Lines</name><type>SNMP_AGENT</type><snmp_oid>discovery[{#SNMPVALUE},UPS-MIB::upsInputLineIndex]</snmp_oid><key>upsInputLineIndex</key><delay>15s</delay><lifetime>0</lifetime><item_prototypes><item_prototype><name>Line {#SNMPVALUE} Input Current</name><type>SNMP_AGENT</type><snmp_oid>UPS-MIB::upsInputCurrent.{#SNMPINDEX}</snmp_oid><key>upsInputCurrent[{#SNMPVALUE}]</key><delay>60s</delay><history>30d</history><trends>60d</trends><units>A (RMS)</units><applications><application><name>UPS</name></application></applications><preprocessing><step><type>MULTIPLIER</type><params>0.1</params></step></preprocessing></item_prototype><item_prototype><name>Line {#SNMPVALUE} Input Frequency</name><type>SNMP_AGENT</type><snmp_oid>UPS-MIB::upsInputFrequency.{#SNMPINDEX}</snmp_oid><key>upsInputFrequency[{#SNMPVALUE}]</key><delay>60s</delay><history>30d</history><trends>60d</trends><units>Hz</units><applications><application><name>UPS</name></application></applications><preprocessing><step><type>MULTIPLIER</type><params>0.1</params></step></preprocessing><trigger_prototypes><trigger_prototype><expression>{min(#2)}&gt;{$NOMINAL_FREQUENCY}+1 or {max(#2)}&lt;({$NOMINAL_FREQUENCY}-1)</expression><name>Input line {#SNMPVALUE} frequency not {$NOMINAL_FREQUENCY}</name><priority>HIGH</priority><manual_close>YES</manual_close><tags><tag><tag>POWER</tag></tag></tags></trigger_prototype></trigger_prototypes></item_prototype><item_prototype><name>Line {#SNMPVALUE} True Power</name><type>SNMP_AGENT</type><snmp_oid>UPS-MIB::upsInputTruePower.{#SNMPINDEX}</snmp_oid><key>upsInputTruePower[{#SNMPVALUE}]</key><delay>60s</delay><history>30d</history><trends>60d</trends><units>W</units><applications><application><name>UPS</name></application></applications></item_prototype><item_prototype><name>Line {#SNMPVALUE} Input Voltage</name><type>SNMP_AGENT</type><snmp_oid>UPS-MIB::upsInputVoltage.{#SNMPINDEX}</snmp_oid><key>upsInputVoltage[{#SNMPVALUE}]</key><delay>60s</delay><history>30d</history><trends>60d</trends><units>V (RMS)</units><applications><application><name>UPS</name></application></applications><trigger_prototypes><trigger_prototype><expression>{max(#2)}&lt;({$NOMINAL_VOLTAGE}*0.9)</expression><name>Input line {#SNMPVALUE} voltage below {$NOMINAL_VOLTAGE}</name><priority>HIGH</priority><manual_close>YES</manual_close><tags><tag><tag>POWER</tag></tag></tags></trigger_prototype></trigger_prototypes></item_prototype></item_prototypes></discovery_rule><discovery_rule><name>Output lines</name><type>SNMP_AGENT</type><snmp_oid>discovery[{#SNMPVALUE},UPS-MIB::upsOutputLineIndex]</snmp_oid><key>upsOutputLineIndex</key><delay>15s</delay><lifetime>0</lifetime><item_prototypes><item_prototype><name>Line {#SNMPVALUE} Output Current</name><type>SNMP_AGENT</type><snmp_oid>UPS-MIB::upsOutputCurrent.{#SNMPINDEX}</snmp_oid><key>upsOutputCurrent[{#SNMPVALUE}]</key><delay>60s</delay><history>30d</history><trends>60d</trends><units>A (RMS)</units><applications><application><name>UPS</name></application></applications><preprocessing><step><type>MULTIPLIER</type><params>0.1</params></step></preprocessing></item_prototype><item_prototype><name>Line {#SNMPVALUE} Load</name><type>SNMP_AGENT</type><snmp_oid>UPS-MIB::upsOutputPercentLoad.{#SNMPINDEX}</snmp_oid><key>upsOutputPercentLoad[{#SNMPVALUE}]</key><delay>60s</delay><history>30d</history><trends>60d</trends><units>%</units><applications><application><name>UPS</name></application></applications><trigger_prototypes><trigger_prototype><expression>{min(300)}&gt;80 and {min(300)}&lt;=90</expression><name>Load of output line {#SNMPVALUE} is over 80%</name><priority>WARNING</priority><manual_close>YES</manual_close><tags><tag><tag>POWER</tag></tag></tags></trigger_prototype><trigger_prototype><expression>{min(300)}&gt;90 and {min(300)}&lt;=95</expression><name>Load of output line {#SNMPVALUE} is over 90%</name><priority>AVERAGE</priority><manual_close>YES</manual_close><tags><tag><tag>POWER</tag></tag></tags></trigger_prototype><trigger_prototype><expression>{min(300)}&gt;95</expression><name>Load of output line {#SNMPVALUE} is over 95%</name><priority>HIGH</priority><manual_close>YES</manual_close><tags><tag><tag>POWER</tag></tag></tags></trigger_prototype></trigger_prototypes></item_prototype><item_prototype><name>Line {#SNMPVALUE} Output Power</name><type>SNMP_AGENT</type><snmp_oid>UPS-MIB::upsOutputPower.{#SNMPINDEX}</snmp_oid><key>upsOutputPower[{#SNMPVALUE}]</key><delay>60s</delay><history>30d</history><trends>60d</trends><units>W</units><applications><application><name>UPS</name></application></applications></item_prototype><item_prototype><name>Line {#SNMPVALUE} Output Voltage</name><type>SNMP_AGENT</type><snmp_oid>UPS-MIB::upsOutputVoltage.{#SNMPINDEX}</snmp_oid><key>upsOutputVoltage[{#SNMPVALUE}]</key><delay>60s</delay><history>30d</history><trends>60d</trends><units>V (RMS)</units><applications><application><name>UPS</name></application></applications><trigger_prototypes><trigger_prototype><expression>{max(#2)}&lt;({$NOMINAL_VOLTAGE}*0.9)</expression><name>Output line {#SNMPVALUE} voltage below {$NOMINAL_VOLTAGE}</name><priority>HIGH</priority><manual_close>YES</manual_close><tags><tag><tag>POWER</tag></tag></tags></trigger_prototype></trigger_prototypes></item_prototype></item_prototypes></discovery_rule></discovery_rules><macros><macro><macro>{$NOMINAL_FREQUENCY}</macro><value>50</value></macro><macro><macro>{$NOMINAL_VOLTAGE}</macro><value>230</value></macro></macros></template></templates><graphs><graph><name>Battery Status</name><graph_items><graph_item><drawtype>BOLD_LINE</drawtype><color>1A7C11</color><item><host>SNMP Reillo UPS</host><key>upsBatteryStatus</key></item></graph_item></graph_items></graph><graph><name>Battery Temperature</name><graph_items><graph_item><drawtype>BOLD_LINE</drawtype><color>1A7C11</color><item><host>SNMP Reillo UPS</host><key>upsBatteryTemperature</key></item></graph_item></graph_items></graph></graphs><value_maps><value_map><name>Host availability</name><mappings><mapping><value>0</value><newvalue>not available</newvalue></mapping><mapping><value>1</value><newvalue>available</newvalue></mapping><mapping><value>2</value><newvalue>unknown</newvalue></mapping></mappings></value_map><value_map><name>upsBatteryStatus</name><mappings><mapping><value>1</value><newvalue>unknown</newvalue></mapping><mapping><value>2</value><newvalue>batteryNormal</newvalue></mapping><mapping><value>3</value><newvalue>batteryLow</newvalue></mapping><mapping><value>4</value><newvalue>batteryDepleted</newvalue></mapping></mappings></value_map><value_map><name>upsOutputSource</name><mappings><mapping><value>1</value><newvalue>other</newvalue></mapping><mapping><value>2</value><newvalue>none</newvalue></mapping><mapping><value>3</value><newvalue>normal</newvalue></mapping><mapping><value>4</value><newvalue>bypass</newvalue></mapping><mapping><value>5</value><newvalue>battery</newvalue></mapping><mapping><value>6</value><newvalue>booster</newvalue></mapping><mapping><value>7</value><newvalue>reducer</newvalue></mapping></mappings></value_map></value_maps></zabbix_export>
