zabbix_export:
  version: '5.4'
  date: '2021-10-22T10:11:39Z'
  groups:
    -
      uuid: 0e60ac85bc3941e2a1d66a048ff164da
      name: UPS
  templates:
    -
      uuid: 3e4548df497b4a54ad7ec25d71c8996c
      template: 'Template Schneider UPS'
      name: 'Template Schneider UPS'
      groups:
        -
          name: UPS
      items:
        -
          uuid: b42356f3e0c84c36b7d4f814e82a2d9f
          name: 'Battery Status'
          type: SNMP_AGENT
          snmp_oid: iso.3.6.1.2.1.33.1.2.1.0
          key: get.battery.status
          valuemap:
            name: 'Battery Status'
          tags:
            -
              tag: Application
              value: Informations
          triggers:
            -
              uuid: a6b53988342d4efb82b623f36f8a7826
              expression: 'last(/Template Schneider UPS/get.battery.status)=4'
              name: 'Battery status change to depleted'
              priority: HIGH
            -
              uuid: 0800c7317f6c4ee0b36c8edfc9182985
              expression: 'last(/Template Schneider UPS/get.battery.status)=3'
              name: 'Battery status change to low'
              priority: WARNING
        -
          uuid: c3c4f5de484145dba6257ed239222a16
          name: Manufacturer
          type: SNMP_AGENT
          snmp_oid: iso.3.6.1.2.1.33.1.1.1.0
          key: get.ident.manu
          delay: 1d
          trends: '0'
          value_type: TEXT
          tags:
            -
              tag: Application
              value: Informations
        -
          uuid: ff947023a3f3457bb75627108255b2f4
          name: 'UPS Model Number'
          type: SNMP_AGENT
          snmp_oid: iso.3.6.1.4.1.318.1.1.1.1.2.5.0
          key: get.ident.model
          delay: 1d
          trends: '0'
          value_type: TEXT
          tags:
            -
              tag: Application
              value: Informations
        -
          uuid: f19a7b4db2644335944e17a20e86f3c3
          name: Name
          type: SNMP_AGENT
          snmp_oid: iso.3.6.1.2.1.33.1.1.5.0
          key: get.ident.name
          delay: 1d
          trends: '0'
          value_type: TEXT
          tags:
            -
              tag: Application
              value: Informations
        -
          uuid: 08cfbfdfa909418eae634138528dcfaf
          name: 'UPS Software Version'
          type: SNMP_AGENT
          snmp_oid: iso.3.6.1.2.1.33.1.1.3.0
          key: get.ident.soft
          delay: 1d
          trends: '0'
          value_type: TEXT
          tags:
            -
              tag: Application
              value: Informations
        -
          uuid: d87f6be7929043aa98dd0a03139191f9
          name: 'Battery Replacement'
          type: SNMP_AGENT
          snmp_oid: iso.3.6.1.4.1.318.1.1.1.2.2.4.0
          key: mib_battery_replace
          valuemap:
            name: 'Battery Replacement'
          tags:
            -
              tag: Application
              value: Battery
          triggers:
            -
              uuid: fb68573988ba4ab3b21cbcd54e290847
              expression: 'last(/Template Schneider UPS/mib_battery_replace)=2'
              name: 'The battery has to be replaced'
              priority: HIGH
        -
          uuid: 92d05a37c37d4ddaaa0a7a439b2c2e54
          name: 'Runtime Remaining'
          type: SNMP_AGENT
          snmp_oid: iso.3.6.1.4.1.318.1.1.1.2.2.3.0
          key: mib_battery_runtime_remain
          units: s
          preprocessing:
            -
              type: MULTIPLIER
              parameters:
                - '0.01'
          tags:
            -
              tag: Application
              value: Battery
        -
          uuid: 65ec77b6d4224219ad81522427d44e5d
          name: 'UPS BIOS Serial Number'
          type: SNMP_AGENT
          snmp_oid: iso.3.6.1.4.1.318.1.1.1.1.2.3.0
          key: mib_bios_serial_number
          delay: 1d
          trends: '0'
          value_type: TEXT
          tags:
            -
              tag: Application
              value: Informations
        -
          uuid: 8d8a006605b04dde8d523401d119d5b1
          name: 'Last Transfer Event'
          type: SNMP_AGENT
          snmp_oid: iso.3.6.1.4.1.318.1.1.1.3.2.5.0
          key: mib_reason_for_last_transfer
          valuemap:
            name: 'Last Transfer Event'
          tags:
            -
              tag: Application
              value: Event
        -
          uuid: 988e1de871a140beb50aa7d4add6ce9e
          name: 'Time on Battery'
          type: SNMP_AGENT
          snmp_oid: iso.3.6.1.4.1.318.1.1.1.2.1.2.0
          key: mib_time_on_battery
          units: s
          preprocessing:
            -
              type: MULTIPLIER
              parameters:
                - '0.01'
          tags:
            -
              tag: Application
              value: Battery
            -
              tag: Application
              value: Informations
        -
          uuid: 437f5090f81c401ebce6cc949683c5e0
          name: 'UPS Manufacture Date'
          type: SNMP_AGENT
          snmp_oid: iso.3.6.1.4.1.318.1.1.1.1.2.2.0
          key: mib_ups_manufacture_date
          delay: 1d
          trends: '0'
          value_type: TEXT
          tags:
            -
              tag: Application
              value: Informations
        -
          uuid: 580c79cf82b34740b355c3036938f437
          name: 'UPS Up Time'
          type: SNMP_AGENT
          snmp_oid: iso.3.6.1.2.1.1.3.0
          key: mib_ups_uptime
          units: s
          preprocessing:
            -
              type: MULTIPLIER
              parameters:
                - '0.01'
          tags:
            -
              tag: Application
              value: Informations
          triggers:
            -
              uuid: 43ee396688c542fc95dc89a850aeb458
              expression: 'last(/Template Schneider UPS/mib_ups_uptime)=0'
              name: 'The management board has restarted'
              priority: WARNING
        -
          uuid: ce8e53b6833f4cadb570ef1d942df6ca
          name: 'Battery Temperature'
          type: SNMP_AGENT
          snmp_oid: iso.3.6.1.2.1.33.1.2.7.0
          key: upsBatteryTemperature
          value_type: FLOAT
          units: °C
          tags:
            -
              tag: Application
              value: Battery
        -
          uuid: 28712eccfaf345d9804cb81648263d28
          name: 'Battery Voltage'
          type: SNMP_AGENT
          snmp_oid: iso.3.6.1.2.1.33.1.2.5.0
          key: upsBatteryVoltage
          value_type: FLOAT
          units: VDC
          preprocessing:
            -
              type: MULTIPLIER
              parameters:
                - '0.1'
          tags:
            -
              tag: Application
              value: Battery
        -
          uuid: 203e788c34da474a8eefe23d5805f44e
          name: 'Estimated Charge Remaining'
          type: SNMP_AGENT
          snmp_oid: iso.3.6.1.2.1.33.1.2.4.0
          key: upsEstimatedChargeRemaining
          units: '%'
          tags:
            -
              tag: Application
              value: Battery
        -
          uuid: e8ca4677af894ce4b922d67e1280f1be
          name: 'Output Efficiency'
          type: SNMP_AGENT
          snmp_oid: iso.3.6.1.4.1.318.1.1.1.4.3.5.0
          key: upsHighPrecOutputEfficiency
          value_type: FLOAT
          units: '%'
          description: |
            The efficiency of the UPS in tenths of percent.
            Result is -1 if UPS supports this oid
            but the result is not available.
          preprocessing:
            -
              type: MULTIPLIER
              parameters:
                - '0.1'
          tags:
            -
              tag: Application
              value: Output
        -
          uuid: d98972e26f664282916c38de9b42ce8f
          name: 'Output Energy Usage'
          type: SNMP_AGENT
          snmp_oid: iso.3.6.1.4.1.318.1.1.1.4.3.6.0
          key: upsHighPrecOutputEnergyUsage
          value_type: FLOAT
          units: kWh
          description: 'The output energy usage of the UPS in tenths of kWh.'
          preprocessing:
            -
              type: MULTIPLIER
              parameters:
                - '0.01'
          tags:
            -
              tag: Application
              value: Output
        -
          uuid: 596ac52e67724648a2405d7e15337c58
          name: 'Output Voltage'
          type: SNMP_AGENT
          snmp_oid: iso.3.6.1.4.1.318.1.1.1.4.3.1.0
          key: upsHighPrecOutputVoltage
          value_type: FLOAT
          units: VAC
          preprocessing:
            -
              type: MULTIPLIER
              parameters:
                - '0.1'
          tags:
            -
              tag: Application
              value: Output
        -
          uuid: 28ccf60b47e3471fa997afbd776f8a8c
          name: 'Output Frequency'
          type: SNMP_AGENT
          snmp_oid: iso.3.6.1.4.1.318.1.1.1.4.3.2.0
          key: upsOutputFrequency
          value_type: FLOAT
          units: Hz
          preprocessing:
            -
              type: MULTIPLIER
              parameters:
                - '0.1'
          tags:
            -
              tag: Application
              value: Output
      discovery_rules:
        -
          uuid: ce202f8a083844de99752ada9c6b266e
          name: 'Discovery Alarms'
          type: SNMP_AGENT
          snmp_oid: 'discovery[{#ALARM},1.3.6.1.2.1.33.1.6.1]'
          key: alarms.discovery
          filter:
            conditions:
              -
                macro: '{#ALARM}'
                value: ^0
                operator: NOT_MATCHES_REGEX
                formulaid: A
          item_prototypes:
            -
              uuid: 6771d49d4bf84f26893dced6ade3ec8c
              name: 'Alarm {#ALARM}: Description'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.2.1.33.1.6.2.{#ALARM}.2'
              key: 'upsAlarmDescr[{#ALARM}]'
              trends: '0'
              value_type: TEXT
              tags:
                -
                  tag: Application
                  value: Alarms
            -
              uuid: be34beeeb9564fa1adf88e90982e9283
              name: 'Alarm {#ALARM}'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.2.1.33.1.6.2.{#ALARM}.1'
              key: 'upsAlarmId[{#ALARM}]'
              trends: '0'
              value_type: TEXT
              tags:
                -
                  tag: Application
                  value: Alarms
              trigger_prototypes:
                -
                  uuid: d2fe008fadb745f2ab0b9dd9ca60f1c2
                  expression: 'last(/Template Schneider UPS/upsAlarmId[{#ALARM}])>0'
                  name: 'An Alarm has been detected: ID {last(/Template Schneider UPS/upsAlarmId[{#ALARM}])}'
                  priority: WARNING
                  description: |
                    {last(/Template Schneider UPS/upsAlarmDescr[{#ALARM}])}
                    {last(/Template Schneider UPS/upsAlarmTime[{#ALARM}])}
            -
              uuid: 549a3c0be76e4409b08b98b6075d2efc
              name: 'Alarm {#ALARM}: Time'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.2.1.33.1.6.2.{#ALARM}.3'
              key: 'upsAlarmTime[{#ALARM}]'
              description: 'The value of sysUpTime when the alarm condition was detected. If the alarm condition was detected at the time of agent startup and presumably existed before agent startup, the value of upsAlarmTime shall equal 0.'
              tags:
                -
                  tag: Application
                  value: Alarms
        -
          uuid: 92b4a717633945cc86552e68abc64b5e
          name: 'Discovery Bypass'
          type: SNMP_AGENT
          snmp_oid: 'discovery[{#INDEX},1.3.6.1.2.1.33.1.5.2]'
          key: upsBypassNumLines
          filter:
            conditions:
              -
                macro: '{#INDEX}'
                value: ^0
                operator: NOT_MATCHES_REGEX
                formulaid: A
          item_prototypes:
            -
              uuid: 9cb30ca0d0eb4c7fa2a4655c53ca76c6
              name: 'Bypass {#INDEX}: Index'
              type: SNMP_AGENT
              snmp_oid: 'iso.3.6.1.2.1.33.1.5.3.1.{#INDEX}'
              key: upsBypassLineIndex
              tags:
                -
                  tag: Application
                  value: Bypass
            -
              uuid: c3e598df153849219184f7c9826e0f5a
              name: 'Bypass {#INDEX}: Voltage'
              type: SNMP_AGENT
              snmp_oid: 'iso.3.6.1.2.1.33.1.5.3.2.{#INDEX}'
              key: upsBypassVoltage
              units: Volts
              tags:
                -
                  tag: Application
                  value: Bypass
        -
          uuid: a45bbb811b2a44e69468a17e3584282f
          name: 'Discovery Input'
          type: SNMP_AGENT
          snmp_oid: 'discovery[{#INDEX},1.3.6.1.2.1.33.1.3.2]'
          key: upsInputNumLines
          item_prototypes:
            -
              uuid: 6a5823b98e61435bbda58153deee61b2
              name: 'Input {#INDEX}: Amp'
              type: SNMP_AGENT
              snmp_oid: 'iso.3.6.1.2.1.33.1.3.3.1.4.{#INDEX}'
              key: 'upsInputCurren[{#INDEX}]'
              value_type: FLOAT
              units: A
              description: 'The magnitude of the present input current.'
              preprocessing:
                -
                  type: MULTIPLIER
                  parameters:
                    - '0.1'
              tags:
                -
                  tag: Application
                  value: Input
            -
              uuid: 9aa69911317641daa2d584e01fc05190
              name: 'Input {#INDEX}: Frequency'
              type: SNMP_AGENT
              snmp_oid: 'iso.3.6.1.2.1.33.1.3.3.1.2.{#INDEX}'
              key: 'upsInputFrequency[{#INDEX}]'
              units: Hz
              description: 'The present input frequency.'
              preprocessing:
                -
                  type: MULTIPLIER
                  parameters:
                    - '0.1'
              tags:
                -
                  tag: Application
                  value: Input
            -
              uuid: 0dc9fc74be204ec99e9f4a6f23c312f1
              name: 'Input {#INDEX}: Index'
              type: SNMP_AGENT
              snmp_oid: 'iso.3.6.1.2.1.33.1.3.3.1.1.{#INDEX}'
              key: 'upsInputLineIndex[{#INDEX}]'
              delay: 1d
              tags:
                -
                  tag: Application
                  value: Input
            -
              uuid: 675608c196024978b9169db0c286cfc7
              name: 'Input {#INDEX}: Power'
              type: SNMP_AGENT
              snmp_oid: 'iso.3.6.1.2.1.33.1.3.3.1.5.{#INDEX}'
              key: 'upsInputTruePower[{#INDEX}]'
              value_type: FLOAT
              units: Watts
              description: 'The magnitude of the present input true power.'
              tags:
                -
                  tag: Application
                  value: Input
            -
              uuid: 99a2bdd9b2724414a42fbee7382b8245
              name: 'Input {#INDEX}: Voltage'
              type: SNMP_AGENT
              snmp_oid: 'iso.3.6.1.2.1.33.1.3.3.1.3.{#INDEX}'
              key: 'upsInputVoltage[{#INDEX}]'
              value_type: FLOAT
              units: V
              description: 'The magnitude of the present input voltage.'
              tags:
                -
                  tag: Application
                  value: Input
              trigger_prototypes:
                -
                  uuid: fb0d2ea947f7449b88c61093e025f1a9
                  expression: 'last(/Template Schneider UPS/upsInputVoltage[{#INDEX}])=0'
                  name: 'No power has been detected on input n°{#INDEX}'
                  priority: HIGH
          graph_prototypes:
            -
              uuid: 02ef461764644fb1bb1229f7640cd484
              name: 'Input {#INDEX}'
              graph_items:
                -
                  sortorder: '1'
                  drawtype: BOLD_LINE
                  color: 009FDB
                  yaxisside: RIGHT
                  item:
                    host: 'Template Schneider UPS'
                    key: 'upsInputFrequency[{#INDEX}]'
                -
                  sortorder: '2'
                  color: E30613
                  item:
                    host: 'Template Schneider UPS'
                    key: 'upsInputVoltage[{#INDEX}]'
        -
          uuid: 08f2918ab6e3481699b22480a0533149
          name: 'Discovery Output'
          type: SNMP_AGENT
          snmp_oid: 'discovery[{#INDEX},1.3.6.1.2.1.33.1.4.3]'
          key: upsOutputNumLines
          item_prototypes:
            -
              uuid: 87fee534c0e04898aaa4d49f39ab8694
              name: 'Output {#INDEX}: Amps'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.2.1.33.1.4.4.1.3.{#INDEX}'
              key: 'upsOutputCurrent[{#INDEX}]'
              units: A
              preprocessing:
                -
                  type: MULTIPLIER
                  parameters:
                    - '0.1'
              tags:
                -
                  tag: Application
                  value: Output
            -
              uuid: c905cb8c4d5740eeaaeef0f8397c2f7e
              name: 'Output {#INDEX}: Index'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.2.1.33.1.4.4.1.1.{#INDEX}'
              key: 'upsOutputLineIndex[{#INDEX}]'
              tags:
                -
                  tag: Application
                  value: Output
            -
              uuid: 1986bb71902d4c7cb7eb06fd327d192f
              name: 'Output {#INDEX}: Percentage Load'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.2.1.33.1.4.4.1.5.{#INDEX}'
              key: 'upsOutputPercentLoad[{#INDEX}]'
              units: '%'
              tags:
                -
                  tag: Application
                  value: Output
            -
              uuid: 752a401b6ac74b9fbc4c303abb8590be
              name: 'Output {#INDEX}: Power'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.2.1.33.1.4.4.1.4.{#INDEX}'
              key: 'upsOutputPower[{#INDEX}]'
              units: Watts
              tags:
                -
                  tag: Application
                  value: Output
            -
              uuid: d0024f97a88542e5a511eba0f0569b10
              name: 'Output {#INDEX}: Voltages'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.2.1.33.1.4.4.1.2.{#INDEX}'
              key: 'upsOutputVoltage[{#INDEX}]'
              units: V
              tags:
                -
                  tag: Application
                  value: Output
          graph_prototypes:
            -
              uuid: 1969d73b8aea46ee82d28d57824c0e7e
              name: 'Output {#INDEX}'
              graph_items:
                -
                  sortorder: '1'
                  color: E30613
                  item:
                    host: 'Template Schneider UPS'
                    key: 'upsOutputVoltage[{#INDEX}]'
                -
                  sortorder: '2'
                  color: 009FDB
                  item:
                    host: 'Template Schneider UPS'
                    key: 'upsOutputCurrent[{#INDEX}]'
      dashboards:
        -
          uuid: 6d726893790e44e4ab6fd7dca7ede1a7
          name: UPS
          pages:
            -
              widgets:
                -
                  type: GRAPH_PROTOTYPE
                  width: '7'
                  height: '5'
                  fields:
                    -
                      type: INTEGER
                      name: columns
                      value: '1'
                    -
                      type: GRAPH_PROTOTYPE
                      name: graphid
                      value:
                        name: 'Input {#INDEX}'
                        host: 'Template Schneider UPS'
                -
                  type: GRAPH_PROTOTYPE
                  x: '7'
                  width: '7'
                  height: '5'
                  fields:
                    -
                      type: INTEGER
                      name: columns
                      value: '1'
                    -
                      type: GRAPH_PROTOTYPE
                      name: graphid
                      value:
                        name: 'Output {#INDEX}'
                        host: 'Template Schneider UPS'
                -
                  type: GRAPH_CLASSIC
                  'y': '5'
                  width: '7'
                  height: '5'
                  fields:
                    -
                      type: GRAPH
                      name: graphid
                      value:
                        name: Output
                        host: 'Template Schneider UPS'
                -
                  type: GRAPH_CLASSIC
                  x: '7'
                  'y': '5'
                  width: '7'
                  height: '5'
                  fields:
                    -
                      type: INTEGER
                      name: source_type
                      value: '1'
                    -
                      type: ITEM
                      name: itemid
                      value:
                        key: mib_time_on_battery
                        host: 'Template Schneider UPS'
                -
                  type: GRAPH_CLASSIC
                  x: '14'
                  'y': '5'
                  width: '7'
                  height: '5'
                  fields:
                    -
                      type: INTEGER
                      name: source_type
                      value: '1'
                    -
                      type: ITEM
                      name: itemid
                      value:
                        key: mib_battery_runtime_remain
                        host: 'Template Schneider UPS'
                -
                  type: CLOCK
                  x: '21'
                  width: '3'
                  height: '5'
                -
                  type: GRAPH_CLASSIC
                  x: '14'
                  width: '7'
                  height: '5'
                  fields:
                    -
                      type: GRAPH
                      name: graphid
                      value:
                        name: Battery
                        host: 'Template Schneider UPS'
      valuemaps:
        -
          uuid: 7f423af5a8794693be8a7f6af871c1cb
          name: 'Battery Replacement'
          mappings:
            -
              value: '1'
              newvalue: OK
            -
              value: '2'
              newvalue: 'Replacement Required'
        -
          uuid: 800fa382456c471aa125eaeab173b124
          name: 'Battery Status'
          mappings:
            -
              value: '1'
              newvalue: Unknown
            -
              value: '2'
              newvalue: 'Battery Normal'
            -
              value: '3'
              newvalue: 'Battery Low'
            -
              value: '4'
              newvalue: 'Battery in Fault Condition'
        -
          uuid: da10c7f30093417caf44836b220c364e
          name: 'Last Transfer Event'
          mappings:
            -
              value: '1'
              newvalue: 'No Transfer'
            -
              value: '2'
              newvalue: 'High Line Voltage'
            -
              value: '3'
              newvalue: Brownout
            -
              value: '4'
              newvalue: 'Loss of Main Power'
            -
              value: '5'
              newvalue: 'Small Temp Power Drop'
            -
              value: '6'
              newvalue: 'Large Temp Power Drop'
            -
              value: '7'
              newvalue: 'Small Spike'
            -
              value: '8'
              newvalue: 'Large Spike'
            -
              value: '9'
              newvalue: 'UPS Self Test'
            -
              value: '10'
              newvalue: 'Excessive Input V Fluctuation'
  graphs:
    -
      uuid: 6a65962e0bc447909a216dfec4d8b42c
      name: Battery
      graph_items:
        -
          sortorder: '1'
          color: 199C0D
          yaxisside: RIGHT
          item:
            host: 'Template Schneider UPS'
            key: upsBatteryTemperature
        -
          sortorder: '2'
          color: F63100
          item:
            host: 'Template Schneider UPS'
            key: upsBatteryVoltage
    -
      uuid: e125ed5a4a904bd68ce67af4a5a06e2b
      name: Output
      graph_items:
        -
          sortorder: '1'
          color: 199C0D
          yaxisside: RIGHT
          item:
            host: 'Template Schneider UPS'
            key: upsHighPrecOutputEfficiency
        -
          sortorder: '2'
          color: 2774A4
          item:
            host: 'Template Schneider UPS'
            key: upsHighPrecOutputVoltage
