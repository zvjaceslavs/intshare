zabbix_export:
  version: '5.4'
  date: '2021-11-09T05:12:49Z'
  groups:
    -
      uuid: 2335918d9be4497095e3477b860a79d9
      name: CORONAVIRUS
  templates:
    -
      uuid: ec264322984e41bf9f3dfa330290e411
      template: Module_HTTP_LLD_W_Corona_44
      name: Module_HTTP_LLD_W_Corona_44
      description: |
        ## Overview
        
        Dashboard Grafana: <https://grafana.com/grafana/dashboards/11987>
        
        
        * EN-US
        
        
        **Homologated:**
        
        
        ***Zabbix 4.2.8, 4.4.4 and 4.4.7***
        
        
        ***Grafana 6.6.2, 6.7.1***
        
        
        Required plugins:
        
        
        1) grafana-worldmap-panel - https://grafana.com/grafana/plugins/grafana-worldmap-panel
        
        
        2) alexanderzobnin-zabbix-app - https://grafana.com/grafana/plugins/alexanderzobnin-zabbix-app
        
        
        Import Template\_Module\_HTTP\_LLD\_W\_Corona into Zabbix
        
        
        Create a host with the name "CORONA-COVID19", you can use the local interface (127.0.0.1: 10050) and the Hostgroup use the name "CORONAVIRUS" and link the template to the host.
        
        
        Wait for data collection, or use the function "Check now" in the item and in the LLD to speed up the collection
        
        
        Imports the Dashboard in Grafana
        
        
        When importing the Template into Garfana, select your Data Source.
        
        
        Note: If the list does not appear in countries, check if the applications and items were generated in Zabbix.
        
        
        Macros:
        
        
        * {$HISTORYSP}: History storage period
        * {$INTERVALHTTP}: Update interval
        * {$INTERVALLLDHTTP}: Update interval HTTP Item LLD
        * {$LOSTPERIOD}:
        * {$TRENDSP}: Trend storage period
        * {$UPINTERVALLLD}: Update interval Item LLD
        
        
         
        
        
        * PT-BR
        
        
        **Homologado:** 
        
        
        ***Zabbix 4.2.8, 4.4.4 e 4.4.7***
        
        
         ***Grafana 6.6.2, 6.7.1***
        
        
        Plugins necessarios: 
        
        
        1) grafana-worldmap-panel - https://grafana.com/grafana/plugins/grafana-worldmap-panel
        
        
        2) alexanderzobnin-zabbix-app - https://grafana.com/grafana/plugins/alexanderzobnin-zabbix-app
        
        
         Importe o Template\_Module\_HTTP\_LLD\_W\_Corona para o Zabbix 
        
        
        Crie um host com nome "CORONA-COVID19", pode usar interface local (127.0.0.1: 10050) e o Hostgroup use o nome "CORONAVIRUS" e vincule o template ao host. 
        
        
        Aguarde coleta de dados, ou utilize a função "Check now" no item e no LLD para agilizar a coleta.
        
        
        Importe a Dashboard no Grafana
        
        
        Ao importar o Template para o Garfana, selecione seu Data Source.
        
        
         Obs: Caso em paises não apareça a lista, verifique se as aplicações e itens foram gerados no Zabbix.
        
        
        
        ## Author
        
        Bernardo Lankheet
        
        
      groups:
        -
          name: CORONAVIRUS
      items:
        -
          uuid: 47c3eca39e2a4ca79c1ce102f7635a5a
          name: 'HTTP Consult Total'
          type: HTTP_AGENT
          key: http.consult
          delay: '{$INTERVALHTTP}'
          history: '{$HISTORYSP}'
          trends: '0'
          value_type: TEXT
          description: 'Download Data Raw Total Cases'
          timeout: 10s
          url: 'https://corona.lmao.ninja/v2/all'
          tags:
            -
              tag: Application
              value: 'Total Cases'
        -
          uuid: e8dc3cd75cb441a1b31ae1562d0c63aa
          name: 'Total All Cases'
          type: DEPENDENT
          key: total.all.cases
          delay: '0'
          history: '{$HISTORYSP}'
          trends: '{$TRENDSP}'
          preprocessing:
            -
              type: JSONPATH
              parameters:
                - $.cases
          master_item:
            key: http.consult
          tags:
            -
              tag: Application
              value: 'Total Cases'
        -
          uuid: cb74b0adf0d8468a8b088a77b4a8be94
          name: 'Total All Deaths'
          type: DEPENDENT
          key: total.all.deaths
          delay: '0'
          history: '{$HISTORYSP}'
          trends: '{$TRENDSP}'
          preprocessing:
            -
              type: JSONPATH
              parameters:
                - $.deaths
          master_item:
            key: http.consult
          tags:
            -
              tag: Application
              value: 'Total Cases'
        -
          uuid: 97e89ba75b91413ea3975b6e8c698e39
          name: 'Total All Recovered'
          type: DEPENDENT
          key: total.all.recovered
          delay: '0'
          history: '{$HISTORYSP}'
          trends: '{$TRENDSP}'
          preprocessing:
            -
              type: JSONPATH
              parameters:
                - $.recovered
          master_item:
            key: http.consult
          tags:
            -
              tag: Application
              value: 'Total Cases'
        -
          uuid: 6d1f5a1abecf417c9107e66983501a6a
          name: 'Total All updated'
          type: DEPENDENT
          key: total.all.updated
          delay: '0'
          history: '{$HISTORYSP}'
          trends: '{$TRENDSP}'
          units: unixtime
          preprocessing:
            -
              type: JSONPATH
              parameters:
                - $.updated
          master_item:
            key: http.consult
          tags:
            -
              tag: Application
              value: 'Total Cases'
      discovery_rules:
        -
          uuid: 3eef27a739ae4ad7add17fd5d82ee010
          name: 'Discovery Countries'
          type: HTTP_AGENT
          key: discovery.countries
          delay: '{$INTERVALLLDHTTP}'
          lifetime: '{$LOSTPERIOD}'
          description: 'Discovery Data Raw All'
          item_prototypes:
            -
              uuid: e595ac48532d4839b3c6fe57d0606724
              name: '"{#COUNTRY} - {#ISO3}" - ActiveCases'
              type: HTTP_AGENT
              key: 'active.country[{#COUNTRY}]'
              delay: '{$UPINTERVALLLD}'
              history: '{$HISTORYSP}'
              trends: '{$TRENDSP}'
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - $.active
              url: 'https://corona.lmao.ninja/v2/countries/{#COUNTRY}'
              tags:
                -
                  tag: Application
                  value: 'Cases "{#COUNTRY}"'
            -
              uuid: e1d588d568c44266bdb0ec0aec96429f
              name: '"{#COUNTRY} - {#ISO3}" - Cases'
              type: HTTP_AGENT
              key: 'cases.country[{#COUNTRY}]'
              delay: '{$UPINTERVALLLD}'
              history: '{$HISTORYSP}'
              trends: '{$TRENDSP}'
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - $.cases
              url: 'https://corona.lmao.ninja/v2/countries/{#COUNTRY}'
              tags:
                -
                  tag: Application
                  value: 'Cases "{#COUNTRY}"'
            -
              uuid: 419c13863047498cb5deed94535cb5b1
              name: '"{#COUNTRY} - {#ISO3}" - CasesPerOneMillion'
              type: HTTP_AGENT
              key: 'casesPerOneMillion.country[{#COUNTRY}]'
              delay: '{$UPINTERVALLLD}'
              history: '{$HISTORYSP}'
              trends: '{$TRENDSP}'
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - $.casesPerOneMillion
              url: 'https://corona.lmao.ninja/v2/countries/{#COUNTRY}'
              tags:
                -
                  tag: Application
                  value: 'Cases "{#COUNTRY}"'
            -
              uuid: 6e4d8f1d1fe54f2e923e8614c2d032a1
              name: '"{#COUNTRY} - {#ISO3}" - Critical'
              type: HTTP_AGENT
              key: 'critical.country[{#COUNTRY}]'
              delay: '{$UPINTERVALLLD}'
              history: '{$HISTORYSP}'
              trends: '{$TRENDSP}'
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - $.critical
              url: 'https://corona.lmao.ninja/v2/countries/{#COUNTRY}'
              tags:
                -
                  tag: Application
                  value: 'Cases "{#COUNTRY}"'
            -
              uuid: 1f30b867e2ca4c9fa98d0d53e0502b05
              name: '"{#COUNTRY} - {#ISO3}" - Deaths'
              type: HTTP_AGENT
              key: 'deaths.country[{#COUNTRY}]'
              delay: '{$UPINTERVALLLD}'
              history: '{$HISTORYSP}'
              trends: '{$TRENDSP}'
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - $.deaths
              url: 'https://corona.lmao.ninja/v2/countries/{#COUNTRY}'
              tags:
                -
                  tag: Application
                  value: 'Cases "{#COUNTRY}"'
            -
              uuid: c85829aa6fd246368d75f30d6a25e152
              name: '"{#COUNTRY} - {#ISO3}" - DeathsPerOneMillion'
              type: HTTP_AGENT
              key: 'deathsPerOneMillion.country[{#COUNTRY}]'
              delay: '{$UPINTERVALLLD}'
              history: '{$HISTORYSP}'
              trends: '{$TRENDSP}'
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - $.deathsPerOneMillion
              url: 'https://corona.lmao.ninja/v2/countries/{#COUNTRY}'
              tags:
                -
                  tag: Application
                  value: 'Cases "{#COUNTRY}"'
            -
              uuid: 20d204cca260487cb85a1863bc0583c7
              name: '"{#COUNTRY} - {#ISO3}" - Recovered'
              type: HTTP_AGENT
              key: 'recovered.country[{#COUNTRY}]'
              delay: '{$UPINTERVALLLD}'
              history: '{$HISTORYSP}'
              trends: '{$TRENDSP}'
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - $.recovered
              url: 'https://corona.lmao.ninja/v2/countries/{#COUNTRY}'
              tags:
                -
                  tag: Application
                  value: 'Cases "{#COUNTRY}"'
            -
              uuid: 5322dee4566f4f7480f9fb30a9d21eb8
              name: '"{#COUNTRY} - {#ISO3}" - TodayCases'
              type: HTTP_AGENT
              key: 'today.cases.country[{#COUNTRY}]'
              delay: '{$UPINTERVALLLD}'
              history: '{$HISTORYSP}'
              trends: '{$TRENDSP}'
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - $.todayCases
              url: 'https://corona.lmao.ninja/v2/countries/{#COUNTRY}'
              tags:
                -
                  tag: Application
                  value: 'Cases "{#COUNTRY}"'
            -
              uuid: 982ef8684ef74c1abe1c555acfc542a2
              name: '"{#COUNTRY} - {#ISO3}" - TodayDeaths'
              type: HTTP_AGENT
              key: 'today.deaths.country[{#COUNTRY}]'
              delay: '{$UPINTERVALLLD}'
              history: '{$HISTORYSP}'
              trends: '{$TRENDSP}'
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - $.todayDeaths
              url: 'https://corona.lmao.ninja/v2/countries/{#COUNTRY}'
              tags:
                -
                  tag: Application
                  value: 'Cases "{#COUNTRY}"'
          timeout: 7s
          url: 'https://corona.lmao.ninja/v2/countries'
          lld_macro_paths:
            -
              lld_macro: '{#COUNTRY}'
              path: $.country
            -
              lld_macro: '{#ISO3}'
              path: $.countryInfo.iso3
      macros:
        -
          macro: '{$HISTORYSP}'
          value: 90d
        -
          macro: '{$INTERVALHTTP}'
          value: 2h
        -
          macro: '{$INTERVALLLDHTTP}'
          value: 5h
        -
          macro: '{$LOSTPERIOD}'
          value: 2d
        -
          macro: '{$TRENDSP}'
          value: 365d
        -
          macro: '{$UPINTERVALLLD}'
          value: 5h
