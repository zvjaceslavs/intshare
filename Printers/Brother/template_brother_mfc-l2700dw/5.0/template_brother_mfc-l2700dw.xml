<?xml version="1.0" encoding="UTF-8"?>
<zabbix_export><version>5.0</version><date>2021-11-21T21:46:24Z</date><groups><group><name>Templates/Printers</name></group></groups><templates><template><template>Brother Printers</template><name>Brother Printers</name><description>## Overview

На базе шаблона на испанском сделал этот шаблон.


Под указанный принтер - работает. Уровни тонера и Кита. Графики.


Вопросы на 2135850@211.ru



## Author

Sergey Sidenko

</description><groups><group><name>Templates/Printers</name></group></groups><applications><application><name>Printer</name></application><application><name>Services</name></application><application><name>System</name></application></applications><items><item><name>Распечатано страниц</name><type>SNMP_AGENT</type><snmp_oid>.1.3.6.1.2.1.43.10.2.1.4.1.1</snmp_oid><key>.1.3.6.1.2.1.43.10.2.1.4.1.1</key><delay>1h</delay><value_type>FLOAT</value_type><applications><application><name>Printer</name></application></applications></item><item><name>Остаток ресурса DRUM UNIT (страниц)</name><type>SNMP_AGENT</type><snmp_oid>.1.3.6.1.2.1.43.11.1.1.9.1.2</snmp_oid><key>.1.3.6.1.2.1.43.11.1.1.9.1.2</key><delay>3h</delay><applications><application><name>Printer</name></application></applications></item><item><name>HTTP Check</name><type>SIMPLE</type><key>net.tcp.service[http]</key><delay>30</delay><applications><application><name>Services</name></application></applications><triggers><trigger><expression>{last(0)}&lt;&gt;1</expression><name>HTTP Service is Unreachable at {HOST.NAME}</name><priority>HIGH</priority></trigger></triggers></item><item><name>Print Spooler Check</name><type>SIMPLE</type><key>net.tcp.service[tcp,,515]</key><delay>30</delay><applications><application><name>Services</name></application></applications><triggers><trigger><expression>{last(0)}=0</expression><name>Printer Spooler Service is Unreachable at {HOST.NAME}</name><priority>HIGH</priority></trigger></triggers></item><item><name>JetDirect Check</name><type>SIMPLE</type><key>net.tcp.service[tcp,,9100]</key><delay>30</delay><applications><application><name>Services</name></application></applications><triggers><trigger><expression>{last(0)}=0</expression><name>JetDirect Service is Unreachable at {HOST.NAME}</name><priority>HIGH</priority></trigger></triggers></item><item><name>prtMarkerSuppliesLevel</name><type>SNMP_AGENT</type><snmp_oid>.1.3.6.1.2.1.43.11.1.1.9.1.2</snmp_oid><key>prtMarkerSuppliesLevel</key><delay>1h</delay><applications><application><name>Printer</name></application></applications></item><item><name>prtMarkerSuppliesLevel %</name><type>CALCULATED</type><key>prtMarkerSuppliesLevel-percent</key><delay>1h</delay><trends>180d</trends><units>%</units><params>100*last(prtMarkerSuppliesLevel)/last(prtMarkerSuppliesLevelMax)</params><applications><application><name>Printer</name></application></applications><triggers><trigger><expression>{last()}&lt;10</expression><name>Уровень тонера  {HOSTNAME} &lt; 10 %</name><priority>WARNING</priority></trigger><trigger><expression>{last()}&lt;20</expression><name>Уровень тонера  {HOSTNAME} &lt; 20 %</name><priority>INFO</priority></trigger></triggers></item><item><name>prtMarkerSuppliesLevelMax</name><type>SNMP_AGENT</type><snmp_oid>.1.3.6.1.2.1.43.11.1.1.8.1.2</snmp_oid><key>prtMarkerSuppliesLevelMax</key><delay>3h</delay><applications><application><name>Printer</name></application></applications></item><item><name>Device contact details</name><type>SNMP_AGENT</type><snmp_oid>1.3.6.1.2.1.1.4.0</snmp_oid><key>system.contact</key><delay>3h</delay><history>2w</history><trends>0</trends><value_type>CHAR</value_type><description>MIB: SNMPv2-MIB&#13;
The textual identification of the contact person for this managed node, together with information on how to contact this person.  If no contact information is known, the value is the zero-length string.</description><inventory_link>CONTACT</inventory_link><applications><application><name>System</name></application></applications></item><item><name>Device description</name><type>SNMP_AGENT</type><snmp_oid>1.3.6.1.2.1.1.1.0</snmp_oid><key>system.descr</key><delay>3h</delay><history>2w</history><trends>0</trends><value_type>CHAR</value_type><description>MIB: SNMPv2-MIB&#13;
A textual description of the entity.  This value should&#13;
include the full name and version identification of the system's hardware type, software operating-system, and&#13;
networking software.</description><inventory_link>HARDWARE</inventory_link><applications><application><name>System</name></application></applications></item><item><name>Device IP adress</name><type>SNMP_AGENT</type><snmp_oid>.1.3.6.1.4.1.11.2.4.3.5.2.0</snmp_oid><key>system.ip</key><delay>3h</delay><history>7d</history><trends>0</trends><value_type>TEXT</value_type><applications><application><name>System</name></application></applications></item><item><name>Device location</name><type>SNMP_AGENT</type><snmp_oid>1.3.6.1.2.1.1.6.0</snmp_oid><key>system.location</key><delay>3h</delay><history>2w</history><trends>0</trends><value_type>TEXT</value_type><description>MIB: SNMPv2-MIB&#13;
The physical location of this node (e.g., `telephone closet, 3rd floor').  If the location is unknown, the value is the zero-length string.</description><inventory_link>LOCATION</inventory_link><applications><application><name>System</name></application></applications></item><item><name>Device model</name><type>SNMP_AGENT</type><snmp_oid>.1.3.6.1.2.1.25.3.2.1.3.1</snmp_oid><key>system.model</key><delay>3h</delay><trends>0</trends><value_type>TEXT</value_type><applications><application><name>System</name></application></applications></item><item><name>Device name</name><type>SNMP_AGENT</type><snmp_oid>1.3.6.1.2.1.1.5.0</snmp_oid><key>system.name</key><delay>3h</delay><history>2w</history><trends>0</trends><value_type>CHAR</value_type><description>MIB: SNMPv2-MIB&#13;
An administratively-assigned name for this managed node.By convention, this is the node's fully-qualified domain name.  If the name is unknown, the value is the zero-length string.</description><inventory_link>NAME</inventory_link><applications><application><name>System</name></application></applications></item><item><name>System object ID</name><type>SNMP_AGENT</type><snmp_oid>1.3.6.1.2.1.1.2.0</snmp_oid><key>system.objectid</key><delay>3h</delay><history>2w</history><trends>0</trends><value_type>CHAR</value_type><description>MIB: SNMPv2-MIB&#13;
The vendor's authoritative identification of the network management subsystem contained in the entity.  This value is allocated within the SMI enterprises subtree (1.3.6.1.4.1) and provides an easy and unambiguous means for determining`what kind of box' is being managed.  For example, if vendor`Flintstones, Inc.' was assigned the subtree1.3.6.1.4.1.4242, it could assign the identifier 1.3.6.1.4.1.4242.1.1 to its `Fred Router'.</description><applications><application><name>System</name></application></applications></item><item><name>Device SN</name><type>SNMP_AGENT</type><snmp_oid>.1.3.6.1.2.1.43.5.1.1.17.1</snmp_oid><key>system.sn</key><delay>3h</delay><trends>0</trends><value_type>TEXT</value_type><applications><application><name>System</name></application></applications></item><item><name>Device uptime</name><type>SNMP_AGENT</type><snmp_oid>1.3.6.1.2.1.1.3.0</snmp_oid><key>system.uptime[sysUpTime]</key><history>2w</history><trends>0d</trends><units>uptime</units><description>MIB: SNMPv2-MIB&#13;
The time (in hundredths of a second) since the network management portion of the system was last re-initialized.</description><applications><application><name>System</name></application></applications><preprocessing><step><type>MULTIPLIER</type><params>0.01</params></step></preprocessing></item><item><name>SNMP availability</name><type>INTERNAL</type><key>zabbix[host,snmp,available]</key><history>2w</history><trends>0d</trends><applications><application><name>System</name></application></applications><valuemap><name>zabbix.host.available</name></valuemap></item></items><discovery_rules><discovery_rule><name>Consumables</name><type>SNMP_AGENT</type><snmp_oid>.1.3.6.1.2.1.43.11.1.1.6.1</snmp_oid><key>consumablesID</key><delay>60</delay><item_prototypes><item_prototype><name>$1 Current Capacity</name><type>SNMP_AGENT</type><snmp_oid>.1.3.6.1.2.1.43.11.1.1.9.1.{#SNMPINDEX}</snmp_oid><key>ConsumableCurrentCapacity[{#SNMPVALUE}]</key><delay>30</delay><value_type>FLOAT</value_type></item_prototype><item_prototype><name>$1 Max Capacity</name><type>SNMP_AGENT</type><snmp_oid>.1.3.6.1.2.1.43.11.1.1.8.1.{#SNMPINDEX}</snmp_oid><key>ConsumableMaxCapacity[{#SNMPVALUE}]</key><delay>30</delay><value_type>FLOAT</value_type></item_prototype><item_prototype><name>$1 Calculated Capacity (current/max)</name><type>CALCULATED</type><key>CosumableCalculated[{#SNMPVALUE}]</key><delay>30</delay><value_type>FLOAT</value_type><units>%</units><params>last(&quot;ConsumableCurrentCapacity[{#SNMPVALUE}]&quot;)/last(&quot;ConsumableMaxCapacity[{#SNMPVALUE}]&quot;)</params><description>Depending on the consumable (toner vs drum/belt) this calculation will return a particular percentage.&#13;
&#13;
Drum Units &amp; Belt Units return integer values that can be used in calculations to determine a percentage of how much of the unit is remaining. Max &quot;status&quot; is stored in the MIB and is used in the calculation.&#13;
&#13;
Toner consumables return the follow codes:&#13;
-3 = Level Okay&#13;
-2 = Low Warning (equivalent to “max status”)&#13;
0 = Critical/empty&#13;
&#13;
Toner possibilities for calculations of current / max * 100&#13;
&#13;
-3 / -2 * 100 = 150%&#13;
-2 / -2 * 100 = 100%&#13;
0 / -2 * 100 = 0%&#13;
&#13;
The calculations above are used in the triggers to make it very straight forward on determining if a toner is low or not.</description><preprocessing><step><type>MULTIPLIER</type><params>100</params></step></preprocessing></item_prototype></item_prototypes><trigger_prototypes><trigger_prototype><expression>{Brother Printers:CosumableCalculated[{#SNMPVALUE}].last(0)}&lt;10 or {Brother Printers:ConsumableCurrentCapacity[{#SNMPVALUE}].last(0)}=0</expression><name>{HOSTNAME} {#SNMPVALUE} - Critical: {ITEM.LASTVALUE}</name><priority>HIGH</priority><description>Checks if at &quot;critical&quot; level for Toners (code = 0) or drum/belt (&lt;10%)</description></trigger_prototype><trigger_prototype><expression>{Brother Printers:CosumableCalculated[{#SNMPVALUE}].last(0)}&gt;10 and {Brother Printers:CosumableCalculated[{#SNMPVALUE}].last(0)}&lt;30 or {Brother Printers:ConsumableCurrentCapacity[{#SNMPVALUE}].last(0)} = -2</expression><name>{HOSTNAME} {#SNMPVALUE} - Low Warning: {ITEM.LASTVALUE}</name><priority>WARNING</priority><description>Checks if at &quot;warning&quot; level for Toners (code = -2) or drum/belt (&gt;10% &amp; &lt;30%)</description></trigger_prototype></trigger_prototypes><graph_prototypes><graph_prototype><name>{#SNMPVALUE}</name><show_work_period>NO</show_work_period><show_triggers>NO</show_triggers><type>STACKED</type><graph_items><graph_item><color>0000C8</color><item><host>Brother Printers</host><key>ConsumableCurrentCapacity[{#SNMPVALUE}]</key></item></graph_item></graph_items></graph_prototype></graph_prototypes></discovery_rule></discovery_rules></template></templates><graphs><graph><name>Всего распечатано страниц</name><graph_items><graph_item><color>1A7C11</color><item><host>Brother Printers</host><key>.1.3.6.1.2.1.43.10.2.1.4.1.1</key></item></graph_item></graph_items></graph><graph><name>Ресурс DRUM UNIT, страниц</name><graph_items><graph_item><color>1A7C11</color><item><host>Brother Printers</host><key>.1.3.6.1.2.1.43.11.1.1.9.1.2</key></item></graph_item></graph_items></graph><graph><name>Уровень черного тонера в картридже, %</name><ymin_type_1>FIXED</ymin_type_1><ymax_type_1>FIXED</ymax_type_1><graph_items><graph_item><drawtype>FILLED_REGION</drawtype><color>3C3C3C</color><item><host>Brother Printers</host><key>prtMarkerSuppliesLevel-percent</key></item></graph_item></graph_items></graph></graphs><value_maps><value_map><name>zabbix.host.available</name><mappings><mapping><value>0</value><newvalue>not available</newvalue></mapping><mapping><value>1</value><newvalue>available</newvalue></mapping><mapping><value>2</value><newvalue>unknown</newvalue></mapping></mappings></value_map></value_maps></zabbix_export>
