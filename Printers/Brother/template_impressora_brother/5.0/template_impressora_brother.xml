<?xml version="1.0" encoding="UTF-8"?>
<zabbix_export>
  <version>5.0</version>
  <date>2021-11-09T04:35:29Z</date>
  <groups>
    <group>
      <name>Printers</name>
    </group>
  </groups>
  <templates>
    <template>
      <template>Brother Printers</template>
      <name>Brother Printers</name>
      <description>## Overview Termplate para monitoramento de impressoras Brother. Testado nos modelos 8912DW e HL5452. ## Author Fernando Lozer</description>
      <groups>
        <group>
          <name>Printers</name>
        </group>
      </groups>
      <applications>
        <application>
          <name>Printer</name>
        </application>
        <application>
          <name>Servicos</name>
        </application>
      </applications>
      <items>
        <item>
          <name>Número de Série</name>
          <type>SNMP_AGENT</type>
          <snmp_oid>.1.3.6.1.2.1.43.5.1.1.17.1</snmp_oid>
          <key>.1.3.6.1.2.1.43.5.1.1.17.1</key>
          <delay>3600</delay>
          <trends>0</trends>
          <value_type>TEXT</value_type>
          <applications>
            <application>
              <name>Printer</name>
            </application>
          </applications>
        </item>
        <item>
          <name>Contador de Páginas</name>
          <type>SNMP_AGENT</type>
          <snmp_oid>.1.3.6.1.2.1.43.10.2.1.4.1.1</snmp_oid>
          <key>.1.3.6.1.2.1.43.10.2.1.4.1.1</key>
          <delay>3600</delay>
          <value_type>FLOAT</value_type>
          <applications>
            <application>
              <name>Printer</name>
            </application>
          </applications>
        </item>
        <item>
          <name>Vida Útil restante do Cilindro</name>
          <type>SNMP_AGENT</type>
          <snmp_oid>.1.3.6.1.2.1.43.11.1.1.9.1.2</snmp_oid>
          <key>.1.3.6.1.2.1.43.11.1.1.9.1.2</key>
          <delay>3600</delay>
          <applications>
            <application>
              <name>Printer</name>
            </application>
          </applications>
        </item>
        <item>
          <name>Status do Equipamento</name>
          <type>SNMP_AGENT</type>
          <snmp_oid>.1.3.6.1.2.1.43.18.1.1.8.1.1</snmp_oid>
          <key>.1.3.6.1.2.1.43.18.1.1.8.1.1</key>
          <delay>3600</delay>
          <trends>0</trends>
          <value_type>TEXT</value_type>
          <applications>
            <application>
              <name>Printer</name>
            </application>
          </applications>
        </item>
        <item>
          <name>Modelo</name>
          <type>SNMP_AGENT</type>
          <snmp_oid>hrDeviceDescr.1</snmp_oid>
          <key>hrDeviceDescr.1</key>
          <delay>3600</delay>
          <trends>0</trends>
          <value_type>TEXT</value_type>
          <applications>
            <application>
              <name>Printer</name>
            </application>
          </applications>
        </item>
        <item>
          <name>HTTP Check</name>
          <type>SIMPLE</type>
          <key>net.tcp.service[http]</key>
          <delay>30</delay>
          <applications>
            <application>
              <name>Servicos</name>
            </application>
          </applications>
          <triggers>
            <trigger>
              <expression>{last(0)}&lt;>1</expression>
              <name>HTTP Service is Unreachable at {HOST.NAME}</name>
              <priority>HIGH</priority>
            </trigger>
          </triggers>
        </item>
        <item>
          <name>Print Spooler Check</name>
          <type>SIMPLE</type>
          <key>net.tcp.service[tcp,,515]</key>
          <delay>30</delay>
          <applications>
            <application>
              <name>Servicos</name>
            </application>
          </applications>
          <triggers>
            <trigger>
              <expression>{last(0)}=0</expression>
              <name>Printer Spooler Service is Unreachable at {HOST.NAME}</name>
              <priority>HIGH</priority>
            </trigger>
          </triggers>
        </item>
        <item>
          <name>JetDirect Check</name>
          <type>SIMPLE</type>
          <key>net.tcp.service[tcp,,9100]</key>
          <delay>30</delay>
          <applications>
            <application>
              <name>Servicos</name>
            </application>
          </applications>
          <triggers>
            <trigger>
              <expression>{last(0)}=0</expression>
              <name>JetDirect Service is Unreachable at {HOST.NAME}</name>
              <priority>HIGH</priority>
            </trigger>
          </triggers>
        </item>
        <item>
          <name>Contato</name>
          <type>SNMP_AGENT</type>
          <snmp_oid>sysContact.0</snmp_oid>
          <key>sysContact.0</key>
          <delay>3600</delay>
          <history>30d</history>
          <trends>0</trends>
          <status>DISABLED</status>
          <value_type>TEXT</value_type>
          <applications>
            <application>
              <name>Printer</name>
            </application>
          </applications>
        </item>
        <item>
          <name>Localização</name>
          <type>SNMP_AGENT</type>
          <snmp_oid>sysLocation.0</snmp_oid>
          <key>sysLocation.0</key>
          <delay>3600</delay>
          <trends>0</trends>
          <value_type>TEXT</value_type>
          <applications>
            <application>
              <name>Printer</name>
            </application>
          </applications>
        </item>
      </items>
      <discovery_rules>
        <discovery_rule>
          <name>Consumables</name>
          <type>SNMP_AGENT</type>
          <snmp_oid>.1.3.6.1.2.1.43.11.1.1.6.1</snmp_oid>
          <key>consumablesID</key>
          <delay>60</delay>
          <item_prototypes>
            <item_prototype>
              <name>$1 Current Capacity</name>
              <type>SNMP_AGENT</type>
              <snmp_oid>.1.3.6.1.2.1.43.11.1.1.9.1.{#SNMPINDEX}</snmp_oid>
              <key>ConsumableCurrentCapacity[{#SNMPVALUE}]</key>
              <delay>30</delay>
              <value_type>FLOAT</value_type>
            </item_prototype>
            <item_prototype>
              <name>$1 Max Capacity</name>
              <type>SNMP_AGENT</type>
              <snmp_oid>.1.3.6.1.2.1.43.11.1.1.8.1.{#SNMPINDEX}</snmp_oid>
              <key>ConsumableMaxCapacity[{#SNMPVALUE}]</key>
              <delay>30</delay>
              <value_type>FLOAT</value_type>
            </item_prototype>
            <item_prototype>
              <name>$1 Calculated Capacity (current/max)</name>
              <type>CALCULATED</type>
              <key>CosumableCalculated[{#SNMPVALUE}]</key>
              <delay>30</delay>
              <value_type>FLOAT</value_type>
              <units>%</units>
              <params>last("ConsumableCurrentCapacity[{#SNMPVALUE}]")/last("ConsumableMaxCapacity[{#SNMPVALUE}]")</params>
              <description>Depending on the consumable (toner vs drum/belt) this calculation will return a particular percentage. Drum Units &amp; Belt Units return integer values that can be used in calculations to determine a percentage of how much of the unit is remaining. Max "status" is stored in the MIB and is used in the calculation. Toner consumables return the follow codes: -3 = Level Okay -2 = Low Warning (equivalent to “max status”) 0 = Critical/empty Toner possibilities for calculations of current / max * 100 -3 / -2 * 100 = 150% -2 / -2 * 100 = 100% 0 / -2 * 100 = 0% The calculations above are used in the triggers to make it very straight forward on determining if a toner is low or not.</description>
              <preprocessing>
                <step>
                  <type>MULTIPLIER</type>
                  <params>100</params>
                </step>
              </preprocessing>
            </item_prototype>
          </item_prototypes>
          <trigger_prototypes>
            <trigger_prototype>
              <expression>{Brother Printers:CosumableCalculated[{#SNMPVALUE}].last(0)}&lt;10 or {Brother Printers:ConsumableCurrentCapacity[{#SNMPVALUE}].last(0)}=0</expression>
              <name>{HOSTNAME} {#SNMPVALUE} - Critical: {ITEM.LASTVALUE}</name>
              <priority>HIGH</priority>
              <description>Checks if at "critical" level for Toners (code = 0) or drum/belt (&lt;10%)</description>
            </trigger_prototype>
            <trigger_prototype>
              <expression>{Brother Printers:CosumableCalculated[{#SNMPVALUE}].last(0)}>10 and {Brother Printers:CosumableCalculated[{#SNMPVALUE}].last(0)}&lt;30 or {Brother Printers:ConsumableCurrentCapacity[{#SNMPVALUE}].last(0)} = -2</expression>
              <name>{HOSTNAME} {#SNMPVALUE} - Low Warning: {ITEM.LASTVALUE}</name>
              <priority>WARNING</priority>
              <description>Checks if at "warning" level for Toners (code = -2) or drum/belt (>10% &amp; &lt;30%)</description>
            </trigger_prototype>
          </trigger_prototypes>
          <graph_prototypes>
            <graph_prototype>
              <name>{#SNMPVALUE}</name>
              <show_work_period>NO</show_work_period>
              <show_triggers>NO</show_triggers>
              <type>STACKED</type>
              <graph_items>
                <graph_item>
                  <color>0000C8</color>
                  <item>
                    <host>Brother Printers</host>
                    <key>ConsumableCurrentCapacity[{#SNMPVALUE}]</key>
                  </item>
                </graph_item>
              </graph_items>
            </graph_prototype>
          </graph_prototypes>
        </discovery_rule>
      </discovery_rules>
    </template>
  </templates>
</zabbix_export>